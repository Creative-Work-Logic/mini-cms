 <!DOCTYPE html>
		<html
			class="layout layout-holy-grail   show-table-of-contents conceptual show-breadcrumb default-focus"
			lang="en-us"
			dir="ltr"
			data-authenticated="false"
			data-auth-status-determined="false"
			data-target="docs"
			x-ms-format-detection="none"
		>
			
		
<!-- Mirrored from learn.microsoft.com/en-us/aspnet/core/fundamentals/logging/?view=aspnetcore-9.0 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Aug 2025 14:53:03 GMT -->
<head>
			<title>Logging in .NET and ASP.NET Core | Microsoft Learn</title>
			<meta charset="utf-8" />
			<meta name="viewport" content="width=device-width, initial-scale=1.0" />
			<meta name="color-scheme" content="light dark" />

			<meta name="description" content="Learn how to use the logging framework provided by the Microsoft.Extensions.Logging NuGet package." />
			<link rel="canonical" href="index553c.html?view=aspnetcore-9.0" /> 

			<!-- Non-customizable open graph and sharing-related metadata -->
			<meta name="twitter:card" content="summary" />
			<meta name="twitter:site" content="@MicrosoftLearn" />
			<meta property="og:type" content="website" />
			<meta property="og:image:alt" content="Logging in .NET and ASP.NET Core | Microsoft Learn" />
			<meta property="og:image" content="https://learn.microsoft.com/dotnet/media/dotnet-logo.png" />
			<!-- Page specific open graph and sharing-related metadata -->
			<meta property="og:title" content="Logging in .NET and ASP.NET Core" />
			<meta property="og:url" content="index553c.html?view=aspnetcore-9.0" />
			<meta property="og:description" content="Learn how to use the logging framework provided by the Microsoft.Extensions.Logging NuGet package." />
			<meta name="platform_id" content="07f49229-07df-50f0-e102-82d349968970" /> <meta name="scope" content="ASP.NET Core" />
			<meta name="locale" content="en-us" />
			 <meta name="adobe-target" content="true" />
			<meta name="uhfHeaderId" content="MSDocsHeader-AspNet" />

			<meta name="page_type" content="conceptual" />

			<!--page specific meta tags-->
			

			<!-- custom meta tags -->
			
		<meta name="breadcrumb_path" content="/aspnet/core/breadcrumb/toc.json" />
	
		<meta name="feedback_system" content="OpenSource" />
	
		<meta name="feedback_product_url" content="https://github.com/dotnet/aspnetcore/blob/main/CONTRIBUTING.md" />
	
		<meta name="ms.service" content="aspnet-core" />
	
		<meta name="ms.topic" content="conceptual" />
	
		<meta name="ms.subservice" content="fundamentals" />
	
		<meta name="author" content="tdykstra" />
	
		<meta name="monikerRange" content="&gt;= aspnetcore-3.1" />
	
		<meta name="ms.author" content="tdykstra" />
	
		<meta name="ms.custom" content="mvc" />
	
		<meta name="ms.date" content="2024-09-18T00:00:00Z" />
	
		<meta name="uid" content="fundamentals/logging/index" />
	
		<meta name="document_id" content="7184a308-a254-9350-a5cd-5bced1f369ae" />
	
		<meta name="document_version_independent_id" content="726e3bf1-f367-d733-8933-bccc04da0e16" />
	
		<meta name="updated_at" content="2025-07-30T11:33:00Z" />
	
		<meta name="original_content_git_url" content="https://github.com/dotnet/AspNetCore.Docs/blob/live/aspnetcore/fundamentals/logging/index.md" />
	
		<meta name="gitcommit" content="https://github.com/dotnet/AspNetCore.Docs/blob/879a03201958c8aea52cdfa611a1272865b09707/aspnetcore/fundamentals/logging/index.md" />
	
		<meta name="git_commit_id" content="879a03201958c8aea52cdfa611a1272865b09707" />
	
		<meta name="monikers" content="aspnetcore-3.1" />
	
		<meta name="monikers" content="aspnetcore-5.0" />
	
		<meta name="monikers" content="aspnetcore-6.0" />
	
		<meta name="monikers" content="aspnetcore-7.0" />
	
		<meta name="monikers" content="aspnetcore-8.0" />
	
		<meta name="monikers" content="aspnetcore-9.0" />
	
		<meta name="monikers" content="aspnetcore-10.0" />
	
		<meta name="default_moniker" content="aspnetcore-9.0" />
	
		<meta name="site_name" content="Docs" />
	
		<meta name="depot_name" content="MSDN.aspnet-core-conceptual" />
	
		<meta name="schema" content="Conceptual" />
	
		<meta name="toc_rel" content="../../toc.json" />
	
		<meta name="pdf_url_template" content="https://learn.microsoft.com/pdfstore/en-us/MSDN.aspnet-core-conceptual/{branchName}{pdfName}" />
	
		<meta name="feedback_help_link_type" content="" />
	
		<meta name="feedback_help_link_url" content="" />
	
		<meta name="word_count" content="11815" />
	
		<meta name="config_moniker_range" content="&gt;= aspnetcore-1.0" />
	
		<meta name="asset_id" content="fundamentals/logging/index" />
	
		<meta name="moniker_range_name" content="dd7b9de2e2e080a77b76aef7078b3e55" />
	
		<meta name="item_type" content="Content" />
	
		<meta name="source_path" content="aspnetcore/fundamentals/logging/index.md" />
	
		<meta name="previous_tlsh_hash" content="A6554153A61C8711AF826F0B1947BA9425F1C4C8EAF03F882237F5A1958D6E777BE9E9ABD727D78E1372125212A5B5CC5AC5FB3D459D2322EEA914BD811C500383893FB1D8" />
	
		<meta name="github_feedback_content_git_url" content="https://github.com/dotnet/AspNetCore.Docs/blob/main/aspnetcore/fundamentals/logging/index.md" />
	 
		<meta name="cmProducts" content="https://authoring-docs-microsoft.poolparty.biz/devrel/d452572f-6212-498f-9050-ca4a9e50a425" data-source="generated" />
	
		<meta name="cmProducts" content="https://authoring-docs-microsoft.poolparty.biz/devrel/7696cda6-0510-47f6-8302-71bb5d2e28cf" data-source="generated" />
	
		<meta name="cmProducts" content="https://authoring-docs-microsoft.poolparty.biz/devrel/7ebba99b-05c3-4387-8883-f7bbf6632cb8" data-source="generated" />
	
		<meta name="spProducts" content="https://authoring-docs-microsoft.poolparty.biz/devrel/a12e40b7-59a2-4437-96e2-166ce622b864" data-source="generated" />
	
		<meta name="spProducts" content="https://authoring-docs-microsoft.poolparty.biz/devrel/69c76c32-967e-4c65-b89a-74cc527db725" data-source="generated" />
	
		<meta name="spProducts" content="https://authoring-docs-microsoft.poolparty.biz/devrel/006ab567-b18c-4cf1-9a25-c24daa46ede1" data-source="generated" />
	

			<!-- assets and js globals -->
			
			<link rel="stylesheet" href="https://learn.microsoft.com/static/assets/0.4.03137.7032-e8b681c0/styles/site-ltr.css" />
			<link rel="preconnect" href="http://mscom.demdex.net/" crossorigin />
						<link rel="dns-prefetch" href="http://target.microsoft.com/" />
						<link rel="dns-prefetch" href="http://microsoftmscompoc.tt.omtrdc.net/" />
						<link
							rel="preload"
							as="script"
							href="https://learn.microsoft.com/static/third-party/adobe-target/at-js/2.9.0/at.js"
							integrity="sha384-1/viVM50hgc33O2gOgkWz3EjiD/Fy/ld1dKYXJRUyjNYVEjSUGcSN+iPiQF7e4cu"
							crossorigin="anonymous"
							id="adobe-target-script"
							type="application/javascript"
						/>
			<script src="https://wcpstatic.microsoft.com/mscc/lib/v2/wcp-consent.js"></script>
			<script src="https://js.monitor.azure.com/scripts/c/ms.jsll-4.min.js"></script>
			<script src="https://learn.microsoft.com/_themes/docs.theme/master/en-us/_themes/global/deprecation.js"></script>

			<!-- msdocs global object -->
			<script id="msdocs-script">
		var msDocs = {
  "environment": {
    "accessLevel": "online",
    "azurePortalHostname": "portal.azure.com",
    "reviewFeatures": false,
    "supportLevel": "production",
    "systemContent": true,
    "siteName": "learn",
    "legacyHosting": false
  },
  "data": {
    "contentLocale": "en-us",
    "contentDir": "ltr",
    "userLocale": "en-us",
    "userDir": "ltr",
    "pageTemplate": "Conceptual",
    "brand": "",
    "context": {},
    "standardFeedback": false,
    "showFeedbackReport": false,
    "feedbackHelpLinkType": "",
    "feedbackHelpLinkUrl": "",
    "feedbackSystem": "OpenSource",
    "feedbackGitHubRepo": "dotnet/AspNetCore.Docs",
    "feedbackProductUrl": "https://github.com/dotnet/aspnetcore/blob/main/CONTRIBUTING.md",
    "extendBreadcrumb": false,
    "isEditDisplayable": true,
    "isPrivateUnauthorized": false,
    "hideViewSource": false,
    "isPermissioned": false,
    "hasRecommendations": true,
    "contributors": [
      {
        "name": "tdykstra",
        "url": "https://github.com/tdykstra"
      },
      {
        "name": "Copilot",
        "url": "https://github.com/Copilot"
      },
      {
        "name": "wadepickett",
        "url": "https://github.com/wadepickett"
      },
      {
        "name": "guardrex",
        "url": "https://github.com/guardrex"
      },
      {
        "name": "Rick-Anderson",
        "url": "https://github.com/Rick-Anderson"
      },
      {
        "name": "danespinosa",
        "url": "https://github.com/danespinosa"
      },
      {
        "name": "reyang",
        "url": "https://github.com/reyang"
      },
      {
        "name": "CalebBellWebCE",
        "url": "https://github.com/CalebBellWebCE"
      },
      {
        "name": "VahidFarahmandian",
        "url": "https://github.com/VahidFarahmandian"
      },
      {
        "name": "alexbuckgit",
        "url": "https://github.com/alexbuckgit"
      },
      {
        "name": "serpent5",
        "url": "https://github.com/serpent5"
      },
      {
        "name": "mudassir014",
        "url": "https://github.com/mudassir014"
      },
      {
        "name": "GitHubPang",
        "url": "https://github.com/GitHubPang"
      },
      {
        "name": "sywhang",
        "url": "https://github.com/sywhang"
      },
      {
        "name": "scottaddie",
        "url": "https://github.com/scottaddie"
      },
      {
        "name": "JohnyWS",
        "url": "https://github.com/JohnyWS"
      },
      {
        "name": "DCtheGeek",
        "url": "https://github.com/DCtheGeek"
      },
      {
        "name": "cijothomas",
        "url": "https://github.com/cijothomas"
      },
      {
        "name": "philip-reed",
        "url": "https://github.com/philip-reed"
      },
      {
        "name": "shaggygi",
        "url": "https://github.com/shaggygi"
      },
      {
        "name": "john-h-k",
        "url": "https://github.com/john-h-k"
      },
      {
        "name": "sguitardude",
        "url": "https://github.com/sguitardude"
      },
      {
        "name": "analogrelay",
        "url": "https://github.com/analogrelay"
      },
      {
        "name": "v-thepet",
        "url": "https://github.com/v-thepet"
      },
      {
        "name": "theswanand",
        "url": "https://github.com/theswanand"
      },
      {
        "name": "leotsarev",
        "url": "https://github.com/leotsarev"
      },
      {
        "name": "isaacrlevin",
        "url": "https://github.com/isaacrlevin"
      },
      {
        "name": "nschonni",
        "url": "https://github.com/nschonni"
      },
      {
        "name": "mrbullwinkle",
        "url": "https://github.com/mrbullwinkle"
      },
      {
        "name": "SurferJeffAtGoogle",
        "url": "https://github.com/SurferJeffAtGoogle"
      },
      {
        "name": "bruno-garcia",
        "url": "https://github.com/bruno-garcia"
      },
      {
        "name": "obayit",
        "url": "https://github.com/obayit"
      },
      {
        "name": "catalingavan",
        "url": "https://github.com/catalingavan"
      },
      {
        "name": "reyou",
        "url": "https://github.com/reyou"
      },
      {
        "name": "federicorinaldi",
        "url": "https://github.com/federicorinaldi"
      },
      {
        "name": "rachelappel",
        "url": "https://github.com/rachelappel"
      },
      {
        "name": "jsgoupil",
        "url": "https://github.com/jsgoupil"
      }
    ],
    "openSourceFeedbackIssueUrl": "https://github.com/dotnet/aspnetcore.docs/issues/new?template=customer-feedback.yml",
    "openSourceFeedbackIssueTitle": "",
    "openSourceFeedbackIssueLabels": "Source - Docs.ms,:watch: Not Triaged"
  },
  "functions": {}
};;
	</script>

			<!-- base scripts, msdocs global should be before this -->
			<script src="https://learn.microsoft.com/static/assets/0.4.03137.7032-e8b681c0/scripts/en-us/index-docs.js"></script>
			

			<!-- json-ld -->
			
		</head>
	
			<body
				id="body"
				data-bi-name="body"
				class="layout-body "
				lang="en-us"
				dir="ltr"
			>
				<header class="layout-body-header">
		<div class="header-holder has-default-focus">
			
		<a
			href="#main"
			
			style="z-index: 1070"
			class="outline-color-text visually-hidden-until-focused position-fixed inner-focus focus-visible top-0 left-0 right-0 padding-xs text-align-center background-color-body"
			
		>
			Skip to main content
		</a>
	
		<a
			href="#"
			data-skip-to-ask-learn
			style="z-index: 1070"
			class="outline-color-text visually-hidden-until-focused position-fixed inner-focus focus-visible top-0 left-0 right-0 padding-xs text-align-center background-color-body"
			hidden
		>
			Skip to Ask Learn chat experience
		</a>
	

			<div hidden id="cookie-consent-holder" data-test-id="cookie-consent-container"></div>
			<!-- Unsupported browser warning -->
			<div
				id="unsupported-browser"
				style="background-color: white; color: black; padding: 16px; border-bottom: 1px solid grey;"
				hidden
			>
				<div style="max-width: 800px; margin: 0 auto;">
					<p style="font-size: 24px">This browser is no longer supported.</p>
					<p style="font-size: 16px; margin-top: 16px;">
						Upgrade to Microsoft Edge to take advantage of the latest features, security updates, and technical support.
					</p>
					<div style="margin-top: 12px;">
						<a
							href="https://go.microsoft.com/fwlink/p/?LinkID=2092881"
							style="background-color: #0078d4; border: 1px solid #0078d4; color: white; padding: 6px 12px; border-radius: 2px; display: inline-block;"
						>
							Download Microsoft Edge
						</a>
						<a
							href="https://learn.microsoft.com/en-us/lifecycle/faq/internet-explorer-microsoft-edge"
							style="background-color: white; padding: 6px 12px; border: 1px solid #505050; color: #171717; border-radius: 2px; display: inline-block;"
						>
							More info about Internet Explorer and Microsoft Edge
						</a>
					</div>
				</div>
			</div>
			<!-- site header -->
			<header
				id="ms--site-header"
				data-test-id="site-header-wrapper"
				role="banner"
				itemscope="itemscope"
				itemtype="http://schema.org/Organization"
			>
				<div
					id="ms--mobile-nav"
					class="site-header display-none-tablet padding-inline-none gap-none"
					data-bi-name="mobile-header"
					data-test-id="mobile-header"
				></div>
				<div
					id="ms--primary-nav"
					class="site-header display-none display-flex-tablet"
					data-bi-name="L1-header"
					data-test-id="primary-header"
				></div>
				<div
					id="ms--secondary-nav"
					class="site-header display-none display-flex-tablet"
					data-bi-name="L2-header"
					data-test-id="secondary-header"
				></div>
			</header>
			
		<!-- banner -->
		<div data-banner>
			<div id="disclaimer-holder"></div>
			
		</div>
		<!-- banner end -->
	
		</div>
	</header>
				 <section
					id="layout-body-menu"
					class="layout-body-menu display-flex"
					data-bi-name="menu"
			  >
					<div
		id="left-container"
		class="left-container display-none display-block-tablet padding-inline-sm padding-bottom-sm width-full"
	>
		<nav
			id="affixed-left-container"
			class="margin-top-sm-tablet position-sticky display-flex flex-direction-column"
			aria-label="Primary"
		></nav>
	</div>
			  </section>

				<main
					id="main"
					role="main"
					class="layout-body-main "
					data-bi-name="content"
					lang="en-us"
					dir="ltr"
				>
					
			<div
		id="ms--content-header"
		class="content-header default-focus border-bottom-none"
		data-bi-name="content-header"
	>
		<div class="content-header-controls margin-xxs margin-inline-sm-tablet">
			<button
				type="button"
				class="contents-button button button-sm margin-right-xxs"
				data-bi-name="contents-expand"
				aria-haspopup="true"
				data-contents-button
			>
				<span class="icon" aria-hidden="true"><span class="docon docon-menu"></span></span>
				<span class="contents-expand-title"> Table of contents </span>
			</button>
			<button
				type="button"
				class="ap-collapse-behavior ap-expanded button button-sm"
				data-bi-name="ap-collapse"
				aria-controls="action-panel"
			>
				<span class="icon" aria-hidden="true"><span class="docon docon-exit-mode"></span></span>
				<span>Exit editor mode</span>
			</button>
		</div>
	</div>
			<div data-main-column class="padding-sm padding-top-none padding-top-sm-tablet">
				<div>
					
		<div id="article-header" class="background-color-body margin-bottom-xs display-none-print">
			<div class="display-flex align-items-center justify-content-space-between">
				
		<details
			id="article-header-breadcrumbs-overflow-popover"
			class="popover"
			data-for="article-header-breadcrumbs"
		>
			<summary
				class="button button-clear button-primary button-sm inner-focus"
				aria-label="All breadcrumbs"
			>
				<span class="icon">
					<span class="docon docon-more"></span>
				</span>
			</summary>
			<div id="article-header-breadcrumbs-overflow" class="popover-content padding-none"></div>
		</details>

		<bread-crumbs
			id="article-header-breadcrumbs"
			data-test-id="article-header-breadcrumbs"
			class="overflow-hidden flex-grow-1 margin-right-sm margin-right-md-tablet margin-right-lg-desktop margin-left-negative-xxs padding-left-xxs"
		></bread-crumbs>
	 
		<div
			id="article-header-page-actions"
			class="opacity-none margin-left-auto display-flex flex-wrap-no-wrap align-items-stretch"
		>
			
		<button
			class="button button-sm border-none inner-focus display-none-tablet flex-shrink-0 "
			data-bi-name="ask-learn-assistant-entry"
			data-test-id="ask-learn-assistant-modal-entry-mobile"
			data-ask-learn-modal-entry
			type="button"
			style="min-width: max-content;"
			aria-expanded="false"
			aria-label="Ask Learn"
			hidden
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
		</button>
		<button
			class="button button-sm display-none display-inline-flex-tablet display-none-desktop flex-shrink-0 margin-right-xxs border-color-ask-learn "
			data-bi-name="ask-learn-assistant-entry"
			data-test-id="ask-learn-assistant-modal-entry-tablet"
			data-ask-learn-modal-entry
			type="button"
			style="min-width: max-content;"
			aria-expanded="false"
			hidden
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
			<span>Ask Learn</span>
		</button>
		<button
			class="button button-sm display-none flex-shrink-0 display-inline-flex-desktop margin-right-xxs	border-color-ask-learn "
			data-bi-name="ask-learn-assistant-entry"
			data-test-id="ask-learn-assistant-flyout-entry"
			data-ask-learn-flyout-entry
			data-flyout-button="toggle"
			type="button"
			style="min-width: max-content;"
			aria-expanded="false"
			aria-controls="ask-learn-flyout"
			hidden
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
			<span>Ask Learn</span>
		</button>
	 
		<button
			type="button"
			id="ms--focus-mode-button"
			data-focus-mode
			data-bi-name="focus-mode-entry"
			class="button button-sm flex-shrink-0 margin-right-xxs display-none display-inline-flex-desktop"
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-glasses"></span>
			</span>
			<span>Focus mode</span>
		</button>
	 

			<details class="popover popover-right" id="article-header-page-actions-overflow">
				<summary
					class="justify-content-flex-start button button-clear button-sm button-primary inner-focus"
					aria-label="More actions"
					title="More actions"
				>
					<span class="icon" aria-hidden="true">
						<span class="docon docon-more-vertical"></span>
					</span>
				</summary>
				<div class="popover-content">
					
		<button
			data-page-action-item="overflow-mobile"
			type="button"
			class="button-block button-sm has-inner-focus button button-clear display-none-tablet justify-content-flex-start text-align-left"
			data-bi-name="contents-expand"
			data-contents-button
			data-popover-close
		>
			<span class="icon">
				<span class="docon docon-editor-list-bullet" aria-hidden="true"></span>
			</span>
			<span class="contents-expand-title">Table of contents</span>
		</button>
	 
		<a
			id="lang-link-overflow"
			class="button-sm has-inner-focus button button-clear button-block justify-content-flex-start text-align-left"
			data-bi-name="language-toggle"
			data-page-action-item="overflow-all"
			data-check-hidden="true"
			data-read-in-link
			href="#"
			hidden
		>
			<span class="icon" aria-hidden="true" data-read-in-link-icon>
				<span class="docon docon-locale-globe"></span>
			</span>
			<span data-read-in-link-text>Read in English</span>
		</a>
	 
		<button
			type="button"
			class="collection button button-clear button-sm button-block justify-content-flex-start text-align-left inner-focus"
			data-list-type="collection"
			data-bi-name="collection"
			data-page-action-item="overflow-all"
			data-check-hidden="true"
			data-popover-close
		>
			<span class="icon" aria-hidden="true">
				<span class="docon docon-circle-addition"></span>
			</span>
			<span class="collection-status">Add</span>
		</button>
	
					
		<button
			type="button"
			class="collection button button-block button-clear button-sm justify-content-flex-start text-align-left inner-focus"
			data-list-type="plan"
			data-bi-name="plan"
			data-page-action-item="overflow-all"
			data-check-hidden="true"
			data-popover-close
			hidden
		>
			<span class="icon" aria-hidden="true">
				<span class="docon docon-circle-addition"></span>
			</span>
			<span class="plan-status">Add to plan</span>
		</button>
	  
		<a
			data-contenteditbtn
			class="button button-clear button-block button-sm inner-focus justify-content-flex-start text-align-left text-decoration-none"
			data-bi-name="edit"
			
			href="https://github.com/dotnet/AspNetCore.Docs/blob/main/aspnetcore/fundamentals/logging/index.md"
			data-original_content_git_url="https://github.com/dotnet/AspNetCore.Docs/blob/live/aspnetcore/fundamentals/logging/index.md"
			data-original_content_git_url_template="{repo}/blob/{branch}/aspnetcore/fundamentals/logging/index.md"
			data-pr_repo=""
			data-pr_branch=""
		>
			<span class="icon" aria-hidden="true">
				<span class="docon docon-edit-outline"></span>
			</span>
			<span>Edit</span>
		</a>
	
					
		<hr class="margin-block-xxs" />
		<h4 class="font-size-sm padding-left-xxs">Share via</h4>
		
					<a
						class="button button-clear button-sm inner-focus button-block justify-content-flex-start text-align-left text-decoration-none share-facebook"
						data-bi-name="facebook"
						data-page-action-item="overflow-all"
						href="#"
					>
						<span class="icon color-primary" aria-hidden="true">
							<span class="docon docon-facebook-share"></span>
						</span>
						<span>Facebook</span>
					</a>

					<a
						href="#"
						class="button button-clear button-sm inner-focus button-block justify-content-flex-start text-align-left text-decoration-none share-twitter"
						data-bi-name="twitter"
						data-page-action-item="overflow-all"
					>
						<span class="icon color-text" aria-hidden="true">
							<span class="docon docon-xlogo-share"></span>
						</span>
						<span>x.com</span>
					</a>

					<a
						href="#"
						class="button button-clear button-sm inner-focus button-block justify-content-flex-start text-align-left text-decoration-none share-linkedin"
						data-bi-name="linkedin"
						data-page-action-item="overflow-all"
					>
						<span class="icon color-primary" aria-hidden="true">
							<span class="docon docon-linked-in-logo"></span>
						</span>
						<span>LinkedIn</span>
					</a>
					<a
						href="#"
						class="button button-clear button-sm inner-focus button-block justify-content-flex-start text-align-left text-decoration-none share-email"
						data-bi-name="email"
						data-page-action-item="overflow-all"
					>
						<span class="icon color-primary" aria-hidden="true">
							<span class="docon docon-mail-message"></span>
						</span>
						<span>Email</span>
					</a>
			  
	 
		<hr class="margin-block-xxs" />
		<button
			class="button button-block button-clear button-sm justify-content-flex-start text-align-left inner-focus"
			type="button"
			data-bi-name="print"
			data-page-action-item="overflow-all"
			data-popover-close
			data-print-page
			data-check-hidden="true"
		>
			<span class="icon color-primary" aria-hidden="true">
				<span class="docon docon-print"></span>
			</span>
			<span>Print</span>
		</button>
	
				</div>
			</details>
		</div>
	
			</div>
		</div>
	
					<!-- azure disclaimer -->
					
					<!-- privateUnauthorizedTemplate is hidden by default -->
					
		<div unauthorized-private-section data-bi-name="permission-content-unauthorized-private" hidden>
			<hr class="hr margin-top-xs margin-bottom-sm" />
			<div class="notification notification-info">
				<div class="notification-content">
					<p class="margin-top-none notification-title">
						<span class="icon">
							<span class="docon docon-exclamation-circle-solid" aria-hidden="true"></span>
						</span>
						<span>Note</span>
					</p>
					<p class="margin-top-none authentication-determined not-authenticated">
						Access to this page requires authorization. You can try <a class="docs-sign-in" href="#" data-bi-name="permission-content-sign-in">signing in</a> or <a  class="docs-change-directory" data-bi-name="permisson-content-change-directory">changing directories</a>.
					</p>
					<p class="margin-top-none authentication-determined authenticated">
						Access to this page requires authorization. You can try <a class="docs-change-directory" data-bi-name="permisson-content-change-directory">changing directories</a>.
					</p>
				</div>
			</div>
		</div>
	
					<div class="content"><h1 id="logging-in-net-and-aspnet-core">Logging in .NET and ASP.NET Core</h1></div>
					
		<div
			id="article-metadata"
			class="page-metadata-container display-flex gap-xxs justify-content-space-between align-items-center flex-wrap-wrap"
		>
			
		<div class="margin-block-xxs">
			<ul class="metadata page-metadata" data-bi-name="page info" lang="en-us" dir="ltr">
				  <li class="visibility-hidden-visual-diff">
			<local-time
				format="twoDigitNumeric"
				datetime="2024-09-18T13:16:00.000Z"
				data-article-date-source="calculated"
				class="is-invisible"
			>
				2024-09-18
			</local-time>
		</li>  
			</ul>
		</div>
	 
				<div
					id="user-feedback"
					class="margin-block-xxs display-none display-none-print"
					hidden
					data-hide-on-archived
				>
					
		<button
			id="user-feedback-button"
			data-test-id="conceptual-feedback-button"
			class="button button-sm button-clear button-primary display-none"
			type="button"
			data-bi-name="user-feedback-button"
			data-user-feedback-button
			hidden
		>
			<span class="icon" aria-hidden="true">
				<span class="docon docon-like"></span>
			</span>
			<span>Feedback</span>
		</button>
	
				</div>
		  
		</div>
	 
		<nav
			id="center-doc-outline"
			class="doc-outline is-hidden-desktop display-none-print margin-bottom-sm"
			data-bi-name="intopic toc"
			aria-label="In this article"
		>
			<h2 id="ms--in-this-article" class="title is-6 margin-block-xs">
				In this article
			</h2>
		</nav>
	
					<div class="content"><div data-moniker="aspnetcore-3.1 aspnetcore-5.0 aspnetcore-6.0 aspnetcore-7.0 aspnetcore-8.0">
<div class="NOTE">
<p>Note</p>
<p>This isn't the latest version of this article. For the current release, see the <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/logging/?view=aspnetcore-9.0&amp;preserve-view=true" data-linktype="relative-path">.NET 9 version of this article</a>.</p>
</div>
</div>
<div data-moniker="aspnetcore-3.1 aspnetcore-5.0 aspnetcore-7.0">
<div class="WARNING">
<p>Warning</p>
<p>This version of ASP.NET Core is no longer supported. For more information, see the <a href="https://dotnet.microsoft.com/platform/support/policy/dotnet-core" data-linktype="external">.NET and .NET Core Support Policy</a>. For the current release, see the <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/logging/?view=aspnetcore-9.0&amp;preserve-view=true" data-linktype="relative-path">.NET 9 version of this article</a>.</p>
</div>
</div>
<div data-moniker="aspnetcore-10.0">
<div class="IMPORTANT">
<p>Important</p>
<p>This information relates to a pre-release product that may be substantially modified before it's commercially released. Microsoft makes no warranties, express or implied, with respect to the information provided here.</p>
<p>For the current release, see the <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/logging/?view=aspnetcore-9.0&amp;preserve-view=true" data-linktype="relative-path">.NET 9 version of this article</a>.</p>
</div>
</div>
<!--
Include either this file or 'not-latest-version-without-not-supported-content.md' at the top 
of articles.

'not-latest-version.md' (this file): Includes not-supported content.
'not-latest-version-without-not-supported-content.md': Doesn't include not-supported content.

Use this file in articles that target >=7.0. For articles that target >=8.0 prior to 9.0
reaching EOL, 'not-latest-version-without-not-supported-content.md' must be used to avoid
a zone/file moniker range mismatch error.

When a new version is released, it might be necessary to temporarily comment out the current 
version moniker range section until the new moniker is created.

Markdown to include this file:

[!INCLUDE[](~/includes/not-latest-version.md)]
-->
<div data-moniker="aspnetcore-10.0 aspnetcore-6.0 aspnetcore-7.0 aspnetcore-8.0 aspnetcore-9.0">
<p>By <a href="https://twitter.com/serpent5" data-linktype="external">Kirk Larkin</a>, <a href="https://github.com/JuergenGutsch" data-linktype="external">Juergen Gutsch</a>, and <a href="https://twitter.com/RickAndMSFT" data-linktype="external">Rick Anderson</a></p>
<p>This article describes logging in .NET as it applies to ASP.NET Core apps. For detailed information on logging in .NET, see <a href="https://learn.microsoft.com/en-us/dotnet/core/extensions/logging" data-linktype="absolute-path">Logging in .NET</a>.</p>
<p>For Blazor logging guidance, which adds to or supersedes the guidance in this node, see <a href="https://learn.microsoft.com/en-us/aspnet/core/blazor/fundamentals/logging?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Blazor logging</a>.</p>
<p><a name="lp"></a></p>
<h2 id="logging-providers">Logging providers</h2>
<p>Logging providers store logs, except for the <code>Console</code> provider which displays logs. For example, the Azure Application Insights provider stores logs in <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/app/app-insights-overview" data-linktype="absolute-path">Azure Application Insights</a>. Multiple providers can be enabled.</p>
<p>The default ASP.NET Core web app templates call <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.webapplication.createbuilder" class="no-loc" data-linktype="absolute-path">WebApplication.CreateBuilder</a>, which adds the following logging providers:</p>
<ul>
<li><a href="#console" data-linktype="self-bookmark">Console</a></li>
<li><a href="#debug" data-linktype="self-bookmark">Debug</a></li>
<li><a href="#event-source" data-linktype="self-bookmark">EventSource</a></li>
<li><a href="#welog" data-linktype="self-bookmark">EventLog</a>: Windows only</li>
</ul>
<pre><code class="lang-csharp" highlight-lines="1">var builder = WebApplication.CreateBuilder(args);

builder.Services.AddRazorPages();

var app = builder.Build();

if (!app.Environment.IsDevelopment())
{
    app.UseExceptionHandler("/Error");
    app.UseHsts();
}

app.UseHttpsRedirection();
app.UseStaticFiles();

app.UseRouting();

app.UseAuthorization();

app.MapRazorPages();

app.Run();
</code></pre>
<p>The preceding code shows the <code>Program.cs</code> file created with the ASP.NET Core web app templates. The next several sections provide samples based on the ASP.NET Core web app templates.</p>
<p>The following code overrides the default set of logging providers added by <code>WebApplication.CreateBuilder</code>:</p>
<pre><code class="lang-csharp" highlight-lines="2-3">var builder = WebApplication.CreateBuilder(args);
builder.Logging.ClearProviders();
builder.Logging.AddConsole();

builder.Services.AddRazorPages();

var app = builder.Build();

if (!app.Environment.IsDevelopment())
{
    app.UseExceptionHandler("/Error");
    app.UseHsts();
}

app.UseHttpsRedirection();
app.UseStaticFiles();

app.UseRouting();

app.UseAuthorization();

app.MapRazorPages();

app.Run();
</code></pre>
<p>Alternatively, the preceding logging code can be written as follows:</p>
<pre><code class="lang-csharp">var builder = WebApplication.CreateBuilder();
builder.Host.ConfigureLogging(logging =&gt;
{
    logging.ClearProviders();
    logging.AddConsole();
});
</code></pre>
<p>For additional providers, see:</p>
<ul>
<li><a href="#bilp" data-linktype="self-bookmark">Built-in logging providers</a></li>
<li><a href="#third-party-logging-providers" data-linktype="self-bookmark">Third-party logging providers</a>.</li>
</ul>
<h2 id="create-logs">Create logs</h2>
<p>To create logs, use an <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.ilogger-1" class="no-loc" data-linktype="absolute-path">ILogger&lt;TCategoryName&gt;</a> object from <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/dependency-injection?view=aspnetcore-9.0" data-linktype="relative-path">dependency injection (DI)</a>.</p>
<p>The following example:</p>
<ul>
<li>Creates a logger, <code>ILogger&lt;AboutModel&gt;</code>, which uses a log <em>category</em> of the fully qualified name of the type <code>AboutModel</code>. The log category is a string that is associated with each log.</li>
<li>Calls <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loggerextensions.loginformation" class="no-loc" data-linktype="absolute-path">LogInformation</a> to log at the <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel#microsoft-extensions-logging-loglevel-information" class="no-loc" data-linktype="absolute-path">Information</a> level. The Log <em>level</em> indicates the severity of the logged event.</li>
</ul>
<pre><code class="lang-csharp" highlight-lines="5,12-13">public class AboutModel : PageModel
{
    private readonly ILogger _logger;

    public AboutModel(ILogger&lt;AboutModel&gt; logger)
    {
        _logger = logger;
    }

    public void OnGet()
    {
        _logger.LogInformation("About page visited at {DT}", 
            DateTime.UtcNow.ToLongTimeString());
    }
}
</code></pre>
<p><a href="#log-level" data-linktype="self-bookmark">Levels</a> and <a href="#log-category" data-linktype="self-bookmark">categories</a> are explained in more detail later in this document.</p>
<p>For information on Blazor, see <a href="https://learn.microsoft.com/en-us/aspnet/core/blazor/fundamentals/logging?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Blazor logging</a>.</p>
<h2 id="configure-logging">Configure logging</h2>
<p>Logging configuration is commonly provided by the <code>Logging</code> section of <code>appsettings.{ENVIRONMENT}.json</code> files, where the <code>{ENVIRONMENT}</code> placeholder is the <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/environments?view=aspnetcore-9.0" data-linktype="relative-path">environment</a>. The following <code>appsettings.Development.json</code> file is generated by the ASP.NET Core web app templates:</p>
<pre><code class="lang-json">{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  }
}
</code></pre>
<p>In the preceding JSON:</p>
<ul>
<li>The <code>"Default"</code> and <code>"Microsoft.AspNetCore"</code> categories are specified.</li>
<li>The <code>"Microsoft.AspNetCore"</code> category applies to all categories that start with <code>"Microsoft.AspNetCore"</code>. For example, this setting applies to the <code>"Microsoft.AspNetCore.Routing.EndpointMiddleware"</code> category.</li>
<li>The <code>"Microsoft.AspNetCore"</code> category logs at log level <code>Warning</code> and higher.</li>
<li>A specific log provider is not specified, so <code>LogLevel</code> applies to all the enabled logging providers except for the <a href="#welog" data-linktype="self-bookmark">Windows EventLog</a>.</li>
</ul>
<p>The <code>Logging</code> property can have <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel" class="no-loc" data-linktype="absolute-path">LogLevel</a> and log provider properties. The <code>LogLevel</code> specifies the minimum <a href="#log-level" data-linktype="self-bookmark">level</a> to log for selected categories. In the preceding JSON, <code>Information</code> and <code>Warning</code> log levels are specified. <code>LogLevel</code> indicates the severity of the log and ranges from 0 to 6:</p>
<p><code>Trace</code> = 0, <code>Debug</code> = 1, <code>Information</code> = 2, <code>Warning</code> = 3, <code>Error</code> = 4, <code>Critical</code> = 5, and <code>None</code> = 6.</p>
<p>When a <code>LogLevel</code> is specified, logging is enabled for messages at the specified level and higher. In the preceding JSON, the <code>Default</code> category is logged for <code>Information</code> and higher. For example, <code>Information</code>, <code>Warning</code>, <code>Error</code>, and <code>Critical</code> messages are logged. If no <code>LogLevel</code> is specified, logging defaults to the <code>Information</code> level. For more information, see <a href="#llvl" data-linktype="self-bookmark">Log levels</a>.</p>
<p>A provider property can specify a <code>LogLevel</code> property. <code>LogLevel</code> under a provider specifies levels to log for that provider, and overrides the non-provider log settings. Consider the following <code>appsettings.json</code> file:</p>
<pre><code class="lang-json">{
  "Logging": {
    "LogLevel": { // All providers, LogLevel applies to all the enabled providers.
      "Default": "Error", // Default logging, Error and higher.
      "Microsoft": "Warning" // All Microsoft* categories, Warning and higher.
    },
    "Debug": { // Debug provider.
      "LogLevel": {
        "Default": "Information", // Overrides preceding LogLevel:Default setting.
        "Microsoft.Hosting": "Trace" // Debug:Microsoft.Hosting category.
      }
    },
    "EventSource": { // EventSource provider
      "LogLevel": {
        "Default": "Warning" // All categories of EventSource provider.
      }
    }
  }
}
</code></pre>
<p>Settings in <code>Logging.{PROVIDER NAME}.LogLevel</code> override settings in <code>Logging.LogLevel</code>, where the <code>{PROVIDER NAME}</code> placeholder is the provider name. In the preceding JSON, the <code>Debug</code> provider's default log level is set to <code>Information</code>:</p>
<p><code>Logging:Debug:LogLevel:Default:Information</code></p>
<p>The preceding setting specifies the <code>Information</code> log level for every <code>Logging:Debug:</code> category except <code>Microsoft.Hosting</code>. When a specific category is listed, the specific category overrides the default category. In the preceding JSON, the <code>Logging:Debug:LogLevel</code> categories <code>"Microsoft.Hosting"</code> and <code>"Default"</code> override the settings in <code>Logging:LogLevel</code>.</p>
<p>The minimum log level can be specified for any of:</p>
<ul>
<li>Specific providers: For example, <code>Logging:EventSource:LogLevel:Default:Information</code></li>
<li>Specific categories: For example, <code>Logging:LogLevel:Microsoft:Warning</code></li>
<li>All providers and all categories: <code>Logging:LogLevel:Default:Warning</code></li>
</ul>
<p>Any logs below the minimum level are <em><strong>not</strong></em>:</p>
<ul>
<li>Passed to the provider.</li>
<li>Logged or displayed.</li>
</ul>
<p>To suppress all logs, specify <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel#microsoft-extensions-logging-loglevel-none" class="no-loc" data-linktype="absolute-path">LogLevel.None</a>. <code>LogLevel.None</code> has a value of 6, which is higher than <code>LogLevel.Critical</code> (5).</p>
<p>If a provider supports <a href="#logscopes" data-linktype="self-bookmark">log scopes</a>, <code>IncludeScopes</code> indicates whether they're enabled. For more information, see <a href="#logscopes" data-linktype="self-bookmark">log scopes</a>.</p>
<p>The following <code>appsettings.json</code> file contains all the providers enabled by default:</p>
<pre><code class="lang-json">{
  "Logging": {
    "LogLevel": { // No provider, LogLevel applies to all the enabled providers.
      "Default": "Error",
      "Microsoft": "Warning",
      "Microsoft.Hosting.Lifetime": "Warning"
    },
    "Debug": { // Debug provider.
      "LogLevel": {
        "Default": "Information" // Overrides preceding LogLevel:Default setting.
      }
    },
    "Console": {
      "IncludeScopes": true,
      "LogLevel": {
        "Microsoft.AspNetCore.Mvc.Razor.Internal": "Warning",
        "Microsoft.AspNetCore.Mvc.Razor.Razor": "Debug",
        "Microsoft.AspNetCore.Mvc.Razor": "Error",
        "Default": "Information"
      }
    },
    "EventSource": {
      "LogLevel": {
        "Microsoft": "Information"
      }
    },
    "EventLog": {
      "LogLevel": {
        "Microsoft": "Information"
      }
    },
    "AzureAppServicesFile": {
      "IncludeScopes": true,
      "LogLevel": {
        "Default": "Warning"
      }
    },
    "AzureAppServicesBlob": {
      "IncludeScopes": true,
      "LogLevel": {
        "Microsoft": "Information"
      }
    },
    "ApplicationInsights": {
      "LogLevel": {
        "Default": "Information"
      }
    }
  }
}
</code></pre>
<p>In the preceding sample:</p>
<ul>
<li>The categories and levels aren't suggested values. The sample is provided to show all of the default providers.</li>
<li>Settings in <code>Logging.{PROVIDER NAME}.LogLevel</code> override settings in <code>Logging.LogLevel</code>, where the <code>{PROVIDER NAME}</code> placeholder is the provider name. For example, the level in <code>Debug.LogLevel.Default</code> overrides the level in <code>LogLevel.Default</code>.</li>
<li>Each default provider <em>alias</em> is used. Each provider defines an <em>alias</em> that can be used in configuration in place of the fully qualified type name. The built-in providers aliases are:
<ul>
<li><code>Console</code></li>
<li><code>Debug</code></li>
<li><code>EventSource</code></li>
<li><code>EventLog</code></li>
<li><code>AzureAppServicesFile</code></li>
<li><code>AzureAppServicesBlob</code></li>
<li><code>ApplicationInsights</code></li>
</ul>
</li>
</ul>
<h2 id="log-in-programcs">Log in <code>Program.cs</code></h2>
<p>The following example calls <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.webapplication.logger#microsoft-aspnetcore-builder-webapplication-logger" data-linktype="absolute-path">Builder.WebApplication.Logger</a> in <code>Program.cs</code> and logs informational messages:</p>
<pre><code class="lang-csharp">var builder = WebApplication.CreateBuilder(args);
var app = builder.Build();
app.Logger.LogInformation("Adding Routes");
app.MapGet("/", () =&gt; "Hello World!");
app.Logger.LogInformation("Starting the app");
app.Run();
</code></pre>
<p>The following example calls <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.consoleloggerextensions.addconsole" class="no-loc" data-linktype="absolute-path">AddConsole</a> in <code>Program.cs</code> and logs the <code>/Test</code> endpoint:</p>
<pre><code class="lang-csharp">var builder = WebApplication.CreateBuilder(args);

builder.Logging.AddConsole();

var app = builder.Build();

app.MapGet("/", () =&gt; "Hello World!");

app.MapGet("/Test", async (ILogger&lt;Program&gt; logger, HttpResponse response) =&gt;
{
    logger.LogInformation("Testing logging in Program.cs");
    await response.WriteAsync("Testing");
});

app.Run();
</code></pre>
<p>The following example calls <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.consoleloggerextensions.addsimpleconsole" class="no-loc" data-linktype="absolute-path">AddSimpleConsole</a> in <code>Program.cs</code>, disables color output, and logs the <code>/Test</code> endpoint:</p>
<pre><code class="lang-csharp">using Microsoft.Extensions.Logging.Console;

var builder = WebApplication.CreateBuilder(args);

builder.Logging.AddSimpleConsole(i =&gt; i.ColorBehavior = LoggerColorBehavior.Disabled);

var app = builder.Build();

app.MapGet("/", () =&gt; "Hello World!");

app.MapGet("/Test", async (ILogger&lt;Program&gt; logger, HttpResponse response) =&gt;
{
    logger.LogInformation("Testing logging in Program.cs");
    await response.WriteAsync("Testing");
});

app.Run();
</code></pre><h2 id="set-log-level-by-command-line-environment-variables-and-other-configuration">Set log level by command line, environment variables, and other configuration</h2>
<p>Log level can be set by any of the <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/configuration/?view=aspnetcore-9.0" data-linktype="relative-path">configuration providers</a>.</p>
<p>The <code>:</code> separator doesn't work with environment variable hierarchical keys on all platforms. For example, the <code>:</code> separator is not supported by <a href="https://linuxhint.com/bash-environment-variables/" data-linktype="external">Bash</a>. The double underscore, <code>__</code>, is:</p>
<ul>
<li>Supported by all platforms.</li>
<li>Automatically replaced by a colon, <code>:</code>.</li>
</ul>
<p>The following commands:</p>
<ul>
<li>Set the environment key <code>Logging:LogLevel:Microsoft</code> to a value of <code>Information</code> on Windows.</li>
<li>Test the settings when using an app created with the ASP.NET Core web application templates. The <code>dotnet run</code> command must be run in the project directory after using <code>set</code>.</li>
</ul>
<pre><code class="lang-dotnetcli">set Logging__LogLevel__Microsoft=Information
dotnet run
</code></pre>
<p>The preceding environment setting:</p>
<ul>
<li>Is only set in processes launched from the command window they were set in.</li>
<li>Isn't read by browsers launched with Visual Studio.</li>
</ul>
<p>The following <a href="https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/setx" data-linktype="absolute-path">setx</a> command also sets the environment key and value on Windows. Unlike <code>set</code>, <code>setx</code> settings are persisted. The <code>/M</code> switch sets the variable in the system environment. If <code>/M</code> isn't used, a user environment variable is set.</p>
<pre><code class="lang-console">setx Logging__LogLevel__Microsoft Information /M
</code></pre>
<p>Consider the following <code>appsettings.json</code> file:</p>
<pre><code class="lang-json">"Logging": {
  "Console": {
    "LogLevel": {
      "Microsoft.Hosting.Lifetime": "Trace"
    }
  }
}
</code></pre>
<p>The following command sets the preceding configuration in the environment:</p>
<pre><code class="lang-console">setx Logging__Console__LogLevel__Microsoft.Hosting.Lifetime Trace /M
</code></pre>
<div class="NOTE">
<p>Note</p>
<p>When configuring environment variables with names that contain <code>.</code> (periods) in macOS and Linux, consider the "Exporting a variable with a dot (.) in it" question on <strong>Stack Exchange</strong> and its corresponding <a href="https://unix.stackexchange.com/a/93533" data-linktype="external">accepted answer</a>.</p>
</div>
<p>On <a href="https://azure.microsoft.com/services/app-service/" data-linktype="external">Azure App Service</a>, select <strong>New application setting</strong> on the <strong>Settings &gt; Configuration</strong> page. Azure App Service application settings are:</p>
<ul>
<li>Encrypted at rest and transmitted over an encrypted channel.</li>
<li>Exposed as environment variables.</li>
</ul>
<p>For more information, see <a href="../../host-and-deploy/azure-apps/index553c.html?view=aspnetcore-9.0#override-app-configuration-using-the-azure-portal" data-linktype="relative-path">Azure Apps: Override app configuration using the Azure portal</a>.</p>
<p>For more information on setting ASP.NET Core configuration values using environment variables, see <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/configuration/?view=aspnetcore-9.0#environment-variables" data-linktype="relative-path">environment variables</a>. For information on using other configuration sources, including the command line, Azure Key Vault, Azure App Configuration, other file formats, and more, see <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/configuration/?view=aspnetcore-9.0" data-linktype="relative-path">Configuration in ASP.NET Core</a>.</p>
<h2 id="how-filtering-rules-are-applied">How filtering rules are applied</h2>
<p>When an <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.ilogger-1" class="no-loc" data-linktype="absolute-path">ILogger&lt;TCategoryName&gt;</a> object is created, the <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.iloggerfactory" class="no-loc" data-linktype="absolute-path">ILoggerFactory</a> object selects a single rule per provider to apply to that logger. All messages written by an <code>ILogger</code> instance are filtered based on the selected rules. The most specific rule for each provider and category pair is selected from the available rules.</p>
<p>The following algorithm is used for each provider when an <code>ILogger</code> is created for a given category:</p>
<ul>
<li>Select all rules that match the provider or its alias. If no match is found, select all rules with an empty provider.</li>
<li>From the result of the preceding step, select rules with longest matching category prefix. If no match is found, select all rules that don't specify a category.</li>
<li>If multiple rules are selected, take the <strong>last</strong> one.</li>
<li>If no rules are selected, use <code>MinimumLevel</code>.</li>
</ul>
<p><a name="dnrvs"></a></p>
<h2 id="logging-output-from-dotnet-run-and-visual-studio">Logging output from dotnet run and Visual Studio</h2>
<p>Logs created with the <a href="#lp" data-linktype="self-bookmark">default logging providers</a> are displayed:</p>
<ul>
<li>In Visual Studio
<ul>
<li>In the Debug output window when debugging.</li>
<li>In the ASP.NET Core Web Server window.</li>
</ul>
</li>
<li>In the console window when the app is run with <code>dotnet run</code>.</li>
</ul>
<p>Logs that begin with "Microsoft" categories are from .NET. .NET and application code use the same <a href="https://learn.microsoft.com/en-us/dotnet/core/extensions/logging" data-linktype="absolute-path">logging API and providers</a>.</p>
<p><a name="lcat"></a></p>
<h2 id="log-category">Log category</h2>
<p>When an <code>ILogger</code> object is created, a <em>category</em> is specified. That category is included with each log message created by that instance of <code>ILogger</code>. The category string is arbitrary, but the convention is to use the fully qualified class name. For example, in a controller the name might be <code>"TodoApi.Controllers.TodoController"</code>. The ASP.NET Core web apps use <code>ILogger&lt;T&gt;</code> to automatically get an <code>ILogger</code> instance that uses the fully qualified type name of <code>T</code> as the category:</p>
<pre><code class="lang-csharp">public class PrivacyModel : PageModel
{
    private readonly ILogger&lt;PrivacyModel&gt; _logger;

    public PrivacyModel(ILogger&lt;PrivacyModel&gt; logger)
    {
        _logger = logger;
    }

    public void OnGet()
    {
        _logger.LogInformation("GET Pages.PrivacyModel called.");
    }
}
</code></pre>
<p>If further categorization is desired, the convention is to use a hierarchical name by appending a subcategory to the fully qualified class name, and explicitly specify the category using <code>ILoggerFactory.CreateLogger</code>:</p>
<pre><code class="lang-csharp">public class ContactModel : PageModel
{
    private readonly ILogger _logger;

    public ContactModel(ILoggerFactory logger)
    {
        _logger = logger.CreateLogger("TodoApi.Pages.ContactModel.MyCategory");
    }

    public void OnGet()
    {
        _logger.LogInformation("GET Pages.ContactModel called.");
    }
</code></pre>
<p>Calling <code>CreateLogger</code> with a fixed name can be useful when used in multiple methods so the events can be organized by category.</p>
<p><code>ILogger&lt;T&gt;</code> is equivalent to calling <code>CreateLogger</code> with the fully qualified type name of <code>T</code>.</p>
<p><a name="llvl"></a></p>
<h2 id="log-level">Log level</h2>
<p>The following table lists the <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel" class="no-loc" data-linktype="absolute-path">LogLevel</a> values, the convenience <code>Log{LogLevel}</code> extension method, and the suggested usage:</p>
<table>
<thead>
<tr>
<th>LogLevel</th>
<th>Value</th>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel#microsoft-extensions-logging-loglevel-trace" class="no-loc" data-linktype="absolute-path">Trace</a></td>
<td>0</td>
<td><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loggerextensions.logtrace" class="no-loc" data-linktype="absolute-path">LogTrace</a></td>
<td>Contain the most detailed messages. These messages may contain sensitive app data. These messages are disabled by default and should <em><strong>not</strong></em> be enabled in production.</td>
</tr>
<tr>
<td><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel#microsoft-extensions-logging-loglevel-debug" class="no-loc" data-linktype="absolute-path">Debug</a></td>
<td>1</td>
<td><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loggerextensions.logdebug" class="no-loc" data-linktype="absolute-path">LogDebug</a></td>
<td>For debugging and development. Use with caution in production due to the high volume.</td>
</tr>
<tr>
<td><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel#microsoft-extensions-logging-loglevel-information" class="no-loc" data-linktype="absolute-path">Information</a></td>
<td>2</td>
<td><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loggerextensions.loginformation" class="no-loc" data-linktype="absolute-path">LogInformation</a></td>
<td>Tracks the general flow of the app. May have long-term value.</td>
</tr>
<tr>
<td><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel#microsoft-extensions-logging-loglevel-warning" class="no-loc" data-linktype="absolute-path">Warning</a></td>
<td>3</td>
<td><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loggerextensions.logwarning" class="no-loc" data-linktype="absolute-path">LogWarning</a></td>
<td>For abnormal or unexpected events. Typically includes errors or conditions that don't cause the app to fail.</td>
</tr>
<tr>
<td><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel#microsoft-extensions-logging-loglevel-error" class="no-loc" data-linktype="absolute-path">Error</a></td>
<td>4</td>
<td><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loggerextensions.logerror" class="no-loc" data-linktype="absolute-path">LogError</a></td>
<td>For errors and exceptions that cannot be handled. These messages indicate a failure in the current operation or request, not an app-wide failure.</td>
</tr>
<tr>
<td><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel#microsoft-extensions-logging-loglevel-critical" class="no-loc" data-linktype="absolute-path">Critical</a></td>
<td>5</td>
<td><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loggerextensions.logcritical" class="no-loc" data-linktype="absolute-path">LogCritical</a></td>
<td>For failures that require immediate attention. Examples: data loss scenarios, out of disk space.</td>
</tr>
<tr>
<td><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel#microsoft-extensions-logging-loglevel-none" class="no-loc" data-linktype="absolute-path">None</a></td>
<td>6</td>
<td></td>
<td>Specifies that a logging category shouldn't write messages.</td>
</tr>
</tbody>
</table>
<p>In the previous table, the <code>LogLevel</code> is listed from lowest to highest severity.</p>
<p>The <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loggerextensions.log" class="no-loc" data-linktype="absolute-path">Log</a> method's first parameter, <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel" class="no-loc" data-linktype="absolute-path">LogLevel</a>, indicates the severity of the log. Rather than calling <code>Log(LogLevel, ...)</code>, most developers call the <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loggerextensions" data-linktype="absolute-path"><code>Log{LOG LEVEL}</code></a> extension methods, where the <code>{LOG LEVEL}</code> placeholder is the log level. For example, the following two logging calls are functionally equivalent and produce the same log:</p>
<pre><code class="lang-csharp" highlight-lines="6-7">[HttpGet]
public IActionResult Test1(int id)
{
    var routeInfo = ControllerContext.ToCtxString(id);

    _logger.Log(LogLevel.Information, MyLogEvents.TestItem, routeInfo);
    _logger.LogInformation(MyLogEvents.TestItem, routeInfo);

    return ControllerContext.MyDisplayRouteInfo();
}
</code></pre>
<p><code>MyLogEvents.TestItem</code> is the event ID. <code>MyLogEvents</code> is part of the sample app and is displayed in the <a href="#leid" data-linktype="self-bookmark">Log event ID</a> section.</p>
<p><a href="https://github.com/Rick-Anderson/RouteInfo/blob/master/Microsoft.Docs.Samples.RouteInfo/ControllerContextExtensions.cs" data-linktype="external">MyDisplayRouteInfo and ToCtxString</a> are provided by the <a href="https://www.nuget.org/packages/Rick.Docs.Samples.RouteInfo" data-linktype="external">Rick.Docs.Samples.RouteInfo</a> NuGet package. The methods display <code>Controller</code> and <code>Razor Page</code> route information.</p>
<p>The following code creates <code>Information</code> and <code>Warning</code> logs:</p>
<pre><code class="lang-csharp" highlight-lines="4,10">[HttpGet("{id}")]
public async Task&lt;ActionResult&lt;TodoItemDTO&gt;&gt; GetTodoItem(long id)
{
    _logger.LogInformation(MyLogEvents.GetItem, "Getting item {Id}", id);

    var todoItem = await _context.TodoItems.FindAsync(id);

    if (todoItem == null)
    {
        _logger.LogWarning(MyLogEvents.GetItemNotFound, "Get({Id}) NOT FOUND", id);
        return NotFound();
    }

    return ItemToDTO(todoItem);
}
</code></pre>
<p>In the preceding code, the first <code>Log{LOG LEVEL}</code> parameter,<code>MyLogEvents.GetItem</code>, is the <a href="#leid" data-linktype="self-bookmark">Log event ID</a>. The second parameter is a message template with placeholders for argument values provided by the remaining method parameters. The method parameters are explained in the <a href="#lmt" data-linktype="self-bookmark">message template</a> section later in this document.</p>
<p>Call the appropriate <code>Log{LOG LEVEL}</code> method to control how much log output is written to a particular storage medium. For example:</p>
<ul>
<li>In production:
<ul>
<li>Logging at the <code>Trace</code>, <code>Debug</code>, or <code>Information</code> levels produces a high-volume of detailed log messages. To control costs and not exceed data storage limits, log <code>Trace</code>, <code>Debug</code>, or <code>Information</code> level messages to a high-volume, low-cost data store. Consider limiting <code>Trace</code>, <code>Debug</code>, or <code>Information</code> to specific categories.</li>
<li>Logging at <code>Warning</code> through <code>Critical</code> levels should produce few log messages.
<ul>
<li>Costs and storage limits usually aren't a concern.</li>
<li>Few logs allow more flexibility in data store choices.</li>
</ul>
</li>
</ul>
</li>
<li>In development:
<ul>
<li>Set to <code>Warning</code>.</li>
<li>Add <code>Trace</code>, <code>Debug</code>, or <code>Information</code> messages when troubleshooting. To limit output, set <code>Trace</code>, <code>Debug</code>, or <code>Information</code> only for the categories under investigation.</li>
</ul>
</li>
</ul>
<p>ASP.NET Core writes logs for framework events. For example, consider the log output for:</p>
<ul>
<li>A Razor Pages app created with the ASP.NET Core templates.</li>
<li>Logging set to <code>Logging:Console:LogLevel:Microsoft:Information</code>.</li>
<li>Navigation to the Privacy page:</li>
</ul>
<pre><code class="lang-console">info: Microsoft.AspNetCore.Hosting.Diagnostics[1]
      Request starting HTTP/2 GET https://localhost:5001/Privacy
info: Microsoft.AspNetCore.Routing.EndpointMiddleware[0]
      Executing endpoint '/Privacy'
info: Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.PageActionInvoker[3]
      Route matched with {page = "/Privacy"}. Executing page /Privacy
info: Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.PageActionInvoker[101]
      Executing handler method DefaultRP.Pages.PrivacyModel.OnGet - ModelState is Valid
info: Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.PageActionInvoker[102]
      Executed handler method OnGet, returned result .
info: Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.PageActionInvoker[103]
      Executing an implicit handler method - ModelState is Valid
info: Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.PageActionInvoker[104]
      Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
info: Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.PageActionInvoker[4]
      Executed page /Privacy in 74.5188ms
info: Microsoft.AspNetCore.Routing.EndpointMiddleware[1]
      Executed endpoint '/Privacy'
info: Microsoft.AspNetCore.Hosting.Diagnostics[2]
      Request finished in 149.3023ms 200 text/html; charset=utf-8
</code></pre>
<p>The following JSON sets <code>Logging:Console:LogLevel:Microsoft:Information</code>:</p>
<pre><code class="lang-json">{
  "Logging": {      // Default, all providers.
    "LogLevel": {
      "Microsoft": "Warning"
    },
    "Console": { // Console provider.
      "LogLevel": {
        "Microsoft": "Information"
      }
    }
  }
}
</code></pre>
<p><a name="leid"></a></p>
<h2 id="log-event-id">Log event ID</h2>
<p>Each log can specify an <em>event ID</em>. The sample app uses the <code>MyLogEvents</code> class to define event IDs:</p>
<!-- Review: to bad there is no way to use an enum for event ID's -->
<pre><code class="lang-csharp">public class MyLogEvents
{
    public const int GenerateItems = 1000;
    public const int ListItems     = 1001;
    public const int GetItem       = 1002;
    public const int InsertItem    = 1003;
    public const int UpdateItem    = 1004;
    public const int DeleteItem    = 1005;

    public const int TestItem      = 3000;

    public const int GetItemNotFound    = 4000;
    public const int UpdateItemNotFound = 4001;
}
</code></pre><pre><code class="lang-csharp" highlight-lines="4,10">[HttpGet("{id}")]
public async Task&lt;ActionResult&lt;TodoItemDTO&gt;&gt; GetTodoItem(long id)
{
    _logger.LogInformation(MyLogEvents.GetItem, "Getting item {Id}", id);

    var todoItem = await _context.TodoItems.FindAsync(id);

    if (todoItem == null)
    {
        _logger.LogWarning(MyLogEvents.GetItemNotFound, "Get({Id}) NOT FOUND", id);
        return NotFound();
    }

    return ItemToDTO(todoItem);
}
</code></pre>
<p>An event ID associates a set of events. For example, all logs related to displaying a list of items on a page might be 1001.</p>
<p>The logging provider may store the event ID in an ID field, in the logging message, or not at all. The Debug provider doesn't show event IDs. The console provider shows event IDs in brackets after the category:</p>
<pre><code class="lang-console">info: TodoApi.Controllers.TodoItemsController[1002]
      Getting item 1
warn: TodoApi.Controllers.TodoItemsController[4000]
      Get(1) NOT FOUND
</code></pre>
<p>Some logging providers store the event ID in a field, which allows for filtering on the ID.</p>
<p><a name="lmt"></a></p>
<h2 id="log-message-template">Log message template</h2>
<!-- Review, Each log API uses a message template. -->
<p>Each log API uses a message template. The message template can contain placeholders for which arguments are provided. Use names for the placeholders, not numbers.</p>
<pre><code class="lang-csharp" highlight-lines="4,10">[HttpGet("{id}")]
public async Task&lt;ActionResult&lt;TodoItemDTO&gt;&gt; GetTodoItem(long id)
{
    _logger.LogInformation(MyLogEvents.GetItem, "Getting item {Id}", id);

    var todoItem = await _context.TodoItems.FindAsync(id);

    if (todoItem == null)
    {
        _logger.LogWarning(MyLogEvents.GetItemNotFound, "Get({Id}) NOT FOUND", id);
        return NotFound();
    }

    return ItemToDTO(todoItem);
}
</code></pre>
<p>The <em>order of the parameters</em>, not their placeholder names, determines which parameters are used to provide placeholder values in log messages. In the following code, the parameter names are out of sequence in the placeholders of the message template:</p>
<pre><code class="lang-csharp">var apples = 1;
var pears = 2;
var bananas = 3;

_logger.LogInformation("Parameters: {Pears}, {Bananas}, {Apples}", apples, pears, bananas);
</code></pre>
<p>However, the parameters are assigned to the placeholders in the order: <code>apples</code>, <code>pears</code>, <code>bananas</code>. The log message reflects the <em>order of the parameters</em>:</p>
<pre><code class="lang-text">Parameters: 1, 2, 3
</code></pre>
<p>This approach allows logging providers to implement <a href="https://github.com/NLog/NLog/wiki/How-to-use-structured-logging" data-linktype="external">semantic or structured logging</a>. The arguments themselves are passed to the logging system, not just the formatted message template. This enables logging providers to store the parameter values as fields. For example, consider the following logger method:</p>
<pre><code class="lang-csharp">_logger.LogInformation("Getting item {Id} at {RequestTime}", id, DateTime.Now);
</code></pre>
<p>For example, when logging to Azure Table Storage:</p>
<ul>
<li>Each Azure Table entity can have <code>ID</code> and <code>RequestTime</code> properties.</li>
<li>Tables with properties simplify queries on logged data. For example, a query can find all logs within a particular <code>RequestTime</code> range without having to parse the time out of the text message.</li>
</ul>
<h2 id="log-exceptions">Log exceptions</h2>
<p>The logger methods have overloads that take an exception parameter:</p>
<pre><code class="lang-csharp">[HttpGet("{id}")]
public IActionResult TestExp(int id)
{
    var routeInfo = ControllerContext.ToCtxString(id);
    _logger.LogInformation(MyLogEvents.TestItem, routeInfo);

    try
    {
        if (id == 3)
        {
            throw new Exception("Test exception");
        }
    }
    catch (Exception ex)
    {
        _logger.LogWarning(MyLogEvents.GetItemNotFound, ex, "TestExp({Id})", id);
        return NotFound();
    }

    return ControllerContext.MyDisplayRouteInfo();
}
</code></pre><p><a href="https://github.com/Rick-Anderson/RouteInfo/blob/master/Microsoft.Docs.Samples.RouteInfo/ControllerContextExtensions.cs" data-linktype="external">MyDisplayRouteInfo and ToCtxString</a> are provided by the <a href="https://www.nuget.org/packages/Rick.Docs.Samples.RouteInfo" data-linktype="external">Rick.Docs.Samples.RouteInfo</a> NuGet package. The methods display <code>Controller</code> and <code>Razor Page</code> route information.</p>
<p>Exception logging is provider-specific.</p>
<h3 id="default-log-level">Default log level</h3>
<p>If the default log level is not set, the default log level value is <code>Information</code>.</p>
<p>For example, consider the following web app:</p>
<ul>
<li>Created with the ASP.NET web app templates.</li>
<li><code>appsettings.json</code> and <code>appsettings.Development.json</code> deleted or renamed.</li>
</ul>
<p>With the preceding setup, navigating to the privacy or home page produces many <code>Trace</code>, <code>Debug</code>, and <code>Information</code> messages with <code>Microsoft</code> in the category name.</p>
<p>The following code sets the default log level when the default log level is not set in configuration:</p>
<pre><code class="lang-csharp">var builder = WebApplication.CreateBuilder();
builder.Logging.SetMinimumLevel(LogLevel.Warning);
</code></pre>
<p>Generally, log levels should be specified in configuration and not code.</p>
<h3 id="filter-function">Filter function</h3>
<p>A filter function is invoked for all providers and categories that don't have rules assigned to them by configuration or code:</p>
<pre><code class="lang-csharp">var builder = WebApplication.CreateBuilder();
builder.Logging.AddFilter((provider, category, logLevel) =&gt;
{
    if (provider.Contains("ConsoleLoggerProvider")
        &amp;&amp; category.Contains("Controller")
        &amp;&amp; logLevel &gt;= LogLevel.Information)
    {
        return true;
    }
    else if (provider.Contains("ConsoleLoggerProvider")
        &amp;&amp; category.Contains("Microsoft")
        &amp;&amp; logLevel &gt;= LogLevel.Information)
    {
        return true;
    }
    else
    {
        return false;
    }
});
</code></pre>
<p>The preceding code displays console logs when the category contains <code>Controller</code> or <code>Microsoft</code> and the log level is <code>Information</code> or higher.</p>
<p>Generally, log levels should be specified in configuration and not code.</p>
<h2 id="aspnet-core-categories">ASP.NET Core categories</h2>
<p>The following table contains some categories used by ASP.NET Core.</p>
<table>
<thead>
<tr>
<th>Category</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Microsoft.AspNetCore</code></td>
<td>General ASP.NET Core diagnostics.</td>
</tr>
<tr>
<td><code>Microsoft.AspNetCore.DataProtection</code></td>
<td>Which keys were considered, found, and used.</td>
</tr>
<tr>
<td><code>Microsoft.AspNetCore.HostFiltering</code></td>
<td>Hosts allowed.</td>
</tr>
<tr>
<td><code>Microsoft.AspNetCore.Hosting</code></td>
<td>How long HTTP requests took to complete and what time they started. Which hosting startup assemblies were loaded.</td>
</tr>
<tr>
<td><code>Microsoft.AspNetCore.Mvc</code></td>
<td>MVC and Razor diagnostics. Model binding, filter execution, view compilation, action selection.</td>
</tr>
<tr>
<td><code>Microsoft.AspNetCore.Routing</code></td>
<td>Route matching information.</td>
</tr>
<tr>
<td><code>Microsoft.AspNetCore.Server</code></td>
<td>Connection start, stop, and keep alive responses. HTTPS certificate information.</td>
</tr>
<tr>
<td><code>Microsoft.AspNetCore.StaticFiles</code></td>
<td>Files served.</td>
</tr>
</tbody>
</table>
<p>To view more categories in the console window, set <strong><code>appsettings.Development.json</code></strong> to the following:</p>
<pre><code class="lang-json">{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft": "Trace",
      "Microsoft.Hosting.Lifetime": "Information"
    }
  }
}
</code></pre><!-- Review: What other providers support scopes? Console is not generally used in staging/production  -->
<p>For a list of Entity Framework categories, see <a href="https://learn.microsoft.com/en-us/ef/core/logging-events-diagnostics/simple-logging#message-categories" data-linktype="absolute-path">EF Message categories</a>.</p>
<p><a name="logscopes"></a></p>
<h2 id="log-scopes">Log scopes</h2>
<p>A <em>scope</em> can group a set of logical operations. This grouping can be used to attach the same data to each log that's created as part of a set. For example, every log created as part of processing a transaction can include the transaction ID.</p>
<p>A scope:</p>
<ul>
<li>Is an <a href="https://learn.microsoft.com/en-us/dotnet/api/system.idisposable" class="no-loc" data-linktype="absolute-path">IDisposable</a> type that's returned by the <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.ilogger.beginscope" class="no-loc" data-linktype="absolute-path">BeginScope</a> method.</li>
<li>Lasts until it's disposed.</li>
</ul>
<p>The following providers support scopes:</p>
<ul>
<li><code>Console</code></li>
<li><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.azureappservices.batchingloggeroptions.includescopes#microsoft-extensions-logging-azureappservices-batchingloggeroptions-includescopes" data-linktype="absolute-path"><code>AzureAppServicesFile</code> and <code>AzureAppServicesBlob</code></a></li>
</ul>
<p>Use a scope by wrapping logger calls in a <code>using</code> block:</p>
<pre><code class="lang-csharp">[HttpGet("{id}")]
public async Task&lt;ActionResult&lt;TodoItemDTO&gt;&gt; GetTodoItem(long id)
{
    TodoItem todoItem;
    var transactionId = Guid.NewGuid().ToString();
    using (_logger.BeginScope(new List&lt;KeyValuePair&lt;string, object&gt;&gt;
        {
            new KeyValuePair&lt;string, object&gt;("TransactionId", transactionId),
        }))
    {
        _logger.LogInformation(MyLogEvents.GetItem, "Getting item {Id}", id);

        todoItem = await _context.TodoItems.FindAsync(id);

        if (todoItem == null)
        {
            _logger.LogWarning(MyLogEvents.GetItemNotFound, 
                "Get({Id}) NOT FOUND", id);
            return NotFound();
        }
    }

    return ItemToDTO(todoItem);
}
</code></pre>
<p><a name="bilp"></a></p>
<h2 id="built-in-logging-providers">Built-in logging providers</h2>
<p>ASP.NET Core includes the following logging providers as part of the shared framework:</p>
<ul>
<li><a href="#console" data-linktype="self-bookmark"><code>Console</code></a></li>
<li><a href="#debug" data-linktype="self-bookmark"><code>Debug</code></a></li>
<li><a href="#event-source" data-linktype="self-bookmark"><code>EventSource</code></a></li>
<li><a href="#welog" data-linktype="self-bookmark"><code>EventLog</code></a></li>
</ul>
<p>The following logging providers are shipped by Microsoft, but not as part of the
shared framework. They must be installed as additional nuget.</p>
<ul>
<li><a href="#azure-app-service" data-linktype="self-bookmark"><code>AzureAppServicesFile</code> and <code>AzureAppServicesBlob</code></a></li>
<li><a href="#azure-application-insights" data-linktype="self-bookmark"><code>ApplicationInsights</code></a></li>
</ul>
<p>ASP.NET Core doesn't include a logging provider for writing logs to files. To write logs to files from an ASP.NET Core app, consider using a <a href="#third-party-logging-providers" data-linktype="self-bookmark">third-party logging provider</a>.</p>
<p>For information on <code>stdout</code> and debug logging with the ASP.NET Core Module, see <a href="https://learn.microsoft.com/en-us/aspnet/core/test/troubleshoot-azure-iis?view=aspnetcore-9.0" data-linktype="relative-path">Troubleshoot ASP.NET Core on Azure App Service and IIS</a> and <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0#log-creation-and-redirection" data-linktype="relative-path">ASP.NET Core Module (ANCM) for IIS</a>.</p>
<h3 id="console">Console</h3>
<p>The <code>Console</code> provider logs output to the console. For more information on viewing <code>Console</code> logs in development, see <a href="#dnrvs" data-linktype="self-bookmark">Logging output from dotnet run and Visual Studio</a>.</p>
<h3 id="debug">Debug</h3>
<p>The <code>Debug</code> provider writes log output by using the <a href="https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.debug" class="no-loc" data-linktype="absolute-path">System.Diagnostics.Debug</a> class. Calls to <code>System.Diagnostics.Debug.WriteLine</code> write to the <code>Debug</code> provider.</p>
<p>On Linux, the <code>Debug</code> provider log location is distribution-dependent and may be one of the following:</p>
<ul>
<li><code>/var/log/message</code></li>
<li><code>/var/log/syslog</code></li>
</ul>
<h3 id="event-source">Event Source</h3>
<p>The <code>EventSource</code> provider writes to a cross-platform event source with the name <code>Microsoft-Extensions-Logging</code>. On Windows, the provider uses <a href="https://learn.microsoft.com/en-us/windows/win32/etw/event-tracing-portal" data-linktype="absolute-path">ETW</a>.</p>
<h4 id="dotnet-trace-tooling">dotnet-trace tooling</h4>
<p>The <a href="https://learn.microsoft.com/en-us/dotnet/core/diagnostics/dotnet-trace" data-linktype="absolute-path"><code>dotnet-trace</code></a> tool is a cross-platform CLI global tool that enables the collection of .NET traces of a running process. The tool collects <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.eventsource" class="no-loc" data-linktype="absolute-path">Microsoft.Extensions.Logging.EventSource</a> provider data using a <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.eventsource.loggingeventsource" class="no-loc" data-linktype="absolute-path">LoggingEventSource</a>.</p>
<p>For installation instructions, see <a href="https://learn.microsoft.com/en-us/dotnet/core/diagnostics/dotnet-trace" data-linktype="absolute-path"><code>dotnet-trace</code></a>.</p>
<p>Use the <code>dotnet-trace</code> tooling to collect a trace from an app:</p>
<ol>
<li><p>Run the app with the <code>dotnet run</code> command.</p>
</li>
<li><p>Determine the process identifier (PID) of the .NET app:</p>
<pre><code class="lang-dotnetcli">dotnet-trace ps
</code></pre>
<p>Find the PID for the process that has the same name as the app's assembly.</p>
</li>
<li><p>Execute the <code>dotnet-trace</code> command.</p>
<p>General command syntax:</p>
<pre><code class="lang-dotnetcli">dotnet-trace collect -p {PID} 
    --providers Microsoft-Extensions-Logging:{Keyword}:{Provider Level}
        :FilterSpecs=\"
            {Logger Category 1}:{Category Level 1};
            {Logger Category 2}:{Category Level 2};
            ...
            {Logger Category N}:{Category Level N}\"
</code></pre>
<p>When using a PowerShell command shell, enclose the <code>--providers</code> value in single quotes (<code>'</code>):</p>
<pre><code class="lang-dotnetcli">dotnet-trace collect -p {PID} 
    --providers 'Microsoft-Extensions-Logging:{Keyword}:{Provider Level}
        :FilterSpecs=\"
            {Logger Category 1}:{Category Level 1};
            {Logger Category 2}:{Category Level 2};
            ...
            {Logger Category N}:{Category Level N}\"'
</code></pre>
<p>On non-Windows platforms, add the <code>-f speedscope</code> option to change the format of the output trace file to <code>speedscope</code>.</p>
<p>The following table defines the Keyword:</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Keyword</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">1</td>
<td>Log meta events about the <code>LoggingEventSource</code>. Doesn't log events from <code>ILogger</code>.</td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td>Turns on the <code>Message</code> event when <code>ILogger.Log()</code> is called. Provides information in a programmatic (not formatted) way.</td>
</tr>
<tr>
<td style="text-align: center;">4</td>
<td>Turns on the <code>FormatMessage</code> event when <code>ILogger.Log()</code> is called. Provides the formatted string version of the information.</td>
</tr>
<tr>
<td style="text-align: center;">8</td>
<td>Turns on the <code>MessageJson</code> event when <code>ILogger.Log()</code> is called. Provides a JSON representation of the arguments.</td>
</tr>
</tbody>
</table>
<p>The following table lists the provider levels:</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Provider Level</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">0</td>
<td><code>LogAlways</code></td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td><code>Critical</code></td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td><code>Error</code></td>
</tr>
<tr>
<td style="text-align: center;">3</td>
<td><code>Warning</code></td>
</tr>
<tr>
<td style="text-align: center;">4</td>
<td><code>Informational</code></td>
</tr>
<tr>
<td style="text-align: center;">5</td>
<td><code>Verbose</code></td>
</tr>
</tbody>
</table>
<p>The parsing for a category level can be either a string or a number:</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Category named value</th>
<th>Numeric value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><code>Trace</code></td>
<td>0</td>
</tr>
<tr>
<td style="text-align: center;"><code>Debug</code></td>
<td>1</td>
</tr>
<tr>
<td style="text-align: center;"><code>Information</code></td>
<td>2</td>
</tr>
<tr>
<td style="text-align: center;"><code>Warning</code></td>
<td>3</td>
</tr>
<tr>
<td style="text-align: center;"><code>Error</code></td>
<td>4</td>
</tr>
<tr>
<td style="text-align: center;"><code>Critical</code></td>
<td>5</td>
</tr>
</tbody>
</table>
<p>The provider level and category level:</p>
<ul>
<li>Are in reverse order.</li>
<li>The string constants aren't all identical.</li>
</ul>
<p>If no <code>FilterSpecs</code> are specified then the <code>EventSourceLogger</code> implementation attempts to convert the provider level to a category level and applies it to all categories.</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Provider Level</th>
<th>Category Level</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><code>Verbose</code>(5)</td>
<td><code>Debug</code>(1)</td>
</tr>
<tr>
<td style="text-align: center;"><code>Informational</code>(4)</td>
<td><code>Information</code>(2)</td>
</tr>
<tr>
<td style="text-align: center;"><code>Warning</code>(3)</td>
<td><code>Warning</code>(3)</td>
</tr>
<tr>
<td style="text-align: center;"><code>Error</code>(2)</td>
<td><code>Error</code>(4)</td>
</tr>
<tr>
<td style="text-align: center;"><code>Critical</code>(1)</td>
<td><code>Critical</code>(5)</td>
</tr>
</tbody>
</table>
<p>If <code>FilterSpecs</code> are provided, any category that is included in the list uses the category level encoded there, all other categories are filtered out.</p>
<p>The following examples assume:</p>
<ul>
<li>An app is running and calling <code>logger.LogDebug("12345")</code>.</li>
<li>The process ID (PID) has been set via <code>set PID=12345</code>, where <code>12345</code> is the actual PID.</li>
</ul>
<p>Consider the following command:</p>
<pre><code class="lang-dotnetcli">dotnet-trace collect -p %PID% --providers Microsoft-Extensions-Logging:4:5
</code></pre>
<p>The preceding command:</p>
<ul>
<li>Captures debug messages.</li>
<li>Doesn't apply a <code>FilterSpecs</code>.</li>
<li>Specifies level 5 which maps category Debug.</li>
</ul>
<p>Consider the following command:</p>
<pre><code class="lang-dotnetcli">dotnet-trace collect -p %PID%  --providers Microsoft-Extensions-Logging:4:5:\"FilterSpecs=*:5\"
</code></pre>
<p>The preceding command:</p>
<ul>
<li>Doesn't capture debug messages because the category level 5 is <code>Critical</code>.</li>
<li>Provides a <code>FilterSpecs</code>.</li>
</ul>
<p>The following command captures debug messages because category level 1 specifies <code>Debug</code>.</p>
<pre><code class="lang-dotnetcli">dotnet-trace collect -p %PID%  --providers Microsoft-Extensions-Logging:4:5:\"FilterSpecs=*:1\"
</code></pre>
<p>The following command captures debug messages because category specifies <code>Debug</code>.</p>
<pre><code class="lang-dotnetcli">dotnet-trace collect -p %PID%  --providers Microsoft-Extensions-Logging:4:5:\"FilterSpecs=*:Debug\"
</code></pre>
<p><code>FilterSpecs</code> entries for <code>{Logger Category}</code> and <code>{Category Level}</code> represent additional log filtering conditions. Separate <code>FilterSpecs</code> entries with the <code>;</code> semicolon character.</p>
<p>Example using a Windows command shell:</p>
<pre><code class="lang-dotnetcli">dotnet-trace collect -p %PID% --providers Microsoft-Extensions-Logging:4:2:FilterSpecs=\"Microsoft.AspNetCore.Hosting*:4\"
</code></pre>
<p>The preceding command activates:</p>
<ul>
<li>The Event Source logger to produce formatted strings (<code>4</code>) for errors (<code>2</code>).</li>
<li><code>Microsoft.AspNetCore.Hosting</code> logging at the <code>Informational</code> logging level (<code>4</code>).</li>
</ul>
</li>
<li><p>Stop the <code>dotnet-trace</code> tooling by pressing the Enter key or <kbd>Ctrl</kbd>+<kbd>C</kbd>.</p>
<p>The trace is saved with the name <code>trace.nettrace</code> in the folder where the <code>dotnet-trace</code> command is executed.</p>
</li>
<li><p>Open the trace with <a href="#perfview" data-linktype="self-bookmark">Perfview</a>. Open the <code>trace.nettrace</code> file and explore the trace events.</p>
</li>
</ol>
<p>If the app doesn't build the host with <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.webapplication.createbuilder" class="no-loc" data-linktype="absolute-path">WebApplication.CreateBuilder</a>, add the Event Source provider to the app's logging configuration.</p>
<p>For more information, see:</p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/dotnet/core/diagnostics/dotnet-trace" data-linktype="absolute-path">Trace for performance analysis utility (<code>dotnet-trace</code>)</a> (.NET documentation)</li>
<li><a href="https://github.com/dotnet/diagnostics/blob/main/documentation/dotnet-trace-instructions.md" data-linktype="external">Trace for performance analysis utility (<code>dotnet-trace</code>)</a> (dotnet/diagnostics GitHub repository documentation)</li>
<li><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.eventsource.loggingeventsource" class="no-loc" data-linktype="absolute-path">LoggingEventSource</a></li>
<li><a href="https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.tracing.eventlevel" class="no-loc" data-linktype="absolute-path">EventLevel</a></li>
<li><a href="#perfview" data-linktype="self-bookmark">Perfview</a>: Useful for viewing Event Source traces.</li>
</ul>
<h4 id="perfview">Perfview</h4>
<p>Use the <a href="https://github.com/Microsoft/perfview" data-linktype="external">PerfView utility</a> to collect and view logs. There are other tools for viewing ETW logs, but PerfView provides the best experience for working with the ETW events emitted by ASP.NET Core.</p>
<p>To configure PerfView for collecting events logged by this provider, add the string <code>*Microsoft-Extensions-Logging</code> to the <strong>Additional Providers</strong> list. Don't miss the <code>*</code> at the start of the string.</p>
<p><a name="welog"></a></p>
<h3 id="windows-eventlog">Windows EventLog</h3>
<p>The <code>EventLog</code> provider sends log output to the Windows Event Log. Unlike the other providers, the <code>EventLog</code> provider does <em><strong>not</strong></em> inherit the default non-provider settings. If <code>EventLog</code> log settings aren't specified, they default to <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel#microsoft-extensions-logging-loglevel-warning" class="no-loc" data-linktype="absolute-path">LogLevel.Warning</a>.</p>
<p>To log events lower than <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel#microsoft-extensions-logging-loglevel-warning" class="no-loc" data-linktype="absolute-path">LogLevel.Warning</a>, explicitly set the log level. The following example sets the Event Log default log level to <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel#microsoft-extensions-logging-loglevel-information" class="no-loc" data-linktype="absolute-path">LogLevel.Information</a>:</p>
<pre><code class="lang-json">"Logging": {
  "EventLog": {
    "LogLevel": {
      "Default": "Information"
    }
  }
}
</code></pre>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.eventloggerfactoryextensions.addeventlog" class="no-loc" data-linktype="absolute-path">AddEventLog</a> overloads can pass in <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.eventlog.eventlogsettings" class="no-loc" data-linktype="absolute-path">EventLogSettings</a>. If <code>null</code> or not specified, the following default settings are used:</p>
<ul>
<li><code>LogName</code>: "Application"</li>
<li><code>SourceName</code>: ".NET Runtime"</li>
<li><code>MachineName</code>: The local machine name is used.</li>
</ul>
<p>The following code changes the <code>SourceName</code> from the default value of <code>".NET Runtime"</code> to <code>MyLogs</code>:</p>
<pre><code class="lang-csharp">
var builder = WebApplication.CreateBuilder();
builder.Logging.AddEventLog(eventLogSettings =&gt;
{
    eventLogSettings.SourceName = "MyLogs";
});
</code></pre><h3 id="azure-app-service">Azure App Service</h3>
<p>The <a href="https://www.nuget.org/packages/Microsoft.Extensions.Logging.AzureAppServices" data-linktype="external"><code>Microsoft.Extensions.Logging.AzureAppServices</code></a> provider package writes logs to text files in an Azure App Service app's file system and to <a href="https://learn.microsoft.com/en-us/azure/storage/blobs/storage-quickstart-blobs-dotnet#what-is-blob-storage" data-linktype="absolute-path">blob storage</a> in an Azure Storage account.</p>
<p>The provider package isn't included in the shared framework. To use the provider, add the provider package to the project.</p>
<p>To configure provider settings, use <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.azureappservices.azurefileloggeroptions" class="no-loc" data-linktype="absolute-path">AzureFileLoggerOptions</a> and <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.azureappservices.azureblobloggeroptions" class="no-loc" data-linktype="absolute-path">AzureBlobLoggerOptions</a>, as shown in the following example:</p>
<pre><code class="lang-csharp">using Microsoft.Extensions.Logging.AzureAppServices;

var builder = WebApplication.CreateBuilder();
builder.Logging.AddAzureWebAppDiagnostics();
builder.Services.Configure&lt;AzureFileLoggerOptions&gt;(options =&gt;
{
    options.FileName = "azure-diagnostics-";
    options.FileSizeLimit = 50 * 1024;
    options.RetainedFileCountLimit = 5;
});
builder.Services.Configure&lt;AzureBlobLoggerOptions&gt;(options =&gt;
{
    options.BlobName = "log.txt";
});
</code></pre>
<p>When deployed to Azure App Service, the app uses the settings in the <a href="https://learn.microsoft.com/en-us/azure/app-service/troubleshoot-diagnostic-logs" data-linktype="absolute-path">App Service logs</a> section of the <strong>App Service</strong> page of the Azure portal. When the following settings are updated, the changes take effect immediately without requiring a restart or redeployment of the app.</p>
<ul>
<li><strong>Application Logging (Filesystem)</strong></li>
<li><strong>Application Logging (Blob)</strong></li>
</ul>
<p>The default location for log files is in the <code>D:\\home\\LogFiles\\Application</code> folder, and the default file name is <code>diagnostics-yyyymmdd.txt</code>. The default file size limit is 10 MB, and the default maximum number of files retained is 2. The default blob name is <code>{app-name}{timestamp}/yyyy/mm/dd/hh/{guid}-applicationLog.txt</code>.</p>
<p>This provider only logs when the project runs in the Azure environment.</p>
<h4 id="azure-log-streaming">Azure log streaming</h4>
<p>Azure log streaming supports viewing log activity in real time from:</p>
<ul>
<li>The app server</li>
<li>The web server</li>
<li>Failed request tracing</li>
</ul>
<p>To configure Azure log streaming:</p>
<ul>
<li>Navigate to the <strong>App Service logs</strong> page from the app's portal page.</li>
<li>Set <strong>Application Logging (Filesystem)</strong> to <strong>On</strong>.</li>
<li>Choose the log <strong>Level</strong>. This setting only applies to Azure log streaming.</li>
</ul>
<p>Navigate to the <strong>Log Stream</strong> page to view logs. The logged messages are logged with the <code>ILogger</code> interface.</p>
<h3 id="azure-application-insights">Azure Application Insights</h3>
<p>The <a href="https://www.nuget.org/packages/Microsoft.Extensions.Logging.ApplicationInsights" data-linktype="external"><code>Microsoft.Extensions.Logging.ApplicationInsights</code></a> provider package writes logs to <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/app/cloudservices" data-linktype="absolute-path">Azure Application Insights</a>. Application Insights is a service that monitors a web app and provides tools for querying and analyzing the telemetry data. If you use this provider, you can query and analyze your logs by using the Application Insights tools.</p>
<p>The logging provider is included as a dependency of <a href="https://www.nuget.org/packages/Microsoft.ApplicationInsights.AspNetCore" data-linktype="external"><code>Microsoft.ApplicationInsights.AspNetCore</code></a>, which is the package that provides all available telemetry for ASP.NET Core. If you use this package, you don't have to install the provider package.</p>
<p>The <a href="https://www.nuget.org/packages/Microsoft.ApplicationInsights.Web" data-linktype="external"><code>Microsoft.ApplicationInsights.Web</code></a> package is for ASP.NET 4.x, not ASP.NET Core.</p>
<p>For more information, see the following resources:</p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/application-insights/app-insights-overview" data-linktype="absolute-path">Application Insights overview</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/azure-monitor/app/asp-net-core" data-linktype="absolute-path">Application Insights for ASP.NET Core applications</a>: Start here if you want to implement the full range of Application Insights telemetry along with logging.</li>
<li><a href="https://learn.microsoft.com/en-us/azure/azure-monitor/app/ilogger" data-linktype="absolute-path">ApplicationInsightsLoggerProvider for .NET ILogger logs</a>: Start here if you want to implement the logging provider without the rest of Application Insights telemetry.</li>
<li><a href="https://learn.microsoft.com/en-us/azure/azure-monitor/app/asp-net-trace-logs" data-linktype="absolute-path">Application Insights logging adapters</a></li>
<li><a href="https://learn.microsoft.com/en-us/training/modules/instrument-web-app-code-with-application-insights" data-linktype="absolute-path">Install, configure, and initialize the Application Insights SDK</a> interactive tutorial.</li>
</ul>
<h2 id="third-party-logging-providers">Third-party logging providers</h2>
<p>Third-party logging frameworks that work with ASP.NET Core:</p>
<ul>
<li><a href="https://elmah.io/" data-linktype="external">elmah.io</a> (<a href="https://github.com/elmahio/Elmah.Io.Extensions.Logging" data-linktype="external">GitHub repo</a>)</li>
<li><a href="https://go2docs.graylog.org/5-0/getting_in_log_data/gelf.html" data-linktype="external">Gelf</a> (<a href="https://github.com/mattwcole/gelf-extensions-logging" data-linktype="external">GitHub repo</a>)</li>
<li><a href="https://jsnlog.com/" data-linktype="external">JSNLog</a> (<a href="https://github.com/mperdeck/jsnlog" data-linktype="external">GitHub repo</a>)</li>
<li><a href="https://kisslog.net/" data-linktype="external">KissLog.net</a> (<a href="https://github.com/catalingavan/KissLog-net" data-linktype="external">GitHub repo</a>)</li>
<li><a href="https://logging.apache.org/log4net/" data-linktype="external">Log4Net</a> (<a href="https://github.com/huorswords/Microsoft.Extensions.Logging.Log4Net.AspNetCore" data-linktype="external">GitHub repo</a>)</li>
<li><a href="https://nlog-project.org/" data-linktype="external">NLog</a> (<a href="https://github.com/NLog/NLog.Extensions.Logging" data-linktype="external">GitHub repo</a>)</li>
<li><a href="https://www.nuget.org/packages/InvertedSoftware.PLogger.Core/" data-linktype="external">PLogger</a> (<a href="https://github.com/invertedsoftware/InvertedSoftware.PLogger.Core" data-linktype="external">GitHub repo</a>)</li>
<li><a href="https://sentry.io/welcome/" data-linktype="external">Sentry</a> (<a href="https://github.com/getsentry/sentry-dotnet" data-linktype="external">GitHub repo</a>)</li>
<li><a href="https://serilog.net/" data-linktype="external">Serilog</a> (<a href="https://github.com/serilog/serilog-aspnetcore" data-linktype="external">GitHub repo</a>)</li>
<li><a href="https://cloud.google.com/dotnet/docs/stackdriver#logging" data-linktype="external">Stackdriver</a> (<a href="https://github.com/googleapis/google-cloud-dotnet" data-linktype="external">Github repo</a>)</li>
</ul>
<p>Some third-party frameworks can perform <a href="https://softwareengineering.stackexchange.com/questions/312197/benefits-of-structured-logging-vs-basic-logging" data-linktype="external">semantic logging, also known as structured logging</a>.</p>
<p>Using a third-party framework is similar to using one of the built-in providers:</p>
<ol>
<li>Add a NuGet package to your project.</li>
<li>Call an <code>ILoggerFactory</code> extension method provided by the logging framework.</li>
</ol>
<p>For more information, see each provider's documentation. Third-party logging providers aren't supported by Microsoft.</p>
<h3 id="no-asynchronous-logger-methods">No asynchronous logger methods</h3>
<p>Logging should be so fast that it isn't worth the performance cost of asynchronous code. If a logging data store is slow, don't write to it directly. Consider writing the log messages to a fast store initially, then moving them to the slow store later. For example, when logging to SQL Server, don't do so directly in a <code>Log</code> method, since the <code>Log</code> methods are synchronous. Instead, synchronously add log messages to an in-memory queue and have a background worker pull the messages out of the queue to do the asynchronous work of pushing data to SQL Server. For more information, see <a href="https://github.com/dotnet/AspNetCore.Docs/issues/11801" data-linktype="external">Guidance on how to log to a message queue for slow data stores (dotnet/AspNetCore.Docs #11801)</a>.</p>
<p><a name="clib"></a></p>
<h2 id="change-log-levels-in-a-running-app">Change log levels in a running app</h2>
<p>The Logging API doesn't include a scenario to change log levels while an app is running. However, some configuration providers are capable of reloading configuration, which takes immediate effect on logging configuration. For example, the <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/configuration/?view=aspnetcore-9.0#file-configuration-provider" data-linktype="relative-path">File Configuration Provider</a>, reloads logging configuration by default. If configuration is changed in code while an app is running, the app can call <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.configuration.iconfigurationroot.reload" class="no-loc" data-linktype="absolute-path">IConfigurationRoot.Reload</a> to update the app's logging configuration.</p>
<h2 id="ilogger-and-iloggerfactory">ILogger and ILoggerFactory</h2>
<p>The <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.ilogger-1" class="no-loc" data-linktype="absolute-path">ILogger&lt;TCategoryName&gt;</a> and <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.iloggerfactory" class="no-loc" data-linktype="absolute-path">ILoggerFactory</a> interfaces and implementations are included in the .NET SDK. They are also available in the following NuGet packages:</p>
<ul>
<li>The interfaces are in <a href="https://www.nuget.org/packages/Microsoft.Extensions.Logging.Abstractions/" data-linktype="external"><code>Microsoft.Extensions.Logging.Abstractions</code></a>.</li>
<li>The default implementations are in <a href="https://www.nuget.org/packages/microsoft.extensions.logging/" data-linktype="external"><code>Microsoft.Extensions.Logging</code></a>.</li>
</ul>
<!-- review. Why would you want to hard code filtering rules in code? -->
<p><a name="fric"></a></p>
<h2 id="apply-log-filter-rules-in-code">Apply log filter rules in code</h2>
<p>The preferred approach for setting log filter rules is by using <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/configuration/?view=aspnetcore-9.0" data-linktype="relative-path">Configuration</a>.</p>
<p>The following example shows how to register filter rules in code:</p>
<pre><code class="lang-csharp">using Microsoft.Extensions.Logging.Console;
using Microsoft.Extensions.Logging.Debug;

var builder = WebApplication.CreateBuilder();
builder.Logging.AddFilter("System", LogLevel.Debug);
builder.Logging.AddFilter&lt;DebugLoggerProvider&gt;("Microsoft", LogLevel.Information);
builder.Logging.AddFilter&lt;ConsoleLoggerProvider&gt;("Microsoft", LogLevel.Trace);
</code></pre>
<p><code>logging.AddFilter("System", LogLevel.Debug)</code> specifies the <code>System</code> category and log level <code>Debug</code>. The filter is applied to all providers because a specific provider was not configured.</p>
<p><code>AddFilter&lt;DebugLoggerProvider&gt;("Microsoft", LogLevel.Information)</code> specifies:</p>
<ul>
<li>The <code>Debug</code> logging provider.</li>
<li>Log level <code>Information</code> and higher.</li>
<li>All categories starting with <code>"Microsoft"</code>.</li>
</ul>
<h2 id="automatically-log-scope-with-spanid-traceid-parentid-baggage-and-tags">Automatically log scope with <code>SpanId</code>, <code>TraceId</code>, <code>ParentId</code>, <code>Baggage</code>, and <code>Tags</code>.</h2>
<p>The logging libraries implicitly create a scope object with <code>SpanId</code>, <code>TraceId</code>, <code>ParentId</code>,<code>Baggage</code>, and <code>Tags</code>. This behavior is configured via <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loggerfactoryoptions.activitytrackingoptions#microsoft-extensions-logging-loggerfactoryoptions-activitytrackingoptions" class="no-loc" data-linktype="absolute-path">ActivityTrackingOptions</a>.</p>
<pre><code class="lang-csharp">var builder = WebApplication.CreateBuilder(args);

builder.Logging.AddSimpleConsole(options =&gt;
{
    options.IncludeScopes = true;
});

builder.Logging.Configure(options =&gt;
{
    options.ActivityTrackingOptions = ActivityTrackingOptions.SpanId
                                       | ActivityTrackingOptions.TraceId
                                       | ActivityTrackingOptions.ParentId
                                       | ActivityTrackingOptions.Baggage
                                       | ActivityTrackingOptions.Tags;
});
var app = builder.Build();

app.MapGet("/", () =&gt; "Hello World!");

app.Run();
</code></pre>
<p>If the <code>traceparent</code> http request header is set, the <code>ParentId</code> in the log scope shows the W3C <code>parent-id</code> from in-bound <code>traceparent</code> header and the <code>SpanId</code> in the log scope shows the updated <code>parent-id</code> for the next out-bound step/span. For more information, see <a href="https://www.w3.org/TR/trace-context/#mutating-the-traceparent-field" data-linktype="external">Mutating the traceparent Field</a>.</p>
<h2 id="create-a-custom-logger">Create a custom logger</h2>
<p>To create a custom logger, see <a href="https://learn.microsoft.com/en-us/dotnet/core/extensions/custom-logging-provider" data-linktype="absolute-path">Implement a custom logging provider in .NET</a>.</p>
<!-- See https://github.com/dotnet/AspNetCore.Docs/pull/30282#issuecomment-1712135965
## LoggerFactory.Create
***NOTE:*** [LoggerFactory.Create](/dotnet/api/microsoft.extensions.logging.loggerfactory.create) Creates a new instance of <xref:Microsoft.Extensions.Logging.ILoggerFactory> that's configured using the provided `configure` delegate. The new instance of `ILoggerFactory` creates a new logging pipeline, different from the default logging pipeline. The new logging pipeline is not configured by the `Logging` section of `appsettings.json` or `appsettings.{ENVIRONMENT}.json`. For more information, see [Logging configuration](xref:fundamentals/logging/index#configure-logging).
-->
<h2 id="additional-resources">Additional resources</h2>
<ul>
<li><a href="https://andrewlock.net/exploring-dotnet-6-part-8-improving-logging-performance-with-source-generators/" data-linktype="external">Improving logging performance with source generators</a></li>
<li><a href="https://andrewlock.net/behind-logproperties-and-the-new-telemetry-logging-source-generator/" data-linktype="external">Behind <code>[LogProperties]</code> and the new telemetry logging source generator</a></li>
<li><a href="https://github.com/dotnet/runtime/tree/main/src/libraries/Microsoft.Extensions.Logging" data-linktype="external">Microsoft.Extensions.Logging source on GitHub</a></li>
<li><a href="https://github.com/dotnet/AspNetCore.Docs/tree/main/aspnetcore/fundamentals/logging/index/samples/6.x" data-linktype="external">View or download sample code</a> (<a href="../../overview553c.html?view=aspnetcore-9.0#how-to-download-a-sample" data-linktype="relative-path">how to download</a>).</li>
<li><a href="https://learn.microsoft.com/en-us/dotnet/core/extensions/high-performance-logging" data-linktype="absolute-path">High performance logging</a></li>
<li>Logging bugs should be created in the <a href="https://github.com/dotnet/runtime/issues" data-linktype="external"><code>dotnet/runtime</code></a> GitHub repository.</li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/blazor/fundamentals/logging?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Blazor logging</a></li>
</ul>
</div>
<div data-moniker="aspnetcore-3.1 aspnetcore-5.0">
<p>By <a href="https://twitter.com/serpent5" data-linktype="external">Kirk Larkin</a>, <a href="https://github.com/JuergenGutsch" data-linktype="external">Juergen Gutsch</a>, and <a href="https://twitter.com/RickAndMSFT" data-linktype="external">Rick Anderson</a></p>
<p>This topic describes logging in .NET as it applies to ASP.NET Core apps. For detailed information on logging in .NET, see <a href="https://learn.microsoft.com/en-us/dotnet/core/extensions/logging" data-linktype="absolute-path">Logging in .NET</a>. For more information on logging in Blazor apps, see <a href="https://learn.microsoft.com/en-us/aspnet/core/blazor/fundamentals/logging?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Blazor logging</a>.</p>
<p><a href="https://github.com/dotnet/AspNetCore.Docs/tree/main/aspnetcore/fundamentals/logging/index/samples/3.x" data-linktype="external">View or download sample code</a> (<a href="../../overview553c.html?view=aspnetcore-9.0#how-to-download-a-sample" data-linktype="relative-path">how to download</a>).</p>
<p><a name="lp"></a></p>
<h2 id="logging-providers">Logging providers</h2>
<p>Logging providers store logs, except for the <code>Console</code> provider which displays logs. For example, the Azure Application Insights provider stores logs in Azure Application Insights. Multiple providers can be enabled.</p>
<p>The default ASP.NET Core web app templates:</p>
<ul>
<li>Use the <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/host/generic-host?view=aspnetcore-9.0" data-linktype="relative-path">Generic Host</a>.</li>
<li>Call <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.hosting.host.createdefaultbuilder" class="no-loc" data-linktype="absolute-path">CreateDefaultBuilder</a>, which adds the following logging providers:
<ul>
<li><a href="#console" data-linktype="self-bookmark">Console</a></li>
<li><a href="#debug" data-linktype="self-bookmark">Debug</a></li>
<li><a href="#event-source" data-linktype="self-bookmark">EventSource</a></li>
<li><a href="#welog" data-linktype="self-bookmark">EventLog</a>: Windows only</li>
</ul>
</li>
</ul>
<pre><code class="lang-csharp" highlight-lines="9">public class Program
{
    public static void Main(string[] args)
    {
        CreateHostBuilder(args).Build().Run();
    }

    public static IHostBuilder CreateHostBuilder(string[] args) =&gt;
        Host.CreateDefaultBuilder(args)
            .ConfigureWebHostDefaults(webBuilder =&gt;
            {
                webBuilder.UseStartup&lt;Startup&gt;();
            });
}
</code></pre>
<p>The preceding code shows the <code>Program</code> class created with the ASP.NET Core web app templates. The next several sections provide samples based on the ASP.NET Core web app templates, which use the Generic Host. <a href="#nhca" data-linktype="self-bookmark">Non-host console apps</a> are discussed later in this document.</p>
<p>To override the default set of logging providers added by <code>Host.CreateDefaultBuilder</code>, call <code>ClearProviders</code> and add the required logging providers. For example, the following code:</p>
<ul>
<li>Calls <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loggingbuilderextensions.clearproviders" class="no-loc" data-linktype="absolute-path">ClearProviders</a> to remove all the <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.iloggerprovider" class="no-loc" data-linktype="absolute-path">ILoggerProvider</a> instances from the builder.</li>
<li>Adds the <a href="#console" data-linktype="self-bookmark">Console</a> logging provider.</li>
</ul>
<pre><code class="lang-csharp" highlight-lines="5-6">public static IHostBuilder CreateHostBuilder(string[] args) =&gt;
    Host.CreateDefaultBuilder(args)
        .ConfigureLogging(logging =&gt;
        {
            logging.ClearProviders();
            logging.AddConsole();
        })
        .ConfigureWebHostDefaults(webBuilder =&gt;
        {
            webBuilder.UseStartup&lt;Startup&gt;();
        });
</code></pre>
<p>For additional providers, see:</p>
<ul>
<li><a href="#bilp" data-linktype="self-bookmark">Built-in logging providers</a></li>
<li><a href="#third-party-logging-providers" data-linktype="self-bookmark">Third-party logging providers</a>.</li>
</ul>
<h2 id="create-logs">Create logs</h2>
<p>To create logs, use an <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.ilogger-1" class="no-loc" data-linktype="absolute-path">ILogger&lt;TCategoryName&gt;</a> object from <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/dependency-injection?view=aspnetcore-9.0" data-linktype="relative-path">dependency injection</a> (DI).</p>
<p>The following example:</p>
<ul>
<li>Creates a logger, <code>ILogger&lt;AboutModel&gt;</code>, which uses a log <em>category</em> of the fully qualified name of the type <code>AboutModel</code>. The log category is a string that is associated with each log.</li>
<li>Calls <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loggerextensions.loginformation" class="no-loc" data-linktype="absolute-path">LogInformation</a> to log at the <code>Information</code> level. The Log <em>level</em> indicates the severity of the logged event.</li>
</ul>
<pre><code class="lang-csharp" highlight-lines="5,14">public class AboutModel : PageModel
{
    private readonly ILogger _logger;

    public AboutModel(ILogger&lt;AboutModel&gt; logger)
    {
        _logger = logger;
    }
    public string Message { get; set; }

    public void OnGet()
    {
        Message = $"About page visited at {DateTime.UtcNow.ToLongTimeString()}";
        _logger.LogInformation(Message);
    }
}
</code></pre>
<p><a href="#log-level" data-linktype="self-bookmark">Levels</a> and <a href="#log-category" data-linktype="self-bookmark">categories</a> are explained in more detail later in this document.</p>
<p>For information on Blazor, see <a href="https://learn.microsoft.com/en-us/aspnet/core/blazor/fundamentals/logging?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Blazor logging</a>.</p>
<p><a href="#clms" data-linktype="self-bookmark">Create logs in Main and Startup</a> shows how to create logs in <code>Main</code> and <code>Startup</code>.</p>
<h2 id="configure-logging">Configure logging</h2>
<p>Logging configuration is commonly provided by the <code>Logging</code> section of <code>appsettings.{Environment}.json</code> files. The following <code>appsettings.Development.json</code> file is generated by the ASP.NET Core web app templates:</p>
<pre><code class="lang-json">{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft": "Warning",
      "Microsoft.Hosting.Lifetime": "Information"
    }
  }
}
</code></pre>
<p>In the preceding JSON:</p>
<ul>
<li>The <code>"Default"</code>, <code>"Microsoft"</code>, and <code>"Microsoft.Hosting.Lifetime"</code> categories are specified.</li>
<li>The <code>"Microsoft"</code> category applies to all categories that start with <code>"Microsoft"</code>. For example, this setting applies to the <code>"Microsoft.AspNetCore.Routing.EndpointMiddleware"</code> category.</li>
<li>The <code>"Microsoft"</code> category logs at log level <code>Warning</code> and higher.</li>
<li>The <code>"Microsoft.Hosting.Lifetime"</code> category is more specific than the <code>"Microsoft"</code> category, so the <code>"Microsoft.Hosting.Lifetime"</code> category logs at log level "Information" and higher.</li>
<li>A specific log provider is not specified, so <code>LogLevel</code> applies to all the enabled logging providers except for the <a href="#welog" data-linktype="self-bookmark">Windows EventLog</a>.</li>
</ul>
<p>The <code>Logging</code> property can have <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel" class="no-loc" data-linktype="absolute-path">LogLevel</a> and log provider properties. The <code>LogLevel</code> specifies the minimum <a href="#log-level" data-linktype="self-bookmark">level</a> to log for selected categories. In the preceding JSON, <code>Information</code> and <code>Warning</code> log levels are specified. <code>LogLevel</code> indicates the severity of the log and ranges from 0 to 6:</p>
<p><code>Trace</code> = 0, <code>Debug</code> = 1, <code>Information</code> = 2, <code>Warning</code> = 3, <code>Error</code> = 4, <code>Critical</code> = 5, and <code>None</code> = 6.</p>
<p>When a <code>LogLevel</code> is specified, logging is enabled for messages at the specified level and higher. In the preceding JSON, the <code>Default</code> category is logged for <code>Information</code> and higher. For example, <code>Information</code>, <code>Warning</code>, <code>Error</code>, and <code>Critical</code> messages are logged. If no <code>LogLevel</code> is specified, logging defaults to the <code>Information</code> level. For more information, see <a href="#llvl" data-linktype="self-bookmark">Log levels</a>.</p>
<p>A provider property can specify a <code>LogLevel</code> property. <code>LogLevel</code> under a provider specifies levels to log for that provider, and overrides the non-provider log settings. Consider the following <code>appsettings.json</code> file:</p>
<pre><code class="lang-json">{
  "Logging": {
    "LogLevel": { // All providers, LogLevel applies to all the enabled providers.
      "Default": "Error", // Default logging, Error and higher.
      "Microsoft": "Warning" // All Microsoft* categories, Warning and higher.
    },
    "Debug": { // Debug provider.
      "LogLevel": {
        "Default": "Information", // Overrides preceding LogLevel:Default setting.
        "Microsoft.Hosting": "Trace" // Debug:Microsoft.Hosting category.
      }
    },
    "EventSource": { // EventSource provider
      "LogLevel": {
        "Default": "Warning" // All categories of EventSource provider.
      }
    }
  }
}
</code></pre>
<p>Settings in <code>Logging.{providername}.LogLevel</code> override settings in <code>Logging.LogLevel</code>. In the preceding JSON, the <code>Debug</code> provider's default log level is set to <code>Information</code>:</p>
<p><code>Logging:Debug:LogLevel:Default:Information</code></p>
<p>The preceding setting specifies the <code>Information</code> log level for every <code>Logging:Debug:</code> category except <code>Microsoft.Hosting</code>. When a specific category is listed, the specific category overrides the default category. In the preceding JSON, the <code>Logging:Debug:LogLevel</code> categories <code>"Microsoft.Hosting"</code> and <code>"Default"</code> override the settings in <code>Logging:LogLevel</code></p>
<p>The minimum log level can be specified for any of:</p>
<ul>
<li>Specific providers:  For example, <code>Logging:EventSource:LogLevel:Default:Information</code></li>
<li>Specific categories: For example, <code>Logging:LogLevel:Microsoft:Warning</code></li>
<li>All providers and all categories: <code>Logging:LogLevel:Default:Warning</code></li>
</ul>
<p>Any logs below the minimum level are <em><strong>not</strong></em>:</p>
<ul>
<li>Passed to the provider.</li>
<li>Logged or displayed.</li>
</ul>
<p>To suppress all logs, specify <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel" data-linktype="absolute-path">LogLevel.None</a>. <code>LogLevel.None</code> has a value of 6, which is higher than <code>LogLevel.Critical</code> (5).</p>
<p>If a provider supports <a href="#logscopes" data-linktype="self-bookmark">log scopes</a>, <code>IncludeScopes</code> indicates whether they're enabled. For more information, see <a href="#logscopes" data-linktype="self-bookmark">log scopes</a></p>
<p>The following <code>appsettings.json</code> file contains all the providers enabled by default:</p>
<pre><code class="lang-json">{
  "Logging": {
    "LogLevel": { // No provider, LogLevel applies to all the enabled providers.
      "Default": "Error",
      "Microsoft": "Warning",
      "Microsoft.Hosting.Lifetime": "Warning"
    },
    "Debug": { // Debug provider.
      "LogLevel": {
        "Default": "Information" // Overrides preceding LogLevel:Default setting.
      }
    },
    "Console": {
      "IncludeScopes": true,
      "LogLevel": {
        "Microsoft.AspNetCore.Mvc.Razor.Internal": "Warning",
        "Microsoft.AspNetCore.Mvc.Razor.Razor": "Debug",
        "Microsoft.AspNetCore.Mvc.Razor": "Error",
        "Default": "Information"
      }
    },
    "EventSource": {
      "LogLevel": {
        "Microsoft": "Information"
      }
    },
    "EventLog": {
      "LogLevel": {
        "Microsoft": "Information"
      }
    },
    "AzureAppServicesFile": {
      "IncludeScopes": true,
      "LogLevel": {
        "Default": "Warning"
      }
    },
    "AzureAppServicesBlob": {
      "IncludeScopes": true,
      "LogLevel": {
        "Microsoft": "Information"
      }
    },
    "ApplicationInsights": {
      "LogLevel": {
        "Default": "Information"
      }
    }
  }
}
</code></pre>
<p>In the preceding sample:</p>
<ul>
<li>The categories and levels are not suggested values. The sample is provided to show all the default providers.</li>
<li>Settings in <code>Logging.{providername}.LogLevel</code> override settings in <code>Logging.LogLevel</code>. For example, the level in <code>Debug.LogLevel.Default</code> overrides the level in <code>LogLevel.Default</code>.</li>
<li>Each default provider <em>alias</em> is used. Each provider defines an <em>alias</em> that can be used in configuration in place of the fully qualified type name. The built-in providers aliases are:
<ul>
<li>Console</li>
<li>Debug</li>
<li>EventSource</li>
<li>EventLog</li>
<li>AzureAppServicesFile</li>
<li>AzureAppServicesBlob</li>
<li>ApplicationInsights</li>
</ul>
</li>
</ul>
<h2 id="set-log-level-by-command-line-environment-variables-and-other-configuration">Set log level by command line, environment variables, and other configuration</h2>
<p>Log level can be set by any of the <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/configuration/?view=aspnetcore-9.0" data-linktype="relative-path">configuration providers</a>.</p>
<p>The <code>:</code> separator doesn't work with environment variable hierarchical keys on all platforms. For example, the <code>:</code> separator is not supported by <a href="https://linuxhint.com/bash-environment-variables/" data-linktype="external">Bash</a>. The double underscore, <code>__</code>, is:</p>
<ul>
<li>Supported by all platforms.</li>
<li>Automatically replaced by a colon, <code>:</code>.</li>
</ul>
<p>The following commands:</p>
<ul>
<li>Set the environment key <code>Logging:LogLevel:Microsoft</code> to a value of <code>Information</code> on Windows.</li>
<li>Test the settings when using an app created with the ASP.NET Core web application templates. The <code>dotnet run</code> command must be run in the project directory after using <code>set</code>.</li>
</ul>
<pre><code class="lang-dotnetcli">set Logging__LogLevel__Microsoft=Information
dotnet run
</code></pre>
<p>The preceding environment setting:</p>
<ul>
<li>Is only set in processes launched from the command window they were set in.</li>
<li>Isn't read by browsers launched with Visual Studio.</li>
</ul>
<p>The following <a href="https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/setx" data-linktype="absolute-path">setx</a> command also sets the environment key and value on Windows. Unlike <code>set</code>, <code>setx</code> settings are persisted. The <code>/M</code> switch sets the variable in the system environment. If <code>/M</code> isn't used, a user environment variable is set.</p>
<pre><code class="lang-console">setx Logging__LogLevel__Microsoft Information /M
</code></pre>
<p>Consider the following <code>appsettings.json</code> file:</p>
<pre><code class="lang-json">"Logging": {
    "Console": {
      "LogLevel": {
        "Microsoft.Hosting.Lifetime": "Trace"
      }
    }
}
</code></pre>
<p>The following command sets the preceding configuration in the environment:</p>
<pre><code class="lang-console">setx Logging__Console__LogLevel__Microsoft.Hosting.Lifetime Trace /M
</code></pre>
<p>On <a href="https://azure.microsoft.com/services/app-service/" data-linktype="external">Azure App Service</a>, select <strong>New application setting</strong> on the <strong>Settings &gt; Configuration</strong> page. Azure App Service application settings are:</p>
<ul>
<li>Encrypted at rest and transmitted over an encrypted channel.</li>
<li>Exposed as environment variables.</li>
</ul>
<p>For more information, see <a href="../../host-and-deploy/azure-apps/index553c.html?view=aspnetcore-9.0#override-app-configuration-using-the-azure-portal" data-linktype="relative-path">Azure Apps: Override app configuration using the Azure Portal</a>.</p>
<p>For more information on setting ASP.NET Core configuration values using environment variables, see <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/configuration/?view=aspnetcore-9.0#environment-variables" data-linktype="relative-path">environment variables</a>. For information on using other configuration sources, including the command line, Azure Key Vault, Azure App Configuration, other file formats, and more, see <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/configuration/?view=aspnetcore-9.0" data-linktype="relative-path">Configuration in ASP.NET Core</a>.</p>
<h2 id="how-filtering-rules-are-applied">How filtering rules are applied</h2>
<p>When an <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.ilogger-1" class="no-loc" data-linktype="absolute-path">ILogger&lt;TCategoryName&gt;</a> object is created, the <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.iloggerfactory" class="no-loc" data-linktype="absolute-path">ILoggerFactory</a> object selects a single rule per provider to apply to that logger. All messages written by an <code>ILogger</code> instance are filtered based on the selected rules. The most specific rule for each provider and category pair is selected from the available rules.</p>
<p>The following algorithm is used for each provider when an <code>ILogger</code> is created for a given category:</p>
<ul>
<li>Select all rules that match the provider or its alias. If no match is found, select all rules with an empty provider.</li>
<li>From the result of the preceding step, select rules with longest matching category prefix. If no match is found, select all rules that don't specify a category.</li>
<li>If multiple rules are selected, take the <strong>last</strong> one.</li>
<li>If no rules are selected, use <code>MinimumLevel</code>.</li>
</ul>
<p><a name="dnrvs"></a></p>
<h2 id="logging-output-from-dotnet-run-and-visual-studio">Logging output from dotnet run and Visual Studio</h2>
<p>Logs created with the <a href="#lp" data-linktype="self-bookmark">default logging providers</a> are displayed:</p>
<ul>
<li>In Visual Studio
<ul>
<li>In the Debug output window when debugging.</li>
<li>In the ASP.NET Core Web Server window.</li>
</ul>
</li>
<li>In the console window when the app is run with <code>dotnet run</code>.</li>
</ul>
<p>Logs that begin with "Microsoft" categories are from ASP.NET Core framework code. ASP.NET Core and application code use the same logging API and providers.</p>
<p><a name="lcat"></a></p>
<h2 id="log-category">Log category</h2>
<p>When an <code>ILogger</code> object is created, a <em>category</em> is specified. That category is included with each log message created by that instance of <code>ILogger</code>. The category string is arbitrary, but the convention is to use the class name. For example, in a controller the name might be <code>"TodoApi.Controllers.TodoController"</code>. The ASP.NET Core web apps use <code>ILogger&lt;T&gt;</code> to automatically get an <code>ILogger</code> instance that uses the fully qualified type name of <code>T</code> as the category:</p>
<pre><code class="lang-csharp">public class PrivacyModel : PageModel
{
    private readonly ILogger&lt;PrivacyModel&gt; _logger;

    public PrivacyModel(ILogger&lt;PrivacyModel&gt; logger)
    {
        _logger = logger;
    }

    public void OnGet()
    {
        _logger.LogInformation("GET Pages.PrivacyModel called.");
    }
}
</code></pre>
<p>To explicitly specify the category, call <code>ILoggerFactory.CreateLogger</code>:</p>
<pre><code class="lang-csharp">public class ContactModel : PageModel
{
    private readonly ILogger _logger;

    public ContactModel(ILoggerFactory logger)
    {
        _logger = logger.CreateLogger("TodoApi.Pages.ContactModel.MyCategory");
    }

    public void OnGet()
    {
        _logger.LogInformation("GET Pages.ContactModel called.");
    }
</code></pre>
<p>Calling <code>CreateLogger</code> with a fixed name can be useful when used in multiple methods so the events can be organized by category.</p>
<p><code>ILogger&lt;T&gt;</code> is equivalent to calling <code>CreateLogger</code> with the fully qualified type name of <code>T</code>.</p>
<p><a name="llvl"></a></p>
<h2 id="log-level">Log level</h2>
<p>The following table lists the <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel" class="no-loc" data-linktype="absolute-path">LogLevel</a> values, the convenience <code>Log{LogLevel}</code> extension method, and the suggested usage:</p>
<table>
<thead>
<tr>
<th>LogLevel</th>
<th>Value</th>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel" data-linktype="absolute-path">Trace</a></td>
<td>0</td>
<td><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loggerextensions.logtrace" class="no-loc" data-linktype="absolute-path">LogTrace</a></td>
<td>Contain the most detailed messages. These messages may contain sensitive app data. These messages are disabled by default and should <em><strong>not</strong></em> be enabled in production.</td>
</tr>
<tr>
<td><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel" data-linktype="absolute-path">Debug</a></td>
<td>1</td>
<td><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loggerextensions.logdebug" class="no-loc" data-linktype="absolute-path">LogDebug</a></td>
<td>For debugging and development. Use with caution in production due to the high volume.</td>
</tr>
<tr>
<td><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel" data-linktype="absolute-path">Information</a></td>
<td>2</td>
<td><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loggerextensions.loginformation" class="no-loc" data-linktype="absolute-path">LogInformation</a></td>
<td>Tracks the general flow of the app. May have long-term value.</td>
</tr>
<tr>
<td><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel" data-linktype="absolute-path">Warning</a></td>
<td>3</td>
<td><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loggerextensions.logwarning" class="no-loc" data-linktype="absolute-path">LogWarning</a></td>
<td>For abnormal or unexpected events. Typically includes errors or conditions that don't cause the app to fail.</td>
</tr>
<tr>
<td><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel" data-linktype="absolute-path">Error</a></td>
<td>4</td>
<td><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loggerextensions.logerror" class="no-loc" data-linktype="absolute-path">LogError</a></td>
<td>For errors and exceptions that cannot be handled. These messages indicate a failure in the current operation or request, not an app-wide failure.</td>
</tr>
<tr>
<td><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel" data-linktype="absolute-path">Critical</a></td>
<td>5</td>
<td><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loggerextensions.logcritical" class="no-loc" data-linktype="absolute-path">LogCritical</a></td>
<td>For failures that require immediate attention. Examples: data loss scenarios, out of disk space.</td>
</tr>
<tr>
<td><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel" data-linktype="absolute-path">None</a></td>
<td>6</td>
<td></td>
<td>Specifies that a logging category should not write any messages.</td>
</tr>
</tbody>
</table>
<p>In the previous table, the <code>LogLevel</code> is listed from lowest to highest severity.</p>
<p>The <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loggerextensions" data-linktype="absolute-path">Log</a> method's first parameter, <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel" class="no-loc" data-linktype="absolute-path">LogLevel</a>, indicates the severity of the log. Rather than calling <code>Log(LogLevel, ...)</code>, most developers call the <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loggerextensions" data-linktype="absolute-path">Log{LogLevel}</a> extension methods. The <code>Log{LogLevel}</code> extension methods <a href="https://github.com/dotnet/extensions/blob/release/3.1/src/Logging/Logging.Abstractions/src/LoggerExtensions.cs" data-linktype="external">call the Log method and specify the LogLevel</a>. For example, the following two logging calls are functionally equivalent and produce the same log:</p>
<pre><code class="lang-csharp" highlight-lines="6-7">[HttpGet]
public IActionResult Test1(int id)
{
    var routeInfo = ControllerContext.ToCtxString(id);

    _logger.Log(LogLevel.Information, MyLogEvents.TestItem, routeInfo);
    _logger.LogInformation(MyLogEvents.TestItem, routeInfo);

    return ControllerContext.MyDisplayRouteInfo();
}
</code></pre>
<p><code>MyLogEvents.TestItem</code> is the event ID. <code>MyLogEvents</code> is part of the sample app and is displayed in the <a href="#leid" data-linktype="self-bookmark">Log event ID</a> section.</p>
<p><a href="https://github.com/Rick-Anderson/RouteInfo/blob/master/Microsoft.Docs.Samples.RouteInfo/ControllerContextExtensions.cs" data-linktype="external">MyDisplayRouteInfo and ToCtxString</a> are provided by the <a href="https://www.nuget.org/packages/Rick.Docs.Samples.RouteInfo" data-linktype="external">Rick.Docs.Samples.RouteInfo</a> NuGet package. The methods display <code>Controller</code> and <code>Razor Page</code> route information.</p>
<p>The following code creates <code>Information</code> and <code>Warning</code> logs:</p>
<pre><code class="lang-csharp" highlight-lines="4,10">[HttpGet("{id}")]
public async Task&lt;ActionResult&lt;TodoItemDTO&gt;&gt; GetTodoItem(long id)
{
    _logger.LogInformation(MyLogEvents.GetItem, "Getting item {Id}", id);

    var todoItem = await _context.TodoItems.FindAsync(id);

    if (todoItem == null)
    {
        _logger.LogWarning(MyLogEvents.GetItemNotFound, "Get({Id}) NOT FOUND", id);
        return NotFound();
    }

    return ItemToDTO(todoItem);
}
</code></pre>
<p>In the preceding code, the first <code>Log{LogLevel}</code> parameter,<code>MyLogEvents.GetItem</code>, is the <a href="#leid" data-linktype="self-bookmark">Log event ID</a>. The second parameter is a message template with placeholders for argument values provided by the remaining method parameters. The method parameters are explained in the <a href="#lmt" data-linktype="self-bookmark">message template</a> section later in this document.</p>
<p>Call the appropriate <code>Log{LogLevel}</code> method to control how much log output is written to a particular storage medium. For example:</p>
<ul>
<li>In production:
<ul>
<li>Logging at the <code>Trace</code> or <code>Information</code> levels produces a high-volume of detailed log messages. To control costs and not exceed data storage limits, log <code>Trace</code> and <code>Information</code> level messages to a high-volume, low-cost data store. Consider limiting <code>Trace</code> and <code>Information</code> to specific categories.</li>
<li>Logging at <code>Warning</code> through <code>Critical</code> levels should produce few log messages.
<ul>
<li>Costs and storage limits usually aren't a concern.</li>
<li>Few logs allow more flexibility in data store choices.</li>
</ul>
</li>
</ul>
</li>
<li>In development:
<ul>
<li>Set to <code>Warning</code>.</li>
<li>Add <code>Trace</code> or <code>Information</code> messages when troubleshooting. To limit output, set <code>Trace</code> or <code>Information</code> only for the categories under investigation.</li>
</ul>
</li>
</ul>
<p>ASP.NET Core writes logs for framework events. For example, consider the log output for:</p>
<ul>
<li>A Razor Pages app created with the ASP.NET Core templates.</li>
<li>Logging set to <code>Logging:Console:LogLevel:Microsoft:Information</code></li>
<li>Navigation to the Privacy page:</li>
</ul>
<pre><code class="lang-console">info: Microsoft.AspNetCore.Hosting.Diagnostics[1]
      Request starting HTTP/2 GET https://localhost:5001/Privacy
info: Microsoft.AspNetCore.Routing.EndpointMiddleware[0]
      Executing endpoint '/Privacy'
info: Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.PageActionInvoker[3]
      Route matched with {page = "/Privacy"}. Executing page /Privacy
info: Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.PageActionInvoker[101]
      Executing handler method DefaultRP.Pages.PrivacyModel.OnGet - ModelState is Valid
info: Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.PageActionInvoker[102]
      Executed handler method OnGet, returned result .
info: Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.PageActionInvoker[103]
      Executing an implicit handler method - ModelState is Valid
info: Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.PageActionInvoker[104]
      Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
info: Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.PageActionInvoker[4]
      Executed page /Privacy in 74.5188ms
info: Microsoft.AspNetCore.Routing.EndpointMiddleware[1]
      Executed endpoint '/Privacy'
info: Microsoft.AspNetCore.Hosting.Diagnostics[2]
      Request finished in 149.3023ms 200 text/html; charset=utf-8
</code></pre>
<p>The following JSON sets <code>Logging:Console:LogLevel:Microsoft:Information</code>:</p>
<pre><code class="lang-json">{
  "Logging": {      // Default, all providers.
    "LogLevel": {
      "Microsoft": "Warning"
    },
    "Console": { // Console provider.
      "LogLevel": {
        "Microsoft": "Information"
      }
    }
  }
}
</code></pre>
<p><a name="leid"></a></p>
<h2 id="log-event-id">Log event ID</h2>
<p>Each log can specify an <em>event ID</em>. The sample app uses the <code>MyLogEvents</code> class to define event IDs:</p>
<!-- Review: to bad there is no way to use an enum for event ID's -->
<pre><code class="lang-csharp">public class MyLogEvents
{
    public const int GenerateItems = 1000;
    public const int ListItems     = 1001;
    public const int GetItem       = 1002;
    public const int InsertItem    = 1003;
    public const int UpdateItem    = 1004;
    public const int DeleteItem    = 1005;

    public const int TestItem      = 3000;

    public const int GetItemNotFound    = 4000;
    public const int UpdateItemNotFound = 4001;
}
</code></pre><pre><code class="lang-csharp" highlight-lines="4,10">[HttpGet("{id}")]
public async Task&lt;ActionResult&lt;TodoItemDTO&gt;&gt; GetTodoItem(long id)
{
    _logger.LogInformation(MyLogEvents.GetItem, "Getting item {Id}", id);

    var todoItem = await _context.TodoItems.FindAsync(id);

    if (todoItem == null)
    {
        _logger.LogWarning(MyLogEvents.GetItemNotFound, "Get({Id}) NOT FOUND", id);
        return NotFound();
    }

    return ItemToDTO(todoItem);
}
</code></pre>
<p>An event ID associates a set of events. For example, all logs related to displaying a list of items on a page might be 1001.</p>
<p>The logging provider may store the event ID in an ID field, in the logging message, or not at all. The Debug provider doesn't show event IDs. The console provider shows event IDs in brackets after the category:</p>
<pre><code class="lang-console">info: TodoApi.Controllers.TodoItemsController[1002]
      Getting item 1
warn: TodoApi.Controllers.TodoItemsController[4000]
      Get(1) NOT FOUND
</code></pre>
<p>Some logging providers store the event ID in a field, which allows for filtering on the ID.</p>
<p><a name="lmt"></a></p>
<h2 id="log-message-template">Log message template</h2>
<!-- Review, Each log API uses a message template. -->
<p>Each log API uses a message template. The message template can contain placeholders for which arguments are provided. Use names for the placeholders, not numbers.</p>
<pre><code class="lang-csharp" highlight-lines="4,10">[HttpGet("{id}")]
public async Task&lt;ActionResult&lt;TodoItemDTO&gt;&gt; GetTodoItem(long id)
{
    _logger.LogInformation(MyLogEvents.GetItem, "Getting item {Id}", id);

    var todoItem = await _context.TodoItems.FindAsync(id);

    if (todoItem == null)
    {
        _logger.LogWarning(MyLogEvents.GetItemNotFound, "Get({Id}) NOT FOUND", id);
        return NotFound();
    }

    return ItemToDTO(todoItem);
}
</code></pre>
<p>The <em>order of the parameters</em>, not their placeholder names, determines which parameters are used to provide placeholder values in log messages. In the following code, the parameter names are out of sequence in the placeholders of the message template:</p>
<pre><code class="lang-csharp">var apples = 1;
var pears = 2;
var bananas = 3;

_logger.LogInformation("Parameters: {pears}, {bananas}, {apples}", apples, pears, bananas);
</code></pre>
<p>However, the parameters are assigned to the placeholders in the order: <code>apples</code>, <code>pears</code>, <code>bananas</code>. The log message reflects the <em>order of the parameters</em>:</p>
<pre><code class="lang-text">Parameters: 1, 2, 3
</code></pre>
<p>This approach allows logging providers to implement <a href="https://github.com/NLog/NLog/wiki/How-to-use-structured-logging" data-linktype="external">semantic or structured logging</a>. The arguments themselves are passed to the logging system, not just the formatted message template. This enables logging providers to store the parameter values as fields. For example, consider the following logger method:</p>
<pre><code class="lang-csharp">_logger.LogInformation("Getting item {Id} at {RequestTime}", id, DateTime.Now);
</code></pre>
<p>For example, when logging to Azure Table Storage:</p>
<ul>
<li>Each Azure Table entity can have <code>ID</code> and <code>RequestTime</code> properties.</li>
<li>Tables with properties simplify queries on logged data. For example, a query can find all logs within a particular <code>RequestTime</code> range without having to parse the time out of the text message.</li>
</ul>
<h2 id="log-exceptions">Log exceptions</h2>
<p>The logger methods have overloads that take an exception parameter:</p>
<pre><code class="lang-csharp">[HttpGet("{id}")]
public IActionResult TestExp(int id)
{
    var routeInfo = ControllerContext.ToCtxString(id);
    _logger.LogInformation(MyLogEvents.TestItem, routeInfo);

    try
    {
        if (id == 3)
        {
            throw new Exception("Test exception");
        }
    }
    catch (Exception ex)
    {
        _logger.LogWarning(MyLogEvents.GetItemNotFound, ex, "TestExp({Id})", id);
        return NotFound();
    }

    return ControllerContext.MyDisplayRouteInfo();
}
</code></pre><p><a href="https://github.com/Rick-Anderson/RouteInfo/blob/master/Microsoft.Docs.Samples.RouteInfo/ControllerContextExtensions.cs" data-linktype="external">MyDisplayRouteInfo and ToCtxString</a> are provided by the <a href="https://www.nuget.org/packages/Rick.Docs.Samples.RouteInfo" data-linktype="external">Rick.Docs.Samples.RouteInfo</a> NuGet package. The methods display <code>Controller</code> and <code>Razor Page</code> route information.</p>
<p>Exception logging is provider-specific.</p>
<h3 id="default-log-level">Default log level</h3>
<p>If the default log level is not set, the default log level value is <code>Information</code>.</p>
<p>For example, consider the following web app:</p>
<ul>
<li>Created with the ASP.NET web app templates.</li>
<li><code>appsettings.json</code> and <code>appsettings.Development.json</code> deleted or renamed.</li>
</ul>
<p>With the preceding setup, navigating to the privacy or home page produces many <code>Trace</code>, <code>Debug</code>, and <code>Information</code>  messages with <code>Microsoft</code> in the category name.</p>
<p>The following code sets the default log level when the default log level is not set in configuration:</p>
<pre><code class="lang-csharp" highlight-lines="10">public class Program
{
    public static void Main(string[] args)
    {
        CreateHostBuilder(args).Build().Run();
    }

    public static IHostBuilder CreateHostBuilder(string[] args) =&gt;
        Host.CreateDefaultBuilder(args)
            .ConfigureLogging(logging =&gt; logging.SetMinimumLevel(LogLevel.Warning))
            .ConfigureWebHostDefaults(webBuilder =&gt;
            {
                webBuilder.UseStartup&lt;Startup&gt;();
            });
}
</code></pre><!-- review required: I say this a couple times -->
<p>Generally, log levels should be specified in configuration and not code.</p>
<h3 id="filter-function">Filter function</h3>
<p>A filter function is invoked for all providers and categories that don't have rules assigned to them by configuration or code:</p>
<pre><code class="lang-csharp">public class Program
{
    public static void Main(string[] args)
    {
        CreateHostBuilder(args).Build().Run();
    }

    public static IHostBuilder CreateHostBuilder(string[] args) =&gt;
        Host.CreateDefaultBuilder(args)
            .ConfigureLogging(logging =&gt;
            {
                logging.AddFilter((provider, category, logLevel) =&gt;
                {
                    if (provider.Contains("ConsoleLoggerProvider")
                        &amp;&amp; category.Contains("Controller")
                        &amp;&amp; logLevel &gt;= LogLevel.Information)
                    {
                        return true;
                    }
                    else if (provider.Contains("ConsoleLoggerProvider")
                        &amp;&amp; category.Contains("Microsoft")
                        &amp;&amp; logLevel &gt;= LogLevel.Information)
                    {
                        return true;
                    }
                    else
                    {
                        return false;
                    }
                });
            })
            .ConfigureWebHostDefaults(webBuilder =&gt;
            {
                webBuilder.UseStartup&lt;Startup&gt;();
            });
}
</code></pre>
<p>The preceding code displays console logs when the category contains <code>Controller</code> or <code>Microsoft</code> and the log level is <code>Information</code> or higher.</p>
<p>Generally, log levels should be specified in configuration and not code.</p>
<h2 id="aspnet-core-and-ef-core-categories">ASP.NET Core and EF Core categories</h2>
<p>The following table contains some categories used by ASP.NET Core and Entity Framework Core, with notes about the logs:</p>
<table>
<thead>
<tr>
<th>Category</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>Microsoft.AspNetCore</td>
<td>General ASP.NET Core diagnostics.</td>
</tr>
<tr>
<td>Microsoft.AspNetCore.DataProtection</td>
<td>Which keys were considered, found, and used.</td>
</tr>
<tr>
<td>Microsoft.AspNetCore.HostFiltering</td>
<td>Hosts allowed.</td>
</tr>
<tr>
<td>Microsoft.AspNetCore.Hosting</td>
<td>How long HTTP requests took to complete and what time they started. Which hosting startup assemblies were loaded.</td>
</tr>
<tr>
<td>Microsoft.AspNetCore.Mvc</td>
<td>MVC and Razor diagnostics. Model binding, filter execution, view compilation, action selection.</td>
</tr>
<tr>
<td>Microsoft.AspNetCore.Routing</td>
<td>Route matching information.</td>
</tr>
<tr>
<td>Microsoft.AspNetCore.Server</td>
<td>Connection start, stop, and keep alive responses. HTTPS certificate information.</td>
</tr>
<tr>
<td>Microsoft.AspNetCore.StaticFiles</td>
<td>Files served.</td>
</tr>
<tr>
<td>Microsoft.EntityFrameworkCore</td>
<td>General Entity Framework Core diagnostics. Database activity and configuration, change detection, migrations.</td>
</tr>
</tbody>
</table>
<p>To view more categories in the console window, set <em><code>appsettings.Development.json</code></em> to the following:</p>
<pre><code class="lang-json">{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft": "Trace",
      "Microsoft.Hosting.Lifetime": "Information"
    }
  }
}
</code></pre><!-- Review: What other providers support scopes? Console is not generally used in staging/production  -->
<p><a name="logscopes"></a></p>
<h2 id="log-scopes">Log scopes</h2>
<p>A <em>scope</em> can group a set of logical operations. This grouping can be used to attach the same data to each log that's created as part of a set. For example, every log created as part of processing a transaction can include the transaction ID.</p>
<p>A scope:</p>
<ul>
<li>Is an <a href="https://learn.microsoft.com/en-us/dotnet/api/system.idisposable" class="no-loc" data-linktype="absolute-path">IDisposable</a> type that's returned by the <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.ilogger.beginscope" class="no-loc" data-linktype="absolute-path">BeginScope</a> method.</li>
<li>Lasts until it's disposed.</li>
</ul>
<p>The following providers support scopes:</p>
<ul>
<li><code>Console</code></li>
<li><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.azureappservices.batchingloggeroptions.includescopes#microsoft-extensions-logging-azureappservices-batchingloggeroptions-includescopes" data-linktype="absolute-path">AzureAppServicesFile and AzureAppServicesBlob</a></li>
</ul>
<p>Use a scope by wrapping logger calls in a <code>using</code> block:</p>
<pre><code class="lang-csharp">[HttpGet("{id}")]
public async Task&lt;ActionResult&lt;TodoItemDTO&gt;&gt; GetTodoItem(long id)
{
    TodoItem todoItem;
    var transactionId = Guid.NewGuid().ToString();
    using (_logger.BeginScope(new List&lt;KeyValuePair&lt;string, object&gt;&gt;
        {
            new KeyValuePair&lt;string, object&gt;("TransactionId", transactionId),
        }))
    {
        _logger.LogInformation(MyLogEvents.GetItem, "Getting item {Id}", id);

        todoItem = await _context.TodoItems.FindAsync(id);

        if (todoItem == null)
        {
            _logger.LogWarning(MyLogEvents.GetItemNotFound, 
                "Get({Id}) NOT FOUND", id);
            return NotFound();
        }
    }

    return ItemToDTO(todoItem);
}
</code></pre>
<p><a name="bilp"></a></p>
<h2 id="built-in-logging-providers">Built-in logging providers</h2>
<p>ASP.NET Core includes the following logging providers as part of the shared framework:</p>
<ul>
<li><a href="#console" data-linktype="self-bookmark">Console</a></li>
<li><a href="#debug" data-linktype="self-bookmark">Debug</a></li>
<li><a href="#event-source" data-linktype="self-bookmark">EventSource</a></li>
<li><a href="#welog" data-linktype="self-bookmark">EventLog</a></li>
</ul>
<p>The following logging providers are shipped by Microsoft, but not as part of the
shared framework. They must be installed as additional nuget.</p>
<ul>
<li><a href="#azure-app-service" data-linktype="self-bookmark">AzureAppServicesFile and AzureAppServicesBlob</a></li>
<li><a href="#azure-application-insights" data-linktype="self-bookmark">ApplicationInsights</a></li>
</ul>
<p>ASP.NET Core doesn't include a logging provider for writing logs to files. To write logs to files from an ASP.NET Core app, consider using a <a href="#third-party-logging-providers" data-linktype="self-bookmark">third-party logging provider</a>.</p>
<p>For information on <code>stdout</code> and debug logging with the ASP.NET Core Module, see <a href="https://learn.microsoft.com/en-us/aspnet/core/test/troubleshoot-azure-iis?view=aspnetcore-9.0" data-linktype="relative-path">Troubleshoot ASP.NET Core on Azure App Service and IIS</a> and <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0#log-creation-and-redirection" data-linktype="relative-path">ASP.NET Core Module (ANCM) for IIS</a>.</p>
<h3 id="console">Console</h3>
<p>The <code>Console</code> provider logs output to the console. For more information on viewing <code>Console</code> logs in development, see <a href="#dnrvs" data-linktype="self-bookmark">Logging output from dotnet run and Visual Studio</a>.</p>
<h3 id="debug">Debug</h3>
<p>The <code>Debug</code> provider writes log output by using the <a href="https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.debug" class="no-loc" data-linktype="absolute-path">System.Diagnostics.Debug</a> class. Calls to <code>System.Diagnostics.Debug.WriteLine</code> write to the <code>Debug</code> provider.</p>
<p>On Linux, the <code>Debug</code> provider log location is distribution-dependent and may be one of the following:</p>
<ul>
<li><em>/var/log/message</em></li>
<li><em>/var/log/syslog</em></li>
</ul>
<h3 id="event-source">Event Source</h3>
<p>The <code>EventSource</code> provider writes to a cross-platform event source with the name <code>Microsoft-Extensions-Logging</code>. On Windows, the provider uses <a href="https://learn.microsoft.com/en-us/windows/win32/etw/event-tracing-portal" data-linktype="absolute-path">ETW</a>.</p>
<h4 id="dotnet-trace-tooling">dotnet trace tooling</h4>
<p>The <a href="https://learn.microsoft.com/en-us/dotnet/core/diagnostics/dotnet-trace" data-linktype="absolute-path">dotnet-trace</a> tool is a cross-platform CLI global tool that enables the collection of .NET Core traces of a running process. The tool collects <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.eventsource" class="no-loc" data-linktype="absolute-path">Microsoft.Extensions.Logging.EventSource</a> provider data using a <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.eventsource.loggingeventsource" class="no-loc" data-linktype="absolute-path">LoggingEventSource</a>.</p>
<p>See <a href="https://learn.microsoft.com/en-us/dotnet/core/diagnostics/dotnet-trace" data-linktype="absolute-path">dotnet-trace</a> for installation instructions.</p>
<p>Use the dotnet trace tooling to collect a trace from an app:</p>
<ol>
<li><p>Run the app with the <code>dotnet run</code> command.</p>
</li>
<li><p>Determine the process identifier (PID) of the .NET Core app:</p>
<pre><code class="lang-dotnetcli">dotnet trace ps
</code></pre>
<p>Find the PID for the process that has the same name as the app's assembly.</p>
</li>
<li><p>Execute the <code>dotnet trace</code> command.</p>
<p>General command syntax:</p>
<pre><code class="lang-dotnetcli">dotnet trace collect -p {PID} 
    --providers Microsoft-Extensions-Logging:{Keyword}:{Provider Level}
        :FilterSpecs=\"
            {Logger Category 1}:{Category Level 1};
            {Logger Category 2}:{Category Level 2};
            ...
            {Logger Category N}:{Category Level N}\"
</code></pre>
<p>When using a PowerShell command shell, enclose the <code>--providers</code> value in single quotes (<code>'</code>):</p>
<pre><code class="lang-dotnetcli">dotnet trace collect -p {PID} 
    --providers 'Microsoft-Extensions-Logging:{Keyword}:{Provider Level}
        :FilterSpecs=\"
            {Logger Category 1}:{Category Level 1};
            {Logger Category 2}:{Category Level 2};
            ...
            {Logger Category N}:{Category Level N}\"'
</code></pre>
<p>On non-Windows platforms, add the <code>-f speedscope</code> option to change the format of the output trace file to <code>speedscope</code>.</p>
<p>The following table defines the Keyword:</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Keyword</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">1</td>
<td>Log meta events about the <code>LoggingEventSource</code>. Doesn't log events from <code>ILogger</code>.</td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td>Turns on the <code>Message</code> event when <code>ILogger.Log()</code> is called. Provides information in a programmatic (not formatted) way.</td>
</tr>
<tr>
<td style="text-align: center;">4</td>
<td>Turns on the <code>FormatMessage</code> event when <code>ILogger.Log()</code> is called. Provides the formatted string version of the information.</td>
</tr>
<tr>
<td style="text-align: center;">8</td>
<td>Turns on the <code>MessageJson</code> event when <code>ILogger.Log()</code> is called. Provides a JSON representation of the arguments.</td>
</tr>
</tbody>
</table>
<p>The following table lists the provider levels:</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Provider Level</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">0</td>
<td><code>LogAlways</code></td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td><code>Critical</code></td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td><code>Error</code></td>
</tr>
<tr>
<td style="text-align: center;">3</td>
<td><code>Warning</code></td>
</tr>
<tr>
<td style="text-align: center;">4</td>
<td><code>Informational</code></td>
</tr>
<tr>
<td style="text-align: center;">5</td>
<td><code>Verbose</code></td>
</tr>
</tbody>
</table>
<p>The parsing for a category level can be either a string or a number:</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Category named value</th>
<th>Numeric value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><code>Trace</code></td>
<td>0</td>
</tr>
<tr>
<td style="text-align: center;"><code>Debug</code></td>
<td>1</td>
</tr>
<tr>
<td style="text-align: center;"><code>Information</code></td>
<td>2</td>
</tr>
<tr>
<td style="text-align: center;"><code>Warning</code></td>
<td>3</td>
</tr>
<tr>
<td style="text-align: center;"><code>Error</code></td>
<td>4</td>
</tr>
<tr>
<td style="text-align: center;"><code>Critical</code></td>
<td>5</td>
</tr>
</tbody>
</table>
<p>The provider level and category level:</p>
<ul>
<li>Are in reverse order.</li>
<li>The string constants aren't all identical.</li>
</ul>
<p>If no <code>FilterSpecs</code> are specified then the <code>EventSourceLogger</code> implementation attempts to convert the provider level to a category level and applies it to all categories.</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Provider Level</th>
<th>Category Level</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><code>Verbose</code>(5)</td>
<td><code>Debug</code>(1)</td>
</tr>
<tr>
<td style="text-align: center;"><code>Informational</code>(4)</td>
<td><code>Information</code>(2)</td>
</tr>
<tr>
<td style="text-align: center;"><code>Warning</code>(3)</td>
<td><code>Warning</code>(3)</td>
</tr>
<tr>
<td style="text-align: center;"><code>Error</code>(2)</td>
<td><code>Error</code>(4)</td>
</tr>
<tr>
<td style="text-align: center;"><code>Critical</code>(1)</td>
<td><code>Critical</code>(5)</td>
</tr>
</tbody>
</table>
<p>If <code>FilterSpecs</code> are provided, any category that is included in the list uses the category level encoded there, all other categories are filtered out.</p>
<p>The following examples assume:</p>
<ul>
<li>An app is running and calling <code>logger.LogDebug("12345")</code>.</li>
<li>The process ID (PID) has been set via <code>set PID=12345</code>, where <code>12345</code> is the actual PID.</li>
</ul>
<p>Consider the following command:</p>
<pre><code class="lang-dotnetcli">dotnet trace collect -p %PID% --providers Microsoft-Extensions-Logging:4:5
</code></pre>
<p>The preceding command:</p>
<ul>
<li>Captures debug messages.</li>
<li>Doesn't apply a <code>FilterSpecs</code>.</li>
<li>Specifies level 5 which maps category Debug.</li>
</ul>
<p>Consider the following command:</p>
<pre><code class="lang-dotnetcli">dotnet trace collect -p %PID%  --providers Microsoft-Extensions-Logging:4:5:\"FilterSpecs=*:5\"
</code></pre>
<p>The preceding command:</p>
<ul>
<li>Doesn't capture debug messages because the category level 5 is <code>Critical</code>.</li>
<li>Provides a <code>FilterSpecs</code>.</li>
</ul>
<p>The following command captures debug messages because category level 1 specifies <code>Debug</code>.</p>
<pre><code class="lang-dotnetcli">dotnet trace collect -p %PID%  --providers Microsoft-Extensions-Logging:4:5:\"FilterSpecs=*:1\"
</code></pre>
<p>The following command captures debug messages because category specifies <code>Debug</code>.</p>
<pre><code class="lang-dotnetcli">dotnet trace collect -p %PID%  --providers Microsoft-Extensions-Logging:4:5:\"FilterSpecs=*:Debug\"
</code></pre>
<p><code>FilterSpecs</code> entries for <code>{Logger Category}</code> and <code>{Category Level}</code> represent additional log filtering conditions. Separate <code>FilterSpecs</code> entries with the <code>;</code> semicolon character.</p>
<p>Example using a Windows command shell:</p>
<pre><code class="lang-dotnetcli">dotnet trace collect -p %PID% --providers Microsoft-Extensions-Logging:4:2:FilterSpecs=\"Microsoft.AspNetCore.Hosting*:4\"
</code></pre>
<p>The preceding command activates:</p>
<ul>
<li>The Event Source logger to produce formatted strings (<code>4</code>) for errors (<code>2</code>).</li>
<li><code>Microsoft.AspNetCore.Hosting</code> logging at the <code>Informational</code> logging level (<code>4</code>).</li>
</ul>
</li>
<li><p>Stop the dotnet trace tooling by pressing the Enter key or Ctrl+C.</p>
<p>The trace is saved with the name <em>trace.nettrace</em> in the folder where the <code>dotnet trace</code> command is executed.</p>
</li>
<li><p>Open the trace with <a href="#perfview" data-linktype="self-bookmark">Perfview</a>. Open the <em>trace.nettrace</em> file and explore the trace events.</p>
</li>
</ol>
<p>If the app doesn't build the host with <code>CreateDefaultBuilder</code>, add the Event Source provider to the app's logging configuration.</p>
<p>For more information, see:</p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/dotnet/core/diagnostics/dotnet-trace" data-linktype="absolute-path">Trace for performance analysis utility (dotnet-trace)</a> (.NET Core documentation)</li>
<li><a href="https://github.com/dotnet/diagnostics/blob/main/documentation/dotnet-trace-instructions.md" data-linktype="external">Trace for performance analysis utility (dotnet-trace)</a> (dotnet/diagnostics GitHub repository documentation)</li>
<li><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.eventsource.loggingeventsource" data-linktype="absolute-path">LoggingEventSource Class</a> (.NET API Browser)</li>
<li><a href="https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.tracing.eventlevel" class="no-loc" data-linktype="absolute-path">EventLevel</a></li>
<li><a href="https://github.com/dotnet/extensions/blob/release/3.1/src/Logging/Logging.EventSource/src/LoggingEventSource.cs" data-linktype="external">LoggingEventSource reference source (3.0)</a>: To obtain reference source for a different version, change the branch to <code>release/{Version}</code>, where <code>{Version}</code> is the version of ASP.NET Core desired.</li>
<li><a href="#perfview" data-linktype="self-bookmark">Perfview</a>: Useful for viewing Event Source traces.</li>
</ul>
<h4 id="perfview">Perfview</h4>
<p>Use the <a href="https://github.com/Microsoft/perfview" data-linktype="external">PerfView utility</a> to collect and view logs. There are other tools for viewing ETW logs, but PerfView provides the best experience for working with the ETW events emitted by ASP.NET Core.</p>
<p>To configure PerfView for collecting events logged by this provider, add the string <code>*Microsoft-Extensions-Logging</code> to the <strong>Additional Providers</strong> list. Don't miss the <code>*</code> at the start of the string.</p>
<p><a name="welog"></a></p>
<h3 id="windows-eventlog">Windows EventLog</h3>
<p>The <code>EventLog</code> provider sends log output to the Windows Event Log. Unlike the other providers, the <code>EventLog</code> provider does <em><strong>not</strong></em> inherit the default non-provider settings. If <code>EventLog</code> log settings aren't specified, they <a href="https://github.com/dotnet/extensions/blob/release/3.1/src/Hosting/Hosting/src/Host.cs#L99-L103" data-linktype="external">default to LogLevel.Warning</a>.</p>
<p>To log events lower than <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel#microsoft-extensions-logging-loglevel-warning" class="no-loc" data-linktype="absolute-path">LogLevel.Warning</a>, explicitly set the log level. The following example sets the Event Log default log level to <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel#microsoft-extensions-logging-loglevel-information" class="no-loc" data-linktype="absolute-path">LogLevel.Information</a>:</p>
<pre><code class="lang-json">"Logging": {
  "EventLog": {
    "LogLevel": {
      "Default": "Information"
    }
  }
}
</code></pre>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.eventloggerfactoryextensions" data-linktype="absolute-path">AddEventLog overloads</a> can pass in <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.eventlog.eventlogsettings" class="no-loc" data-linktype="absolute-path">EventLogSettings</a>. If <code>null</code> or not specified, the following default settings are used:</p>
<ul>
<li><code>LogName</code>: "Application"</li>
<li><code>SourceName</code>: ".NET Runtime"</li>
<li><code>MachineName</code>: The local machine name is used.</li>
</ul>
<p>The following code changes the <code>SourceName</code> from the default value of <code>".NET Runtime"</code> to <code>MyLogs</code>:</p>
<pre><code class="lang-csharp">public class Program
{
    public static void Main(string[] args)
    {
        CreateHostBuilder(args).Build().Run();
    }

    public static IHostBuilder CreateHostBuilder(string[] args) =&gt;
        Host.CreateDefaultBuilder(args)
            .ConfigureLogging(logging =&gt;
            {
                logging.AddEventLog(eventLogSettings =&gt;
                {
                    eventLogSettings.SourceName = "MyLogs"; 
                });
            })
            .ConfigureWebHostDefaults(webBuilder =&gt;
            {
                webBuilder.UseStartup&lt;Startup&gt;();
            });
}
</code></pre><h3 id="azure-app-service">Azure App Service</h3>
<p>The <a href="https://www.nuget.org/packages/Microsoft.Extensions.Logging.AzureAppServices" data-linktype="external">Microsoft.Extensions.Logging.AzureAppServices</a> provider package writes logs to text files in an Azure App Service app's file system and to <a href="https://learn.microsoft.com/en-us/azure/storage/blobs/storage-quickstart-blobs-dotnet#what-is-blob-storage" data-linktype="absolute-path">blob storage</a> in an Azure Storage account.</p>
<p>The provider package isn't included in the shared framework. To use the provider, add the provider package to the project.</p>
<p>To configure provider settings, use <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.azureappservices.azurefileloggeroptions" class="no-loc" data-linktype="absolute-path">AzureFileLoggerOptions</a> and <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.azureappservices.azureblobloggeroptions" class="no-loc" data-linktype="absolute-path">AzureBlobLoggerOptions</a>, as shown in the following example:</p>
<pre><code class="lang-csharp">public class Scopes
{
    public class Program
    {
        public static void Main(string[] args)
        {
            CreateHostBuilder(args).Build().Run();
        }

        public static IHostBuilder CreateHostBuilder(string[] args) =&gt;
            Host.CreateDefaultBuilder(args)
                .ConfigureLogging(logging =&gt; logging.AddAzureWebAppDiagnostics())
                .ConfigureServices(serviceCollection =&gt; serviceCollection
                    .Configure&lt;AzureFileLoggerOptions&gt;(options =&gt;
                    {
                        options.FileName = "azure-diagnostics-";
                        options.FileSizeLimit = 50 * 1024;
                        options.RetainedFileCountLimit = 5;
                    })
                    .Configure&lt;AzureBlobLoggerOptions&gt;(options =&gt;
                    {
                        options.BlobName = "log.txt";
                    }))
                .ConfigureWebHostDefaults(webBuilder =&gt;
                {
                    webBuilder.UseStartup&lt;Startup&gt;();
                });
    }
}
</code></pre>
<p>When deployed to Azure App Service, the app uses the settings in the <a href="https://learn.microsoft.com/en-us/azure/app-service/troubleshoot-diagnostic-logs" data-linktype="absolute-path">App Service logs</a> section of the <strong>App Service</strong> page of the Azure portal. When the following settings are updated, the changes take effect immediately without requiring a restart or redeployment of the app.</p>
<ul>
<li><strong>Application Logging (Filesystem)</strong></li>
<li><strong>Application Logging (Blob)</strong></li>
</ul>
<p>The default location for log files is in the <em>D:\home\LogFiles\Application</em> folder, and the default file name is <em>diagnostics-yyyymmdd.txt</em>. The default file size limit is 10 MB, and the default maximum number of files retained is 2. The default blob name is <em>{app-name}{timestamp}/yyyy/mm/dd/hh/{guid}-applicationLog.txt</em>.</p>
<p>This provider only logs when the project runs in the Azure environment.</p>
<h4 id="azure-log-streaming">Azure log streaming</h4>
<p>Azure log streaming supports viewing log activity in real time from:</p>
<ul>
<li>The app server</li>
<li>The web server</li>
<li>Failed request tracing</li>
</ul>
<p>To configure Azure log streaming:</p>
<ul>
<li>Navigate to the <strong>App Service logs</strong> page from the app's portal page.</li>
<li>Set <strong>Application Logging (Filesystem)</strong> to <strong>On</strong>.</li>
<li>Choose the log <strong>Level</strong>. This setting only applies to Azure log streaming.</li>
</ul>
<p>Navigate to the <strong>Log Stream</strong> page to view logs. The logged messages are logged with the <code>ILogger</code> interface.</p>
<h3 id="azure-application-insights">Azure Application Insights</h3>
<p>The <a href="https://www.nuget.org/packages/Microsoft.Extensions.Logging.ApplicationInsights" data-linktype="external">Microsoft.Extensions.Logging.ApplicationInsights</a> provider package writes logs to <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/app/cloudservices" data-linktype="absolute-path">Azure Application Insights</a>. Application Insights is a service that monitors a web app and provides tools for querying and analyzing the telemetry data. If you use this provider, you can query and analyze your logs by using the Application Insights tools.</p>
<p>The logging provider is included as a dependency of <a href="https://www.nuget.org/packages/Microsoft.ApplicationInsights.AspNetCore" data-linktype="external">Microsoft.ApplicationInsights.AspNetCore</a>, which is the package that provides all available telemetry for ASP.NET Core. If you use this package, you don't have to install the provider package.</p>
<p>The <a href="https://www.nuget.org/packages/Microsoft.ApplicationInsights.Web" data-linktype="external">Microsoft.ApplicationInsights.Web</a> package is for ASP.NET 4.x, not ASP.NET Core.</p>
<p>For more information, see the following resources:</p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/application-insights/app-insights-overview" data-linktype="absolute-path">Application Insights overview</a></li>
<li><a href="https://learn.microsoft.com/en-us/azure/azure-monitor/app/asp-net-core" data-linktype="absolute-path">Application Insights for ASP.NET Core applications</a> - Start here if you want to implement the full range of Application Insights telemetry along with logging.</li>
<li><a href="https://learn.microsoft.com/en-us/azure/azure-monitor/app/ilogger" data-linktype="absolute-path">ApplicationInsightsLoggerProvider for .NET Core ILogger logs</a> - Start here if you want to implement the logging provider without the rest of Application Insights telemetry.</li>
<li><a href="https://learn.microsoft.com/en-us/azure/azure-monitor/app/asp-net-trace-logs" data-linktype="absolute-path">Application Insights logging adapters</a>.</li>
<li><a href="https://learn.microsoft.com/en-us/training/modules/instrument-web-app-code-with-application-insights" data-linktype="absolute-path">Install, configure, and initialize the Application Insights SDK</a> interactive tutorial.</li>
</ul>
<h2 id="third-party-logging-providers">Third-party logging providers</h2>
<p>Third-party logging frameworks that work with ASP.NET Core:</p>
<ul>
<li><a href="https://elmah.io/" data-linktype="external">elmah.io</a> (<a href="https://github.com/elmahio/Elmah.Io.Extensions.Logging" data-linktype="external">GitHub repo</a>)</li>
<li><a href="https://go2docs.graylog.org/5-0/getting_in_log_data/gelf.html" data-linktype="external">Gelf</a> (<a href="https://github.com/mattwcole/gelf-extensions-logging" data-linktype="external">GitHub repo</a>)</li>
<li><a href="https://jsnlog.com/" data-linktype="external">JSNLog</a> (<a href="https://github.com/mperdeck/jsnlog" data-linktype="external">GitHub repo</a>)</li>
<li><a href="https://kisslog.net/" data-linktype="external">KissLog.net</a> (<a href="https://github.com/catalingavan/KissLog-net" data-linktype="external">GitHub repo</a>)</li>
<li><a href="https://logging.apache.org/log4net/" data-linktype="external">Log4Net</a> (<a href="https://github.com/huorswords/Microsoft.Extensions.Logging.Log4Net.AspNetCore" data-linktype="external">GitHub repo</a>)</li>
<li><a href="https://nlog-project.org/" data-linktype="external">NLog</a> (<a href="https://github.com/NLog/NLog.Extensions.Logging" data-linktype="external">GitHub repo</a>)</li>
<li><a href="https://www.nuget.org/packages/InvertedSoftware.PLogger.Core/" data-linktype="external">PLogger</a> (<a href="https://github.com/invertedsoftware/InvertedSoftware.PLogger.Core" data-linktype="external">GitHub repo</a>)</li>
<li><a href="https://sentry.io/welcome/" data-linktype="external">Sentry</a> (<a href="https://github.com/getsentry/sentry-dotnet" data-linktype="external">GitHub repo</a>)</li>
<li><a href="https://serilog.net/" data-linktype="external">Serilog</a> (<a href="https://github.com/serilog/serilog-aspnetcore" data-linktype="external">GitHub repo</a>)</li>
<li><a href="https://cloud.google.com/dotnet/docs/stackdriver#logging" data-linktype="external">Stackdriver</a> (<a href="https://github.com/googleapis/google-cloud-dotnet" data-linktype="external">Github repo</a>)</li>
</ul>
<p>Some third-party frameworks can perform <a href="https://softwareengineering.stackexchange.com/questions/312197/benefits-of-structured-logging-vs-basic-logging" data-linktype="external">semantic logging, also known as structured logging</a>.</p>
<p>Using a third-party framework is similar to using one of the built-in providers:</p>
<ol>
<li>Add a NuGet package to your project.</li>
<li>Call an <code>ILoggerFactory</code> extension method provided by the logging framework.</li>
</ol>
<p>For more information, see each provider's documentation. Third-party logging providers aren't supported by Microsoft.</p>
<p><a name="nhca"></a></p>
<h2 id="non-host-console-app">Non-host console app</h2>
<p>For an example of how to use the Generic Host in a non-web console app, see the <code>Program.cs</code> file of the <a href="https://github.com/dotnet/AspNetCore.Docs/tree/main/aspnetcore/fundamentals/host/hosted-services/samples" data-linktype="external">Background Tasks sample app</a> (<a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/host/hosted-services?view=aspnetcore-9.0" data-linktype="relative-path">Background tasks with hosted services in ASP.NET Core</a>).</p>
<p>Logging code for apps without Generic Host differs in the way providers are added and <a href="#create-logs" data-linktype="self-bookmark">loggers are created</a>.</p>
<h3 id="logging-providers-1">Logging providers</h3>
<p>In a non-host console app, call the provider's <code>Add{provider name}</code> extension method while creating a <code>LoggerFactory</code>:</p>
<pre><code class="lang-csharp" highlight-lines="11-12">class Program
{
    static void Main(string[] args)
    {
        using var loggerFactory = LoggerFactory.Create(builder =&gt;
        {
            builder
                .AddFilter("Microsoft", LogLevel.Warning)
                .AddFilter("System", LogLevel.Warning)
                .AddFilter("LoggingConsoleApp.Program", LogLevel.Debug)
                .AddConsole()
                .AddEventLog();
        });
        ILogger logger = loggerFactory.CreateLogger&lt;Program&gt;();
        logger.LogInformation("Example log message");
    }
}
</code></pre><h3 id="create-logs-1">Create logs</h3>
<p>To create logs, use an <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.ilogger-1" class="no-loc" data-linktype="absolute-path">ILogger&lt;TCategoryName&gt;</a> object. Use the <code>LoggerFactory</code> to create an <code>ILogger</code>.</p>
<p>The following example creates a logger with <code>LoggingConsoleApp.Program</code> as the category.</p>
<pre><code class="lang-csharp" highlight-lines="14">class Program
{
    static void Main(string[] args)
    {
        using var loggerFactory = LoggerFactory.Create(builder =&gt;
        {
            builder
                .AddFilter("Microsoft", LogLevel.Warning)
                .AddFilter("System", LogLevel.Warning)
                .AddFilter("LoggingConsoleApp.Program", LogLevel.Debug)
                .AddConsole()
                .AddEventLog();
        });
        ILogger logger = loggerFactory.CreateLogger&lt;Program&gt;();
        logger.LogInformation("Example log message");
    }
}
</code></pre>
<p>In the following example, the logger is used to create logs with <code>Information</code> as the level. The Log <em>level</em> indicates the severity of the logged event.</p>
<pre><code class="lang-csharp" highlight-lines="15">class Program
{
    static void Main(string[] args)
    {
        using var loggerFactory = LoggerFactory.Create(builder =&gt;
        {
            builder
                .AddFilter("Microsoft", LogLevel.Warning)
                .AddFilter("System", LogLevel.Warning)
                .AddFilter("LoggingConsoleApp.Program", LogLevel.Debug)
                .AddConsole()
                .AddEventLog();
        });
        ILogger logger = loggerFactory.CreateLogger&lt;Program&gt;();
        logger.LogInformation("Example log message");
    }
}
</code></pre>
<p><a href="#log-level" data-linktype="self-bookmark">Levels</a> and <a href="#log-category" data-linktype="self-bookmark">categories</a> are explained in more detail in this document.</p>
<p><a name="lhc"></a></p>
<h2 id="log-during-host-construction">Log during host construction</h2>
<p>Logging during host construction isn't directly supported. However, a separate logger can be used. In the following example, a <a href="https://serilog.net/" data-linktype="external">Serilog</a> logger is used to log in <code>CreateHostBuilder</code>. <code>AddSerilog</code> uses the static configuration specified in <code>Log.Logger</code>:</p>
<pre><code class="lang-csharp">using System;
using Microsoft.AspNetCore.Hosting;
using Microsoft.Extensions.DependencyInjection;
using Microsoft.Extensions.Configuration;
using Microsoft.Extensions.Hosting;
using Microsoft.Extensions.Logging;

public class Program
{
    public static void Main(string[] args)
    {
        CreateHostBuilder(args).Build().Run();
    }

    public static IHostBuilder CreateHostBuilder(string[] args)
    {
        var builtConfig = new ConfigurationBuilder()
            .AddJsonFile("appsettings.json")
            .AddCommandLine(args)
            .Build();

        Log.Logger = new LoggerConfiguration()
            .WriteTo.Console()
            .WriteTo.File(builtConfig["Logging:FilePath"])
            .CreateLogger();

        try
        {
            return Host.CreateDefaultBuilder(args)
                .ConfigureServices((context, services) =&gt;
                {
                    services.AddRazorPages();
                })
                .ConfigureAppConfiguration((hostingContext, config) =&gt;
                {
                    config.AddConfiguration(builtConfig);
                })
                .ConfigureLogging(logging =&gt;
                {   
                    logging.AddSerilog();
                })
                .ConfigureWebHostDefaults(webBuilder =&gt;
                {
                    webBuilder.UseStartup&lt;Startup&gt;();
                });
        }
        catch (Exception ex)
        {
            Log.Fatal(ex, "Host builder error");

            throw;
        }
        finally
        {
            Log.CloseAndFlush();
        }
    }
}
</code></pre>
<p><a name="csdi"></a></p>
<h2 id="configure-a-service-that-depends-on-ilogger">Configure a service that depends on ILogger</h2>
<p>Constructor injection of a logger into <code>Startup</code> works in earlier versions of ASP.NET Core because a separate DI container is created for the Web Host. For information about why only one container is created for the Generic Host, see the <a href="https://github.com/aspnet/Announcements/issues/353" data-linktype="external">breaking change announcement</a>.</p>
<p>To configure a service that depends on <code>ILogger&lt;T&gt;</code>, use constructor injection or provide a factory method. The factory method approach is recommended only if there is no other option. For example, consider a service that needs an <code>ILogger&lt;T&gt;</code> instance provided by DI:</p>
<pre><code class="lang-csharp" highlight-lines="6-10">public void ConfigureServices(IServiceCollection services)
{
    services.AddControllers();
    services.AddRazorPages();

    services.AddSingleton&lt;IMyService&gt;((container) =&gt;
    {
        var logger = container.GetRequiredService&lt;ILogger&lt;MyService&gt;&gt;();
        return new MyService() { Logger = logger };
    });
}
</code></pre>
<p>The preceding highlighted code is a <a href="https://learn.microsoft.com/en-us/dotnet/api/system.func-2" class="no-loc" data-linktype="absolute-path">Func&lt;T,TResult&gt;</a> that runs the first time the DI container needs to construct an instance of <code>MyService</code>. You can access any of the registered services in this way.</p>
<p><a name="clms"></a></p>
<h2 id="create-logs-in-main">Create logs in Main</h2>
<p>The following code logs in <code>Main</code> by getting an <code>ILogger</code> instance from DI after building the host:</p>
<pre><code class="lang-csharp">public static void Main(string[] args)
{
    var host = CreateHostBuilder(args).Build();

    var logger = host.Services.GetRequiredService&lt;ILogger&lt;Program&gt;&gt;();
    logger.LogInformation("Host created.");

    host.Run();
}

public static IHostBuilder CreateHostBuilder(string[] args) =&gt;
    Host.CreateDefaultBuilder(args)
        .ConfigureWebHostDefaults(webBuilder =&gt;
        {
            webBuilder.UseStartup&lt;Startup&gt;();
        });
</code></pre><h3 id="create-logs-in-startup">Create logs in Startup</h3>
<p>The following code writes logs in <code>Startup.Configure</code>:</p>
<pre><code class="lang-csharp">public void Configure(IApplicationBuilder app, IWebHostEnvironment env,
                      ILogger&lt;Startup&gt; logger)
{
    if (env.IsDevelopment())
    {
        logger.LogInformation("In Development.");
        app.UseDeveloperExceptionPage();
    }
    else
    {
        logger.LogInformation("Not Development.");
        app.UseExceptionHandler("/Error");
        app.UseHsts();
    }

    app.UseHttpsRedirection();
    app.UseStaticFiles();

    app.UseRouting();

    app.UseAuthorization();

    app.UseEndpoints(endpoints =&gt;
    {
        endpoints.MapControllers();
        endpoints.MapRazorPages();
    });
}
</code></pre>
<p>Writing logs before completion of the DI container setup in the <code>Startup.ConfigureServices</code> method is not supported:</p>
<ul>
<li>Logger injection into the <code>Startup</code> constructor is not supported.</li>
<li>Logger injection into the <code>Startup.ConfigureServices</code> method signature is not supported</li>
</ul>
<p>The reason for this restriction is that logging depends on DI and on configuration, which in turns depends on DI. The DI container isn't set up until <code>ConfigureServices</code> finishes.</p>
<p>For information on configuring a service that depends on <code>ILogger&lt;T&gt;</code> or why constructor injection of a logger into <code>Startup</code> worked in earlier versions, see <a href="#csdi" data-linktype="self-bookmark">Configure a service that depends on ILogger</a></p>
<h3 id="no-asynchronous-logger-methods">No asynchronous logger methods</h3>
<p>Logging should be so fast that it isn't worth the performance cost of asynchronous code. If a logging data store is slow, don't write to it directly. Consider writing the log messages to a fast store initially, then moving them to the slow store later. For example, when logging to SQL Server, don't do so directly in a <code>Log</code> method, since the <code>Log</code> methods are synchronous. Instead, synchronously add log messages to an in-memory queue and have a background worker pull the messages out of the queue to do the asynchronous work of pushing data to SQL Server. For more information, see <a href="https://github.com/dotnet/AspNetCore.Docs/issues/11801" data-linktype="external">this</a> GitHub issue.</p>
<p><a name="clib"></a></p>
<h2 id="change-log-levels-in-a-running-app">Change log levels in a running app</h2>
<p>The Logging API doesn't include a scenario to change log levels while an app is running. However, some configuration providers are capable of reloading configuration, which takes immediate effect on logging configuration. For example, the <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/configuration/?view=aspnetcore-9.0#file-configuration-provider" data-linktype="relative-path">File Configuration Provider</a>, reloads logging configuration by default. If configuration is changed in code while an app is running, the app can call <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.configuration.iconfigurationroot.reload" class="no-loc" data-linktype="absolute-path">IConfigurationRoot.Reload</a> to update the app's logging configuration.</p>
<h2 id="ilogger-and-iloggerfactory">ILogger and ILoggerFactory</h2>
<p>The <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.ilogger-1" class="no-loc" data-linktype="absolute-path">ILogger&lt;TCategoryName&gt;</a> and <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.iloggerfactory" class="no-loc" data-linktype="absolute-path">ILoggerFactory</a> interfaces and implementations are included in the .NET Core SDK. They are also available in the following NuGet packages:</p>
<ul>
<li>The interfaces are in <a href="https://www.nuget.org/packages/Microsoft.Extensions.Logging.Abstractions/" data-linktype="external">Microsoft.Extensions.Logging.Abstractions</a>.</li>
<li>The default implementations are in <a href="https://www.nuget.org/packages/microsoft.extensions.logging/" data-linktype="external">Microsoft.Extensions.Logging</a>.</li>
</ul>
<!-- review. Why would you want to hard code filtering rules in code? -->
<p><a name="fric"></a></p>
<h2 id="apply-log-filter-rules-in-code">Apply log filter rules in code</h2>
<p>The preferred approach for setting log filter rules is by using <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/configuration/?view=aspnetcore-9.0" data-linktype="relative-path">Configuration</a>.</p>
<p>The following example shows how to register filter rules in code:</p>
<pre><code class="lang-csharp">public class Program
{
    public static void Main(string[] args)
    {
        CreateHostBuilder(args).Build().Run();
    }

    public static IHostBuilder CreateHostBuilder(string[] args) =&gt;
        Host.CreateDefaultBuilder(args)
            .ConfigureLogging(logging =&gt;
               logging.AddFilter("System", LogLevel.Debug)
                  .AddFilter&lt;DebugLoggerProvider&gt;("Microsoft", LogLevel.Information)
                  .AddFilter&lt;ConsoleLoggerProvider&gt;("Microsoft", LogLevel.Trace))
            .ConfigureWebHostDefaults(webBuilder =&gt;
            {
                webBuilder.UseStartup&lt;Startup&gt;();
            });
}
</code></pre>
<p><code>logging.AddFilter("System", LogLevel.Debug)</code> specifies the <code>System</code> category and log level <code>Debug</code>. The filter is applied to all providers because a specific provider was not configured.</p>
<p><code>AddFilter&lt;DebugLoggerProvider&gt;("Microsoft", LogLevel.Information)</code> specifies:</p>
<ul>
<li>The <code>Debug</code> logging provider.</li>
<li>Log level <code>Information</code> and higher.</li>
<li>All categories starting with <code>"Microsoft"</code>.</li>
</ul>
</div>
<div data-moniker="aspnetcore-5.0">
<h2 id="automatically-log-scope-with-spanid-traceid-and-parentid">Automatically log scope with SpanId, TraceId, and ParentId</h2>
<p>The logging libraries implicitly create a scope object with <code>SpanId</code>, <code>TraceId</code>, and <code>ParentId</code>. This behavior is configured via <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loggerfactoryoptions.activitytrackingoptions#microsoft-extensions-logging-loggerfactoryoptions-activitytrackingoptions" class="no-loc" data-linktype="absolute-path">ActivityTrackingOptions</a>.</p>
<pre><code class="lang-csharp">  var loggerFactory = LoggerFactory.Create(logging =&gt;
  {
      logging.Configure(options =&gt;
      {
          options.ActivityTrackingOptions = ActivityTrackingOptions.SpanId
                                              | ActivityTrackingOptions.TraceId
                                              | ActivityTrackingOptions.ParentId;
      }).AddSimpleConsole(options =&gt;
      {
          options.IncludeScopes = true;
      });
  });
</code></pre>
<p>If the <code>traceparent</code> http request header is set, the <code>ParentId</code> in the log scope shows the W3C <code>parent-id</code> from in-bound <code>traceparent</code> header and the <code>SpanId</code> in the log scope shows the updated <code>parent-id</code> for the next out-bound step/span. For more information, see <a href="https://www.w3.org/TR/trace-context/#mutating-the-traceparent-field" data-linktype="external">Mutating the traceparent Field</a>.</p>
</div>
<div data-moniker="aspnetcore-3.1 aspnetcore-5.0">
<h2 id="create-a-custom-logger">Create a custom logger</h2>
<p>To create a custom logger, see <a href="https://learn.microsoft.com/en-us/dotnet/core/extensions/custom-logging-provider" data-linktype="absolute-path">Implement a custom logging provider in .NET</a>.</p>
<h2 id="additional-resources">Additional resources</h2>
<ul>
<li><a href="https://learn.microsoft.com/en-us/dotnet/core/extensions/high-performance-logging" data-linktype="absolute-path">High performance logging</a></li>
<li>Logging bugs should be created in the <a href="https://github.com/dotnet/runtime/issues" data-linktype="external">github.com/dotnet/runtime/</a> repo.</li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/blazor/fundamentals/logging?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Blazor logging</a></li>
</ul>
</div>
</div>
					
		<div
			id="ms--inline-notifications"
			class="margin-block-xs"
			data-bi-name="inline-notification"
		></div>
	 
		<div
			id="assertive-live-region"
			role="alert"
			aria-live="assertive"
			class="visually-hidden"
			aria-relevant="additions"
			aria-atomic="true"
		></div>
		<div
			id="polite-live-region"
			role="status"
			aria-live="polite"
			class="visually-hidden"
			aria-relevant="additions"
			aria-atomic="true"
		></div>
	
					
			
		<!-- feedback section -->
		<section
			class="feedback-section position-relative margin-top-lg border border-radius padding-xxs display-none-print"
			data-bi-name="open-source-feedback-section"
			data-open-source-feedback-section
			hidden
		>
			<div class="display-flex flex-direction-column flex-direction-row-tablet">
				<div
					class="width-450-tablet padding-inline-xs padding-inline-xs-tablet padding-top-xs padding-bottom-sm padding-top-xs-tablet background-color-body-medium"
				>
					<div class="display-flex flex-direction-column">
						<div class="padding-bottom-xxs">
							<span class="icon margin-right-xxs" aria-hidden="true">
								<span class="docon docon-brand-github"></span>
							</span>
							<span class="font-weight-semibold">
								Collaborate with us on GitHub
							</span>
						</div>
						<span class="line-height-normal">
							The source for this content can be found on GitHub, where you can also create and review issues and pull requests. For more information, see <a href="https://learn.microsoft.com/contribute/content/dotnet/dotnet-contribute">our contributor guide</a>.
						</span>
					</div>
				</div>
				<div
					class="display-flex gap-xs width-full-tablet flex-direction-column padding-xs justify-content-space-evenly"
				>
					<div class="media">
						
					<div class="media-left">
						<div class="image image-36x36" hidden data-open-source-image-container>
							<img
								class="theme-display is-light"
								src="https://learn.microsoft.com/media/logos/logo_net.svg"
								aria-hidden="true"
								data-open-source-image-light
							/>
							<img
								class="theme-display is-dark is-high-contrast"
								src="https://learn.microsoft.com/media/logos/logo_net.svg"
								aria-hidden="true"
								data-open-source-image-dark
							/>
						</div>
					</div>
			  

						<div class="media-content">
							<p
								class="font-size-xl font-weight-semibold margin-bottom-xxs"
								data-open-source-product-title
							>
								ASP.NET Core
							</p>
							<div class="display-flex gap-xs flex-direction-column">
								<p class="line-height-normal" data-open-source-product-description></p>
								<div class="display-flex gap-xs flex-direction-column">
									<a href="#" data-github-link>
										<span class="icon margin-right-xxs" aria-hidden="true">
											<span class="docon docon-bug"></span>
										</span>
										<span>Open a documentation issue</span>
									</a>
									<a
										href="https://github.com/dotnet/aspnetcore/blob/main/CONTRIBUTING.md"
										class="display-block margin-top-auto font-size-md"
										data-feedback-product-url
									>
										<span class="icon margin-right-xxs" aria-hidden="true">
											<span class="docon docon-feedback"></span>
										</span>
										<span>Provide product feedback</span>
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<!-- end feedback section -->
	
			
		<!-- feedback section -->
		<section
			id="site-user-feedback-footer"
			class="font-size-sm margin-top-md display-none-print display-none-desktop"
			data-test-id="site-user-feedback-footer"
			data-bi-name="site-feedback-section"
		>
			<hr class="hr" />
			<h2 id="ms--feedback" class="title is-3">Feedback</h2>
			<div class="display-flex flex-wrap-wrap align-items-center">
				<p class="font-weight-semibold margin-xxs margin-left-none">
					Was this page helpful?
				</p>
				<div class="buttons">
					<button
						class="thumb-rating-button like button button-primary button-sm"
						data-test-id="footer-rating-yes"
						data-binary-rating-response="rating-yes"
						type="button"
						title="This article is helpful"
						data-bi-name="button-rating-yes"
						aria-pressed="false"
					>
						<span class="icon" aria-hidden="true">
							<span class="docon docon-like"></span>
						</span>
						<span>Yes</span>
					</button>
					<button
						class="thumb-rating-button dislike button button-primary button-sm"
						data-test-id="footer-rating-no"
						data-binary-rating-response="rating-no"
						type="button"
						title="This article is not helpful"
						data-bi-name="button-rating-no"
						aria-pressed="false"
					>
						<span class="icon" aria-hidden="true">
							<span class="docon docon-dislike"></span>
						</span>
						<span>No</span>
					</button>
				</div>
			</div>
		</section>
		<!-- end feedback section -->
	
		
				</div>
				
		<div id="ms--additional-resources-mobile" class="display-none-print">
			<hr class="hr" hidden />
			<h2 id="ms--additional-resources-mobile-heading" class="title is-3" hidden>
				Additional resources
			</h2>
			
		<section
			id="right-rail-recommendations-mobile"
			class=""
			data-bi-name="recommendations"
			hidden
		></section>
	 
		<section
			id="right-rail-training-mobile"
			class=""
			data-bi-name="learning-resource-card"
			hidden
		></section>
	 
		<section
			id="right-rail-events-mobile"
			class=""
			data-bi-name="events-card"
			hidden
		></section>
	 
		<section
			id="right-rail-qna-mobile"
			class="margin-top-xxs"
			data-bi-name="qna-link-card"
			hidden
		></section>
	
		</div>
	
			</div>
			
		<div
			id="action-panel"
			role="region"
			aria-label="Action Panel"
			class="action-panel"
			tabindex="-1"
		></div>
	
		
				</main>
				<aside
					id="layout-body-aside"
					class="layout-body-aside "
					data-bi-name="aside"
			  >
					
		<div
			id="ms--additional-resources"
			class="right-container padding-sm display-none display-block-desktop height-full"
			data-bi-name="pageactions"
			role="complementary"
			aria-label="Additional resources"
		>
			<div id="affixed-right-container" data-bi-name="right-column">
				
		<nav
			id="side-doc-outline"
			class="doc-outline border-bottom padding-bottom-xs margin-bottom-xs"
			data-bi-name="intopic toc"
			aria-label="In this article"
		>
			<h3>In this article</h3>
		</nav>
	
				<!-- Feedback -->
				
		<section
			id="ms--site-user-feedback-right-rail"
			class="font-size-sm display-none-print"
			data-test-id="site-user-feedback-right-rail"
			data-bi-name="site-feedback-right-rail"
		>
			<p class="font-weight-semibold margin-bottom-xs">Was this page helpful?</p>
			<div class="buttons">
				<button
					class="thumb-rating-button like button button-primary button-sm"
					data-test-id="right-rail-rating-yes"
					data-binary-rating-response="rating-yes"
					type="button"
					title="This article is helpful"
					data-bi-name="button-rating-yes"
					aria-pressed="false"
				>
					<span class="icon" aria-hidden="true">
						<span class="docon docon-like"></span>
					</span>
					<span>Yes</span>
				</button>
				<button
					class="thumb-rating-button dislike button button-primary button-sm"
					data-test-id="right-rail-rating-no"
					data-binary-rating-response="rating-no"
					type="button"
					title="This article is not helpful"
					data-bi-name="button-rating-no"
					aria-pressed="false"
				>
					<span class="icon" aria-hidden="true">
						<span class="docon docon-dislike"></span>
					</span>
					<span>No</span>
				</button>
			</div>
		</section>
	
			</div>
		</div>
	
			  </aside> <section
					id="layout-body-flyout"
					class="layout-body-flyout "
					data-bi-name="flyout"
			  >
					 <div
	class="height-full border-left background-color-body-medium"
	id="ask-learn-flyout"
></div>
			  </section> <div class="layout-body-footer " data-bi-name="layout-footer">
		<footer
			id="footer"
			data-test-id="footer"
			data-bi-name="footer"
			class="footer-layout has-padding has-default-focus border-top  uhf-container"
			role="contentinfo"
		>
			<div class="display-flex gap-xs flex-wrap-wrap is-full-height padding-right-lg-desktop">
				
		<a
			data-mscc-ic="false"
			href="#"
			data-bi-name="select-locale"
			class="locale-selector-link flex-shrink-0 button button-sm button-clear external-link-indicator"
			id=""
			title=""
			><span class="icon" aria-hidden="true"
				><span class="docon docon-world"></span></span
			><span class="local-selector-link-text">en-us</span></a
		>
	
				<div class="ccpa-privacy-link" data-ccpa-privacy-link hidden>
		
		<a
			data-mscc-ic="false"
			href="https://aka.ms/yourcaliforniaprivacychoices"
			data-bi-name="your-privacy-choices"
			class="button button-sm button-clear flex-shrink-0 external-link-indicator"
			id=""
			title=""
			>
		<svg
			xmlns="http://www.w3.org/2000/svg"
			viewBox="0 0 30 14"
			xml:space="preserve"
			height="16"
			width="43"
			aria-hidden="true"
			focusable="false"
		>
			<path
				d="M7.4 12.8h6.8l3.1-11.6H7.4C4.2 1.2 1.6 3.8 1.6 7s2.6 5.8 5.8 5.8z"
				style="fill-rule:evenodd;clip-rule:evenodd;fill:#fff"
			></path>
			<path
				d="M22.6 0H7.4c-3.9 0-7 3.1-7 7s3.1 7 7 7h15.2c3.9 0 7-3.1 7-7s-3.2-7-7-7zm-21 7c0-3.2 2.6-5.8 5.8-5.8h9.9l-3.1 11.6H7.4c-3.2 0-5.8-2.6-5.8-5.8z"
				style="fill-rule:evenodd;clip-rule:evenodd;fill:#06f"
			></path>
			<path
				d="M24.6 4c.2.2.2.6 0 .8L22.5 7l2.2 2.2c.2.2.2.6 0 .8-.2.2-.6.2-.8 0l-2.2-2.2-2.2 2.2c-.2.2-.6.2-.8 0-.2-.2-.2-.6 0-.8L20.8 7l-2.2-2.2c-.2-.2-.2-.6 0-.8.2-.2.6-.2.8 0l2.2 2.2L23.8 4c.2-.2.6-.2.8 0z"
				style="fill:#fff"
			></path>
			<path
				d="M12.7 4.1c.2.2.3.6.1.8L8.6 9.8c-.1.1-.2.2-.3.2-.2.1-.5.1-.7-.1L5.4 7.7c-.2-.2-.2-.6 0-.8.2-.2.6-.2.8 0L8 8.6l3.8-4.5c.2-.2.6-.2.9 0z"
				style="fill:#06f"
			></path>
		</svg>
	
			<span>Your Privacy Choices</span></a
		>
	
	</div>
				<div class="flex-shrink-0">
		<div class="dropdown has-caret-up">
			<button
				data-test-id="theme-selector-button"
				class="dropdown-trigger button button-clear button-sm has-inner-focus theme-dropdown-trigger"
				aria-controls="{{ themeMenuId }}"
				aria-expanded="false"
				title="Theme"
				data-bi-name="theme"
			>
				<span class="icon">
					<span class="docon docon-sun" aria-hidden="true"></span>
				</span>
				<span>Theme</span>
				<span class="icon expanded-indicator" aria-hidden="true">
					<span class="docon docon-chevron-down-light"></span>
				</span>
			</button>
			<div class="dropdown-menu" id="{{ themeMenuId }}" role="menu">
				<ul class="theme-selector padding-xxs" data-test-id="theme-dropdown-menu">
					<li class="theme display-block">
						<button
							class="button button-clear button-sm theme-control button-block justify-content-flex-start text-align-left"
							data-theme-to="light"
						>
							<span class="theme-light margin-right-xxs">
								<span
									class="theme-selector-icon border display-inline-block has-body-background"
									aria-hidden="true"
								>
									<svg class="svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 14">
										<rect width="22" height="14" class="has-fill-body-background" />
										<rect x="5" y="5" width="12" height="4" class="has-fill-secondary" />
										<rect x="5" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="8" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="11" y="2" width="3" height="1" class="has-fill-secondary" />
										<rect x="1" y="1" width="2" height="2" class="has-fill-secondary" />
										<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary" />
										<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary" />
									</svg>
								</span>
							</span>
							<span role="menuitem"> Light </span>
						</button>
					</li>
					<li class="theme display-block">
						<button
							class="button button-clear button-sm theme-control button-block justify-content-flex-start text-align-left"
							data-theme-to="dark"
						>
							<span class="theme-dark margin-right-xxs">
								<span
									class="border theme-selector-icon display-inline-block has-body-background"
									aria-hidden="true"
								>
									<svg class="svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 14">
										<rect width="22" height="14" class="has-fill-body-background" />
										<rect x="5" y="5" width="12" height="4" class="has-fill-secondary" />
										<rect x="5" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="8" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="11" y="2" width="3" height="1" class="has-fill-secondary" />
										<rect x="1" y="1" width="2" height="2" class="has-fill-secondary" />
										<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary" />
										<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary" />
									</svg>
								</span>
							</span>
							<span role="menuitem"> Dark </span>
						</button>
					</li>
					<li class="theme display-block">
						<button
							class="button button-clear button-sm theme-control button-block justify-content-flex-start text-align-left"
							data-theme-to="high-contrast"
						>
							<span class="theme-high-contrast margin-right-xxs">
								<span
									class="border theme-selector-icon display-inline-block has-body-background"
									aria-hidden="true"
								>
									<svg class="svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 14">
										<rect width="22" height="14" class="has-fill-body-background" />
										<rect x="5" y="5" width="12" height="4" class="has-fill-secondary" />
										<rect x="5" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="8" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="11" y="2" width="3" height="1" class="has-fill-secondary" />
										<rect x="1" y="1" width="2" height="2" class="has-fill-secondary" />
										<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary" />
										<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary" />
									</svg>
								</span>
							</span>
							<span role="menuitem"> High contrast </span>
						</button>
					</li>
				</ul>
			</div>
		</div>
	</div>
			</div>
			<ul class="links" data-bi-name="footerlinks">
				<li class="manage-cookies-holder" hidden=""></li>
				<li>
		
		<a
			data-mscc-ic="false"
			href="https://learn.microsoft.com/en-us/principles-for-ai-generated-content"
			data-bi-name="aiDisclaimer"
			class=" external-link-indicator"
			id=""
			title=""
			>AI Disclaimer</a
		>
	
	</li><li>
		
		<a
			data-mscc-ic="false"
			href="https://learn.microsoft.com/en-us/previous-versions/"
			data-bi-name="archivelink"
			class=" external-link-indicator"
			id=""
			title=""
			>Previous Versions</a
		>
	
	</li> <li>
		
		<a
			data-mscc-ic="false"
			href="https://techcommunity.microsoft.com/t5/microsoft-learn-blog/bg-p/MicrosoftLearnBlog"
			data-bi-name="bloglink"
			class=" external-link-indicator"
			id=""
			title=""
			>Blog</a
		>
	
	</li> <li>
		
		<a
			data-mscc-ic="false"
			href="https://learn.microsoft.com/en-us/contribute"
			data-bi-name="contributorGuide"
			class=" external-link-indicator"
			id=""
			title=""
			>Contribute</a
		>
	
	</li><li>
		
		<a
			data-mscc-ic="false"
			href="https://go.microsoft.com/fwlink/?LinkId=521839"
			data-bi-name="privacy"
			class=" external-link-indicator"
			id=""
			title=""
			>Privacy</a
		>
	
	</li><li>
		
		<a
			data-mscc-ic="false"
			href="https://learn.microsoft.com/en-us/legal/termsofuse"
			data-bi-name="termsofuse"
			class=" external-link-indicator"
			id=""
			title=""
			>Terms of Use</a
		>
	
	</li><li>
		
		<a
			data-mscc-ic="false"
			href="https://www.microsoft.com/legal/intellectualproperty/Trademarks/"
			data-bi-name="trademarks"
			class=" external-link-indicator"
			id=""
			title=""
			>Trademarks</a
		>
	
	</li>
				<li>&copy; Microsoft 2025</li>
			</ul>
		</footer>
	</footer>
			</body>
		
<!-- Mirrored from learn.microsoft.com/en-us/aspnet/core/fundamentals/logging/?view=aspnetcore-9.0 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Aug 2025 14:53:03 GMT -->
</html>