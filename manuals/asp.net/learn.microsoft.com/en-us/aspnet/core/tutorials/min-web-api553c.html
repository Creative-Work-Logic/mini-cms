 <!DOCTYPE html>
		<html
			class="layout layout-holy-grail   show-table-of-contents conceptual show-breadcrumb default-focus"
			lang="en-us"
			dir="ltr"
			data-authenticated="false"
			data-auth-status-determined="false"
			data-target="docs"
			x-ms-format-detection="none"
		>
			
		
<!-- Mirrored from learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api?view=aspnetcore-9.0 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Aug 2025 14:53:03 GMT -->
<head>
			<title>Tutorial: Create a minimal API with ASP.NET Core | Microsoft Learn</title>
			<meta charset="utf-8" />
			<meta name="viewport" content="width=device-width, initial-scale=1.0" />
			<meta name="color-scheme" content="light dark" />

			<meta name="description" content="Learn how to build a minimal API with ASP.NET Core." />
			<link rel="canonical" href="min-web-api553c.html?view=aspnetcore-9.0" /> 

			<!-- Non-customizable open graph and sharing-related metadata -->
			<meta name="twitter:card" content="summary" />
			<meta name="twitter:site" content="@MicrosoftLearn" />
			<meta property="og:type" content="website" />
			<meta property="og:image:alt" content="Tutorial: Create a minimal API with ASP.NET Core | Microsoft Learn" />
			<meta property="og:image" content="https://learn.microsoft.com/dotnet/media/dotnet-logo.png" />
			<!-- Page specific open graph and sharing-related metadata -->
			<meta property="og:title" content="Tutorial: Create a minimal API with ASP.NET Core" />
			<meta property="og:url" content="min-web-api553c.html?view=aspnetcore-9.0" />
			<meta property="og:description" content="Learn how to build a minimal API with ASP.NET Core." />
			<meta name="platform_id" content="bb56f646-dd6c-15ea-7789-1492b2e548e8" /> <meta name="scope" content="ASP.NET Core" />
			<meta name="locale" content="en-us" />
			 <meta name="adobe-target" content="true" />
			<meta name="uhfHeaderId" content="MSDocsHeader-AspNet" />

			<meta name="page_type" content="conceptual" />

			<!--page specific meta tags-->
			

			<!-- custom meta tags -->
			
		<meta name="breadcrumb_path" content="/aspnet/core/breadcrumb/toc.json" />
	
		<meta name="feedback_system" content="OpenSource" />
	
		<meta name="feedback_product_url" content="https://github.com/dotnet/aspnetcore/blob/main/CONTRIBUTING.md" />
	
		<meta name="ms.service" content="aspnet-core" />
	
		<meta name="ms.topic" content="tutorial" />
	
		<meta name="ms.subservice" content="tutorials" />
	
		<meta name="recommendations" content="false" />
	
		<meta name="author" content="wadepickett" />
	
		<meta name="ms.author" content="wpickett" />
	
		<meta name="ms.date" content="2024-07-29T00:00:00Z" />
	
		<meta name="ms.custom" content="engagement-fy24" />
	
		<meta name="monikerRange" content="&gt;= aspnetcore-6.0" />
	
		<meta name="uid" content="tutorials/min-web-api" />
	
		<meta name="document_id" content="ab408035-6313-a183-9940-32de00e0e977" />
	
		<meta name="document_version_independent_id" content="ab408035-6313-a183-9940-32de00e0e977" />
	
		<meta name="updated_at" content="2025-03-14T15:28:00Z" />
	
		<meta name="original_content_git_url" content="https://github.com/dotnet/AspNetCore.Docs/blob/live/aspnetcore/tutorials/min-web-api.md" />
	
		<meta name="gitcommit" content="https://github.com/dotnet/AspNetCore.Docs/blob/f0bec113a7bab52bca8deb8456c8c87f765214be/aspnetcore/tutorials/min-web-api.md" />
	
		<meta name="git_commit_id" content="f0bec113a7bab52bca8deb8456c8c87f765214be" />
	
		<meta name="monikers" content="aspnetcore-6.0" />
	
		<meta name="monikers" content="aspnetcore-7.0" />
	
		<meta name="monikers" content="aspnetcore-8.0" />
	
		<meta name="monikers" content="aspnetcore-9.0" />
	
		<meta name="monikers" content="aspnetcore-10.0" />
	
		<meta name="default_moniker" content="aspnetcore-9.0" />
	
		<meta name="site_name" content="Docs" />
	
		<meta name="depot_name" content="MSDN.aspnet-core-conceptual" />
	
		<meta name="schema" content="Conceptual" />
	
		<meta name="toc_rel" content="../toc.json" />
	
		<meta name="pdf_url_template" content="https://learn.microsoft.com/pdfstore/en-us/MSDN.aspnet-core-conceptual/{branchName}{pdfName}" />
	
		<meta name="feedback_help_link_type" content="" />
	
		<meta name="feedback_help_link_url" content="" />
	
		<meta name="word_count" content="16324" />
	
		<meta name="config_moniker_range" content="&gt;= aspnetcore-1.0" />
	
		<meta name="asset_id" content="tutorials/min-web-api" />
	
		<meta name="moniker_range_name" content="db645326662947a64e98e55047c507c6" />
	
		<meta name="item_type" content="Content" />
	
		<meta name="source_path" content="aspnetcore/tutorials/min-web-api.md" />
	
		<meta name="previous_tlsh_hash" content="6FE21A63C70DE5416E824D2B08AFBD6062F0C04E9AA07EC829767691E78E2EA30732EE75C723A3CA733303D65195A94C46D5FF6DD07C77A25E2558FC825D3282673D27F6C6" />
	
		<meta name="github_feedback_content_git_url" content="https://github.com/dotnet/AspNetCore.Docs/blob/main/aspnetcore/tutorials/min-web-api.md" />
	 
		<meta name="cmProducts" content="https://authoring-docs-microsoft.poolparty.biz/devrel/911a44a7-2f6c-477c-810f-dc8b7d425cce" data-source="generated" />
	
		<meta name="cmProducts" content="https://authoring-docs-microsoft.poolparty.biz/devrel/4628cbd9-6f47-4ae1-b371-d34636609eaf" data-source="generated" />
	
		<meta name="cmProducts" content="https://authoring-docs-microsoft.poolparty.biz/devrel/d452572f-6212-498f-9050-ca4a9e50a425" data-source="generated" />
	
		<meta name="spProducts" content="https://authoring-docs-microsoft.poolparty.biz/devrel/14f2b9d5-6f06-45a8-ac5f-313eaa351153" data-source="generated" />
	
		<meta name="spProducts" content="https://authoring-docs-microsoft.poolparty.biz/devrel/be21deb8-8c64-44b0-b71f-2dc56ca7364f" data-source="generated" />
	
		<meta name="spProducts" content="https://authoring-docs-microsoft.poolparty.biz/devrel/a12e40b7-59a2-4437-96e2-166ce622b864" data-source="generated" />
	

			<!-- assets and js globals -->
			
			<link rel="stylesheet" href="https://learn.microsoft.com/static/assets/0.4.03137.7032-e8b681c0/styles/site-ltr.css" />
			<link rel="preconnect" href="http://mscom.demdex.net/" crossorigin />
						<link rel="dns-prefetch" href="http://target.microsoft.com/" />
						<link rel="dns-prefetch" href="http://microsoftmscompoc.tt.omtrdc.net/" />
						<link
							rel="preload"
							as="script"
							href="https://learn.microsoft.com/static/third-party/adobe-target/at-js/2.9.0/at.js"
							integrity="sha384-1/viVM50hgc33O2gOgkWz3EjiD/Fy/ld1dKYXJRUyjNYVEjSUGcSN+iPiQF7e4cu"
							crossorigin="anonymous"
							id="adobe-target-script"
							type="application/javascript"
						/>
			<script src="https://wcpstatic.microsoft.com/mscc/lib/v2/wcp-consent.js"></script>
			<script src="https://js.monitor.azure.com/scripts/c/ms.jsll-4.min.js"></script>
			<script src="https://learn.microsoft.com/_themes/docs.theme/master/en-us/_themes/global/deprecation.js"></script>

			<!-- msdocs global object -->
			<script id="msdocs-script">
		var msDocs = {
  "environment": {
    "accessLevel": "online",
    "azurePortalHostname": "portal.azure.com",
    "reviewFeatures": false,
    "supportLevel": "production",
    "systemContent": true,
    "siteName": "learn",
    "legacyHosting": false
  },
  "data": {
    "contentLocale": "en-us",
    "contentDir": "ltr",
    "userLocale": "en-us",
    "userDir": "ltr",
    "pageTemplate": "Conceptual",
    "brand": "",
    "context": {},
    "standardFeedback": false,
    "showFeedbackReport": false,
    "feedbackHelpLinkType": "",
    "feedbackHelpLinkUrl": "",
    "feedbackSystem": "OpenSource",
    "feedbackGitHubRepo": "dotnet/AspNetCore.Docs",
    "feedbackProductUrl": "https://github.com/dotnet/aspnetcore/blob/main/CONTRIBUTING.md",
    "extendBreadcrumb": false,
    "isEditDisplayable": true,
    "isPrivateUnauthorized": false,
    "hideViewSource": false,
    "isPermissioned": false,
    "hasRecommendations": true,
    "contributors": [
      {
        "name": "wadepickett",
        "url": "https://github.com/wadepickett"
      },
      {
        "name": "dominiqueplante",
        "url": "https://github.com/dominiqueplante"
      },
      {
        "name": "StarNuik",
        "url": "https://github.com/StarNuik"
      },
      {
        "name": "Rick-Anderson",
        "url": "https://github.com/Rick-Anderson"
      },
      {
        "name": "timdeschryver",
        "url": "https://github.com/timdeschryver"
      },
      {
        "name": "SuleymanCommits",
        "url": "https://github.com/SuleymanCommits"
      },
      {
        "name": "tdykstra",
        "url": "https://github.com/tdykstra"
      },
      {
        "name": "dersonmutemba",
        "url": "https://github.com/dersonmutemba"
      },
      {
        "name": "asbjornu",
        "url": "https://github.com/asbjornu"
      },
      {
        "name": "brunolins16",
        "url": "https://github.com/brunolins16"
      },
      {
        "name": "guardrex",
        "url": "https://github.com/guardrex"
      },
      {
        "name": "msal4",
        "url": "https://github.com/msal4"
      },
      {
        "name": "maxalmonte14",
        "url": "https://github.com/maxalmonte14"
      },
      {
        "name": "TheCodeTraveler",
        "url": "https://github.com/TheCodeTraveler"
      },
      {
        "name": "serpent5",
        "url": "https://github.com/serpent5"
      },
      {
        "name": "xh286286",
        "url": "https://github.com/xh286286"
      },
      {
        "name": "GitHubPang",
        "url": "https://github.com/GitHubPang"
      }
    ],
    "openSourceFeedbackIssueUrl": "https://github.com/dotnet/aspnetcore.docs/issues/new?template=customer-feedback.yml",
    "openSourceFeedbackIssueTitle": "",
    "openSourceFeedbackIssueLabels": "Source - Docs.ms,:watch: Not Triaged"
  },
  "functions": {}
};;
	</script>

			<!-- base scripts, msdocs global should be before this -->
			<script src="https://learn.microsoft.com/static/assets/0.4.03137.7032-e8b681c0/scripts/en-us/index-docs.js"></script>
			

			<!-- json-ld -->
			
		</head>
	
			<body
				id="body"
				data-bi-name="body"
				class="layout-body "
				lang="en-us"
				dir="ltr"
			>
				<header class="layout-body-header">
		<div class="header-holder has-default-focus">
			
		<a
			href="#main"
			
			style="z-index: 1070"
			class="outline-color-text visually-hidden-until-focused position-fixed inner-focus focus-visible top-0 left-0 right-0 padding-xs text-align-center background-color-body"
			
		>
			Skip to main content
		</a>
	
		<a
			href="#"
			data-skip-to-ask-learn
			style="z-index: 1070"
			class="outline-color-text visually-hidden-until-focused position-fixed inner-focus focus-visible top-0 left-0 right-0 padding-xs text-align-center background-color-body"
			hidden
		>
			Skip to Ask Learn chat experience
		</a>
	

			<div hidden id="cookie-consent-holder" data-test-id="cookie-consent-container"></div>
			<!-- Unsupported browser warning -->
			<div
				id="unsupported-browser"
				style="background-color: white; color: black; padding: 16px; border-bottom: 1px solid grey;"
				hidden
			>
				<div style="max-width: 800px; margin: 0 auto;">
					<p style="font-size: 24px">This browser is no longer supported.</p>
					<p style="font-size: 16px; margin-top: 16px;">
						Upgrade to Microsoft Edge to take advantage of the latest features, security updates, and technical support.
					</p>
					<div style="margin-top: 12px;">
						<a
							href="https://go.microsoft.com/fwlink/p/?LinkID=2092881"
							style="background-color: #0078d4; border: 1px solid #0078d4; color: white; padding: 6px 12px; border-radius: 2px; display: inline-block;"
						>
							Download Microsoft Edge
						</a>
						<a
							href="https://learn.microsoft.com/en-us/lifecycle/faq/internet-explorer-microsoft-edge"
							style="background-color: white; padding: 6px 12px; border: 1px solid #505050; color: #171717; border-radius: 2px; display: inline-block;"
						>
							More info about Internet Explorer and Microsoft Edge
						</a>
					</div>
				</div>
			</div>
			<!-- site header -->
			<header
				id="ms--site-header"
				data-test-id="site-header-wrapper"
				role="banner"
				itemscope="itemscope"
				itemtype="http://schema.org/Organization"
			>
				<div
					id="ms--mobile-nav"
					class="site-header display-none-tablet padding-inline-none gap-none"
					data-bi-name="mobile-header"
					data-test-id="mobile-header"
				></div>
				<div
					id="ms--primary-nav"
					class="site-header display-none display-flex-tablet"
					data-bi-name="L1-header"
					data-test-id="primary-header"
				></div>
				<div
					id="ms--secondary-nav"
					class="site-header display-none display-flex-tablet"
					data-bi-name="L2-header"
					data-test-id="secondary-header"
				></div>
			</header>
			
		<!-- banner -->
		<div data-banner>
			<div id="disclaimer-holder"></div>
			
		</div>
		<!-- banner end -->
	
		</div>
	</header>
				 <section
					id="layout-body-menu"
					class="layout-body-menu display-flex"
					data-bi-name="menu"
			  >
					<div
		id="left-container"
		class="left-container display-none display-block-tablet padding-inline-sm padding-bottom-sm width-full"
	>
		<nav
			id="affixed-left-container"
			class="margin-top-sm-tablet position-sticky display-flex flex-direction-column"
			aria-label="Primary"
		></nav>
	</div>
			  </section>

				<main
					id="main"
					role="main"
					class="layout-body-main "
					data-bi-name="content"
					lang="en-us"
					dir="ltr"
				>
					
			<div
		id="ms--content-header"
		class="content-header default-focus border-bottom-none"
		data-bi-name="content-header"
	>
		<div class="content-header-controls margin-xxs margin-inline-sm-tablet">
			<button
				type="button"
				class="contents-button button button-sm margin-right-xxs"
				data-bi-name="contents-expand"
				aria-haspopup="true"
				data-contents-button
			>
				<span class="icon" aria-hidden="true"><span class="docon docon-menu"></span></span>
				<span class="contents-expand-title"> Table of contents </span>
			</button>
			<button
				type="button"
				class="ap-collapse-behavior ap-expanded button button-sm"
				data-bi-name="ap-collapse"
				aria-controls="action-panel"
			>
				<span class="icon" aria-hidden="true"><span class="docon docon-exit-mode"></span></span>
				<span>Exit editor mode</span>
			</button>
		</div>
	</div>
			<div data-main-column class="padding-sm padding-top-none padding-top-sm-tablet">
				<div>
					
		<div id="article-header" class="background-color-body margin-bottom-xs display-none-print">
			<div class="display-flex align-items-center justify-content-space-between">
				
		<details
			id="article-header-breadcrumbs-overflow-popover"
			class="popover"
			data-for="article-header-breadcrumbs"
		>
			<summary
				class="button button-clear button-primary button-sm inner-focus"
				aria-label="All breadcrumbs"
			>
				<span class="icon">
					<span class="docon docon-more"></span>
				</span>
			</summary>
			<div id="article-header-breadcrumbs-overflow" class="popover-content padding-none"></div>
		</details>

		<bread-crumbs
			id="article-header-breadcrumbs"
			data-test-id="article-header-breadcrumbs"
			class="overflow-hidden flex-grow-1 margin-right-sm margin-right-md-tablet margin-right-lg-desktop margin-left-negative-xxs padding-left-xxs"
		></bread-crumbs>
	 
		<div
			id="article-header-page-actions"
			class="opacity-none margin-left-auto display-flex flex-wrap-no-wrap align-items-stretch"
		>
			
		<button
			class="button button-sm border-none inner-focus display-none-tablet flex-shrink-0 "
			data-bi-name="ask-learn-assistant-entry"
			data-test-id="ask-learn-assistant-modal-entry-mobile"
			data-ask-learn-modal-entry
			type="button"
			style="min-width: max-content;"
			aria-expanded="false"
			aria-label="Ask Learn"
			hidden
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
		</button>
		<button
			class="button button-sm display-none display-inline-flex-tablet display-none-desktop flex-shrink-0 margin-right-xxs border-color-ask-learn "
			data-bi-name="ask-learn-assistant-entry"
			data-test-id="ask-learn-assistant-modal-entry-tablet"
			data-ask-learn-modal-entry
			type="button"
			style="min-width: max-content;"
			aria-expanded="false"
			hidden
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
			<span>Ask Learn</span>
		</button>
		<button
			class="button button-sm display-none flex-shrink-0 display-inline-flex-desktop margin-right-xxs	border-color-ask-learn "
			data-bi-name="ask-learn-assistant-entry"
			data-test-id="ask-learn-assistant-flyout-entry"
			data-ask-learn-flyout-entry
			data-flyout-button="toggle"
			type="button"
			style="min-width: max-content;"
			aria-expanded="false"
			aria-controls="ask-learn-flyout"
			hidden
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
			<span>Ask Learn</span>
		</button>
	 
		<button
			type="button"
			id="ms--focus-mode-button"
			data-focus-mode
			data-bi-name="focus-mode-entry"
			class="button button-sm flex-shrink-0 margin-right-xxs display-none display-inline-flex-desktop"
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-glasses"></span>
			</span>
			<span>Focus mode</span>
		</button>
	 

			<details class="popover popover-right" id="article-header-page-actions-overflow">
				<summary
					class="justify-content-flex-start button button-clear button-sm button-primary inner-focus"
					aria-label="More actions"
					title="More actions"
				>
					<span class="icon" aria-hidden="true">
						<span class="docon docon-more-vertical"></span>
					</span>
				</summary>
				<div class="popover-content">
					
		<button
			data-page-action-item="overflow-mobile"
			type="button"
			class="button-block button-sm has-inner-focus button button-clear display-none-tablet justify-content-flex-start text-align-left"
			data-bi-name="contents-expand"
			data-contents-button
			data-popover-close
		>
			<span class="icon">
				<span class="docon docon-editor-list-bullet" aria-hidden="true"></span>
			</span>
			<span class="contents-expand-title">Table of contents</span>
		</button>
	 
		<a
			id="lang-link-overflow"
			class="button-sm has-inner-focus button button-clear button-block justify-content-flex-start text-align-left"
			data-bi-name="language-toggle"
			data-page-action-item="overflow-all"
			data-check-hidden="true"
			data-read-in-link
			href="#"
			hidden
		>
			<span class="icon" aria-hidden="true" data-read-in-link-icon>
				<span class="docon docon-locale-globe"></span>
			</span>
			<span data-read-in-link-text>Read in English</span>
		</a>
	 
		<button
			type="button"
			class="collection button button-clear button-sm button-block justify-content-flex-start text-align-left inner-focus"
			data-list-type="collection"
			data-bi-name="collection"
			data-page-action-item="overflow-all"
			data-check-hidden="true"
			data-popover-close
		>
			<span class="icon" aria-hidden="true">
				<span class="docon docon-circle-addition"></span>
			</span>
			<span class="collection-status">Add</span>
		</button>
	
					
		<button
			type="button"
			class="collection button button-block button-clear button-sm justify-content-flex-start text-align-left inner-focus"
			data-list-type="plan"
			data-bi-name="plan"
			data-page-action-item="overflow-all"
			data-check-hidden="true"
			data-popover-close
			hidden
		>
			<span class="icon" aria-hidden="true">
				<span class="docon docon-circle-addition"></span>
			</span>
			<span class="plan-status">Add to plan</span>
		</button>
	  
		<a
			data-contenteditbtn
			class="button button-clear button-block button-sm inner-focus justify-content-flex-start text-align-left text-decoration-none"
			data-bi-name="edit"
			
			href="https://github.com/dotnet/AspNetCore.Docs/blob/main/aspnetcore/tutorials/min-web-api.md"
			data-original_content_git_url="https://github.com/dotnet/AspNetCore.Docs/blob/live/aspnetcore/tutorials/min-web-api.md"
			data-original_content_git_url_template="{repo}/blob/{branch}/aspnetcore/tutorials/min-web-api.md"
			data-pr_repo=""
			data-pr_branch=""
		>
			<span class="icon" aria-hidden="true">
				<span class="docon docon-edit-outline"></span>
			</span>
			<span>Edit</span>
		</a>
	
					
		<hr class="margin-block-xxs" />
		<h4 class="font-size-sm padding-left-xxs">Share via</h4>
		
					<a
						class="button button-clear button-sm inner-focus button-block justify-content-flex-start text-align-left text-decoration-none share-facebook"
						data-bi-name="facebook"
						data-page-action-item="overflow-all"
						href="#"
					>
						<span class="icon color-primary" aria-hidden="true">
							<span class="docon docon-facebook-share"></span>
						</span>
						<span>Facebook</span>
					</a>

					<a
						href="#"
						class="button button-clear button-sm inner-focus button-block justify-content-flex-start text-align-left text-decoration-none share-twitter"
						data-bi-name="twitter"
						data-page-action-item="overflow-all"
					>
						<span class="icon color-text" aria-hidden="true">
							<span class="docon docon-xlogo-share"></span>
						</span>
						<span>x.com</span>
					</a>

					<a
						href="#"
						class="button button-clear button-sm inner-focus button-block justify-content-flex-start text-align-left text-decoration-none share-linkedin"
						data-bi-name="linkedin"
						data-page-action-item="overflow-all"
					>
						<span class="icon color-primary" aria-hidden="true">
							<span class="docon docon-linked-in-logo"></span>
						</span>
						<span>LinkedIn</span>
					</a>
					<a
						href="#"
						class="button button-clear button-sm inner-focus button-block justify-content-flex-start text-align-left text-decoration-none share-email"
						data-bi-name="email"
						data-page-action-item="overflow-all"
					>
						<span class="icon color-primary" aria-hidden="true">
							<span class="docon docon-mail-message"></span>
						</span>
						<span>Email</span>
					</a>
			  
	 
		<hr class="margin-block-xxs" />
		<button
			class="button button-block button-clear button-sm justify-content-flex-start text-align-left inner-focus"
			type="button"
			data-bi-name="print"
			data-page-action-item="overflow-all"
			data-popover-close
			data-print-page
			data-check-hidden="true"
		>
			<span class="icon color-primary" aria-hidden="true">
				<span class="docon docon-print"></span>
			</span>
			<span>Print</span>
		</button>
	
				</div>
			</details>
		</div>
	
			</div>
		</div>
	
					<!-- azure disclaimer -->
					
					<!-- privateUnauthorizedTemplate is hidden by default -->
					
		<div unauthorized-private-section data-bi-name="permission-content-unauthorized-private" hidden>
			<hr class="hr margin-top-xs margin-bottom-sm" />
			<div class="notification notification-info">
				<div class="notification-content">
					<p class="margin-top-none notification-title">
						<span class="icon">
							<span class="docon docon-exclamation-circle-solid" aria-hidden="true"></span>
						</span>
						<span>Note</span>
					</p>
					<p class="margin-top-none authentication-determined not-authenticated">
						Access to this page requires authorization. You can try <a class="docs-sign-in" href="#" data-bi-name="permission-content-sign-in">signing in</a> or <a  class="docs-change-directory" data-bi-name="permisson-content-change-directory">changing directories</a>.
					</p>
					<p class="margin-top-none authentication-determined authenticated">
						Access to this page requires authorization. You can try <a class="docs-change-directory" data-bi-name="permisson-content-change-directory">changing directories</a>.
					</p>
				</div>
			</div>
		</div>
	
					<div class="content"><h1 id="tutorial-create-a-minimal-api-with-aspnet-core">Tutorial: Create a minimal API with ASP.NET Core</h1></div>
					
		<div
			id="article-metadata"
			class="page-metadata-container display-flex gap-xxs justify-content-space-between align-items-center flex-wrap-wrap"
		>
			
		<div class="margin-block-xxs">
			<ul class="metadata page-metadata" data-bi-name="page info" lang="en-us" dir="ltr">
				  <li class="visibility-hidden-visual-diff">
			<local-time
				format="twoDigitNumeric"
				datetime="2024-08-21T15:10:00.000Z"
				data-article-date-source="calculated"
				class="is-invisible"
			>
				2024-08-21
			</local-time>
		</li>  
			</ul>
		</div>
	 
				<div
					id="user-feedback"
					class="margin-block-xxs display-none display-none-print"
					hidden
					data-hide-on-archived
				>
					
		<button
			id="user-feedback-button"
			data-test-id="conceptual-feedback-button"
			class="button button-sm button-clear button-primary display-none"
			type="button"
			data-bi-name="user-feedback-button"
			data-user-feedback-button
			hidden
		>
			<span class="icon" aria-hidden="true">
				<span class="docon docon-like"></span>
			</span>
			<span>Feedback</span>
		</button>
	
				</div>
		  
		</div>
	 
		<nav
			id="center-doc-outline"
			class="doc-outline is-hidden-desktop display-none-print margin-bottom-sm"
			data-bi-name="intopic toc"
			aria-label="In this article"
		>
			<h2 id="ms--in-this-article" class="title is-6 margin-block-xs">
				In this article
			</h2>
		</nav>
	
					<div class="content"><div data-moniker="aspnetcore-6.0 aspnetcore-7.0 aspnetcore-8.0">
<div class="NOTE">
<p>Note</p>
<p>This isn't the latest version of this article. For the current release, see the <a href="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api?view=aspnetcore-9.0&amp;preserve-view=true" data-linktype="relative-path">.NET 9 version of this article</a>.</p>
</div>
</div>
<div data-moniker="aspnetcore-7.0">
<div class="WARNING">
<p>Warning</p>
<p>This version of ASP.NET Core is no longer supported. For more information, see the <a href="https://dotnet.microsoft.com/platform/support/policy/dotnet-core" data-linktype="external">.NET and .NET Core Support Policy</a>. For the current release, see the <a href="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api?view=aspnetcore-9.0&amp;preserve-view=true" data-linktype="relative-path">.NET 9 version of this article</a>.</p>
</div>
</div>
<div data-moniker="aspnetcore-10.0">
<div class="IMPORTANT">
<p>Important</p>
<p>This information relates to a pre-release product that may be substantially modified before it's commercially released. Microsoft makes no warranties, express or implied, with respect to the information provided here.</p>
<p>For the current release, see the <a href="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api?view=aspnetcore-9.0&amp;preserve-view=true" data-linktype="relative-path">.NET 9 version of this article</a>.</p>
</div>
</div>
<!--
Include either this file or 'not-latest-version-without-not-supported-content.md' at the top 
of articles.

'not-latest-version.md' (this file): Includes not-supported content.
'not-latest-version-without-not-supported-content.md': Doesn't include not-supported content.

Use this file in articles that target >=7.0. For articles that target >=8.0 prior to 9.0
reaching EOL, 'not-latest-version-without-not-supported-content.md' must be used to avoid
a zone/file moniker range mismatch error.

When a new version is released, it might be necessary to temporarily comment out the current 
version moniker range section until the new moniker is created.

Markdown to include this file:

[!INCLUDE[](~/includes/not-latest-version.md)]
-->
<!-- TODO: Remove aspnetcore\tutorials\min-web-api\samples\6.x -->
<p>By <a href="https://twitter.com/RickAndMSFT" data-linktype="external">Rick Anderson</a> and <a href="https://github.com/tdykstra" data-linktype="external">Tom Dykstra</a></p>
<div data-moniker="aspnetcore-10.0 aspnetcore-9.0">
<p>Minimal APIs are architected to create HTTP APIs with minimal dependencies. They're ideal for microservices and apps that want to include only the minimum files, features, and dependencies in ASP.NET Core.</p>
<p>This tutorial teaches the basics of building a minimal API with ASP.NET Core. Another approach to creating APIs in ASP.NET Core is to use controllers. For help with choosing between minimal APIs and controller-based APIs, see <a href="../fundamentals/apis553c.html?view=aspnetcore-9.0" data-linktype="relative-path">APIs overview</a>. For a tutorial on creating an API project based on <a href="https://learn.microsoft.com/en-us/aspnet/core/web-api/?view=aspnetcore-9.0" data-linktype="relative-path">controllers</a> that contains more features, see <a href="https://learn.microsoft.com/en-us/aspnet/core/tutorials/first-web-api?view=aspnetcore-9.0" data-linktype="relative-path">Create a web API</a>.</p>
<h2 id="overview">Overview</h2>
<p>This tutorial creates the following API:</p>
<table>
<thead>
<tr>
<th>API</th>
<th>Description</th>
<th>Request body</th>
<th>Response body</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GET /todoitems</code></td>
<td>Get all to-do items</td>
<td>None</td>
<td>Array of to-do items</td>
</tr>
<tr>
<td><code>GET /todoitems/complete</code></td>
<td>Get completed to-do items</td>
<td>None</td>
<td>Array of to-do items</td>
</tr>
<tr>
<td><code>GET /todoitems/{id}</code></td>
<td>Get an item by ID</td>
<td>None</td>
<td>To-do item</td>
</tr>
<tr>
<td><code>POST /todoitems</code></td>
<td>Add a new item</td>
<td>To-do item</td>
<td>To-do item</td>
</tr>
<tr>
<td><code>PUT /todoitems/{id}</code></td>
<td>Update an existing item &nbsp;</td>
<td>To-do item</td>
<td>None</td>
</tr>
<tr>
<td><code>DELETE /todoitems/{id}</code> &nbsp; &nbsp;</td>
<td>Delete an item &nbsp; &nbsp;</td>
<td>None</td>
<td>None</td>
</tr>
</tbody>
</table>
<h2 id="prerequisites">Prerequisites</h2>
<div class="tabGroup" id="tabgroup_1">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_1_visual-studio" role="tab" aria-controls="tabpanel_1_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_1_visual-studio-code" role="tab" aria-controls="tabpanel_1_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_1_visual-studio" role="tabpanel" data-tab="visual-studio">
<!-- use the include for articles that are not updated every release, like the data/ef articles -->
<ul>
<li><p><a href="https://visualstudio.microsoft.com/downloads/" data-linktype="external">Visual Studio 2022</a> with the <strong>ASP.NET and web development</strong> workload.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/asp-net-web-dev.png?view=aspnetcore-9.0" alt="VS22 installer workloads" data-linktype="relative-path"></p>
</li>
</ul>
</section>
<section id="tabpanel_1_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">

<ul>
<li><a href="https://code.visualstudio.com/download" data-linktype="external">Visual Studio Code</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-dotnettools.csdevkit" data-linktype="external">C# Dev Kit for Visual Studio Code</a></li>
<li><a href="https://dotnet.microsoft.com/download/dotnet/9.0" data-linktype="external">.NET 9 SDK</a></li>
</ul>
<p>You can follow the Visual Studio Code instructions on macOS, Linux, or Windows. Changes may be required if you use an integrated development environment (IDE) other than Visual Studio Code.</p>
</section>
</div>
<h2 id="create-an-api-project">Create an API project</h2>
<div class="tabGroup" id="tabgroup_2">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_2_visual-studio" role="tab" aria-controls="tabpanel_2_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_2_visual-studio-code" role="tab" aria-controls="tabpanel_2_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_2_visual-studio" role="tabpanel" data-tab="visual-studio">

<ul>
<li><p>Start Visual Studio 2022 and select <strong>Create a new project</strong>.</p>
</li>
<li><p>In the <strong>Create a new project</strong> dialog:</p>
<ul>
<li>Enter <code>Empty</code> in the <strong>Search for templates</strong> search box.</li>
<li>Select the <strong>ASP.NET Core Empty</strong> template and select <strong>Next</strong>.</li>
</ul>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/9.x/create-new-project-empty-vs17.11.0.png?view=aspnetcore-9.0" alt="Visual Studio Create a new project" data-linktype="relative-path"></p>
</li>
<li><p>Name the project <em>TodoApi</em> and select <strong>Next</strong>.</p>
</li>
<li><p>In the <strong>Additional information</strong> dialog:</p>
<ul>
<li>Select <strong>.NET 9.0</strong></li>
<li>Uncheck <strong>Do not use top-level statements</strong></li>
<li>Select <strong>Create</strong></li>
</ul>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/9.x/add-info-vs17.11.0.png?view=aspnetcore-9.0" alt="Additional information" data-linktype="relative-path"></p>
</li>
</ul>
</section>
<section id="tabpanel_2_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">

<ul>
<li><p>Open the <a href="https://code.visualstudio.com/docs/editor/integrated-terminal" data-linktype="external">integrated terminal</a>.</p>
</li>
<li><p>Change directories (<code>cd</code>) to the folder that will contain the project folder.</p>
</li>
<li><p>Run the following commands:</p>
<pre><code class="lang-dotnetcli">dotnet new web -o TodoApi
cd TodoApi
code -r ../TodoApi
</code></pre>
</li>
<li><p>When a dialog box asks if you want to trust the authors, select <strong>Yes</strong>.</p>
</li>
<li><p>When a dialog box asks if you want to add required assets to the project, select <strong>Yes</strong>.</p>
<p>The preceding commands create a new web minimal API project and open it in Visual Studio Code.</p>
</li>
</ul>
</section>
</div>
<h3 id="examine-the-code">Examine the code</h3>
<p>The <code>Program.cs</code> file contains the following code:</p>
<pre><code class="lang-csharp">var builder = WebApplication.CreateBuilder(args);
var app = builder.Build();

app.MapGet("/", () =&gt; "Hello World!");

app.Run();
</code></pre>
<p>The preceding code:</p>
<ul>
<li>Creates a <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.webapplicationbuilder" class="no-loc" data-linktype="absolute-path">WebApplicationBuilder</a> and a <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.webapplication" class="no-loc" data-linktype="absolute-path">WebApplication</a> with preconfigured defaults.</li>
<li>Creates an HTTP GET endpoint <code>/</code> that returns <code>Hello World!</code>:</li>
</ul>
<h3 id="run-the-app">Run the app</h3>
<div class="tabGroup" id="tabgroup_3">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_3_visual-studio" role="tab" aria-controls="tabpanel_3_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_3_visual-studio-code" role="tab" aria-controls="tabpanel_3_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_3_visual-studio" role="tabpanel" data-tab="visual-studio">
<!-- replace all of this with an include -->
<p>Press Ctrl+F5 to run without the debugger.</p>
<p>Visual Studio displays the following dialog:</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/static/trustcertvs22.png?view=aspnetcore-9.0" alt="This project is configured to use SSL. To avoid SSL warnings in the browser you can choose to trust the self-signed certificate that IIS Express has generated. Would you like to trust the IIS Express SSL certificate?" data-linktype="relative-path"></p>
<p>Select <strong>Yes</strong> if you trust the IIS Express SSL certificate.</p>
<p>The following dialog is displayed:</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/static/cert.png?view=aspnetcore-9.0" alt="Security warning dialog" data-linktype="relative-path"></p>
<p>Select <strong>Yes</strong> if you agree to trust the development certificate.</p>
<p>For information on trusting the Firefox browser, see <a href="../security/enforcing-ssl553c.html?view=aspnetcore-9.0#trust-ff" data-linktype="relative-path">Firefox SEC_ERROR_INADEQUATE_KEY_USAGE certificate error</a>.</p>
<p>Visual Studio launches the <a href="../fundamentals/servers/kestrel553c.html?view=aspnetcore-9.0" data-linktype="relative-path">Kestrel web server</a> and opens a browser window.</p>
<p><code>Hello World!</code> is displayed in the browser. The <code>Program.cs</code> file contains a minimal but complete app.</p>
<p>Close the browser window.</p>
</section>
<section id="tabpanel_3_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">

<ul>
<li><p>Trust the HTTPS development certificate by running the following command:</p>
<pre><code class="lang-dotnetcli">dotnet dev-certs https --trust
</code></pre>
<div data-moniker="aspnetcore-6.0 aspnetcore-7.0 aspnetcore-8.0">
<p>The preceding command requires .NET 9 or later SDK on Linux. For Linux on .NET 8.0.401 or earlier SDK, see your Linux distribution's documentation for trusting a certificate.</p>
</div>
<p>The preceding command displays the following dialog, provided the certificate was not previously trusted:</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/static/cert.png?view=aspnetcore-9.0" alt="Security warning dialog" data-linktype="relative-path"></p>
</li>
<li><p>Select <strong>Yes</strong> if you agree to trust the development certificate.</p>
<p>For more information, see the <strong>Trust the ASP.NET Core HTTPS development certificate</strong> section of the <a href="../security/enforcing-ssl553c.html?view=aspnetcore-9.0" data-linktype="relative-path">Enforcing SSL</a> article.</p>
</li>
</ul>
<p>For information on trusting the Firefox browser, see <a href="../security/enforcing-ssl553c.html?view=aspnetcore-9.0#trust-ff" data-linktype="relative-path">Firefox SEC_ERROR_INADEQUATE_KEY_USAGE certificate error</a>.</p>
<p>In Visual Studio Code, press <kbd>Ctrl</kbd>+<kbd>F5</kbd> (Windows) or <kbd>control</kbd>+<kbd>F5</kbd> (macOS) to run the app without debugging.</p>
<p>The default browser launches with the following URL: <code>https://localhost:&lt;port&gt;</code> where <code>&lt;port&gt;</code> is the randomly generated port number.</p>
<p>Close the browser window.</p>
<p>In Visual Studio Code, from the <em>Run</em> menu, select <em>Stop Debugging</em> or press <kbd>Shift</kbd>+<kbd>F5</kbd> to stop the app.</p>
</section>
</div>
<h2 id="add-nuget-packages">Add NuGet packages</h2>
<p>NuGet packages must be added to support the database and diagnostics used in this tutorial.</p>
<div class="tabGroup" id="tabgroup_4">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_4_visual-studio" role="tab" aria-controls="tabpanel_4_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_4_visual-studio-code" role="tab" aria-controls="tabpanel_4_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_4_visual-studio" role="tabpanel" data-tab="visual-studio">

<ul>
<li>From the <strong>Tools</strong> menu, select <strong>NuGet Package Manager &gt; Manage NuGet Packages for Solution</strong>.</li>
<li>Select the <strong>Browse</strong> tab.</li>
<li>Select <strong>Include Prelease</strong>.</li>
<li>Enter <strong>Microsoft.EntityFrameworkCore.InMemory</strong> in the search box, and then select <code>Microsoft.EntityFrameworkCore.InMemory</code>.</li>
<li>Select the <strong>Project</strong> checkbox in the right pane and then select <strong>Install</strong>.</li>
<li>Follow the preceding instructions to add the <code>Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore</code> package.</li>
</ul>
</section>
<section id="tabpanel_4_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">

<ul>
<li><p>Run the following commands:</p>
<pre><code class="lang-dotnetcli">dotnet add package Microsoft.EntityFrameworkCore.InMemory
dotnet add package Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore
</code></pre>
</li>
</ul>
</section>
</div>
<h2 id="the-model-and-database-context-classes">The model and database context classes</h2>
<ul>
<li>In the project folder, create a file named <code>Todo.cs</code> with the following code:</li>
</ul>
<pre><code class="lang-csharp">public class Todo
{
    public int Id { get; set; }
    public string? Name { get; set; }
    public bool IsComplete { get; set; }
}
</code></pre>
<p>The preceding code creates the model for this app. A <em>model</em> is a class that represents data that the app manages.</p>
<ul>
<li>Create a file named <code>TodoDb.cs</code> with the following code:</li>
</ul>
<pre><code class="lang-csharp">using Microsoft.EntityFrameworkCore;

class TodoDb : DbContext
{
    public TodoDb(DbContextOptions&lt;TodoDb&gt; options)
        : base(options) { }

    public DbSet&lt;Todo&gt; Todos =&gt; Set&lt;Todo&gt;();
}
</code></pre>
<p>The preceding code defines the <em>database context</em>, which is the main class that coordinates <a href="https://learn.microsoft.com/en-us/ef/core/" data-linktype="absolute-path">Entity Framework</a> functionality for a data model. This class derives from the <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.entityframeworkcore.dbcontext" class="no-loc" data-linktype="absolute-path">Microsoft.EntityFrameworkCore.DbContext</a> class.</p>
<h2 id="add-the-api-code">Add the API code</h2>
<ul>
<li>Replace the contents of the <code>Program.cs</code> file with the following code:</li>
</ul>
<pre><code class="lang-csharp">using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();
var app = builder.Build();

app.MapGet("/todoitems", async (TodoDb db) =&gt;
    await db.Todos.ToListAsync());

app.MapGet("/todoitems/complete", async (TodoDb db) =&gt;
    await db.Todos.Where(t =&gt; t.IsComplete).ToListAsync());

app.MapGet("/todoitems/{id}", async (int id, TodoDb db) =&gt;
    await db.Todos.FindAsync(id)
        is Todo todo
            ? Results.Ok(todo)
            : Results.NotFound());

app.MapPost("/todoitems", async (Todo todo, TodoDb db) =&gt;
{
    db.Todos.Add(todo);
    await db.SaveChangesAsync();

    return Results.Created($"/todoitems/{todo.Id}", todo);
});

app.MapPut("/todoitems/{id}", async (int id, Todo inputTodo, TodoDb db) =&gt;
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return Results.NotFound();

    todo.Name = inputTodo.Name;
    todo.IsComplete = inputTodo.IsComplete;

    await db.SaveChangesAsync();

    return Results.NoContent();
});

app.MapDelete("/todoitems/{id}", async (int id, TodoDb db) =&gt;
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return Results.NoContent();
    }

    return Results.NotFound();
});

app.Run();
</code></pre>
<p>The following highlighted code adds the database context to the <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/dependency-injection?view=aspnetcore-9.0" data-linktype="relative-path">dependency injection (DI)</a> container and enables displaying database-related exceptions:</p>
<pre><code class="lang-csharp" highlight-lines="2-3">var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();
var app = builder.Build();
</code></pre>
<p>The DI container provides access to the database context and other services.</p>
<div class="tabGroup" id="tabgroup_5">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_5_visual-studio" role="tab" aria-controls="tabpanel_5_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_5_visual-studio-code" role="tab" aria-controls="tabpanel_5_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_5_visual-studio" role="tabpanel" data-tab="visual-studio">

<p>This tutorial uses <a href="https://learn.microsoft.com/en-us/aspnet/core/test/http-files?view=aspnetcore-9.0#use-endpoints-explorer" data-linktype="relative-path">Endpoints Explorer and .http files</a> to test the API.</p>
</section>
<section id="tabpanel_5_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">
<h2 id="create-api-testing-ui-with-swagger">Create API testing UI with Swagger</h2>
<p>There are many available web API testing tools to choose from, and you can follow this tutorial's introductory API test steps with your own preferred tool.</p>
<p>This tutorial utilizes the .NET package <a href="https://www.nuget.org/packages/NSwag.AspNetCore/" data-linktype="external">NSwag.AspNetCore</a>, which integrates Swagger tools for generating a testing UI adhering to the OpenAPI specification:</p>
<ul>
<li>NSwag: A .NET library that integrates Swagger directly into ASP.NET Core applications, providing middleware and configuration.</li>
<li>Swagger: A set of open-source tools such as OpenAPIGenerator and SwaggerUI that generate API testing pages that follow the OpenAPI specification.</li>
<li>OpenAPI specification: A document that describes the capabilities of the API, based on the XML and attribute annotations within the controllers and models.</li>
</ul>
<p>For more information on using OpenAPI and NSwag with ASP.NET, see <a href="https://learn.microsoft.com/en-us/aspnet/core/tutorials/web-api-help-pages-using-swagger?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core web API documentation with Swagger / OpenAPI</a>.</p>
<h3 id="install-swagger-tooling">Install Swagger tooling</h3>
<ul>
<li><p>Run the following command:</p>
<pre><code class="lang-dotnetcli">dotnet add package NSwag.AspNetCore
</code></pre>
</li>
</ul>
<p>The previous command adds the <a href="https://www.nuget.org/packages/NSwag.AspNetCore/" data-linktype="external">NSwag.AspNetCore</a> package, which contains tools to generate Swagger documents and UI.</p>
<h3 id="configure-swagger-middleware">Configure Swagger middleware</h3>
<ul>
<li><p>In Program.cs add the following highlighted code before <code>app</code> is defined in line <code>var app = builder.Build();</code></p>
<pre><code class="lang-csharp" highlight-lines="7-13">using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();

builder.Services.AddEndpointsApiExplorer();
builder.Services.AddOpenApiDocument(config =&gt;
{
    config.DocumentName = "TodoAPI";
    config.Title = "TodoAPI v1";
    config.Version = "v1";
});
var app = builder.Build();
</code></pre></li>
</ul>
<p>In the previous code:</p>
<ul>
<li><p><code>builder.Services.AddEndpointsApiExplorer();</code>: Enables the API Explorer, which is a service that provides metadata about the HTTP API. The API Explorer is used by Swagger to generate the Swagger document.</p>
</li>
<li><p><code>builder.Services.AddOpenApiDocument(config =&gt; {...});</code>: Adds the Swagger OpenAPI document generator to the application services and configures it to provide more information about the API, such as its title and version. For information on providing more robust API details, see <a href="https://learn.microsoft.com/en-us/aspnet/core/tutorials/getting-started-with-nswag?view=aspnetcore-9.0#customize-api-documentation" data-linktype="relative-path">Get started with NSwag and ASP.NET Core</a></p>
</li>
<li><p>Add the following highlighted code to the next line after <code>app</code> is defined in line <code>var app = builder.Build();</code></p>
<pre><code class="lang-csharp" highlight-lines="2-12">var app = builder.Build();
if (app.Environment.IsDevelopment())
{
    app.UseOpenApi();
    app.UseSwaggerUi(config =&gt;
    {
        config.DocumentTitle = "TodoAPI";
        config.Path = "/swagger";
        config.DocumentPath = "/swagger/{documentName}/swagger.json";
        config.DocExpansion = "list";
    });
}
</code></pre>
<p>The previous code enables the Swagger middleware for serving the generated JSON document and the Swagger UI. Swagger is only enabled in a development environment. Enabling Swagger in a production environment could expose potentially sensitive details about the API's structure and implementation.</p>
</li>
</ul>
<p><a name="post"></a></p>
</section>
</div>
<h2 id="test-posting-data">Test posting data</h2>
<p>The following code in <code>Program.cs</code> creates an HTTP POST endpoint <code>/todoitems</code> that adds data to the in-memory database:</p>
<pre><code class="lang-csharp">app.MapPost("/todoitems", async (Todo todo, TodoDb db) =&gt;
{
    db.Todos.Add(todo);
    await db.SaveChangesAsync();

    return Results.Created($"/todoitems/{todo.Id}", todo);
});
</code></pre>
<p>Run the app. The browser displays a 404 error because there's no longer a <code>/</code> endpoint.</p>
<p>The POST endpoint will be used to add data to the app.</p>
<div class="tabGroup" id="tabgroup_6">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_6_visual-studio" role="tab" aria-controls="tabpanel_6_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_6_visual-studio-code" role="tab" aria-controls="tabpanel_6_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_6_visual-studio" role="tabpanel" data-tab="visual-studio">

<ul>
<li><p>Select <strong>View</strong> &gt; <strong>Other Windows</strong> &gt; <strong>Endpoints Explorer</strong>.</p>
</li>
<li><p>Right-click the <strong>POST</strong> endpoint and select <strong>Generate request</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/9.x/generate-request-vs17.8.0.png?view=aspnetcore-9.0" alt="Endpoints Explorer context menu highlighting Generate Request menu item." data-linktype="relative-path"></p>
<p>A new file is created in the project folder named <code>TodoApi.http</code>, with contents similar to the following example:</p>
<pre><code class="lang-http">@TodoApi_HostAddress = https://localhost:7031

POST {{TodoApi_HostAddress}}/todoitems

###
</code></pre>
<ul>
<li>The first line creates a variable that is used for all of the endpoints.</li>
<li>The next line defines a POST request.</li>
<li>The triple hashtag (<code>###</code>) line is a request delimiter: what comes after it is for a different request.</li>
</ul>
</li>
<li><p>The POST request needs headers and a body. To define those parts of the request, add the following lines immediately after the POST request line:</p>
<pre><code>Content-Type: application/json

{
  "name":"walk dog",
  "isComplete":true
}
</code></pre>
<p>The preceding code adds a Content-Type header and a JSON request body. The TodoApi.http file should now look like the following example, but with your port number:</p>
<pre><code class="lang-http">@TodoApi_HostAddress = https://localhost:7057

POST {{TodoApi_HostAddress}}/todoitems
Content-Type: application/json

{
  "name":"walk dog",
  "isComplete":true
}

###
</code></pre>
</li>
<li><p>Run the app.</p>
</li>
<li><p>Select the <strong>Send request</strong> link that is above the <code>POST</code> request line.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/9.x/http-file-run-button-vs17.8.0.png?view=aspnetcore-9.0" alt=".http file window with run link highlighted." data-linktype="relative-path"></p>
<p>The POST request is sent to the app and the response is displayed in the <strong>Response</strong> pane.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/9.x/http-file-window-with-response-vs17.8.0.png?view=aspnetcore-9.0" alt=".http file window with response from the POST request." data-linktype="relative-path"></p>
</li>
</ul>
</section>
<section id="tabpanel_6_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">

<ul>
<li><p>With the app still running, in the browser, navigate to <code>https://localhost:&lt;port&gt;/swagger</code> to display the API testing page generated by Swagger.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/9.x/swagger.png?view=aspnetcore-9.0" alt="Swagger generated API testing page" data-linktype="relative-path"></p>
</li>
<li><p>On the Swagger API testing page, select <strong>Post /todoitems</strong> &gt; <strong>Try it out</strong>.</p>
</li>
<li><p>Note that the <strong>Request body</strong> field contains a generated example format reflecting the parameters for the API.</p>
</li>
<li><p>In the request body enter JSON for a to-do item, without specifying the optional <code>id</code>:</p>
<pre><code class="lang-json">{
  "name":"walk dog",
  "isComplete":true
}
</code></pre>
</li>
<li><p>Select <strong>Execute</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/9.x/swagger-post-1.png?view=aspnetcore-9.0" alt="Swagger with Post request" data-linktype="relative-path"></p>
</li>
</ul>
<p>Swagger provides a <strong>Responses</strong> pane below the <strong>Execute</strong> button.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/9.x/swagger-post-responses.png?view=aspnetcore-9.0" alt="Swagger with Post resonse" data-linktype="relative-path"></p>
<p>Note a few of the useful details:</p>
<ul>
<li>cURL: Swagger provides an example cURL command in Unix/Linux syntax, which can be run at the command line with any bash shell that uses Unix/Linux syntax, including Git Bash from <a href="https://git-scm.com/downloads" data-linktype="external">Git for Windows</a>.</li>
<li>Request URL: A simplified representation of the HTTP request made by Swagger UI's JavaScript code for the API call. Actual requests can include details such as headers and query parameters and a request body.</li>
<li>Server response: Includes the response body and headers. The response body shows the <code>id</code> was set to <code>1</code>.</li>
<li>Response Code: A 201 <code>HTTP</code> status code was returned, indicating that the request was successfully processed and resulted in the creation of a new resource.</li>
</ul>
</section>
</div>
<h2 id="examine-the-get-endpoints">Examine the GET endpoints</h2>
<p>The sample app implements several GET endpoints by calling <code>MapGet</code>:</p>
<table>
<thead>
<tr>
<th>API</th>
<th>Description</th>
<th>Request body</th>
<th>Response body</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GET /todoitems</code></td>
<td>Get all to-do items</td>
<td>None</td>
<td>Array of to-do items</td>
</tr>
<tr>
<td><code>GET /todoitems/complete</code></td>
<td>Get all completed to-do items</td>
<td>None</td>
<td>Array of to-do items</td>
</tr>
<tr>
<td><code>GET /todoitems/{id}</code></td>
<td>Get an item by ID</td>
<td>None</td>
<td>To-do item</td>
</tr>
</tbody>
</table>
<pre><code class="lang-csharp">app.MapGet("/todoitems", async (TodoDb db) =&gt;
    await db.Todos.ToListAsync());

app.MapGet("/todoitems/complete", async (TodoDb db) =&gt;
    await db.Todos.Where(t =&gt; t.IsComplete).ToListAsync());

app.MapGet("/todoitems/{id}", async (int id, TodoDb db) =&gt;
    await db.Todos.FindAsync(id)
        is Todo todo
            ? Results.Ok(todo)
            : Results.NotFound());
</code></pre><h2 id="test-the-get-endpoints">Test the GET endpoints</h2>
<div class="tabGroup" id="tabgroup_7">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_7_visual-studio" role="tab" aria-controls="tabpanel_7_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_7_visual-studio-code" role="tab" aria-controls="tabpanel_7_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_7_visual-studio" role="tabpanel" data-tab="visual-studio">

<p>Test the app by calling the <code>GET</code> endpoints from a browser or by using <strong>Endpoints Explorer</strong>. The following steps are for <strong>Endpoints Explorer</strong>.</p>
<ul>
<li><p>In <strong>Endpoints Explorer</strong>, right-click the first <strong>GET</strong> endpoint, and select <strong>Generate request</strong>.</p>
<p>The following content is added to the <code>TodoApi.http</code> file:</p>
<pre><code class="lang-http">GET {{TodoApi_HostAddress}}/todoitems

###
</code></pre>
</li>
<li><p>Select the <strong>Send request</strong> link that is above the new <code>GET</code> request line.</p>
<p>The GET request is sent to the app and the response is displayed in the <strong>Response</strong> pane.</p>
</li>
<li><p>The response body is similar to the following JSON:</p>
<pre><code class="lang-json">[
  {
    "id": 1,
    "name": "walk dog",
    "isComplete": true
  }
]
</code></pre>
</li>
<li><p>In <strong>Endpoints Explorer</strong>, right-click the <code>/todoitems/{id}</code> <strong>GET</strong> endpoint and select <strong>Generate request</strong>.
The following content is added to the <code>TodoApi.http</code> file:</p>
<pre><code class="lang-http">GET {{TodoApi_HostAddress}}/todoitems/{id}

###
</code></pre>
</li>
<li><p>Replace <code>{id}</code> with <code>1</code>.</p>
</li>
<li><p>Select the <strong>Send request</strong> link that is above the new GET request line.</p>
<p>The GET request is sent to the app and the response is displayed in the <strong>Response</strong> pane.</p>
</li>
<li><p>The response body is similar to the following JSON:</p>
<pre><code class="lang-json">{
  "id": 1,
  "name": "walk dog",
  "isComplete": true
}
</code></pre>
</li>
</ul>
</section>
<section id="tabpanel_7_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">

<p>Test the app by calling the endpoints from a browser or Swagger.</p>
<ul>
<li><p>In Swagger select <strong>GET /todoitems</strong> &gt; <strong>Try it out</strong> &gt; <strong>Execute</strong>.</p>
</li>
<li><p>Alternatively, call <strong>GET /todoitems</strong> from a browser by entering the URI <code>http://localhost:&lt;port&gt;/todoitems</code>. For example, <code>http://localhost:5001/todoitems</code></p>
</li>
</ul>
<p>The call to <code>GET /todoitems</code> produces a response similar to the following:</p>
<pre><code class="lang-json">[
  {
    "id": 1,
    "name": "walk dog",
    "isComplete": true
  }
]
</code></pre>
<ul>
<li><p>Call <strong>GET /todoitems/{id}</strong> in Swagger to return data from a specific id:</p>
<ul>
<li>Select <strong>GET /todoitems</strong> &gt; <strong>Try it out</strong>.</li>
<li>Set the <strong>id</strong> field to <code>1</code> and select <strong>Execute</strong>.</li>
</ul>
</li>
<li><p>Alternatively, call <strong>GET /todoitems</strong> from a browser by entering the URI <code>https://localhost:&lt;port&gt;/todoitems/1</code>. For example, <code>https://localhost:5001/todoitems/1</code></p>
</li>
<li><p>The response is similar to the following:</p>
<pre><code class="lang-json">{
  "id": 1,
  "name": "walk dog",
  "isComplete": true
}
</code></pre>
</li>
</ul>
</section>
</div>

<p>This app uses an in-memory database. If the app is restarted, the GET request doesn't return any data. If no data is returned, <a href="#post" data-linktype="self-bookmark">POST</a> data to the app and try the GET request again.</p>
<h2 id="return-values">Return values</h2>
<p>ASP.NET Core automatically serializes the object to <a href="https://www.json.org/" data-linktype="external">JSON</a> and writes the JSON into the body of the response message. The response code for this return type is <a href="https://developer.mozilla.org/docs/Web/HTTP/Status/200" data-linktype="external">200 OK</a>, assuming there are no unhandled exceptions. Unhandled exceptions are translated into 5xx errors.</p>
<p>The return types can represent a wide range of HTTP status codes. For example, <code>GET /todoitems/{id}</code> can return two different status values:</p>
<ul>
<li>If no item matches the requested ID, the method returns a <a href="https://developer.mozilla.org/docs/Web/HTTP/Status/404" data-linktype="external">404 status</a> <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.controllerbase.notfound" class="no-loc" data-linktype="absolute-path">NotFound</a> error code.</li>
<li>Otherwise, the method returns 200 with a JSON response body. Returning <code>item</code> results in an HTTP 200 response.</li>
</ul>
<h2 id="examine-the-put-endpoint">Examine the PUT endpoint</h2>
<p>The sample app implements a single PUT endpoint using <code>MapPut</code>:</p>
<pre><code class="lang-csharp">app.MapPut("/todoitems/{id}", async (int id, Todo inputTodo, TodoDb db) =&gt;
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return Results.NotFound();

    todo.Name = inputTodo.Name;
    todo.IsComplete = inputTodo.IsComplete;

    await db.SaveChangesAsync();

    return Results.NoContent();
});
</code></pre>
<p>This method is similar to the <code>MapPost</code> method, except it uses HTTP PUT. A successful response returns <a href="https://www.rfc-editor.org/rfc/rfc9110#status.204" data-linktype="external">204 (No Content)</a>. According to the HTTP specification, a PUT request requires the client to send the entire updated entity, not just the changes. To support partial updates, use <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.httppatchattribute" data-linktype="absolute-path">HTTP PATCH</a>.</p>
<h2 id="test-the-put-endpoint">Test the PUT endpoint</h2>
<p>This sample uses an in-memory database that must be initialized each time the app is started. There must be an item in the database before you make a PUT call. Call GET to ensure there's an item in the database before making a PUT call.</p>
<p>Update the to-do item that has <code>Id = 1</code> and set its name to <code>"feed fish"</code>.</p>
<div class="tabGroup" id="tabgroup_8">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_8_visual-studio" role="tab" aria-controls="tabpanel_8_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_8_visual-studio-code" role="tab" aria-controls="tabpanel_8_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_8_visual-studio" role="tabpanel" data-tab="visual-studio">

<ul>
<li><p>In <strong>Endpoints Explorer</strong>, right-click the <strong>PUT</strong> endpoint, and select <strong>Generate request</strong>.</p>
<p>The following content is added to the <code>TodoApi.http</code> file:</p>
<pre><code class="lang-http">PUT {{TodoApi_HostAddress}}/todoitems/{id}

###
</code></pre>
</li>
<li><p>In the PUT request line, replace <code>{id}</code> with <code>1</code>.</p>
</li>
<li><p>Add the following lines immediately after the PUT request line:</p>
<pre><code class="lang-http">Content-Type: application/json

{
  "id": 1,
  "name": "feed fish",
  "isComplete": false
}
</code></pre>
<p>The preceding code adds a Content-Type header and a JSON request body.</p>
</li>
<li><p>Select the <strong>Send request</strong> link that is above the new PUT request line.</p>
<p>The PUT request is sent to the app and the response is displayed in the <strong>Response</strong> pane. The response body is empty, and the status code is 204.</p>
</li>
</ul>
</section>
<section id="tabpanel_8_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">

<p>Use Swagger to send a PUT request:</p>
<ul>
<li><p>Select <strong>Put /todoitems/{id}</strong> &gt; <strong>Try it out</strong>.</p>
</li>
<li><p>Set the <strong>id</strong> field to <code>1</code>.</p>
</li>
<li><p>Set the request body to the following JSON:</p>
<pre><code class="lang-json">{
  "id": 1,
  "name": "feed fish",
  "isComplete": false
}
</code></pre>
</li>
<li><p>Select <strong>Execute</strong>.</p>
</li>
</ul>
</section>
</div>
<h2 id="examine-and-test-the-delete-endpoint">Examine and test the DELETE endpoint</h2>
<p>The sample app implements a single DELETE endpoint using <code>MapDelete</code>:</p>
<pre><code class="lang-csharp">app.MapDelete("/todoitems/{id}", async (int id, TodoDb db) =&gt;
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return Results.NoContent();
    }

    return Results.NotFound();
});
</code></pre><div class="tabGroup" id="tabgroup_9">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_9_visual-studio" role="tab" aria-controls="tabpanel_9_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_9_visual-studio-code" role="tab" aria-controls="tabpanel_9_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_9_visual-studio" role="tabpanel" data-tab="visual-studio">

<ul>
<li><p>In <strong>Endpoints Explorer</strong>, right-click the <strong>DELETE</strong> endpoint and select <strong>Generate request</strong>.</p>
<p>A DELETE request is added to <code>TodoApi.http</code>.</p>
</li>
<li><p>Replace <code>{id}</code> in the DELETE request line with <code>1</code>. The DELETE request should look like the following example:</p>
<pre><code class="lang-http">DELETE {{TodoApi_HostAddress}}/todoitems/1

###
</code></pre>
</li>
<li><p>Select the <strong>Send request</strong> link for the DELETE request.</p>
<p>The DELETE request is sent to the app and the response is displayed in the <strong>Response</strong> pane. The response body is empty, and the status code is 204.</p>
</li>
</ul>
</section>
<section id="tabpanel_9_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">

<p>Use Swagger to send a DELETE request:</p>
<ul>
<li><p>Select <strong>DELETE /todoitems/{id}</strong> &gt; <strong>Try it out</strong>.</p>
</li>
<li><p>Set the <strong>ID</strong> field to <code>1</code> and select <strong>Execute</strong>.</p>
<p>The DELETE request is sent to the app and the response is displayed in the <strong>Responses</strong> pane. The response body is empty, and the <strong>Server response</strong> status code is 204.</p>
</li>
</ul>
</section>
</div>
<h2 id="use-the-mapgroup-api">Use the MapGroup API</h2>
<p>The sample app code repeats the <code>todoitems</code> URL prefix each time it sets up an endpoint. APIs often have groups of endpoints with a common URL prefix, and the <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.endpointroutebuilderextensions.mapgroup" class="no-loc" data-linktype="absolute-path">MapGroup</a> method is available to help organize such groups. It reduces repetitive code and allows for customizing entire groups of endpoints with a single call to methods like <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.authorizationendpointconventionbuilderextensions.requireauthorization" class="no-loc" data-linktype="absolute-path">RequireAuthorization</a> and <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.routingendpointconventionbuilderextensions.withmetadata" class="no-loc" data-linktype="absolute-path">WithMetadata</a>.</p>
<p>Replace the contents of <code>Program.cs</code> with the following code:</p>
<div class="tabGroup" id="tabgroup_10">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_10_visual-studio" role="tab" aria-controls="tabpanel_10_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_10_visual-studio-code" role="tab" aria-controls="tabpanel_10_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_10_visual-studio" role="tabpanel" data-tab="visual-studio">
<pre><code class="lang-csharp">using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();
var app = builder.Build();

var todoItems = app.MapGroup("/todoitems");

todoItems.MapGet("/", async (TodoDb db) =&gt;
    await db.Todos.ToListAsync());

todoItems.MapGet("/complete", async (TodoDb db) =&gt;
    await db.Todos.Where(t =&gt; t.IsComplete).ToListAsync());

todoItems.MapGet("/{id}", async (int id, TodoDb db) =&gt;
    await db.Todos.FindAsync(id)
        is Todo todo
            ? Results.Ok(todo)
            : Results.NotFound());

todoItems.MapPost("/", async (Todo todo, TodoDb db) =&gt;
{
    db.Todos.Add(todo);
    await db.SaveChangesAsync();

    return Results.Created($"/todoitems/{todo.Id}", todo);
});

todoItems.MapPut("/{id}", async (int id, Todo inputTodo, TodoDb db) =&gt;
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return Results.NotFound();

    todo.Name = inputTodo.Name;
    todo.IsComplete = inputTodo.IsComplete;

    await db.SaveChangesAsync();

    return Results.NoContent();
});

todoItems.MapDelete("/{id}", async (int id, TodoDb db) =&gt;
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return Results.NoContent();
    }

    return Results.NotFound();
});

app.Run();
</code></pre>
</section>
<section id="tabpanel_10_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">
<pre><code class="lang-csharp">using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();

builder.Services.AddEndpointsApiExplorer();
builder.Services.AddOpenApiDocument(config =&gt;
{
    config.DocumentName = "TodoAPI";
    config.Title = "TodoAPI v1";
    config.Version = "v1";
});

var app = builder.Build();

if (app.Environment.IsDevelopment())
{
    app.UseOpenApi();
    app.UseSwaggerUi(config =&gt;
    {
        config.DocumentTitle = "TodoAPI";
        config.Path = "/swagger";
        config.DocumentPath = "/swagger/{documentName}/swagger.json";
        config.DocExpansion = "list";
    });
}

var todoItems = app.MapGroup("/todoitems");

todoItems.MapGet("/", async (TodoDb db) =&gt;
    await db.Todos.ToListAsync());

todoItems.MapGet("/complete", async (TodoDb db) =&gt;
    await db.Todos.Where(t =&gt; t.IsComplete).ToListAsync());

todoItems.MapGet("/{id}", async (int id, TodoDb db) =&gt;
    await db.Todos.FindAsync(id)
        is Todo todo
            ? Results.Ok(todo)
            : Results.NotFound());

todoItems.MapPost("/", async (Todo todo, TodoDb db) =&gt;
{
    db.Todos.Add(todo);
    await db.SaveChangesAsync();

    return Results.Created($"/todoitems/{todo.Id}", todo);
});

todoItems.MapPut("/{id}", async (int id, Todo inputTodo, TodoDb db) =&gt;
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return Results.NotFound();

    todo.Name = inputTodo.Name;
    todo.IsComplete = inputTodo.IsComplete;

    await db.SaveChangesAsync();

    return Results.NoContent();
});

todoItems.MapDelete("/{id}", async (int id, TodoDb db) =&gt;
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return Results.NoContent();
    }

    return Results.NotFound();
});

app.Run();
</code></pre>
</section>
</div>

<p>The preceding code has the following changes:</p>
<ul>
<li>Adds <code>var todoItems = app.MapGroup("/todoitems");</code> to set up the group using the URL prefix <code>/todoitems</code>.</li>
<li>Changes all the <code>app.Map&lt;HttpVerb&gt;</code> methods to <code>todoItems.Map&lt;HttpVerb&gt;</code>.</li>
<li>Removes the URL prefix <code>/todoitems</code> from the <code>Map&lt;HttpVerb&gt;</code> method calls.</li>
</ul>
<p>Test the endpoints to verify that they work the same.</p>
<h2 id="use-the-typedresults-api">Use the TypedResults API</h2>
<p>Returning <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.http.typedresults" class="no-loc" data-linktype="absolute-path">TypedResults</a> rather than <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.http.results" class="no-loc" data-linktype="absolute-path">Results</a> has several advantages, including testability and automatically returning the response type metadata for OpenAPI to describe the endpoint. For more information, see <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/minimal-apis/responses#typedresults-vs-results" data-linktype="absolute-path">TypedResults vs Results</a>.</p>
<p>The <code>Map&lt;HttpVerb&gt;</code> methods can call route handler methods instead of using lambdas. To see an example, update <em>Program.cs</em> with the following code:</p>
<div class="tabGroup" id="tabgroup_11">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_11_visual-studio" role="tab" aria-controls="tabpanel_11_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_11_visual-studio-code" role="tab" aria-controls="tabpanel_11_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_11_visual-studio" role="tabpanel" data-tab="visual-studio">
<pre><code class="lang-csharp">using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();
var app = builder.Build();

var todoItems = app.MapGroup("/todoitems");

todoItems.MapGet("/", GetAllTodos);
todoItems.MapGet("/complete", GetCompleteTodos);
todoItems.MapGet("/{id}", GetTodo);
todoItems.MapPost("/", CreateTodo);
todoItems.MapPut("/{id}", UpdateTodo);
todoItems.MapDelete("/{id}", DeleteTodo);

app.Run();

static async Task&lt;IResult&gt; GetAllTodos(TodoDb db)
{
    return TypedResults.Ok(await db.Todos.ToArrayAsync());
}

static async Task&lt;IResult&gt; GetCompleteTodos(TodoDb db)
{
    return TypedResults.Ok(await db.Todos.Where(t =&gt; t.IsComplete).ToListAsync());
}

static async Task&lt;IResult&gt; GetTodo(int id, TodoDb db)
{
    return await db.Todos.FindAsync(id)
        is Todo todo
            ? TypedResults.Ok(todo)
            : TypedResults.NotFound();
}

static async Task&lt;IResult&gt; CreateTodo(Todo todo, TodoDb db)
{
    db.Todos.Add(todo);
    await db.SaveChangesAsync();

    return TypedResults.Created($"/todoitems/{todo.Id}", todo);
}

static async Task&lt;IResult&gt; UpdateTodo(int id, Todo inputTodo, TodoDb db)
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return TypedResults.NotFound();

    todo.Name = inputTodo.Name;
    todo.IsComplete = inputTodo.IsComplete;

    await db.SaveChangesAsync();

    return TypedResults.NoContent();
}

static async Task&lt;IResult&gt; DeleteTodo(int id, TodoDb db)
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return TypedResults.NoContent();
    }

    return TypedResults.NotFound();
}
</code></pre>
</section>
<section id="tabpanel_11_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">
<pre><code class="lang-csharp">using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();

builder.Services.AddEndpointsApiExplorer();
builder.Services.AddOpenApiDocument(config =&gt;
{
    config.DocumentName = "TodoAPI";
    config.Title = "TodoAPI v1";
    config.Version = "v1";
});

var app = builder.Build();

if (app.Environment.IsDevelopment())
{
    app.UseOpenApi();
    app.UseSwaggerUi(config =&gt;
    {
        config.DocumentTitle = "TodoAPI";
        config.Path = "/swagger";
        config.DocumentPath = "/swagger/{documentName}/swagger.json";
        config.DocExpansion = "list";
    });
}

var todoItems = app.MapGroup("/todoitems");

todoItems.MapGet("/", GetAllTodos);
todoItems.MapGet("/complete", GetCompleteTodos);
todoItems.MapGet("/{id}", GetTodo);
todoItems.MapPost("/", CreateTodo);
todoItems.MapPut("/{id}", UpdateTodo);
todoItems.MapDelete("/{id}", DeleteTodo);

app.Run();

static async Task&lt;IResult&gt; GetAllTodos(TodoDb db)
{
    return TypedResults.Ok(await db.Todos.ToArrayAsync());
}

static async Task&lt;IResult&gt; GetCompleteTodos(TodoDb db)
{
    return TypedResults.Ok(await db.Todos.Where(t =&gt; t.IsComplete).ToListAsync());
}

static async Task&lt;IResult&gt; GetTodo(int id, TodoDb db)
{
    return await db.Todos.FindAsync(id)
        is Todo todo
            ? TypedResults.Ok(todo)
            : TypedResults.NotFound();
}

static async Task&lt;IResult&gt; CreateTodo(Todo todo, TodoDb db)
{
    db.Todos.Add(todo);
    await db.SaveChangesAsync();

    return TypedResults.Created($"/todoitems/{todo.Id}", todo);
}

static async Task&lt;IResult&gt; UpdateTodo(int id, Todo inputTodo, TodoDb db)
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return TypedResults.NotFound();

    todo.Name = inputTodo.Name;
    todo.IsComplete = inputTodo.IsComplete;

    await db.SaveChangesAsync();

    return TypedResults.NoContent();
}

static async Task&lt;IResult&gt; DeleteTodo(int id, TodoDb db)
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return TypedResults.NoContent();
    }

    return TypedResults.NotFound();
}
</code></pre>
</section>
</div>

<p>The <code>Map&lt;HttpVerb&gt;</code> code now calls methods instead of lambdas:</p>
<pre><code class="lang-csharp">var todoItems = app.MapGroup("/todoitems");

todoItems.MapGet("/", GetAllTodos);
todoItems.MapGet("/complete", GetCompleteTodos);
todoItems.MapGet("/{id}", GetTodo);
todoItems.MapPost("/", CreateTodo);
todoItems.MapPut("/{id}", UpdateTodo);
todoItems.MapDelete("/{id}", DeleteTodo);
</code></pre>
<p>These methods return objects that implement <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.http.iresult" class="no-loc" data-linktype="absolute-path">IResult</a> and are defined by <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.http.typedresults" class="no-loc" data-linktype="absolute-path">TypedResults</a>:</p>
<pre><code class="lang-csharp">static async Task&lt;IResult&gt; GetAllTodos(TodoDb db)
{
    return TypedResults.Ok(await db.Todos.ToArrayAsync());
}

static async Task&lt;IResult&gt; GetCompleteTodos(TodoDb db)
{
    return TypedResults.Ok(await db.Todos.Where(t =&gt; t.IsComplete).ToListAsync());
}

static async Task&lt;IResult&gt; GetTodo(int id, TodoDb db)
{
    return await db.Todos.FindAsync(id)
        is Todo todo
            ? TypedResults.Ok(todo)
            : TypedResults.NotFound();
}

static async Task&lt;IResult&gt; CreateTodo(Todo todo, TodoDb db)
{
    db.Todos.Add(todo);
    await db.SaveChangesAsync();

    return TypedResults.Created($"/todoitems/{todo.Id}", todo);
}

static async Task&lt;IResult&gt; UpdateTodo(int id, Todo inputTodo, TodoDb db)
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return TypedResults.NotFound();

    todo.Name = inputTodo.Name;
    todo.IsComplete = inputTodo.IsComplete;

    await db.SaveChangesAsync();

    return TypedResults.NoContent();
}

static async Task&lt;IResult&gt; DeleteTodo(int id, TodoDb db)
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return TypedResults.NoContent();
    }

    return TypedResults.NotFound();
}
</code></pre>
<p>Unit tests can call these methods and test that they return the correct type. For example, if the method is <code>GetAllTodos</code>:</p>
<pre><code class="lang-csharp">static async Task&lt;IResult&gt; GetAllTodos(TodoDb db)
{
    return TypedResults.Ok(await db.Todos.ToArrayAsync());
}
</code></pre>
<p>Unit test code can verify that an object of type <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.http.httpresults.ok-1.value#microsoft-aspnetcore-http-httpresults-ok-1-value" data-linktype="absolute-path">Ok&lt;Todo[]&gt;</a> is returned from the handler method. For example:</p>
<pre><code class="lang-csharp">public async Task GetAllTodos_ReturnsOkOfTodosResult()
{
    // Arrange
    var db = CreateDbContext();

    // Act
    var result = await TodosApi.GetAllTodos(db);

    // Assert: Check for the correct returned type
    Assert.IsType&lt;Ok&lt;Todo[]&gt;&gt;(result);
}
</code></pre>
<p><a name="over-post-v7"></a></p>
<h2 id="prevent-over-posting">Prevent over-posting</h2>
<p>Currently the sample app exposes the entire <code>Todo</code> object. In production applications, a subset of the model is often used to restrict the data that can be input and returned. There are multiple reasons behind this and security is a major one. The subset of a model is usually referred to as a Data Transfer Object (DTO), input model, or view model. <strong>DTO</strong> is used in this article.</p>
<p>A DTO can be used to:</p>
<ul>
<li>Prevent over-posting.</li>
<li>Hide properties that clients aren't supposed to view.</li>
<li>Omit some properties to reduce payload size.</li>
<li>Flatten object graphs that contain nested objects. Flattened object graphs can be more convenient for clients.</li>
</ul>
<p>To demonstrate the DTO approach, update the <code>Todo</code> class to include a secret field:</p>
<pre><code class="lang-csharp">public class Todo
{
    public int Id { get; set; }
    public string? Name { get; set; }
    public bool IsComplete { get; set; }
    public string? Secret { get; set; }
}
</code></pre>
<p>The secret field needs to be hidden from this app, but an administrative app could choose to expose it.</p>
<p>Verify you can post and get the secret field.</p>
<p>Create a file named <code>TodoItemDTO.cs</code> with the following code:</p>
<pre><code class="lang-csharp">public class TodoItemDTO
{
    public int Id { get; set; }
    public string? Name { get; set; }
    public bool IsComplete { get; set; }

    public TodoItemDTO() { }
    public TodoItemDTO(Todo todoItem) =&gt;
    (Id, Name, IsComplete) = (todoItem.Id, todoItem.Name, todoItem.IsComplete);
}
</code></pre>
<p>Replace the contents of the <code>Program.cs</code> file with the following code to use this DTO model:</p>
<div class="tabGroup" id="tabgroup_12">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_12_visual-studio" role="tab" aria-controls="tabpanel_12_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_12_visual-studio-code" role="tab" aria-controls="tabpanel_12_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_12_visual-studio" role="tabpanel" data-tab="visual-studio">
<pre><code class="lang-csharp">using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();
var app = builder.Build();

RouteGroupBuilder todoItems = app.MapGroup("/todoitems");

todoItems.MapGet("/", GetAllTodos);
todoItems.MapGet("/complete", GetCompleteTodos);
todoItems.MapGet("/{id}", GetTodo);
todoItems.MapPost("/", CreateTodo);
todoItems.MapPut("/{id}", UpdateTodo);
todoItems.MapDelete("/{id}", DeleteTodo);

app.Run();

static async Task&lt;IResult&gt; GetAllTodos(TodoDb db)
{
    return TypedResults.Ok(await db.Todos.Select(x =&gt; new TodoItemDTO(x)).ToArrayAsync());
}

static async Task&lt;IResult&gt; GetCompleteTodos(TodoDb db) {
    return TypedResults.Ok(await db.Todos.Where(t =&gt; t.IsComplete).Select(x =&gt; new TodoItemDTO(x)).ToListAsync());
}

static async Task&lt;IResult&gt; GetTodo(int id, TodoDb db)
{
    return await db.Todos.FindAsync(id)
        is Todo todo
            ? TypedResults.Ok(new TodoItemDTO(todo))
            : TypedResults.NotFound();
}

static async Task&lt;IResult&gt; CreateTodo(TodoItemDTO todoItemDTO, TodoDb db)
{
    var todoItem = new Todo
    {
        IsComplete = todoItemDTO.IsComplete,
        Name = todoItemDTO.Name
    };

    db.Todos.Add(todoItem);
    await db.SaveChangesAsync();

    todoItemDTO = new TodoItemDTO(todoItem);

    return TypedResults.Created($"/todoitems/{todoItem.Id}", todoItemDTO);
}

static async Task&lt;IResult&gt; UpdateTodo(int id, TodoItemDTO todoItemDTO, TodoDb db)
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return TypedResults.NotFound();

    todo.Name = todoItemDTO.Name;
    todo.IsComplete = todoItemDTO.IsComplete;

    await db.SaveChangesAsync();

    return TypedResults.NoContent();
}

static async Task&lt;IResult&gt; DeleteTodo(int id, TodoDb db)
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return TypedResults.NoContent();
    }

    return TypedResults.NotFound();
}
</code></pre>
</section>
<section id="tabpanel_12_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">
<pre><code class="lang-csharp">using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();

builder.Services.AddEndpointsApiExplorer();
builder.Services.AddOpenApiDocument(config =&gt;
{
    config.DocumentName = "TodoAPI";
    config.Title = "TodoAPI v1";
    config.Version = "v1";
});

var app = builder.Build();

if (app.Environment.IsDevelopment())
{
    app.UseOpenApi();
    app.UseSwaggerUi(config =&gt;
    {
        config.DocumentTitle = "TodoAPI";
        config.Path = "/swagger";
        config.DocumentPath = "/swagger/{documentName}/swagger.json";
        config.DocExpansion = "list";
    });
}

RouteGroupBuilder todoItems = app.MapGroup("/todoitems");

todoItems.MapGet("/", GetAllTodos);
todoItems.MapGet("/complete", GetCompleteTodos);
todoItems.MapGet("/{id}", GetTodo);
todoItems.MapPost("/", CreateTodo);
todoItems.MapPut("/{id}", UpdateTodo);
todoItems.MapDelete("/{id}", DeleteTodo);

app.Run();

static async Task&lt;IResult&gt; GetAllTodos(TodoDb db)
{
    return TypedResults.Ok(await db.Todos.Select(x =&gt; new TodoItemDTO(x)).ToArrayAsync());
}

static async Task&lt;IResult&gt; GetCompleteTodos(TodoDb db) {
    return TypedResults.Ok(await db.Todos.Where(t =&gt; t.IsComplete).Select(x =&gt; new TodoItemDTO(x)).ToListAsync());
}

static async Task&lt;IResult&gt; GetTodo(int id, TodoDb db)
{
    return await db.Todos.FindAsync(id)
        is Todo todo
            ? TypedResults.Ok(new TodoItemDTO(todo))
            : TypedResults.NotFound();
}

static async Task&lt;IResult&gt; CreateTodo(TodoItemDTO todoItemDTO, TodoDb db)
{
    var todoItem = new Todo
    {
        IsComplete = todoItemDTO.IsComplete,
        Name = todoItemDTO.Name
    };

    db.Todos.Add(todoItem);
    await db.SaveChangesAsync();

    todoItemDTO = new TodoItemDTO(todoItem);

    return TypedResults.Created($"/todoitems/{todoItem.Id}", todoItemDTO);
}

static async Task&lt;IResult&gt; UpdateTodo(int id, TodoItemDTO todoItemDTO, TodoDb db)
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return TypedResults.NotFound();

    todo.Name = todoItemDTO.Name;
    todo.IsComplete = todoItemDTO.IsComplete;

    await db.SaveChangesAsync();

    return TypedResults.NoContent();
}

static async Task&lt;IResult&gt; DeleteTodo(int id, TodoDb db)
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return TypedResults.NoContent();
    }

    return TypedResults.NotFound();
}
</code></pre>
</section>
</div>

<p>Verify you can post and get all fields except the secret field.</p>
<p><a name="diff-v7"></a></p>
<h2 id="troubleshooting-with-the-completed-sample">Troubleshooting with the completed sample</h2>
<p>If you run into a problem you can't resolve, compare your code to the completed project. <a href="https://github.com/dotnet/AspNetCore.Docs/tree/main/aspnetcore/tutorials/min-web-api/samples" data-linktype="external">View or download completed project</a> (<a href="../overview553c.html?view=aspnetcore-9.0#how-to-download-a-sample" data-linktype="relative-path">how to download</a>).</p>
<h2 id="next-steps">Next steps</h2>
<ul>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/minimal-apis/responses?view=aspnetcore-9.0#configure-json-serialization-options" data-linktype="relative-path">Configure JSON serialization options</a>.</li>
<li>Handle errors and exceptions: The <a href="https://learn.microsoft.com/en-us/aspnet/core/web-api/handle-errors?view=aspnetcore-9.0#developer-exception-page" data-linktype="relative-path">developer exception page</a> is enabled by default in the development environment for minimal API apps. For information about how to handle errors and exceptions, see <a href="https://learn.microsoft.com/en-us/aspnet/core/web-api/handle-errors?view=aspnetcore-9.0" data-linktype="relative-path">Handle errors in ASP.NET Core APIs</a>.</li>
<li>For an example of testing a minimal API app, see <a href="https://github.com/dotnet/AspNetCore.Docs.Samples/tree/main/fundamentals/minimal-apis/samples/MinApiTestsSample" data-linktype="external">this GitHub sample</a>.</li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/openapi/aspnetcore-openapi?view=aspnetcore-9.0" data-linktype="relative-path">OpenAPI support in minimal APIs</a>.</li>
<li><a href="https://learn.microsoft.com/en-us/azure/app-service/quickstart-dotnetcore" data-linktype="absolute-path">Quickstart: Publish to Azure</a>.</li>
<li><a href="https://www.tessferrandez.com/blog/2023/10/31/organizing-minimal-apis.html" data-linktype="external">Organizing ASP.NET Core Minimal APIs</a>.</li>
</ul>
<h3 id="learn-more">Learn more</h3>
<p>See <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/minimal-apis?view=aspnetcore-9.0" data-linktype="relative-path">Minimal APIs quick reference</a></p>
</div>
<div data-moniker="aspnetcore-7.0">
<p>Minimal APIs are architected to create HTTP APIs with minimal dependencies. They are ideal for microservices and apps that want to include only the minimum files, features, and dependencies in ASP.NET Core.</p>
<p>This tutorial teaches the basics of building a minimal API with ASP.NET Core. Another approach to creating APIs in ASP.NET Core is to use controllers. For help in choosing between minimal APIs and controller-based APIs, see <a href="../fundamentals/apis553c.html?view=aspnetcore-9.0" data-linktype="relative-path">APIs overview</a>. For a tutorial on creating an API project based on <a href="https://learn.microsoft.com/en-us/aspnet/core/web-api/?view=aspnetcore-9.0" data-linktype="relative-path">controllers</a> that contains more features, see <a href="https://learn.microsoft.com/en-us/aspnet/core/tutorials/first-web-api?view=aspnetcore-9.0" data-linktype="relative-path">Create a web API</a>.</p>
<h2 id="overview">Overview</h2>
<p>This tutorial creates the following API:</p>
<table>
<thead>
<tr>
<th>API</th>
<th>Description</th>
<th>Request body</th>
<th>Response body</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GET /todoitems</code></td>
<td>Get all to-do items</td>
<td>None</td>
<td>Array of to-do items</td>
</tr>
<tr>
<td><code>GET /todoitems/complete</code></td>
<td>Get completed to-do items</td>
<td>None</td>
<td>Array of to-do items</td>
</tr>
<tr>
<td><code>GET /todoitems/{id}</code></td>
<td>Get an item by ID</td>
<td>None</td>
<td>To-do item</td>
</tr>
<tr>
<td><code>POST /todoitems</code></td>
<td>Add a new item</td>
<td>To-do item</td>
<td>To-do item</td>
</tr>
<tr>
<td><code>PUT /todoitems/{id}</code></td>
<td>Update an existing item &nbsp;</td>
<td>To-do item</td>
<td>None</td>
</tr>
<tr>
<td><code>DELETE /todoitems/{id}</code> &nbsp; &nbsp;</td>
<td>Delete an item &nbsp; &nbsp;</td>
<td>None</td>
<td>None</td>
</tr>
</tbody>
</table>
<h2 id="prerequisites">Prerequisites</h2>
<div class="tabGroup" id="tabgroup_1">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_1_visual-studio" role="tab" aria-controls="tabpanel_1_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_1_visual-studio-code" role="tab" aria-controls="tabpanel_1_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_1_visual-studio" role="tabpanel" data-tab="visual-studio">

<ul>
<li><p><a href="https://visualstudio.microsoft.com/vs/#download" data-linktype="external">Visual Studio 2022</a> with the <strong>ASP.NET and web development</strong> workload.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/asp-net-web-dev.png?view=aspnetcore-9.0" alt="VS22 installer workloads" data-linktype="relative-path"></p>
</li>
</ul>
</section>
<section id="tabpanel_1_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">

<ul>
<li><a href="https://code.visualstudio.com/download" data-linktype="external">Visual Studio Code</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-dotnettools.csharp" data-linktype="external">C# for Visual Studio Code (latest version)</a></li>
<li><a href="https://dotnet.microsoft.com/download/dotnet/7.0" data-linktype="external">.NET 7 SDK</a></li>
</ul>
<p>The Visual Studio Code instructions use the .NET CLI for ASP.NET Core development functions such as project creation. You can follow these instructions on macOS, Linux, or Windows and with any code editor. Minor changes may be required if you use something other than Visual Studio Code.</p>
</section>
</div>
<h2 id="create-an-api-project">Create an API project</h2>
<div class="tabGroup" id="tabgroup_2">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_2_visual-studio" role="tab" aria-controls="tabpanel_2_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_2_visual-studio-code" role="tab" aria-controls="tabpanel_2_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_2_visual-studio" role="tabpanel" data-tab="visual-studio">

<ul>
<li><p>Start Visual Studio 2022 and select <strong>Create a new project</strong>.</p>
</li>
<li><p>In the <strong>Create a new project</strong> dialog:</p>
<ul>
<li>Enter <code>Empty</code> in the <strong>Search for templates</strong> search box.</li>
<li>Select the <strong>ASP.NET Core Empty</strong> template and select <strong>Next</strong>.</li>
</ul>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/empty.png?view=aspnetcore-9.0" alt="Visual Studio Create a new project" data-linktype="relative-path"></p>
</li>
<li><p>Name the project <em>TodoApi</em> and select <strong>Next</strong>.</p>
</li>
<li><p>In the <strong>Additional information</strong> dialog:</p>
<ul>
<li>Select <strong>.NET 7.0</strong></li>
<li>Uncheck <strong>Do not use top-level statements</strong></li>
<li>Select <strong>Create</strong></li>
</ul>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/add-info7.png?view=aspnetcore-9.0" alt="Additional information" data-linktype="relative-path"></p>
</li>
</ul>
</section>
<section id="tabpanel_2_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">

<ul>
<li><p>Open the <a href="https://code.visualstudio.com/docs/editor/integrated-terminal" data-linktype="external">integrated terminal</a>.</p>
</li>
<li><p>Change directories (<code>cd</code>) to the folder that will contain the project folder.</p>
</li>
<li><p>Run the following commands:</p>
<pre><code class="lang-dotnetcli">dotnet new web -o TodoApi
cd TodoApi
code -r ../TodoApi
</code></pre>
</li>
<li><p>When a dialog box asks if you want to trust the authors, select <strong>Yes</strong>.</p>
</li>
<li><p>When a dialog box asks if you want to add required assets to the project, select <strong>Yes</strong>.</p>
<p>The preceding commands create a new web minimal API project and open it in Visual Studio Code.</p>
</li>
</ul>
</section>
</div>
<h3 id="examine-the-code">Examine the code</h3>
<p>The <code>Program.cs</code> file contains the following code:</p>
<pre><code class="lang-csharp">var builder = WebApplication.CreateBuilder(args);
var app = builder.Build();

app.MapGet("/", () =&gt; "Hello World!");

app.Run();
</code></pre>
<p>The preceding code:</p>
<ul>
<li>Creates a <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.webapplicationbuilder" class="no-loc" data-linktype="absolute-path">WebApplicationBuilder</a> and a <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.webapplication" class="no-loc" data-linktype="absolute-path">WebApplication</a> with preconfigured defaults.</li>
<li>Creates an HTTP GET endpoint <code>/</code> that returns <code>Hello World!</code>:</li>
</ul>
<h3 id="run-the-app">Run the app</h3>
<div class="tabGroup" id="tabgroup_3">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_3_visual-studio" role="tab" aria-controls="tabpanel_3_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_3_visual-studio-code" role="tab" aria-controls="tabpanel_3_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_3_visual-studio" role="tabpanel" data-tab="visual-studio">

<p>Press Ctrl+F5 to run without the debugger.</p>
<p>Visual Studio displays the following dialog:</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/static/trustcertvs22.png?view=aspnetcore-9.0" alt="This project is configured to use SSL. To avoid SSL warnings in the browser you can choose to trust the self-signed certificate that IIS Express has generated. Would you like to trust the IIS Express SSL certificate?" data-linktype="relative-path"></p>
<p>Select <strong>Yes</strong> if you trust the IIS Express SSL certificate.</p>
<p>The following dialog is displayed:</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/static/cert.png?view=aspnetcore-9.0" alt="Security warning dialog" data-linktype="relative-path"></p>
<p>Select <strong>Yes</strong> if you agree to trust the development certificate.</p>
<p>For information on trusting the Firefox browser, see <a href="../security/enforcing-ssl553c.html?view=aspnetcore-9.0#trust-ff" data-linktype="relative-path">Firefox SEC_ERROR_INADEQUATE_KEY_USAGE certificate error</a>.</p>
<p>Visual Studio launches the <a href="../fundamentals/servers/kestrel553c.html?view=aspnetcore-9.0" data-linktype="relative-path">Kestrel web server</a> and opens a browser window.</p>
</section>
<section id="tabpanel_3_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">

<ul>
<li><p>Trust the HTTPS development certificate by running the following command:</p>
<pre><code class="lang-dotnetcli">dotnet dev-certs https --trust
</code></pre>
<div data-moniker="aspnetcore-6.0 aspnetcore-7.0 aspnetcore-8.0">
<p>The preceding command requires .NET 9 or later SDK on Linux. For Linux on .NET 8.0.401 or earlier SDK, see your Linux distribution's documentation for trusting a certificate.</p>
</div>
<p>The preceding command displays the following dialog, provided the certificate was not previously trusted:</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/static/cert.png?view=aspnetcore-9.0" alt="Security warning dialog" data-linktype="relative-path"></p>
</li>
<li><p>Select <strong>Yes</strong> if you agree to trust the development certificate.</p>
<p>For more information, see the <strong>Trust the ASP.NET Core HTTPS development certificate</strong> section of the <a href="../security/enforcing-ssl553c.html?view=aspnetcore-9.0" data-linktype="relative-path">Enforcing SSL</a> article.</p>
</li>
</ul>
<p>For information on trusting the Firefox browser, see <a href="../security/enforcing-ssl553c.html?view=aspnetcore-9.0#trust-ff" data-linktype="relative-path">Firefox SEC_ERROR_INADEQUATE_KEY_USAGE certificate error</a>.</p>
<p>Press Ctrl+F5 to run the app. A browser window is opened.</p>
</section>
</div>

<p><code>Hello World!</code> is displayed in the browser. The <code>Program.cs</code> file contains a minimal but complete app.</p>
<h2 id="add-nuget-packages">Add NuGet packages</h2>
<p>NuGet packages must be added to support the database and diagnostics used in this tutorial.</p>
<div class="tabGroup" id="tabgroup_4">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_4_visual-studio" role="tab" aria-controls="tabpanel_4_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_4_visual-studio-code" role="tab" aria-controls="tabpanel_4_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_4_visual-studio" role="tabpanel" data-tab="visual-studio">

<ul>
<li>From the <strong>Tools</strong> menu, select <strong>NuGet Package Manager &gt; Manage NuGet Packages for Solution</strong>.</li>
<li>Select the <strong>Browse</strong> tab.</li>
<li>Enter <strong>Microsoft.EntityFrameworkCore.InMemory</strong> in the search box, and then select <code>Microsoft.EntityFrameworkCore.InMemory</code>.</li>
<li>Select the <strong>Project</strong> checkbox in the right pane.</li>
<li>In the <strong>Version</strong> drop down select the latest version 7 available, for example <code>7.0.17</code>, and then select <strong>Install</strong>.</li>
<li>Follow the preceding instructions to add the <code>Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore</code> package with the latest version 7 available.</li>
</ul>
</section>
<section id="tabpanel_4_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">

<ul>
<li><p>Run the following commands:</p>
<pre><code class="lang-dotnetcli">dotnet add package Microsoft.EntityFrameworkCore.InMemory --version 7.0.17
dotnet add package Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore --version 7.0.17
</code></pre>
</li>
</ul>
</section>
</div>
<h2 id="the-model-and-database-context-classes">The model and database context classes</h2>
<p>In the project folder, create a file named <code>Todo.cs</code> with the following code:</p>
<pre><code class="lang-csharp">public class Todo
{
    public int Id { get; set; }
    public string? Name { get; set; }
    public bool IsComplete { get; set; }
}
</code></pre>
<p>The preceding code creates the model for this app. A <em>model</em> is a class that represents data that the app manages.</p>
<p>Create a file named <code>TodoDb.cs</code> with the following code:</p>
<pre><code class="lang-csharp">using Microsoft.EntityFrameworkCore;

class TodoDb : DbContext
{
    public TodoDb(DbContextOptions&lt;TodoDb&gt; options)
        : base(options) { }

    public DbSet&lt;Todo&gt; Todos =&gt; Set&lt;Todo&gt;();
}
</code></pre>
<p>The preceding code defines the <em>database context</em>, which is the main class that coordinates <a href="https://learn.microsoft.com/en-us/ef/core/" data-linktype="absolute-path">Entity Framework</a> functionality for a data model. This class derives from the <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.entityframeworkcore.dbcontext" class="no-loc" data-linktype="absolute-path">Microsoft.EntityFrameworkCore.DbContext</a> class.</p>
<h2 id="add-the-api-code">Add the API code</h2>
<p>Replace the contents of the <code>Program.cs</code> file with the following code:</p>
<pre><code class="lang-csharp">using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();
var app = builder.Build();

app.MapGet("/todoitems", async (TodoDb db) =&gt;
    await db.Todos.ToListAsync());

app.MapGet("/todoitems/complete", async (TodoDb db) =&gt;
    await db.Todos.Where(t =&gt; t.IsComplete).ToListAsync());

app.MapGet("/todoitems/{id}", async (int id, TodoDb db) =&gt;
    await db.Todos.FindAsync(id)
        is Todo todo
            ? Results.Ok(todo)
            : Results.NotFound());

app.MapPost("/todoitems", async (Todo todo, TodoDb db) =&gt;
{
    db.Todos.Add(todo);
    await db.SaveChangesAsync();

    return Results.Created($"/todoitems/{todo.Id}", todo);
});

app.MapPut("/todoitems/{id}", async (int id, Todo inputTodo, TodoDb db) =&gt;
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return Results.NotFound();

    todo.Name = inputTodo.Name;
    todo.IsComplete = inputTodo.IsComplete;

    await db.SaveChangesAsync();

    return Results.NoContent();
});

app.MapDelete("/todoitems/{id}", async (int id, TodoDb db) =&gt;
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return Results.NoContent();
    }

    return Results.NotFound();
});

app.Run();
</code></pre>
<p>The following highlighted code adds the database context to the <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/dependency-injection?view=aspnetcore-9.0" data-linktype="relative-path">dependency injection (DI)</a> container and enables displaying database-related exceptions:</p>
<pre><code class="lang-csharp" highlight-lines="2-3">var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();
var app = builder.Build();
</code></pre>
<p>The DI container provides access to the database context and other services.</p>
<h2 id="create-api-testing-ui-with-swagger">Create API testing UI with Swagger</h2>
<p>There are many available web API testing tools to choose from, and you can follow this tutorial's introductory API test steps with your own preferred tool.</p>
<p>This tutorial utilizes the .NET package <a href="https://www.nuget.org/packages/NSwag.AspNetCore/" data-linktype="external">NSwag.AspNetCore</a>, which integrates Swagger tools for generating a testing UI adhering to the OpenAPI specification:</p>
<ul>
<li>NSwag: A .NET library that integrates Swagger directly into ASP.NET Core applications, providing middleware and configuration.</li>
<li>Swagger: A set of open-source tools such as OpenAPIGenerator and SwaggerUI that generate API testing pages that follow the OpenAPI specification.</li>
<li>OpenAPI specification: A document that describes the capabilities of the API, based on the XML and attribute annotations within the controllers and models.</li>
</ul>
<p>For more information on using OpenAPI and NSwag with ASP.NET, see <a href="https://learn.microsoft.com/en-us/aspnet/core/tutorials/web-api-help-pages-using-swagger?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core web API documentation with Swagger / OpenAPI</a>.</p>
<h3 id="install-swagger-tooling">Install Swagger tooling</h3>
<ul>
<li><p>Run the following command:</p>
<pre><code class="lang-dotnetcli">dotnet add package NSwag.AspNetCore
</code></pre>
</li>
</ul>
<p>The previous command adds the <a href="https://www.nuget.org/packages/NSwag.AspNetCore/" data-linktype="external">NSwag.AspNetCore</a> package, which contains tools to generate Swagger documents and UI.</p>
<h3 id="configure-swagger-middleware">Configure Swagger middleware</h3>
<ul>
<li><p>Add the following highlighted code before <code>app</code> is defined in line <code>var app = builder.Build();</code></p>
<pre><code class="lang-csharp" highlight-lines="7-13">using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();

builder.Services.AddEndpointsApiExplorer();
builder.Services.AddOpenApiDocument(config =&gt;
{
    config.DocumentName = "TodoAPI";
    config.Title = "TodoAPI v1";
    config.Version = "v1";
});
var app = builder.Build();
</code></pre></li>
</ul>
<p>In the previous code:</p>
<ul>
<li><p><code>builder.Services.AddEndpointsApiExplorer();</code>: Enables the API Explorer, which is a service that provides metadata about the HTTP API. The API Explorer is used by Swagger to generate the Swagger document.</p>
</li>
<li><p><code>builder.Services.AddOpenApiDocument(config =&gt; {...});</code>: Adds the Swagger OpenAPI document generator to the application services and configures it to provide more information about the API, such as its title and version. For information on providing more robust API details, see <a href="https://learn.microsoft.com/en-us/aspnet/core/tutorials/getting-started-with-nswag?view=aspnetcore-9.0#customize-api-documentation" data-linktype="relative-path">Get started with NSwag and ASP.NET Core</a></p>
</li>
<li><p>Add the following highlighted code to the next line after <code>app</code> is defined in line <code>var app = builder.Build();</code></p>
<pre><code class="lang-csharp" highlight-lines="2-12">var app = builder.Build();
if (app.Environment.IsDevelopment())
{
    app.UseOpenApi();
    app.UseSwaggerUi(config =&gt;
    {
        config.DocumentTitle = "TodoAPI";
        config.Path = "/swagger";
        config.DocumentPath = "/swagger/{documentName}/swagger.json";
        config.DocExpansion = "list";
    });
}
</code></pre>
<p>The previous code enables the Swagger middleware for serving the generated JSON document and the Swagger UI. Swagger is only enabled in a development environment. Enabling Swagger in a production environment could expose potentially sensitive details about the API's structure and implementation.</p>
</li>
</ul>
<p><a name="post"></a></p>
<h2 id="test-posting-data">Test posting data</h2>
<p>The following code in <code>Program.cs</code> creates an HTTP POST endpoint <code>/todoitems</code> that adds data to the in-memory database:</p>
<pre><code class="lang-csharp">app.MapPost("/todoitems", async (Todo todo, TodoDb db) =&gt;
{
    db.Todos.Add(todo);
    await db.SaveChangesAsync();

    return Results.Created($"/todoitems/{todo.Id}", todo);
});
</code></pre>
<p>Run the app. The browser displays a 404 error because there's no longer a <code>/</code> endpoint.</p>
<p>The POST endpoint will be used to add data to the app.</p>
<ul>
<li><p>With the app still running, in the browser, navigate to <code>https://localhost:&lt;port&gt;/swagger</code> to display the API testing page generated by Swagger.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/8.x/swagger.png?view=aspnetcore-9.0" alt="Swagger generated API testing page" data-linktype="relative-path"></p>
</li>
<li><p>On the Swagger API testing page, select <strong>Post /todoitems</strong> &gt; <strong>Try it out</strong>.</p>
</li>
<li><p>Note that the <strong>Request body</strong> field contains a generated example format reflecting the parameters for the API.</p>
</li>
<li><p>In the request body enter JSON for a to-do item, without specifying the optional <code>id</code>:</p>
<pre><code class="lang-json">{
  "name":"walk dog",
  "isComplete":true
}
</code></pre>
</li>
<li><p>Select <strong>Execute</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/8.x/swagger-post-1.png?view=aspnetcore-9.0" alt="Swagger with Post" data-linktype="relative-path"></p>
</li>
</ul>
<p>Swagger provides a <strong>Responses</strong> pane below the <strong>Execute</strong> button.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/8.x/swagger-post-responses.png?view=aspnetcore-9.0" alt="Swagger with Post response" data-linktype="relative-path"></p>
<p>Note a few of the useful details:</p>
<ul>
<li>cURL: Swagger provides an example cURL command in Unix/Linux syntax, which can be run at the command line with any bash shell that uses Unix/Linux syntax, including Git Bash from <a href="https://git-scm.com/downloads" data-linktype="external">Git for Windows</a>.</li>
<li>Request URL: A simplified representation of the HTTP request made by Swagger UI's JavaScript code for the API call. Actual requests can include details such as headers and query parameters and a request body.</li>
<li>Server response: Includes the response body and headers. The response body shows the <code>id</code> was set to <code>1</code>.</li>
<li>Response Code: A 201 <code>HTTP</code> status code was returned, indicating that the request was successfully processed and resulted in the creation of a new resource.</li>
</ul>
<hr>
<h2 id="examine-the-get-endpoints">Examine the GET endpoints</h2>
<p>The sample app implements several GET endpoints by calling <code>MapGet</code>:</p>
<table>
<thead>
<tr>
<th>API</th>
<th>Description</th>
<th>Request body</th>
<th>Response body</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GET /todoitems</code></td>
<td>Get all to-do items</td>
<td>None</td>
<td>Array of to-do items</td>
</tr>
<tr>
<td><code>GET /todoitems/complete</code></td>
<td>Get all completed to-do items</td>
<td>None</td>
<td>Array of to-do items</td>
</tr>
<tr>
<td><code>GET /todoitems/{id}</code></td>
<td>Get an item by ID</td>
<td>None</td>
<td>To-do item</td>
</tr>
</tbody>
</table>
<pre><code class="lang-csharp">app.MapGet("/todoitems", async (TodoDb db) =&gt;
    await db.Todos.ToListAsync());

app.MapGet("/todoitems/complete", async (TodoDb db) =&gt;
    await db.Todos.Where(t =&gt; t.IsComplete).ToListAsync());

app.MapGet("/todoitems/{id}", async (int id, TodoDb db) =&gt;
    await db.Todos.FindAsync(id)
        is Todo todo
            ? Results.Ok(todo)
            : Results.NotFound());
</code></pre><h2 id="test-the-get-endpoints">Test the GET endpoints</h2>
<p>Test the app by calling the endpoints from a browser or Swagger.</p>
<ul>
<li><p>In Swagger select <strong>GET /todoitems</strong> &gt; <strong>Try it out</strong> &gt; <strong>Execute</strong>.</p>
</li>
<li><p>Alternatively, call <strong>GET /todoitems</strong> from a browser by entering the URI <code>http://localhost:&lt;port&gt;/todoitems</code>. For example, <code>http://localhost:5001/todoitems</code></p>
</li>
</ul>
<p>The call to <code>GET /todoitems</code> produces a response similar to the following:</p>
<pre><code class="lang-json">[
  {
    "id": 1,
    "name": "walk dog",
    "isComplete": true
  }
]
</code></pre>
<ul>
<li><p>Call <strong>GET /todoitems/{id}</strong> in Swagger to return data from a specific id:</p>
<ul>
<li>Select <strong>GET /todoitems</strong> &gt; <strong>Try it out</strong>.</li>
<li>Set the <strong>id</strong> field to <code>1</code> and select <strong>Execute</strong>.</li>
</ul>
</li>
<li><p>Alternatively, call <strong>GET /todoitems</strong> from a browser by entering the URI <code>https://localhost:&lt;port&gt;/todoitems/1</code>. For example, <code>https://localhost:5001/todoitems/1</code></p>
</li>
<li><p>The response is similar to the following:</p>
<pre><code class="lang-json">{
  "id": 1,
  "name": "walk dog",
  "isComplete": true
}
</code></pre>
</li>
</ul>
<p>This app uses an in-memory database. If the app is restarted, the GET request doesn't return any data. If no data is returned, <a href="#post" data-linktype="self-bookmark">POST</a> data to the app and try the GET request again.</p>
<h2 id="return-values">Return values</h2>
<p>ASP.NET Core automatically serializes the object to <a href="https://www.json.org/" data-linktype="external">JSON</a> and writes the JSON into the body of the response message. The response code for this return type is <a href="https://developer.mozilla.org/docs/Web/HTTP/Status/200" data-linktype="external">200 OK</a>, assuming there are no unhandled exceptions. Unhandled exceptions are translated into 5xx errors.</p>
<p>The return types can represent a wide range of HTTP status codes. For example, <code>GET /todoitems/{id}</code> can return two different status values:</p>
<ul>
<li>If no item matches the requested ID, the method returns a <a href="https://developer.mozilla.org/docs/Web/HTTP/Status/404" data-linktype="external">404 status</a> <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.controllerbase.notfound" class="no-loc" data-linktype="absolute-path">NotFound</a> error code.</li>
<li>Otherwise, the method returns 200 with a JSON response body. Returning <code>item</code> results in an HTTP 200 response.</li>
</ul>
<h2 id="examine-the-put-endpoint">Examine the PUT endpoint</h2>
<p>The sample app implements a single PUT endpoint using <code>MapPut</code>:</p>
<pre><code class="lang-csharp">app.MapPut("/todoitems/{id}", async (int id, Todo inputTodo, TodoDb db) =&gt;
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return Results.NotFound();

    todo.Name = inputTodo.Name;
    todo.IsComplete = inputTodo.IsComplete;

    await db.SaveChangesAsync();

    return Results.NoContent();
});
</code></pre>
<p>This method is similar to the <code>MapPost</code> method, except it uses HTTP PUT. A successful response returns <a href="https://www.rfc-editor.org/rfc/rfc9110#status.204" data-linktype="external">204 (No Content)</a>. According to the HTTP specification, a PUT request requires the client to send the entire updated entity, not just the changes. To support partial updates, use <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.httppatchattribute" data-linktype="absolute-path">HTTP PATCH</a>.</p>
<h2 id="test-the-put-endpoint">Test the PUT endpoint</h2>
<p>This sample uses an in-memory database that must be initialized each time the app is started. There must be an item in the database before you make a PUT call. Call GET to ensure there's an item in the database before making a PUT call.</p>
<p>Update the to-do item that has <code>Id = 1</code> and set its name to <code>"feed fish"</code>.</p>
<p>Use Swagger to send a PUT request:</p>
<ul>
<li><p>Select <strong>Put /todoitems/{id}</strong> &gt; <strong>Try it out</strong>.</p>
</li>
<li><p>Set the <strong>id</strong> field to <code>1</code>.</p>
</li>
<li><p>Set the request body to the following JSON:</p>
<pre><code class="lang-json">{
  "name": "feed fish",
  "isComplete": false
}
</code></pre>
</li>
<li><p>Select <strong>Execute</strong>.</p>
</li>
</ul>
<h2 id="examine-and-test-the-delete-endpoint">Examine and test the DELETE endpoint</h2>
<p>The sample app implements a single DELETE endpoint using <code>MapDelete</code>:</p>
<pre><code class="lang-csharp">app.MapDelete("/todoitems/{id}", async (int id, TodoDb db) =&gt;
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return Results.NoContent();
    }

    return Results.NotFound();
});
</code></pre>
<p>Use Swagger to send a DELETE request:</p>
<ul>
<li><p>Select <strong>DELETE /todoitems/{id}</strong> &gt; <strong>Try it out</strong>.</p>
</li>
<li><p>Set the <strong>ID</strong> field to <code>1</code> and select <strong>Execute</strong>.</p>
<p>The DELETE request is sent to the app and the response is displayed in the <strong>Responses</strong> pane. The response body is empty, and the <strong>Server response</strong> status code is 204.</p>
</li>
</ul>
<h2 id="use-the-mapgroup-api">Use the MapGroup API</h2>
<p>The sample app code repeats the <code>todoitems</code> URL prefix each time it sets up an endpoint. APIs often have groups of endpoints with a common URL prefix, and the <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.endpointroutebuilderextensions.mapgroup" class="no-loc" data-linktype="absolute-path">MapGroup</a> method is available to help organize such groups. It reduces repetitive code and allows for customizing entire groups of endpoints with a single call to methods like <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.authorizationendpointconventionbuilderextensions.requireauthorization" class="no-loc" data-linktype="absolute-path">RequireAuthorization</a> and <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.routingendpointconventionbuilderextensions.withmetadata" class="no-loc" data-linktype="absolute-path">WithMetadata</a>.</p>
<p>Replace the contents of <code>Program.cs</code> with the following code:</p>
<pre><code class="lang-csharp">using NSwag.AspNetCore;
using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();

builder.Services.AddEndpointsApiExplorer();
builder.Services.AddOpenApiDocument(config =&gt;
{
    config.DocumentName = "TodoAPI";
    config.Title = "TodoAPI v1";
    config.Version = "v1";
});

var app = builder.Build();

if (app.Environment.IsDevelopment())
{
    app.UseOpenApi();
    app.UseSwaggerUi(config =&gt;
    {
        config.DocumentTitle = "TodoAPI";
        config.Path = "/swagger";
        config.DocumentPath = "/swagger/{documentName}/swagger.json";
        config.DocExpansion = "list";
    });
}

var todoItems = app.MapGroup("/todoitems");

todoItems.MapGet("/", async (TodoDb db) =&gt;
    await db.Todos.ToListAsync());

todoItems.MapGet("/complete", async (TodoDb db) =&gt;
    await db.Todos.Where(t =&gt; t.IsComplete).ToListAsync());

todoItems.MapGet("/{id}", async (int id, TodoDb db) =&gt;
    await db.Todos.FindAsync(id)
        is Todo todo
            ? Results.Ok(todo)
            : Results.NotFound());

todoItems.MapPost("/", async (Todo todo, TodoDb db) =&gt;
{
    db.Todos.Add(todo);
    await db.SaveChangesAsync();

    return Results.Created($"/todoitems/{todo.Id}", todo);
});

todoItems.MapPut("/{id}", async (int id, Todo inputTodo, TodoDb db) =&gt;
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return Results.NotFound();

    todo.Name = inputTodo.Name;
    todo.IsComplete = inputTodo.IsComplete;

    await db.SaveChangesAsync();

    return Results.NoContent();
});

todoItems.MapDelete("/{id}", async (int id, TodoDb db) =&gt;
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return Results.NoContent();
    }

    return Results.NotFound();
});

app.Run();
</code></pre>
<p>The preceding code has the following changes:</p>
<ul>
<li>Adds <code>var todoItems = app.MapGroup("/todoitems");</code> to set up the group using the URL prefix <code>/todoitems</code>.</li>
<li>Changes all the <code>app.Map&lt;HttpVerb&gt;</code> methods to <code>todoItems.Map&lt;HttpVerb&gt;</code>.</li>
<li>Removes the URL prefix <code>/todoitems</code> from the <code>Map&lt;HttpVerb&gt;</code> method calls.</li>
</ul>
<p>Test the endpoints to verify that they work the same.</p>
<h2 id="use-the-typedresults-api">Use the TypedResults API</h2>
<p>Returning <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.http.typedresults" class="no-loc" data-linktype="absolute-path">TypedResults</a> rather than <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.http.results" class="no-loc" data-linktype="absolute-path">Results</a> has several advantages, including testability and automatically returning the response type metadata for OpenAPI to describe the endpoint. For more information, see <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/minimal-apis/responses#typedresults-vs-results" data-linktype="absolute-path">TypedResults vs Results</a>.</p>
<p>The <code>Map&lt;HttpVerb&gt;</code> methods can call route handler methods instead of using lambdas. To see an example, update <em>Program.cs</em> with the following code:</p>
<div class="tabGroup" id="tabgroup_5">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_5_visual-studio" role="tab" aria-controls="tabpanel_5_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_5_visual-studio-code" role="tab" aria-controls="tabpanel_5_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_5_visual-studio" role="tabpanel" data-tab="visual-studio">
<pre><code class="lang-csharp">using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();
var app = builder.Build();

var todoItems = app.MapGroup("/todoitems");

todoItems.MapGet("/", GetAllTodos);
todoItems.MapGet("/complete", GetCompleteTodos);
todoItems.MapGet("/{id}", GetTodo);
todoItems.MapPost("/", CreateTodo);
todoItems.MapPut("/{id}", UpdateTodo);
todoItems.MapDelete("/{id}", DeleteTodo);

app.Run();

static async Task&lt;IResult&gt; GetAllTodos(TodoDb db)
{
    return TypedResults.Ok(await db.Todos.ToArrayAsync());
}

static async Task&lt;IResult&gt; GetCompleteTodos(TodoDb db)
{
    return TypedResults.Ok(await db.Todos.Where(t =&gt; t.IsComplete).ToListAsync());
}

static async Task&lt;IResult&gt; GetTodo(int id, TodoDb db)
{
    return await db.Todos.FindAsync(id)
        is Todo todo
            ? TypedResults.Ok(todo)
            : TypedResults.NotFound();
}

static async Task&lt;IResult&gt; CreateTodo(Todo todo, TodoDb db)
{
    db.Todos.Add(todo);
    await db.SaveChangesAsync();

    return TypedResults.Created($"/todoitems/{todo.Id}", todo);
}

static async Task&lt;IResult&gt; UpdateTodo(int id, Todo inputTodo, TodoDb db)
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return TypedResults.NotFound();

    todo.Name = inputTodo.Name;
    todo.IsComplete = inputTodo.IsComplete;

    await db.SaveChangesAsync();

    return TypedResults.NoContent();
}

static async Task&lt;IResult&gt; DeleteTodo(int id, TodoDb db)
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return TypedResults.NoContent();
    }

    return TypedResults.NotFound();
}
</code></pre>
</section>
<section id="tabpanel_5_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">
<pre><code class="lang-csharp">using NSwag.AspNetCore;
using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();

builder.Services.AddEndpointsApiExplorer();
builder.Services.AddOpenApiDocument(config =&gt;
{
    config.DocumentName = "TodoAPI";
    config.Title = "TodoAPI v1";
    config.Version = "v1";
});

var app = builder.Build();

if (app.Environment.IsDevelopment())
{
    app.UseOpenApi();
    app.UseSwaggerUi(config =&gt;
    {
        config.DocumentTitle = "TodoAPI";
        config.Path = "/swagger";
        config.DocumentPath = "/swagger/{documentName}/swagger.json";
        config.DocExpansion = "list";
    });
}

var todoItems = app.MapGroup("/todoitems");

todoItems.MapGet("/", GetAllTodos);
todoItems.MapGet("/complete", GetCompleteTodos);
todoItems.MapGet("/{id}", GetTodo);
todoItems.MapPost("/", CreateTodo);
todoItems.MapPut("/{id}", UpdateTodo);
todoItems.MapDelete("/{id}", DeleteTodo);

app.Run();

static async Task&lt;IResult&gt; GetAllTodos(TodoDb db)
{
    return TypedResults.Ok(await db.Todos.ToArrayAsync());
}

static async Task&lt;IResult&gt; GetCompleteTodos(TodoDb db)
{
    return TypedResults.Ok(await db.Todos.Where(t =&gt; t.IsComplete).ToListAsync());
}

static async Task&lt;IResult&gt; GetTodo(int id, TodoDb db)
{
    return await db.Todos.FindAsync(id)
        is Todo todo
            ? TypedResults.Ok(todo)
            : TypedResults.NotFound();
}

static async Task&lt;IResult&gt; CreateTodo(Todo todo, TodoDb db)
{
    db.Todos.Add(todo);
    await db.SaveChangesAsync();

    return TypedResults.Created($"/todoitems/{todo.Id}", todo);
}

static async Task&lt;IResult&gt; UpdateTodo(int id, Todo inputTodo, TodoDb db)
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return TypedResults.NotFound();

    todo.Name = inputTodo.Name;
    todo.IsComplete = inputTodo.IsComplete;

    await db.SaveChangesAsync();

    return TypedResults.NoContent();
}

static async Task&lt;IResult&gt; DeleteTodo(int id, TodoDb db)
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return TypedResults.NoContent();
    }

    return TypedResults.NotFound();
}
</code></pre>
</section>
</div>

<p>The <code>Map&lt;HttpVerb&gt;</code> code now calls methods instead of lambdas:</p>
<pre><code class="lang-csharp">var todoItems = app.MapGroup("/todoitems");

todoItems.MapGet("/", GetAllTodos);
todoItems.MapGet("/complete", GetCompleteTodos);
todoItems.MapGet("/{id}", GetTodo);
todoItems.MapPost("/", CreateTodo);
todoItems.MapPut("/{id}", UpdateTodo);
todoItems.MapDelete("/{id}", DeleteTodo);
</code></pre>
<p>These methods return objects that implement <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.http.iresult" class="no-loc" data-linktype="absolute-path">IResult</a> and are defined by <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.http.typedresults" class="no-loc" data-linktype="absolute-path">TypedResults</a>:</p>
<pre><code class="lang-csharp">static async Task&lt;IResult&gt; GetAllTodos(TodoDb db)
{
    return TypedResults.Ok(await db.Todos.ToArrayAsync());
}

static async Task&lt;IResult&gt; GetCompleteTodos(TodoDb db)
{
    return TypedResults.Ok(await db.Todos.Where(t =&gt; t.IsComplete).ToListAsync());
}

static async Task&lt;IResult&gt; GetTodo(int id, TodoDb db)
{
    return await db.Todos.FindAsync(id)
        is Todo todo
            ? TypedResults.Ok(todo)
            : TypedResults.NotFound();
}

static async Task&lt;IResult&gt; CreateTodo(Todo todo, TodoDb db)
{
    db.Todos.Add(todo);
    await db.SaveChangesAsync();

    return TypedResults.Created($"/todoitems/{todo.Id}", todo);
}

static async Task&lt;IResult&gt; UpdateTodo(int id, Todo inputTodo, TodoDb db)
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return TypedResults.NotFound();

    todo.Name = inputTodo.Name;
    todo.IsComplete = inputTodo.IsComplete;

    await db.SaveChangesAsync();

    return TypedResults.NoContent();
}

static async Task&lt;IResult&gt; DeleteTodo(int id, TodoDb db)
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return TypedResults.NoContent();
    }

    return TypedResults.NotFound();
}
</code></pre>
<p>Unit tests can call these methods and test that they return the correct type. For example, if the method is <code>GetAllTodos</code>:</p>
<pre><code class="lang-csharp">static async Task&lt;IResult&gt; GetAllTodos(TodoDb db)
{
    return TypedResults.Ok(await db.Todos.ToArrayAsync());
}
</code></pre>
<p>Unit test code can verify that an object of type <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.http.httpresults.ok-1.value#microsoft-aspnetcore-http-httpresults-ok-1-value" data-linktype="absolute-path">Ok&lt;Todo[]&gt;</a> is returned from the handler method. For example:</p>
<pre><code class="lang-csharp">public async Task GetAllTodos_ReturnsOkOfTodosResult()
{
    // Arrange
    var db = CreateDbContext();

    // Act
    var result = await TodosApi.GetAllTodos(db);

    // Assert: Check for the correct returned type
    Assert.IsType&lt;Ok&lt;Todo[]&gt;&gt;(result);
}
</code></pre>
<p><a name="over-post-v7"></a></p>
<h2 id="prevent-over-posting">Prevent over-posting</h2>
<p>Currently the sample app exposes the entire <code>Todo</code> object. Production apps In production applications, a subset of the model is often used to restrict the data that can be input and returned. There are multiple reasons behind this and security is a major one. The subset of a model is usually referred to as a Data Transfer Object (DTO), input model, or view model. <strong>DTO</strong> is used in this article.</p>
<p>A DTO can be used to:</p>
<ul>
<li>Prevent over-posting.</li>
<li>Hide properties that clients aren't supposed to view.</li>
<li>Omit some properties to reduce payload size.</li>
<li>Flatten object graphs that contain nested objects. Flattened object graphs can be more convenient for clients.</li>
</ul>
<p>To demonstrate the DTO approach, update the <code>Todo</code> class to include a secret field:</p>
<pre><code class="lang-csharp">public class Todo
{
    public int Id { get; set; }
    public string? Name { get; set; }
    public bool IsComplete { get; set; }
    public string? Secret { get; set; }
}
</code></pre>
<p>The secret field needs to be hidden from this app, but an administrative app could choose to expose it.</p>
<p>Verify you can post and get the secret field.</p>
<p>Create a file named <code>TodoItemDTO.cs</code> with the following code:</p>
<pre><code class="lang-csharp">public class TodoItemDTO
{
    public int Id { get; set; }
    public string? Name { get; set; }
    public bool IsComplete { get; set; }

    public TodoItemDTO() { }
    public TodoItemDTO(Todo todoItem) =&gt;
    (Id, Name, IsComplete) = (todoItem.Id, todoItem.Name, todoItem.IsComplete);
}
</code></pre>
<p>Replace the contents of the <code>Program.cs</code> file with the following code to use this DTO model:</p>
<div class="tabGroup" id="tabgroup_6">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_6_visual-studio" role="tab" aria-controls="tabpanel_6_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_6_visual-studio-code" role="tab" aria-controls="tabpanel_6_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_6_visual-studio" role="tabpanel" data-tab="visual-studio">
<pre><code class="lang-csharp">using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDatabaseDeveloperPageExceptionFilter();
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
var app = builder.Build();

app.MapGet("/todoitems", async (TodoDb db) =&gt;
    await db.Todos.Select(x =&gt; new TodoItemDTO(x)).ToListAsync());

app.MapGet("/todoitems/{id}", async (int id, TodoDb db) =&gt;
    await db.Todos.FindAsync(id)
        is Todo todo
            ? Results.Ok(new TodoItemDTO(todo))
            : Results.NotFound());

app.MapPost("/todoitems", async (TodoItemDTO todoItemDTO, TodoDb db) =&gt;
{
    var todoItem = new Todo
    {
        IsComplete = todoItemDTO.IsComplete,
        Name = todoItemDTO.Name
    };

    db.Todos.Add(todoItem);
    await db.SaveChangesAsync();

    return Results.Created($"/todoitems/{todoItem.Id}", new TodoItemDTO(todoItem));
});

app.MapPut("/todoitems/{id}", async (int id, TodoItemDTO todoItemDTO, TodoDb db) =&gt;
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return Results.NotFound();

    todo.Name = todoItemDTO.Name;
    todo.IsComplete = todoItemDTO.IsComplete;

    await db.SaveChangesAsync();

    return Results.NoContent();
});

app.MapDelete("/todoitems/{id}", async (int id, TodoDb db) =&gt;
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return Results.NoContent();
    }

    return Results.NotFound();
});

app.Run();

public class Todo
{
    public int Id { get; set; }
    public string? Name { get; set; }
    public bool IsComplete { get; set; }
    public string? Secret { get; set; }
}

public class TodoItemDTO
{
    public int Id { get; set; }
    public string? Name { get; set; }
    public bool IsComplete { get; set; }

    public TodoItemDTO() { }
    public TodoItemDTO(Todo todoItem) =&gt;
    (Id, Name, IsComplete) = (todoItem.Id, todoItem.Name, todoItem.IsComplete);
}


class TodoDb : DbContext
{
    public TodoDb(DbContextOptions&lt;TodoDb&gt; options)
        : base(options) { }

    public DbSet&lt;Todo&gt; Todos =&gt; Set&lt;Todo&gt;();
}
</code></pre>
</section>
<section id="tabpanel_6_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">
<pre><code class="lang-csharp">using NSwag.AspNetCore;
using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();

builder.Services.AddEndpointsApiExplorer();
builder.Services.AddOpenApiDocument(config =&gt;
{
    config.DocumentName = "TodoAPI";
    config.Title = "TodoAPI v1";
    config.Version = "v1";
});

var app = builder.Build();

if (app.Environment.IsDevelopment())
{
    app.UseOpenApi();
    app.UseSwaggerUi(config =&gt;
    {
        config.DocumentTitle = "TodoAPI";
        config.Path = "/swagger";
        config.DocumentPath = "/swagger/{documentName}/swagger.json";
        config.DocExpansion = "list";
    });
}

app.MapGet("/todoitems", async (TodoDb db) =&gt;
    await db.Todos.Select(x =&gt; new TodoItemDTO(x)).ToListAsync());

app.MapGet("/todoitems/complete", async (TodoDb db) =&gt;
    await db.Todos.Where(t =&gt; t.IsComplete).Select(t =&gt; new TodoItemDTO(t)).ToListAsync());


app.MapGet("/todoitems/{id}", async (int id, TodoDb db) =&gt;
    await db.Todos.FindAsync(id)
        is Todo todo
            ? Results.Ok(new TodoItemDTO(todo))
            : Results.NotFound());

app.MapPost("/todoitems", async (TodoItemDTO todoItemDTO, TodoDb db) =&gt;
{
    var todoItem = new Todo
    {
        IsComplete = todoItemDTO.IsComplete,
        Name = todoItemDTO.Name
    };

    db.Todos.Add(todoItem);
    await db.SaveChangesAsync();

    return Results.Created($"/todoitems/{todoItem.Id}", new TodoItemDTO(todoItem));
});

app.MapPut("/todoitems/{id}", async (int id, TodoItemDTO todoItemDTO, TodoDb db) =&gt;
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return Results.NotFound();

    todo.Name = todoItemDTO.Name;
    todo.IsComplete = todoItemDTO.IsComplete;

    await db.SaveChangesAsync();

    return Results.NoContent();
});

app.MapDelete("/todoitems/{id}", async (int id, TodoDb db) =&gt;
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return Results.NoContent();
    }

    return Results.NotFound();
});

app.Run();
</code></pre>
</section>
</div>

<p>Verify you can post and get all fields except the secret field.</p>
<p><a name="diff-v7"></a></p>
<h2 id="troubleshooting-with-the-completed-sample">Troubleshooting with the completed sample</h2>
<p>If you run into a problem you can't resolve, compare your code to the completed project. <a href="https://github.com/dotnet/AspNetCore.Docs/tree/main/aspnetcore/tutorials/min-web-api/samples" data-linktype="external">View or download completed project</a> (<a href="../overview553c.html?view=aspnetcore-9.0#how-to-download-a-sample" data-linktype="relative-path">how to download</a>).</p>
<h2 id="next-steps">Next steps</h2>
<ul>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/minimal-apis/responses?view=aspnetcore-9.0#configure-json-serialization-options" data-linktype="relative-path">Configure JSON serialization options</a>.</li>
<li>Handle errors and exceptions: The <a href="https://learn.microsoft.com/en-us/aspnet/core/web-api/handle-errors?view=aspnetcore-9.0#developer-exception-page" data-linktype="relative-path">developer exception page</a> is enabled by default in the development environment for minimal API apps. For information about how to handle errors and exceptions, see <a href="https://learn.microsoft.com/en-us/aspnet/core/web-api/handle-errors?view=aspnetcore-9.0" data-linktype="relative-path">Handle errors in ASP.NET Core APIs</a>.</li>
<li>For an example of testing a minimal API app, see <a href="https://github.com/dotnet/AspNetCore.Docs.Samples/tree/main/fundamentals/minimal-apis/samples/MinApiTestsSample" data-linktype="external">this GitHub sample</a>.</li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/openapi/aspnetcore-openapi?view=aspnetcore-9.0" data-linktype="relative-path">OpenAPI support in minimal APIs</a>.</li>
<li><a href="https://learn.microsoft.com/en-us/azure/app-service/quickstart-dotnetcore" data-linktype="absolute-path">Quickstart: Publish to Azure</a>.</li>
<li><a href="https://www.tessferrandez.com/blog/2023/10/31/organizing-minimal-apis.html" data-linktype="external">Organizing ASP.NET Core Minimal APIs</a>.</li>
</ul>
<h3 id="learn-more">Learn more</h3>
<p>See <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/minimal-apis?view=aspnetcore-9.0" data-linktype="relative-path">Minimal APIs quick reference</a></p>
</div>
<div data-moniker="aspnetcore-6.0">
<p>Minimal APIs are architected to create HTTP APIs with minimal dependencies. They are ideal for microservices and apps that want to include only the minimum files, features, and dependencies in ASP.NET Core.</p>
<p>This tutorial teaches the basics of building a minimal API with ASP.NET Core. Another approach to creating APIs in ASP.NET Core is to use controllers. For help in choosing between minimal APIs and controller-based APIs, see <a href="../fundamentals/apis553c.html?view=aspnetcore-9.0" data-linktype="relative-path">APIs overview</a>. For a tutorial on creating an API project based on <a href="https://learn.microsoft.com/en-us/aspnet/core/web-api/?view=aspnetcore-9.0" data-linktype="relative-path">controllers</a> that contains more features, see <a href="https://learn.microsoft.com/en-us/aspnet/core/tutorials/first-web-api?view=aspnetcore-9.0" data-linktype="relative-path">Create a web API</a>.</p>
<h2 id="overview-1">Overview</h2>
<p>This tutorial creates the following API:</p>
<table>
<thead>
<tr>
<th>API</th>
<th>Description</th>
<th>Request body</th>
<th>Response body</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GET /todoitems</code></td>
<td>Get all to-do items</td>
<td>None</td>
<td>Array of to-do items</td>
</tr>
<tr>
<td><code>GET /todoitems/complete</code></td>
<td>Get completed to-do items</td>
<td>None</td>
<td>Array of to-do items</td>
</tr>
<tr>
<td><code>GET /todoitems/{id}</code></td>
<td>Get an item by ID</td>
<td>None</td>
<td>To-do item</td>
</tr>
<tr>
<td><code>POST /todoitems</code></td>
<td>Add a new item</td>
<td>To-do item</td>
<td>To-do item</td>
</tr>
<tr>
<td><code>PUT /todoitems/{id}</code></td>
<td>Update an existing item &nbsp;</td>
<td>To-do item</td>
<td>None</td>
</tr>
<tr>
<td><code>DELETE /todoitems/{id}</code> &nbsp; &nbsp;</td>
<td>Delete an item &nbsp; &nbsp;</td>
<td>None</td>
<td>None</td>
</tr>
</tbody>
</table>
<h2 id="prerequisites-1">Prerequisites</h2>
<div class="tabGroup" id="tabgroup_7">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_7_visual-studio" role="tab" aria-controls="tabpanel_7_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_7_visual-studio-code" role="tab" aria-controls="tabpanel_7_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_7_visual-studio" role="tabpanel" data-tab="visual-studio">

<ul>
<li><a href="https://visualstudio.microsoft.com/vs/#download" data-linktype="external">Visual Studio 2022</a> with the <strong>ASP.NET and web development</strong> workload.</li>
<li><a href="https://dotnet.microsoft.com/download/dotnet/6.0" data-linktype="external">.NET 6 SDK</a></li>
</ul>
</section>
<section id="tabpanel_7_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">

<ul>
<li><a href="https://code.visualstudio.com/download" data-linktype="external">Visual Studio Code</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-dotnettools.csharp" data-linktype="external">C# for Visual Studio Code (latest version)</a></li>
<li><a href="https://dotnet.microsoft.com/download/dotnet/6.0" data-linktype="external">.NET 6 SDK</a></li>
</ul>
<p>The Visual Studio Code instructions use the .NET CLI for ASP.NET Core development functions such as project creation. You can follow these instructions on macOS, Linux, or Windows and with any code editor. Minor changes may be required if you use something other than Visual Studio Code.</p>
</section>
</div>
<h2 id="create-an-api-project-1">Create an API project</h2>
<div class="tabGroup" id="tabgroup_8">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_8_visual-studio" role="tab" aria-controls="tabpanel_8_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_8_visual-studio-code" role="tab" aria-controls="tabpanel_8_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_8_visual-studio" role="tabpanel" data-tab="visual-studio">

<ul>
<li><p>Start Visual Studio 2022 and select <strong>Create a new project</strong>.</p>
</li>
<li><p>In the <strong>Create a new project</strong> dialog:</p>
<ul>
<li>Enter <code>Empty</code> in the <strong>Search for templates</strong> search box.</li>
<li>Select the <strong>ASP.NET Core Empty</strong> template and select <strong>Next</strong>.</li>
</ul>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/empty.png?view=aspnetcore-9.0" alt="Visual Studio Create a new project" data-linktype="relative-path"></p>
</li>
<li><p>Name the project <em>TodoApi</em> and select <strong>Next</strong>.</p>
</li>
<li><p>In the <strong>Additional information</strong> dialog:</p>
<ul>
<li>Select <strong>.NET 6.0</strong></li>
<li>Uncheck <strong>Do not use top-level statements</strong></li>
<li>Select <strong>Create</strong></li>
</ul>
</li>
</ul>
</section>
<section id="tabpanel_8_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">

<ul>
<li><p>Open the <a href="https://code.visualstudio.com/docs/editor/integrated-terminal" data-linktype="external">integrated terminal</a>.</p>
</li>
<li><p>Change directories (<code>cd</code>) to the folder that will contain the project folder.</p>
</li>
<li><p>Run the following commands:</p>
<pre><code class="lang-dotnetcli">dotnet new web -o TodoApi
cd TodoApi
code -r ../TodoApi
</code></pre>
</li>
<li><p>When a dialog box asks if you want to trust the authors, select <strong>Yes</strong>.</p>
</li>
<li><p>When a dialog box asks if you want to add required assets to the project, select <strong>Yes</strong>.</p>
<p>The preceding commands create a new web minimal API project and open it in Visual Studio Code.</p>
</li>
</ul>
</section>
</div>
<h3 id="examine-the-code-1">Examine the code</h3>
<p>The <code>Program.cs</code> file contains the following code:</p>
<pre><code class="lang-csharp">var builder = WebApplication.CreateBuilder(args);
var app = builder.Build();

app.MapGet("/", () =&gt; "Hello World!");

app.Run();
</code></pre>
<p>The preceding code:</p>
<ul>
<li>Creates a <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.webapplicationbuilder" class="no-loc" data-linktype="absolute-path">WebApplicationBuilder</a> and a <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.webapplication" class="no-loc" data-linktype="absolute-path">WebApplication</a> with preconfigured defaults.</li>
<li>Creates an HTTP GET endpoint <code>/</code> that returns <code>Hello World!</code>:</li>
</ul>
<h3 id="run-the-app-1">Run the app</h3>
<div class="tabGroup" id="tabgroup_9">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_9_visual-studio" role="tab" aria-controls="tabpanel_9_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_9_visual-studio-code" role="tab" aria-controls="tabpanel_9_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_9_visual-studio" role="tabpanel" data-tab="visual-studio">

<p>Press Ctrl+F5 to run without the debugger.</p>
<p>Visual Studio displays the following dialog:</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/static/trustcertvs22.png?view=aspnetcore-9.0" alt="This project is configured to use SSL. To avoid SSL warnings in the browser you can choose to trust the self-signed certificate that IIS Express has generated. Would you like to trust the IIS Express SSL certificate?" data-linktype="relative-path"></p>
<p>Select <strong>Yes</strong> if you trust the IIS Express SSL certificate.</p>
<p>The following dialog is displayed:</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/static/cert.png?view=aspnetcore-9.0" alt="Security warning dialog" data-linktype="relative-path"></p>
<p>Select <strong>Yes</strong> if you agree to trust the development certificate.</p>
<p>For information on trusting the Firefox browser, see <a href="../security/enforcing-ssl553c.html?view=aspnetcore-9.0#trust-ff" data-linktype="relative-path">Firefox SEC_ERROR_INADEQUATE_KEY_USAGE certificate error</a>.</p>
<p>Visual Studio launches the <a href="../fundamentals/servers/kestrel553c.html?view=aspnetcore-9.0" data-linktype="relative-path">Kestrel web server</a> and opens a browser window.</p>
</section>
<section id="tabpanel_9_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">

<ul>
<li><p>Trust the HTTPS development certificate by running the following command:</p>
<pre><code class="lang-dotnetcli">dotnet dev-certs https --trust
</code></pre>
<div data-moniker="aspnetcore-6.0 aspnetcore-7.0 aspnetcore-8.0">
<p>The preceding command requires .NET 9 or later SDK on Linux. For Linux on .NET 8.0.401 or earlier SDK, see your Linux distribution's documentation for trusting a certificate.</p>
</div>
<p>The preceding command displays the following dialog, provided the certificate was not previously trusted:</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/static/cert.png?view=aspnetcore-9.0" alt="Security warning dialog" data-linktype="relative-path"></p>
</li>
<li><p>Select <strong>Yes</strong> if you agree to trust the development certificate.</p>
<p>For more information, see the <strong>Trust the ASP.NET Core HTTPS development certificate</strong> section of the <a href="../security/enforcing-ssl553c.html?view=aspnetcore-9.0" data-linktype="relative-path">Enforcing SSL</a> article.</p>
</li>
</ul>
<p>For information on trusting the Firefox browser, see <a href="../security/enforcing-ssl553c.html?view=aspnetcore-9.0#trust-ff" data-linktype="relative-path">Firefox SEC_ERROR_INADEQUATE_KEY_USAGE certificate error</a>.</p>
<p>Press Ctrl+F5 to run the app. A browser window is opened.</p>
</section>
</div>

<p><code>Hello World!</code> is displayed in the browser. The <code>Program.cs</code> file contains a minimal but complete app.</p>
<h2 id="add-nuget-packages-1">Add NuGet packages</h2>
<p>NuGet packages must be added to support the database and diagnostics used in this tutorial.</p>
<div class="tabGroup" id="tabgroup_10">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_10_visual-studio" role="tab" aria-controls="tabpanel_10_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_10_visual-studio-code" role="tab" aria-controls="tabpanel_10_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_10_visual-studio" role="tabpanel" data-tab="visual-studio">

<ul>
<li>From the <strong>Tools</strong> menu, select <strong>NuGet Package Manager &gt; Manage NuGet Packages for Solution</strong>.</li>
<li>Select the <strong>Browse</strong> tab.</li>
<li>Enter <strong>Microsoft.EntityFrameworkCore.InMemory</strong> in the search box, and then select <code>Microsoft.EntityFrameworkCore.InMemory</code>.</li>
<li>Select the <strong>Project</strong> checkbox in the right pane.</li>
<li>In the <strong>Version</strong> drop down select the latest version 7 available, for example <code>6.0.28</code>, and then select <strong>Install</strong>.</li>
<li>Follow the preceding instructions to add the <code>Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore</code> package with the latest version 7 available.</li>
</ul>
</section>
<section id="tabpanel_10_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">

<ul>
<li><p>Run the following commands:</p>
<pre><code class="lang-dotnetcli">dotnet add package Microsoft.EntityFrameworkCore.InMemory --version 6.0.28
dotnet add package Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore --version 6.0.28
</code></pre>
</li>
</ul>
</section>
</div>
<h2 id="the-model-and-database-context-classes-1">The model and database context classes</h2>
<p>In the project folder, create a file named <code>Todo.cs</code> with the following code:</p>
<pre><code class="lang-csharp">public class Todo
{
    public int Id { get; set; }
    public string? Name { get; set; }
    public bool IsComplete { get; set; }
}
</code></pre>
<p>The preceding code creates the model for this app. A <em>model</em> is a class that represents data that the app manages.</p>
<p>Create a file named <code>TodoDb.cs</code> with the following code:</p>
<pre><code class="lang-csharp">using Microsoft.EntityFrameworkCore;

class TodoDb : DbContext
{
    public TodoDb(DbContextOptions&lt;TodoDb&gt; options)
        : base(options) { }

    public DbSet&lt;Todo&gt; Todos =&gt; Set&lt;Todo&gt;();
}
</code></pre>
<p>The preceding code defines the <em>database context</em>, which is the main class that coordinates <a href="https://learn.microsoft.com/en-us/ef/core/" data-linktype="absolute-path">Entity Framework</a> functionality for a data model. This class derives from the <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.entityframeworkcore.dbcontext" class="no-loc" data-linktype="absolute-path">Microsoft.EntityFrameworkCore.DbContext</a> class.</p>
<h2 id="add-the-api-code-1">Add the API code</h2>
<p>Replace the contents of the <code>Program.cs</code> file with the following code:</p>
<pre><code class="lang-csharp">using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();
var app = builder.Build();

app.MapGet("/", () =&gt; "Hello World!");

app.MapGet("/todoitems", async (TodoDb db) =&gt;
    await db.Todos.ToListAsync());

app.MapGet("/todoitems/complete", async (TodoDb db) =&gt;
    await db.Todos.Where(t =&gt; t.IsComplete).ToListAsync());

app.MapGet("/todoitems/{id}", async (int id, TodoDb db) =&gt;
    await db.Todos.FindAsync(id)
        is Todo todo
            ? Results.Ok(todo)
            : Results.NotFound());

app.MapPost("/todoitems", async (Todo todo, TodoDb db) =&gt;
{
    db.Todos.Add(todo);
    await db.SaveChangesAsync();

    return Results.Created($"/todoitems/{todo.Id}", todo);
});

app.MapPut("/todoitems/{id}", async (int id, Todo inputTodo, TodoDb db) =&gt;
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return Results.NotFound();

    todo.Name = inputTodo.Name;
    todo.IsComplete = inputTodo.IsComplete;

    await db.SaveChangesAsync();

    return Results.NoContent();
});

app.MapDelete("/todoitems/{id}", async (int id, TodoDb db) =&gt;
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return Results.NoContent();
    }

    return Results.NotFound();
});

app.Run();
</code></pre>
<p>The following highlighted code adds the database context to the <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/dependency-injection?view=aspnetcore-9.0" data-linktype="relative-path">dependency injection (DI)</a> container and enables displaying database-related exceptions:</p>
<pre><code class="lang-csharp" highlight-lines="2-3">var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();
var app = builder.Build();
</code></pre>
<p>The DI container provides access to the database context and other services.</p>
<h2 id="create-api-testing-ui-with-swagger-1">Create API testing UI with Swagger</h2>
<p>There are many available web API testing tools to choose from, and you can follow this tutorial's introductory API test steps with your own preferred tool.</p>
<p>This tutorial utilizes the .NET package <a href="https://www.nuget.org/packages/NSwag.AspNetCore/" data-linktype="external">NSwag.AspNetCore</a>, which integrates Swagger tools for generating a testing UI adhering to the OpenAPI specification:</p>
<ul>
<li>NSwag: A .NET library that integrates Swagger directly into ASP.NET Core applications, providing middleware and configuration.</li>
<li>Swagger: A set of open-source tools such as OpenAPIGenerator and SwaggerUI that generate API testing pages that follow the OpenAPI specification.</li>
<li>OpenAPI specification: A document that describes the capabilities of the API, based on the XML and attribute annotations within the controllers and models.</li>
</ul>
<p>For more information on using OpenAPI and NSwag with ASP.NET, see <a href="https://learn.microsoft.com/en-us/aspnet/core/tutorials/web-api-help-pages-using-swagger?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core web API documentation with Swagger / OpenAPI</a>.</p>
<h3 id="install-swagger-tooling-1">Install Swagger tooling</h3>
<ul>
<li><p>Run the following command:</p>
<pre><code class="lang-dotnetcli">dotnet add package NSwag.AspNetCore
</code></pre>
</li>
</ul>
<p>The previous command adds the <a href="https://www.nuget.org/packages/NSwag.AspNetCore/" data-linktype="external">NSwag.AspNetCore</a> package, which contains tools to generate Swagger documents and UI.</p>
<h3 id="configure-swagger-middleware-1">Configure Swagger middleware</h3>
<ul>
<li><p>In Program.cs add the following <code>using</code> statements at the top:</p>
<pre><code class="lang-csharp">using NSwag.AspNetCore;
</code></pre></li>
<li><p>Add the following highlighted code before <code>app</code> is defined in line <code>var app = builder.Build();</code></p>
<pre><code class="lang-csharp" highlight-lines="8-14">using NSwag.AspNetCore;
using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();

builder.Services.AddEndpointsApiExplorer();
builder.Services.AddOpenApiDocument(config =&gt;
{
    config.DocumentName = "TodoAPI";
    config.Title = "TodoAPI v1";
    config.Version = "v1";
});

var app = builder.Build();
</code></pre></li>
</ul>
<p>In the previous code:</p>
<ul>
<li><p><code>builder.Services.AddEndpointsApiExplorer();</code>: Enables the API Explorer, which is a service that provides metadata about the HTTP API. The API Explorer is used by Swagger to generate the Swagger document.</p>
</li>
<li><p><code>builder.Services.AddOpenApiDocument(config =&gt; {...});</code>: Adds the Swagger OpenAPI document generator to the application services and configures it to provide more information about the API, such as its title and version. For information on providing more robust API details, see <a href="https://learn.microsoft.com/en-us/aspnet/core/tutorials/getting-started-with-nswag?view=aspnetcore-9.0#customize-api-documentation" data-linktype="relative-path">Get started with NSwag and ASP.NET Core</a></p>
</li>
<li><p>Add the following highlighted code to the next line after <code>app</code> is defined in line <code>var app = builder.Build();</code></p>
<pre><code class="lang-csharp" highlight-lines="4-14">
var app = builder.Build();

if (app.Environment.IsDevelopment())
{
    app.UseOpenApi();
    app.UseSwaggerUi(config =&gt;
    {
        config.DocumentTitle = "TodoAPI";
        config.Path = "/swagger";
        config.DocumentPath = "/swagger/{documentName}/swagger.json";
        config.DocExpansion = "list";
    });
}

</code></pre>
<p>The previous code enables the Swagger middleware for serving the generated JSON document and the Swagger UI. Swagger is only enabled in a development environment. Enabling Swagger in a production environment could expose potentially sensitive details about the API's structure and implementation.</p>
</li>
</ul>
<p><a name="post"></a></p>
<h2 id="test-posting-data-1">Test posting data</h2>
<p>The following code in <code>Program.cs</code> creates an HTTP POST endpoint <code>/todoitems</code> that adds data to the in-memory database:</p>
<pre><code class="lang-csharp">app.MapPost("/todoitems", async (Todo todo, TodoDb db) =&gt;
{
    db.Todos.Add(todo);
    await db.SaveChangesAsync();

    return Results.Created($"/todoitems/{todo.Id}", todo);
});
</code></pre>
<p>Run the app. The browser displays a 404 error because there's no longer a <code>/</code> endpoint.</p>
<p>The POST endpoint will be used to add data to the app.</p>
<ul>
<li><p>With the app still running, in the browser, navigate to <code>https://localhost:&lt;port&gt;/swagger</code> to display the API testing page generated by Swagger.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/8.x/swagger.png?view=aspnetcore-9.0" alt="Swagger generated API testing page" data-linktype="relative-path"></p>
</li>
<li><p>On the Swagger API testing page, select <strong>Post /todoitems</strong> &gt; <strong>Try it out</strong>.</p>
</li>
<li><p>Note that the <strong>Request body</strong> field contains a generated example format reflecting the parameters for the API.</p>
</li>
<li><p>In the request body enter JSON for a to-do item, without specifying the optional <code>id</code>:</p>
<pre><code class="lang-json">{
  "name":"walk dog",
  "isComplete":true
}
</code></pre>
</li>
<li><p>Select <strong>Execute</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/8.x/swagger-post-1.png?view=aspnetcore-9.0" alt="Swagger with Post data" data-linktype="relative-path"></p>
</li>
</ul>
<p>Swagger provides a <strong>Responses</strong> pane below the <strong>Execute</strong> button.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/8.x/swagger-post-responses.png?view=aspnetcore-9.0" alt="Swagger with Post resonse pane" data-linktype="relative-path"></p>
<p>Note a few of the useful details:</p>
<ul>
<li>cURL: Swagger provides an example cURL command in Unix/Linux syntax, which can be run at the command line with any bash shell that uses Unix/Linux syntax, including Git Bash from <a href="https://git-scm.com/downloads" data-linktype="external">Git for Windows</a>.</li>
<li>Request URL: A simplified representation of the HTTP request made by Swagger UI's JavaScript code for the API call. Actual requests can include details such as headers and query parameters and a request body.</li>
<li>Server response: Includes the response body and headers. The response body shows the <code>id</code> was set to <code>1</code>.</li>
<li>Response Code: A 201 <code>HTTP</code> status code was returned, indicating that the request was successfully processed and resulted in the creation of a new resource.</li>
</ul>
<hr>
<h2 id="examine-the-get-endpoints-1">Examine the GET endpoints</h2>
<p>The sample app implements several GET endpoints by calling <code>MapGet</code>:</p>
<table>
<thead>
<tr>
<th>API</th>
<th>Description</th>
<th>Request body</th>
<th>Response body</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GET /todoitems</code></td>
<td>Get all to-do items</td>
<td>None</td>
<td>Array of to-do items</td>
</tr>
<tr>
<td><code>GET /todoitems/complete</code></td>
<td>Get all completed to-do items</td>
<td>None</td>
<td>Array of to-do items</td>
</tr>
<tr>
<td><code>GET /todoitems/{id}</code></td>
<td>Get an item by ID</td>
<td>None</td>
<td>To-do item</td>
</tr>
</tbody>
</table>
<pre><code class="lang-csharp">app.MapGet("/", () =&gt; "Hello World!");

app.MapGet("/todoitems", async (TodoDb db) =&gt;
    await db.Todos.ToListAsync());

app.MapGet("/todoitems/complete", async (TodoDb db) =&gt;
    await db.Todos.Where(t =&gt; t.IsComplete).ToListAsync());

app.MapGet("/todoitems/{id}", async (int id, TodoDb db) =&gt;
    await db.Todos.FindAsync(id)
        is Todo todo
            ? Results.Ok(todo)
            : Results.NotFound());
</code></pre><h2 id="test-the-get-endpoints-1">Test the GET endpoints</h2>
<p>Test the app by calling the endpoints from a browser or Swagger.</p>
<ul>
<li><p>In Swagger select <strong>GET /todoitems</strong> &gt; <strong>Try it out</strong> &gt; <strong>Execute</strong>.</p>
</li>
<li><p>Alternatively, call <strong>GET /todoitems</strong> from a browser by entering the URI <code>http://localhost:&lt;port&gt;/todoitems</code>. For example, <code>http://localhost:5001/todoitems</code></p>
</li>
</ul>
<p>The call to <code>GET /todoitems</code> produces a response similar to the following:</p>
<pre><code class="lang-json">[
  {
    "id": 1,
    "name": "walk dog",
    "isComplete": true
  }
]
</code></pre>
<ul>
<li><p>Call <strong>GET /todoitems/{id}</strong> in Swagger to return data from a specific id:</p>
<ul>
<li>Select <strong>GET /todoitems</strong> &gt; <strong>Try it out</strong>.</li>
<li>Set the <strong>id</strong> field to <code>1</code> and select <strong>Execute</strong>.</li>
</ul>
</li>
<li><p>Alternatively, call <strong>GET /todoitems</strong> from a browser by entering the URI <code>https://localhost:&lt;port&gt;/todoitems/1</code>. For example, For example, <code>https://localhost:5001/todoitems/1</code></p>
</li>
<li><p>The response is similar to the following:</p>
<pre><code class="lang-json">{
  "id": 1,
  "name": "walk dog",
  "isComplete": true
}
</code></pre>
</li>
</ul>
<p>This app uses an in-memory database. If the app is restarted, the GET request doesn't return any data. If no data is returned, <a href="#post" data-linktype="self-bookmark">POST</a> data to the app and try the GET request again.</p>
<h2 id="return-values-1">Return values</h2>
<p>ASP.NET Core automatically serializes the object to <a href="https://www.json.org/" data-linktype="external">JSON</a> and writes the JSON into the body of the response message. The response code for this return type is <a href="https://developer.mozilla.org/docs/Web/HTTP/Status/200" data-linktype="external">200 OK</a>, assuming there are no unhandled exceptions. Unhandled exceptions are translated into 5xx errors.</p>
<p>The return types can represent a wide range of HTTP status codes. For example, <code>GET /todoitems/{id}</code> can return two different status values:</p>
<ul>
<li>If no item matches the requested ID, the method returns a <a href="https://developer.mozilla.org/docs/Web/HTTP/Status/404" data-linktype="external">404 status</a> <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.controllerbase.notfound" class="no-loc" data-linktype="absolute-path">NotFound</a> error code.</li>
<li>Otherwise, the method returns 200 with a JSON response body. Returning <code>item</code> results in an HTTP 200 response.</li>
</ul>
<h2 id="examine-the-put-endpoint-1">Examine the PUT endpoint</h2>
<p>The sample app implements a single PUT endpoint using <code>MapPut</code>:</p>
<pre><code class="lang-csharp">app.MapPut("/todoitems/{id}", async (int id, Todo inputTodo, TodoDb db) =&gt;
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return Results.NotFound();

    todo.Name = inputTodo.Name;
    todo.IsComplete = inputTodo.IsComplete;

    await db.SaveChangesAsync();

    return Results.NoContent();
});
</code></pre>
<p>This method is similar to the <code>MapPost</code> method, except it uses HTTP PUT. A successful response returns <a href="https://www.rfc-editor.org/rfc/rfc9110#status.204" data-linktype="external">204 (No Content)</a>. According to the HTTP specification, a PUT request requires the client to send the entire updated entity, not just the changes. To support partial updates, use <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.httppatchattribute" data-linktype="absolute-path">HTTP PATCH</a>.</p>
<h2 id="test-the-put-endpoint-1">Test the PUT endpoint</h2>
<p>This sample uses an in-memory database that must be initialized each time the app is started. There must be an item in the database before you make a PUT call. Call GET to ensure there's an item in the database before making a PUT call.</p>
<p>Update the to-do item that has <code>Id = 1</code> and set its name to <code>"feed fish"</code>.</p>
<p>Use Swagger to send a PUT request:</p>
<ul>
<li><p>Select <strong>Put /todoitems/{id}</strong> &gt; <strong>Try it out</strong>.</p>
</li>
<li><p>Set the <strong>id</strong> field to <code>1</code>.</p>
</li>
<li><p>Set the request body to the following JSON:</p>
<pre><code class="lang-json">{
  "name": "feed fish",
  "isComplete": false
}
</code></pre>
</li>
<li><p>Select <strong>Execute</strong>.</p>
</li>
</ul>
<h2 id="examine-and-test-the-delete-endpoint-1">Examine and test the DELETE endpoint</h2>
<p>The sample app implements a single DELETE endpoint using <code>MapDelete</code>:</p>
<pre><code class="lang-csharp">app.MapDelete("/todoitems/{id}", async (int id, TodoDb db) =&gt;
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return Results.NoContent();
    }

    return Results.NotFound();
});
</code></pre>
<p>Use Swagger to send a DELETE request:</p>
<ul>
<li><p>Select <strong>DELETE /todoitems/{id}</strong> &gt; <strong>Try it out</strong>.</p>
</li>
<li><p>Set the <strong>ID</strong> field to <code>1</code> and select <strong>Execute</strong>.</p>
<p>The DELETE request is sent to the app and the response is displayed in the <strong>Responses</strong> pane. The response body is empty, and the <strong>Server response</strong> status code is 204.</p>
</li>
</ul>
<p><a name="over-post-v7"></a></p>
<h2 id="prevent-over-posting-1">Prevent over-posting</h2>
<p>Currently the sample app exposes the entire <code>Todo</code> object. Production apps In production applications, a subset of the model is often used to restrict the data that can be input and returned. There are multiple reasons behind this and security is a major one. The subset of a model is usually referred to as a Data Transfer Object (DTO), input model, or view model. <strong>DTO</strong> is used in this article.</p>
<p>A DTO can be used to:</p>
<ul>
<li>Prevent over-posting.</li>
<li>Hide properties that clients aren't supposed to view.</li>
<li>Omit some properties to reduce payload size.</li>
<li>Flatten object graphs that contain nested objects. Flattened object graphs can be more convenient for clients.</li>
</ul>
<p>To demonstrate the DTO approach, update the <code>Todo</code> class to include a secret field:</p>
<pre><code class="lang-csharp">public class Todo
{
    public int Id { get; set; }
    public string? Name { get; set; }
    public bool IsComplete { get; set; }
    public string? Secret { get; set; }
}
</code></pre>
<p>The secret field needs to be hidden from this app, but an administrative app could choose to expose it.</p>
<p>Verify you can post and get the secret field.</p>
<p>Create a file named <code>TodoItemDTO.cs</code> with the following code:</p>
<pre><code class="lang-csharp">public class TodoItemDTO
{
    public int Id { get; set; }
    public string? Name { get; set; }
    public bool IsComplete { get; set; }

    public TodoItemDTO() { }
    public TodoItemDTO(Todo todoItem) =&gt;
    (Id, Name, IsComplete) = (todoItem.Id, todoItem.Name, todoItem.IsComplete);
}
</code></pre>
<p>Replace the contents of the <code>Program.cs</code> file with the following code to use this DTO model:</p>
<div class="tabGroup" id="tabgroup_11">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_11_visual-studio" role="tab" aria-controls="tabpanel_11_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_11_visual-studio-code" role="tab" aria-controls="tabpanel_11_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_11_visual-studio" role="tabpanel" data-tab="visual-studio">
<pre><code class="lang-csharp">using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDatabaseDeveloperPageExceptionFilter();
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
var app = builder.Build();

app.MapGet("/todoitems", async (TodoDb db) =&gt;
    await db.Todos.Select(x =&gt; new TodoItemDTO(x)).ToListAsync());

app.MapGet("/todoitems/{id}", async (int id, TodoDb db) =&gt;
    await db.Todos.FindAsync(id)
        is Todo todo
            ? Results.Ok(new TodoItemDTO(todo))
            : Results.NotFound());

app.MapPost("/todoitems", async (TodoItemDTO todoItemDTO, TodoDb db) =&gt;
{
    var todoItem = new Todo
    {
        IsComplete = todoItemDTO.IsComplete,
        Name = todoItemDTO.Name
    };

    db.Todos.Add(todoItem);
    await db.SaveChangesAsync();

    return Results.Created($"/todoitems/{todoItem.Id}", new TodoItemDTO(todoItem));
});

app.MapPut("/todoitems/{id}", async (int id, TodoItemDTO todoItemDTO, TodoDb db) =&gt;
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return Results.NotFound();

    todo.Name = todoItemDTO.Name;
    todo.IsComplete = todoItemDTO.IsComplete;

    await db.SaveChangesAsync();

    return Results.NoContent();
});

app.MapDelete("/todoitems/{id}", async (int id, TodoDb db) =&gt;
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return Results.NoContent();
    }

    return Results.NotFound();
});

app.Run();

public class Todo
{
    public int Id { get; set; }
    public string? Name { get; set; }
    public bool IsComplete { get; set; }
    public string? Secret { get; set; }
}

public class TodoItemDTO
{
    public int Id { get; set; }
    public string? Name { get; set; }
    public bool IsComplete { get; set; }

    public TodoItemDTO() { }
    public TodoItemDTO(Todo todoItem) =&gt;
    (Id, Name, IsComplete) = (todoItem.Id, todoItem.Name, todoItem.IsComplete);
}


class TodoDb : DbContext
{
    public TodoDb(DbContextOptions&lt;TodoDb&gt; options)
        : base(options) { }

    public DbSet&lt;Todo&gt; Todos =&gt; Set&lt;Todo&gt;();
}
</code></pre>
</section>
<section id="tabpanel_11_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">
<pre><code class="lang-csharp">using NSwag.AspNetCore;
using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();

builder.Services.AddEndpointsApiExplorer();
builder.Services.AddOpenApiDocument(config =&gt;
{
    config.DocumentName = "TodoAPI";
    config.Title = "TodoAPI v1";
    config.Version = "v1";
});

var app = builder.Build();

if (app.Environment.IsDevelopment())
{
    app.UseOpenApi();
    app.UseSwaggerUi(config =&gt;
    {
        config.DocumentTitle = "TodoAPI";
        config.Path = "/swagger";
        config.DocumentPath = "/swagger/{documentName}/swagger.json";
        config.DocExpansion = "list";
    });
}

app.MapGet("/todoitems", async (TodoDb db) =&gt;
    await db.Todos.Select(x =&gt; new TodoItemDTO(x)).ToListAsync());

app.MapGet("/todoitems/complete", async (TodoDb db) =&gt;
    await db.Todos.Where(t =&gt; t.IsComplete).Select(t =&gt; new TodoItemDTO(t)).ToListAsync());


app.MapGet("/todoitems/{id}", async (int id, TodoDb db) =&gt;
    await db.Todos.FindAsync(id)
        is Todo todo
            ? Results.Ok(new TodoItemDTO(todo))
            : Results.NotFound());

app.MapPost("/todoitems", async (TodoItemDTO todoItemDTO, TodoDb db) =&gt;
{
    var todoItem = new Todo
    {
        IsComplete = todoItemDTO.IsComplete,
        Name = todoItemDTO.Name
    };

    db.Todos.Add(todoItem);
    await db.SaveChangesAsync();

    return Results.Created($"/todoitems/{todoItem.Id}", new TodoItemDTO(todoItem));
});

app.MapPut("/todoitems/{id}", async (int id, TodoItemDTO todoItemDTO, TodoDb db) =&gt;
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return Results.NotFound();

    todo.Name = todoItemDTO.Name;
    todo.IsComplete = todoItemDTO.IsComplete;

    await db.SaveChangesAsync();

    return Results.NoContent();
});

app.MapDelete("/todoitems/{id}", async (int id, TodoDb db) =&gt;
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return Results.NoContent();
    }

    return Results.NotFound();
});

app.Run();
</code></pre>
</section>
</div>

<p>Verify you can post and get all fields except the secret field.</p>
<h2 id="test-minimal-api">Test minimal API</h2>
<p>For an example of testing a minimal API app, see <a href="https://github.com/dotnet/AspNetCore.Docs.Samples/tree/main/fundamentals/minimal-apis/samples/MinApiTestsSample" data-linktype="external">this GitHub sample</a>.</p>
<h2 id="publish-to-azure">Publish to Azure</h2>
<p>For information on deploying to Azure, see <a href="https://learn.microsoft.com/en-us/azure/app-service/quickstart-dotnetcore" data-linktype="absolute-path">Quickstart: Deploy an ASP.NET web app</a>.</p>
<h2 id="additional-resources">Additional resources</h2>
<ul>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/minimal-apis?view=aspnetcore-9.0" data-linktype="relative-path">Minimal APIs quick reference</a></li>
</ul>
</div>
<div data-moniker="aspnetcore-8.0">
<p>Minimal APIs are architected to create HTTP APIs with minimal dependencies. They're ideal for microservices and apps that want to include only the minimum files, features, and dependencies in ASP.NET Core.</p>
<p>This tutorial teaches the basics of building a minimal API with ASP.NET Core. Another approach to creating APIs in ASP.NET Core is to use controllers. For help with choosing between minimal APIs and controller-based APIs, see <a href="../fundamentals/apis553c.html?view=aspnetcore-9.0" data-linktype="relative-path">APIs overview</a>. For a tutorial on creating an API project based on <a href="https://learn.microsoft.com/en-us/aspnet/core/web-api/?view=aspnetcore-9.0" data-linktype="relative-path">controllers</a> that contains more features, see <a href="https://learn.microsoft.com/en-us/aspnet/core/tutorials/first-web-api?view=aspnetcore-9.0" data-linktype="relative-path">Create a web API</a>.</p>
<h2 id="overview">Overview</h2>
<p>This tutorial creates the following API:</p>
<table>
<thead>
<tr>
<th>API</th>
<th>Description</th>
<th>Request body</th>
<th>Response body</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GET /todoitems</code></td>
<td>Get all to-do items</td>
<td>None</td>
<td>Array of to-do items</td>
</tr>
<tr>
<td><code>GET /todoitems/complete</code></td>
<td>Get completed to-do items</td>
<td>None</td>
<td>Array of to-do items</td>
</tr>
<tr>
<td><code>GET /todoitems/{id}</code></td>
<td>Get an item by ID</td>
<td>None</td>
<td>To-do item</td>
</tr>
<tr>
<td><code>POST /todoitems</code></td>
<td>Add a new item</td>
<td>To-do item</td>
<td>To-do item</td>
</tr>
<tr>
<td><code>PUT /todoitems/{id}</code></td>
<td>Update an existing item &nbsp;</td>
<td>To-do item</td>
<td>None</td>
</tr>
<tr>
<td><code>DELETE /todoitems/{id}</code> &nbsp; &nbsp;</td>
<td>Delete an item &nbsp; &nbsp;</td>
<td>None</td>
<td>None</td>
</tr>
</tbody>
</table>
<h2 id="prerequisites">Prerequisites</h2>
<div class="tabGroup" id="tabgroup_1">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_1_visual-studio" role="tab" aria-controls="tabpanel_1_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_1_visual-studio-code" role="tab" aria-controls="tabpanel_1_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_1_visual-studio" role="tabpanel" data-tab="visual-studio">

<ul>
<li><p><a href="https://visualstudio.microsoft.com/downloads/" data-linktype="external">Visual Studio 2022</a> with the <strong>ASP.NET and web development</strong> workload.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/asp-net-web-dev.png?view=aspnetcore-9.0" alt="VS22 installer workloads" data-linktype="relative-path"></p>
</li>
</ul>
</section>
<section id="tabpanel_1_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">

<ul>
<li><a href="https://code.visualstudio.com/download" data-linktype="external">Visual Studio Code</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-dotnettools.csharp" data-linktype="external">C# for Visual Studio Code (latest version)</a></li>
<li><a href="https://dotnet.microsoft.com/download/dotnet/8.0" data-linktype="external">.NET 8 SDK</a></li>
</ul>
<p>The Visual Studio Code instructions use the .NET CLI for ASP.NET Core development functions such as project creation. You can follow these instructions on macOS, Linux, or Windows and with any code editor. Minor changes may be required if you use something other than Visual Studio Code.</p>
</section>
</div>
<h2 id="create-an-api-project">Create an API project</h2>
<div class="tabGroup" id="tabgroup_2">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_2_visual-studio" role="tab" aria-controls="tabpanel_2_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_2_visual-studio-code" role="tab" aria-controls="tabpanel_2_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_2_visual-studio" role="tabpanel" data-tab="visual-studio">

<ul>
<li><p>Start Visual Studio 2022 and select <strong>Create a new project</strong>.</p>
</li>
<li><p>In the <strong>Create a new project</strong> dialog:</p>
<ul>
<li>Enter <code>Empty</code> in the <strong>Search for templates</strong> search box.</li>
<li>Select the <strong>ASP.NET Core Empty</strong> template and select <strong>Next</strong>.</li>
</ul>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/8.x/create-new-project-empty-vs17.8.0.png?view=aspnetcore-9.0" alt="Visual Studio Create a new project" data-linktype="relative-path"></p>
</li>
<li><p>Name the project <em>TodoApi</em> and select <strong>Next</strong>.</p>
</li>
<li><p>In the <strong>Additional information</strong> dialog:</p>
<ul>
<li>Select <strong>.NET 8.0 (Long Term Support)</strong></li>
<li>Uncheck <strong>Do not use top-level statements</strong></li>
<li>Select <strong>Create</strong></li>
</ul>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/8.x/add-info-vs17.9.0.png?view=aspnetcore-9.0" alt="Additional information" data-linktype="relative-path"></p>
</li>
</ul>
</section>
<section id="tabpanel_2_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">

<ul>
<li><p>Open the <a href="https://code.visualstudio.com/docs/editor/integrated-terminal" data-linktype="external">integrated terminal</a>.</p>
</li>
<li><p>Change directories (<code>cd</code>) to the folder that will contain the project folder.</p>
</li>
<li><p>Run the following commands:</p>
<pre><code class="lang-dotnetcli">dotnet new web -o TodoApi
cd TodoApi
code -r ../TodoApi
</code></pre>
</li>
<li><p>When a dialog box asks if you want to trust the authors, select <strong>Yes</strong>.</p>
</li>
<li><p>When a dialog box asks if you want to add required assets to the project, select <strong>Yes</strong>.</p>
<p>The preceding commands create a new web minimal API project and open it in Visual Studio Code.</p>
</li>
</ul>
</section>
</div>
<h3 id="examine-the-code">Examine the code</h3>
<p>The <code>Program.cs</code> file contains the following code:</p>
<pre><code class="lang-csharp">var builder = WebApplication.CreateBuilder(args);
var app = builder.Build();

app.MapGet("/", () =&gt; "Hello World!");

app.Run();
</code></pre>
<p>The preceding code:</p>
<ul>
<li>Creates a <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.webapplicationbuilder" class="no-loc" data-linktype="absolute-path">WebApplicationBuilder</a> and a <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.webapplication" class="no-loc" data-linktype="absolute-path">WebApplication</a> with preconfigured defaults.</li>
<li>Creates an HTTP GET endpoint <code>/</code> that returns <code>Hello World!</code>:</li>
</ul>
<h3 id="run-the-app">Run the app</h3>
<div class="tabGroup" id="tabgroup_3">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_3_visual-studio" role="tab" aria-controls="tabpanel_3_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_3_visual-studio-code" role="tab" aria-controls="tabpanel_3_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_3_visual-studio" role="tabpanel" data-tab="visual-studio">
<!-- replace all of this with an include -->
<p>Press Ctrl+F5 to run without the debugger.</p>
<p>Visual Studio displays the following dialog:</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/static/trustcertvs22.png?view=aspnetcore-9.0" alt="This project is configured to use SSL. To avoid SSL warnings in the browser you can choose to trust the self-signed certificate that IIS Express has generated. Would you like to trust the IIS Express SSL certificate?" data-linktype="relative-path"></p>
<p>Select <strong>Yes</strong> if you trust the IIS Express SSL certificate.</p>
<p>The following dialog is displayed:</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/static/cert.png?view=aspnetcore-9.0" alt="Security warning dialog" data-linktype="relative-path"></p>
<p>Select <strong>Yes</strong> if you agree to trust the development certificate.</p>
<p>For information on trusting the Firefox browser, see <a href="../security/enforcing-ssl553c.html?view=aspnetcore-9.0#trust-ff" data-linktype="relative-path">Firefox SEC_ERROR_INADEQUATE_KEY_USAGE certificate error</a>.</p>
<p>Visual Studio launches the <a href="../fundamentals/servers/kestrel553c.html?view=aspnetcore-9.0" data-linktype="relative-path">Kestrel web server</a> and opens a browser window.</p>
<p><code>Hello World!</code> is displayed in the browser. The <code>Program.cs</code> file contains a minimal but complete app.</p>
<p>Close the browser window.</p>
</section>
<section id="tabpanel_3_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">

<ul>
<li><p>Trust the HTTPS development certificate by running the following command:</p>
<pre><code class="lang-dotnetcli">dotnet dev-certs https --trust
</code></pre>
<div data-moniker="aspnetcore-6.0 aspnetcore-7.0 aspnetcore-8.0">
<p>The preceding command requires .NET 9 or later SDK on Linux. For Linux on .NET 8.0.401 or earlier SDK, see your Linux distribution's documentation for trusting a certificate.</p>
</div>
<p>The preceding command displays the following dialog, provided the certificate was not previously trusted:</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/static/cert.png?view=aspnetcore-9.0" alt="Security warning dialog" data-linktype="relative-path"></p>
</li>
<li><p>Select <strong>Yes</strong> if you agree to trust the development certificate.</p>
<p>For more information, see the <strong>Trust the ASP.NET Core HTTPS development certificate</strong> section of the <a href="../security/enforcing-ssl553c.html?view=aspnetcore-9.0" data-linktype="relative-path">Enforcing SSL</a> article.</p>
</li>
</ul>
<p>For information on trusting the Firefox browser, see <a href="../security/enforcing-ssl553c.html?view=aspnetcore-9.0#trust-ff" data-linktype="relative-path">Firefox SEC_ERROR_INADEQUATE_KEY_USAGE certificate error</a>.</p>
<p>In Visual Studio Code, press <kbd>Ctrl</kbd>+<kbd>F5</kbd> (Windows) or <kbd>control</kbd>+<kbd>F5</kbd> (macOS) to run the app without debugging.</p>
<p>The default browser launches with the following URL: <code>https://localhost:&lt;port&gt;</code> where <code>&lt;port&gt;</code> is the randomly generated port number.</p>
<p>Close the browser window.</p>
<p>In Visual Studio Code, from the <em>Run</em> menu, select <em>Stop Debugging</em> or press <kbd>Shift</kbd>+<kbd>F5</kbd> to stop the app.</p>
</section>
</div>
<h2 id="add-nuget-packages">Add NuGet packages</h2>
<p>NuGet packages must be added to support the database and diagnostics used in this tutorial.</p>
<div class="tabGroup" id="tabgroup_4">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_4_visual-studio" role="tab" aria-controls="tabpanel_4_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_4_visual-studio-code" role="tab" aria-controls="tabpanel_4_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_4_visual-studio" role="tabpanel" data-tab="visual-studio">

<ul>
<li>From the <strong>Tools</strong> menu, select <strong>NuGet Package Manager &gt; Manage NuGet Packages for Solution</strong>.</li>
<li>Select the <strong>Browse</strong> tab.</li>
<li>Enter <strong>Microsoft.EntityFrameworkCore.InMemory</strong> in the search box, and then select <code>Microsoft.EntityFrameworkCore.InMemory</code>.</li>
<li>Select the <strong>Project</strong> checkbox in the right pane and then select <strong>Install</strong>.</li>
<li>Follow the preceding instructions to add the <code>Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore</code> package.</li>
</ul>
</section>
<section id="tabpanel_4_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">

<ul>
<li><p>Run the following commands:</p>
<pre><code class="lang-dotnetcli">dotnet add package Microsoft.EntityFrameworkCore.InMemory
dotnet add package Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore
</code></pre>
</li>
</ul>
</section>
</div>
<h2 id="the-model-and-database-context-classes">The model and database context classes</h2>
<ul>
<li>In the project folder, create a file named <code>Todo.cs</code> with the following code:</li>
</ul>
<pre><code class="lang-csharp">public class Todo
{
    public int Id { get; set; }
    public string? Name { get; set; }
    public bool IsComplete { get; set; }
}
</code></pre>
<p>The preceding code creates the model for this app. A <em>model</em> is a class that represents data that the app manages.</p>
<ul>
<li>Create a file named <code>TodoDb.cs</code> with the following code:</li>
</ul>
<pre><code class="lang-csharp">using Microsoft.EntityFrameworkCore;

class TodoDb : DbContext
{
    public TodoDb(DbContextOptions&lt;TodoDb&gt; options)
        : base(options) { }

    public DbSet&lt;Todo&gt; Todos =&gt; Set&lt;Todo&gt;();
}
</code></pre>
<p>The preceding code defines the <em>database context</em>, which is the main class that coordinates <a href="https://learn.microsoft.com/en-us/ef/core/" data-linktype="absolute-path">Entity Framework</a> functionality for a data model. This class derives from the <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.entityframeworkcore.dbcontext" class="no-loc" data-linktype="absolute-path">Microsoft.EntityFrameworkCore.DbContext</a> class.</p>
<h2 id="add-the-api-code">Add the API code</h2>
<ul>
<li>Replace the contents of the <code>Program.cs</code> file with the following code:</li>
</ul>
<pre><code class="lang-csharp">using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();
var app = builder.Build();

app.MapGet("/todoitems", async (TodoDb db) =&gt;
    await db.Todos.ToListAsync());

app.MapGet("/todoitems/complete", async (TodoDb db) =&gt;
    await db.Todos.Where(t =&gt; t.IsComplete).ToListAsync());

app.MapGet("/todoitems/{id}", async (int id, TodoDb db) =&gt;
    await db.Todos.FindAsync(id)
        is Todo todo
            ? Results.Ok(todo)
            : Results.NotFound());

app.MapPost("/todoitems", async (Todo todo, TodoDb db) =&gt;
{
    db.Todos.Add(todo);
    await db.SaveChangesAsync();

    return Results.Created($"/todoitems/{todo.Id}", todo);
});

app.MapPut("/todoitems/{id}", async (int id, Todo inputTodo, TodoDb db) =&gt;
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return Results.NotFound();

    todo.Name = inputTodo.Name;
    todo.IsComplete = inputTodo.IsComplete;

    await db.SaveChangesAsync();

    return Results.NoContent();
});

app.MapDelete("/todoitems/{id}", async (int id, TodoDb db) =&gt;
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return Results.NoContent();
    }

    return Results.NotFound();
});

app.Run();
</code></pre>
<p>The following highlighted code adds the database context to the <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/dependency-injection?view=aspnetcore-9.0" data-linktype="relative-path">dependency injection (DI)</a> container and enables displaying database-related exceptions:</p>
<pre><code class="lang-csharp" highlight-lines="2-3">var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();
var app = builder.Build();
</code></pre>
<p>The DI container provides access to the database context and other services.</p>
<div class="tabGroup" id="tabgroup_5">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_5_visual-studio" role="tab" aria-controls="tabpanel_5_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_5_visual-studio-code" role="tab" aria-controls="tabpanel_5_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_5_visual-studio" role="tabpanel" data-tab="visual-studio">

<p>This tutorial uses <a href="https://learn.microsoft.com/en-us/aspnet/core/test/http-files?view=aspnetcore-9.0#use-endpoints-explorer" data-linktype="relative-path">Endpoints Explorer and .http files</a> to test the API.</p>
</section>
<section id="tabpanel_5_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">
<h2 id="create-api-testing-ui-with-swagger">Create API testing UI with Swagger</h2>
<p>There are many available web API testing tools to choose from, and you can follow this tutorial's introductory API test steps with your own preferred tool.</p>
<p>This tutorial utilizes the .NET package <a href="https://www.nuget.org/packages/NSwag.AspNetCore/" data-linktype="external">NSwag.AspNetCore</a>, which integrates Swagger tools for generating a testing UI adhering to the OpenAPI specification:</p>
<ul>
<li>NSwag: A .NET library that integrates Swagger directly into ASP.NET Core applications, providing middleware and configuration.</li>
<li>Swagger: A set of open-source tools such as OpenAPIGenerator and SwaggerUI that generate API testing pages that follow the OpenAPI specification.</li>
<li>OpenAPI specification: A document that describes the capabilities of the API, based on the XML and attribute annotations within the controllers and models.</li>
</ul>
<p>For more information on using OpenAPI and NSwag with ASP.NET, see <a href="https://learn.microsoft.com/en-us/aspnet/core/tutorials/web-api-help-pages-using-swagger?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core web API documentation with Swagger / OpenAPI</a>.</p>
<h3 id="install-swagger-tooling">Install Swagger tooling</h3>
<ul>
<li><p>Run the following command:</p>
<pre><code class="lang-dotnetcli">dotnet add package NSwag.AspNetCore
</code></pre>
</li>
</ul>
<p>The previous command adds the <a href="https://www.nuget.org/packages/NSwag.AspNetCore/" data-linktype="external">NSwag.AspNetCore</a> package, which contains tools to generate Swagger documents and UI.</p>
<h3 id="configure-swagger-middleware">Configure Swagger middleware</h3>
<ul>
<li><p>Add the following highlighted code before <code>app</code> is defined in line <code>var app = builder.Build();</code></p>
<pre><code class="lang-csharp" highlight-lines="8-14">using NSwag.AspNetCore;
using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();

builder.Services.AddEndpointsApiExplorer();
builder.Services.AddOpenApiDocument(config =&gt;
{
    config.DocumentName = "TodoAPI";
    config.Title = "TodoAPI v1";
    config.Version = "v1";
});
var app = builder.Build();
</code></pre></li>
</ul>
<p>In the previous code:</p>
<ul>
<li><p><code>builder.Services.AddEndpointsApiExplorer();</code>: Enables the API Explorer, which is a service that provides metadata about the HTTP API. The API Explorer is used by Swagger to generate the Swagger document.</p>
</li>
<li><p><code>builder.Services.AddOpenApiDocument(config =&gt; {...});</code>: Adds the Swagger OpenAPI document generator to the application services and configures it to provide more information about the API, such as its title and version. For information on providing more robust API details, see <a href="https://learn.microsoft.com/en-us/aspnet/core/tutorials/getting-started-with-nswag?view=aspnetcore-9.0#customize-api-documentation" data-linktype="relative-path">Get started with NSwag and ASP.NET Core</a></p>
</li>
<li><p>Add the following highlighted code to the next line after <code>app</code> is defined in line <code>var app = builder.Build();</code></p>
<pre><code class="lang-csharp" highlight-lines="2-12">var app = builder.Build();
if (app.Environment.IsDevelopment())
{
    app.UseOpenApi();
    app.UseSwaggerUi(config =&gt;
    {
        config.DocumentTitle = "TodoAPI";
        config.Path = "/swagger";
        config.DocumentPath = "/swagger/{documentName}/swagger.json";
        config.DocExpansion = "list";
    });
}
</code></pre>
<p>The previous code enables the Swagger middleware for serving the generated JSON document and the Swagger UI. Swagger is only enabled in a development environment. Enabling Swagger in a production environment could expose potentially sensitive details about the API's structure and implementation.</p>
</li>
</ul>
<p><a name="post"></a></p>
</section>
</div>
<h2 id="test-posting-data">Test posting data</h2>
<p>The following code in <code>Program.cs</code> creates an HTTP POST endpoint <code>/todoitems</code> that adds data to the in-memory database:</p>
<pre><code class="lang-csharp">app.MapPost("/todoitems", async (Todo todo, TodoDb db) =&gt;
{
    db.Todos.Add(todo);
    await db.SaveChangesAsync();

    return Results.Created($"/todoitems/{todo.Id}", todo);
});
</code></pre>
<p>Run the app. The browser displays a 404 error because there's no longer a <code>/</code> endpoint.</p>
<p>The POST endpoint will be used to add data to the app.</p>
<div class="tabGroup" id="tabgroup_6">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_6_visual-studio" role="tab" aria-controls="tabpanel_6_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_6_visual-studio-code" role="tab" aria-controls="tabpanel_6_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_6_visual-studio" role="tabpanel" data-tab="visual-studio">

<ul>
<li><p>Select <strong>View</strong> &gt; <strong>Other Windows</strong> &gt; <strong>Endpoints Explorer</strong>.</p>
</li>
<li><p>Right-click the <strong>POST</strong> endpoint and select <strong>Generate request</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/8.x/generate-request-vs17.8.0.png?view=aspnetcore-9.0" alt="Endpoints Explorer context menu highlighting Generate Request menu item." data-linktype="relative-path"></p>
<p>A new file is created in the project folder named <code>TodoApi.http</code>, with contents similar to the following example:</p>
<pre><code>@TodoApi_HostAddress = https://localhost:7031

Post {{TodoApi_HostAddress}}/todoitems

###
</code></pre>
<ul>
<li>The first line creates a variable that is used for all of the endpoints.</li>
<li>The next line defines a POST request.</li>
<li>The triple hashtag (<code>###</code>) line is a request delimiter: what comes after it is for a different request.</li>
</ul>
</li>
<li><p>The POST request needs headers and a body. To define those parts of the request, add the following lines immediately after the POST request line:</p>
<pre><code>Content-Type: application/json

{
  "name":"walk dog",
  "isComplete":true
}
</code></pre>
<p>The preceding code adds a Content-Type header and a JSON request body. The TodoApi.http file should now look like the following example, but with your port number:</p>
<pre><code>@TodoApi_HostAddress = https://localhost:7057

Post {{TodoApi_HostAddress}}/todoitems
Content-Type: application/json

{
  "name":"walk dog",
  "isComplete":true
}

###
</code></pre>
</li>
<li><p>Run the app.</p>
</li>
<li><p>Select the <strong>Send request</strong> link that is above the <code>POST</code> request line.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/8.x/http-file-run-button-vs17.8.0.png?view=aspnetcore-9.0" alt=".http file window with run link highlighted." data-linktype="relative-path"></p>
<p>The POST request is sent to the app and the response is displayed in the <strong>Response</strong> pane.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/8.x/http-file-window-with-response-vs17.8.0.png?view=aspnetcore-9.0" alt=".http file window with response from the POST request." data-linktype="relative-path"></p>
</li>
</ul>
</section>
<section id="tabpanel_6_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">

<ul>
<li><p>With the app still running, in the browser, navigate to <code>https://localhost:&lt;port&gt;/swagger</code> to display the API testing page generated by Swagger.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/8.x/swagger.png?view=aspnetcore-9.0" alt="Swagger generated API testing page" data-linktype="relative-path"></p>
</li>
<li><p>On the Swagger API testing page, select <strong>Post /todoitems</strong> &gt; <strong>Try it out</strong>.</p>
</li>
<li><p>Note that the <strong>Request body</strong> field contains a generated example format reflecting the parameters for the API.</p>
</li>
<li><p>In the request body enter JSON for a to-do item, without specifying the optional <code>id</code>:</p>
<pre><code class="lang-json">{
  "name":"walk dog",
  "isComplete":true
}
</code></pre>
</li>
<li><p>Select <strong>Execute</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/8.x/swagger-post-1.png?view=aspnetcore-9.0" alt="Swagger with Post request" data-linktype="relative-path"></p>
</li>
</ul>
<p>Swagger provides a <strong>Responses</strong> pane below the <strong>Execute</strong> button.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api/_static/8.x/swagger-post-responses.png?view=aspnetcore-9.0" alt="Swagger with Post resonse" data-linktype="relative-path"></p>
<p>Note a few of the useful details:</p>
<ul>
<li>cURL: Swagger provides an example cURL command in Unix/Linux syntax, which can be run at the command line with any bash shell that uses Unix/Linux syntax, including Git Bash from <a href="https://git-scm.com/downloads" data-linktype="external">Git for Windows</a>.</li>
<li>Request URL: A simplified representation of the HTTP request made by Swagger UI's JavaScript code for the API call. Actual requests can include details such as headers and query parameters and a request body.</li>
<li>Server response: Includes the response body and headers. The response body shows the <code>id</code> was set to <code>1</code>.</li>
<li>Response Code: A 201 <code>HTTP</code> status code was returned, indicating that the request was successfully processed and resulted in the creation of a new resource.</li>
</ul>
</section>
</div>
<h2 id="examine-the-get-endpoints">Examine the GET endpoints</h2>
<p>The sample app implements several GET endpoints by calling <code>MapGet</code>:</p>
<table>
<thead>
<tr>
<th>API</th>
<th>Description</th>
<th>Request body</th>
<th>Response body</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GET /todoitems</code></td>
<td>Get all to-do items</td>
<td>None</td>
<td>Array of to-do items</td>
</tr>
<tr>
<td><code>GET /todoitems/complete</code></td>
<td>Get all completed to-do items</td>
<td>None</td>
<td>Array of to-do items</td>
</tr>
<tr>
<td><code>GET /todoitems/{id}</code></td>
<td>Get an item by ID</td>
<td>None</td>
<td>To-do item</td>
</tr>
</tbody>
</table>
<pre><code class="lang-csharp">app.MapGet("/todoitems", async (TodoDb db) =&gt;
    await db.Todos.ToListAsync());

app.MapGet("/todoitems/complete", async (TodoDb db) =&gt;
    await db.Todos.Where(t =&gt; t.IsComplete).ToListAsync());

app.MapGet("/todoitems/{id}", async (int id, TodoDb db) =&gt;
    await db.Todos.FindAsync(id)
        is Todo todo
            ? Results.Ok(todo)
            : Results.NotFound());
</code></pre><h2 id="test-the-get-endpoints">Test the GET endpoints</h2>
<div class="tabGroup" id="tabgroup_7">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_7_visual-studio" role="tab" aria-controls="tabpanel_7_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_7_visual-studio-code" role="tab" aria-controls="tabpanel_7_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_7_visual-studio" role="tabpanel" data-tab="visual-studio">

<p>Test the app by calling the <code>GET</code> endpoints from a browser or by using <strong>Endpoints Explorer</strong>. The following steps are for <strong>Endpoints Explorer</strong>.</p>
<ul>
<li><p>In <strong>Endpoints Explorer</strong>, right-click the first <strong>GET</strong> endpoint, and select <strong>Generate request</strong>.</p>
<p>The following content is added to the <code>TodoApi.http</code> file:</p>
<pre><code>Get {{TodoApi_HostAddress}}/todoitems

###
</code></pre>
</li>
<li><p>Select the <strong>Send request</strong> link that is above the new <code>GET</code> request line.</p>
<p>The GET request is sent to the app and the response is displayed in the <strong>Response</strong> pane.</p>
</li>
<li><p>The response body is similar to the following JSON:</p>
<pre><code class="lang-json">[
  {
    "id": 1,
    "name": "walk dog",
    "isComplete": true
  }
]
</code></pre>
</li>
<li><p>In <strong>Endpoints Explorer</strong>, right-click the <code>/todoitems/{id}</code> <strong>GET</strong> endpoint and select <strong>Generate request</strong>.
The following content is added to the <code>TodoApi.http</code> file:</p>
<pre><code>GET {{TodoApi_HostAddress}}/todoitems/{id}

###
</code></pre>
</li>
<li><p>Replace <code>{id}</code> with <code>1</code>.</p>
</li>
<li><p>Select the <strong>Send request</strong> link that is above the new GET request line.</p>
<p>The GET request is sent to the app and the response is displayed in the <strong>Response</strong> pane.</p>
</li>
<li><p>The response body is similar to the following JSON:</p>
<pre><code class="lang-json">{
  "id": 1,
  "name": "walk dog",
  "isComplete": true
}
</code></pre>
</li>
</ul>
</section>
<section id="tabpanel_7_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">

<p>Test the app by calling the endpoints from a browser or Swagger.</p>
<ul>
<li><p>In Swagger select <strong>GET /todoitems</strong> &gt; <strong>Try it out</strong> &gt; <strong>Execute</strong>.</p>
</li>
<li><p>Alternatively, call <strong>GET /todoitems</strong> from a browser by entering the URI <code>http://localhost:&lt;port&gt;/todoitems</code>. For example, <code>http://localhost:5001/todoitems</code></p>
</li>
</ul>
<p>The call to <code>GET /todoitems</code> produces a response similar to the following:</p>
<pre><code class="lang-json">[
  {
    "id": 1,
    "name": "walk dog",
    "isComplete": true
  }
]
</code></pre>
<ul>
<li><p>Call <strong>GET /todoitems/{id}</strong> in Swagger to return data from a specific id:</p>
<ul>
<li>Select <strong>GET /todoitems</strong> &gt; <strong>Try it out</strong>.</li>
<li>Set the <strong>id</strong> field to <code>1</code> and select <strong>Execute</strong>.</li>
</ul>
</li>
<li><p>Alternatively, call <strong>GET /todoitems</strong> from a browser by entering the URI <code>https://localhost:&lt;port&gt;/todoitems/1</code>. For example, <code>https://localhost:5001/todoitems/1</code></p>
</li>
<li><p>The response is similar to the following:</p>
<pre><code class="lang-json">{
  "id": 1,
  "name": "walk dog",
  "isComplete": true
}
</code></pre>
</li>
</ul>
</section>
</div>

<p>This app uses an in-memory database. If the app is restarted, the GET request doesn't return any data. If no data is returned, <a href="#post" data-linktype="self-bookmark">POST</a> data to the app and try the GET request again.</p>
<h2 id="return-values">Return values</h2>
<p>ASP.NET Core automatically serializes the object to <a href="https://www.json.org/" data-linktype="external">JSON</a> and writes the JSON into the body of the response message. The response code for this return type is <a href="https://developer.mozilla.org/docs/Web/HTTP/Status/200" data-linktype="external">200 OK</a>, assuming there are no unhandled exceptions. Unhandled exceptions are translated into 5xx errors.</p>
<p>The return types can represent a wide range of HTTP status codes. For example, <code>GET /todoitems/{id}</code> can return two different status values:</p>
<ul>
<li>If no item matches the requested ID, the method returns a <a href="https://developer.mozilla.org/docs/Web/HTTP/Status/404" data-linktype="external">404 status</a> <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.controllerbase.notfound" class="no-loc" data-linktype="absolute-path">NotFound</a> error code.</li>
<li>Otherwise, the method returns 200 with a JSON response body. Returning <code>item</code> results in an HTTP 200 response.</li>
</ul>
<h2 id="examine-the-put-endpoint">Examine the PUT endpoint</h2>
<p>The sample app implements a single PUT endpoint using <code>MapPut</code>:</p>
<pre><code class="lang-csharp">app.MapPut("/todoitems/{id}", async (int id, Todo inputTodo, TodoDb db) =&gt;
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return Results.NotFound();

    todo.Name = inputTodo.Name;
    todo.IsComplete = inputTodo.IsComplete;

    await db.SaveChangesAsync();

    return Results.NoContent();
});
</code></pre>
<p>This method is similar to the <code>MapPost</code> method, except it uses HTTP PUT. A successful response returns <a href="https://www.rfc-editor.org/rfc/rfc9110#status.204" data-linktype="external">204 (No Content)</a>. According to the HTTP specification, a PUT request requires the client to send the entire updated entity, not just the changes. To support partial updates, use <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.httppatchattribute" data-linktype="absolute-path">HTTP PATCH</a>.</p>
<h2 id="test-the-put-endpoint">Test the PUT endpoint</h2>
<p>This sample uses an in-memory database that must be initialized each time the app is started. There must be an item in the database before you make a PUT call. Call GET to ensure there's an item in the database before making a PUT call.</p>
<p>Update the to-do item that has <code>Id = 1</code> and set its name to <code>"feed fish"</code>.</p>
<div class="tabGroup" id="tabgroup_8">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_8_visual-studio" role="tab" aria-controls="tabpanel_8_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_8_visual-studio-code" role="tab" aria-controls="tabpanel_8_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_8_visual-studio" role="tabpanel" data-tab="visual-studio">

<ul>
<li><p>In <strong>Endpoints Explorer</strong>, right-click the <strong>PUT</strong> endpoint, and select <strong>Generate request</strong>.</p>
<p>The following content is added to the <code>TodoApi.http</code> file:</p>
<pre><code>Put {{TodoApi_HostAddress}}/todoitems/{id}

###
</code></pre>
</li>
<li><p>In the PUT request line, replace <code>{id}</code> with <code>1</code>.</p>
</li>
<li><p>Add the following lines immediately after the PUT request line:</p>
<pre><code>Content-Type: application/json

{
  "name": "feed fish",
  "isComplete": false
}
</code></pre>
<p>The preceding code adds a Content-Type header and a JSON request body.</p>
</li>
<li><p>Select the <strong>Send request</strong> link that is above the new PUT request line.</p>
<p>The PUT request is sent to the app and the response is displayed in the <strong>Response</strong> pane. The response body is empty, and the status code is 204.</p>
</li>
</ul>
</section>
<section id="tabpanel_8_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">

<p>Use Swagger to send a PUT request:</p>
<ul>
<li><p>Select <strong>Put /todoitems/{id}</strong> &gt; <strong>Try it out</strong>.</p>
</li>
<li><p>Set the <strong>id</strong> field to <code>1</code>.</p>
</li>
<li><p>Set the request body to the following JSON:</p>
<pre><code class="lang-json">{
  "name": "feed fish",
  "isComplete": false
}
</code></pre>
</li>
<li><p>Select <strong>Execute</strong>.</p>
</li>
</ul>
</section>
</div>
<h2 id="examine-and-test-the-delete-endpoint">Examine and test the DELETE endpoint</h2>
<p>The sample app implements a single DELETE endpoint using <code>MapDelete</code>:</p>
<pre><code class="lang-csharp">app.MapDelete("/todoitems/{id}", async (int id, TodoDb db) =&gt;
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return Results.NoContent();
    }

    return Results.NotFound();
});
</code></pre><div class="tabGroup" id="tabgroup_9">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_9_visual-studio" role="tab" aria-controls="tabpanel_9_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_9_visual-studio-code" role="tab" aria-controls="tabpanel_9_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_9_visual-studio" role="tabpanel" data-tab="visual-studio">

<ul>
<li><p>In <strong>Endpoints Explorer</strong>, right-click the <strong>DELETE</strong> endpoint and select <strong>Generate request</strong>.</p>
<p>A DELETE request is added to <code>TodoApi.http</code>.</p>
</li>
<li><p>Replace <code>{id}</code> in the DELETE request line with <code>1</code>. The DELETE request should look like the following example:</p>
<pre><code>DELETE {{TodoApi_HostAddress}}/todoitems/1

###
</code></pre>
</li>
<li><p>Select the <strong>Send request</strong> link for the DELETE request.</p>
<p>The DELETE request is sent to the app and the response is displayed in the <strong>Response</strong> pane. The response body is empty, and the status code is 204.</p>
</li>
</ul>
</section>
<section id="tabpanel_9_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">

<p>Use Swagger to send a DELETE request:</p>
<ul>
<li><p>Select <strong>DELETE /todoitems/{id}</strong> &gt; <strong>Try it out</strong>.</p>
</li>
<li><p>Set the <strong>ID</strong> field to <code>1</code> and select <strong>Execute</strong>.</p>
<p>The DELETE request is sent to the app and the response is displayed in the <strong>Responses</strong> pane. The response body is empty, and the <strong>Server response</strong> status code is 204.</p>
</li>
</ul>
</section>
</div>
<h2 id="use-the-mapgroup-api">Use the MapGroup API</h2>
<p>The sample app code repeats the <code>todoitems</code> URL prefix each time it sets up an endpoint. APIs often have groups of endpoints with a common URL prefix, and the <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.endpointroutebuilderextensions.mapgroup" class="no-loc" data-linktype="absolute-path">MapGroup</a> method is available to help organize such groups. It reduces repetitive code and allows for customizing entire groups of endpoints with a single call to methods like <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.authorizationendpointconventionbuilderextensions.requireauthorization" class="no-loc" data-linktype="absolute-path">RequireAuthorization</a> and <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.routingendpointconventionbuilderextensions.withmetadata" class="no-loc" data-linktype="absolute-path">WithMetadata</a>.</p>
<p>Replace the contents of <code>Program.cs</code> with the following code:</p>
<div class="tabGroup" id="tabgroup_10">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_10_visual-studio" role="tab" aria-controls="tabpanel_10_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_10_visual-studio-code" role="tab" aria-controls="tabpanel_10_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_10_visual-studio" role="tabpanel" data-tab="visual-studio">
<pre><code class="lang-csharp">using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();
var app = builder.Build();

var todoItems = app.MapGroup("/todoitems");

todoItems.MapGet("/", async (TodoDb db) =&gt;
    await db.Todos.ToListAsync());

todoItems.MapGet("/complete", async (TodoDb db) =&gt;
    await db.Todos.Where(t =&gt; t.IsComplete).ToListAsync());

todoItems.MapGet("/{id}", async (int id, TodoDb db) =&gt;
    await db.Todos.FindAsync(id)
        is Todo todo
            ? Results.Ok(todo)
            : Results.NotFound());

todoItems.MapPost("/", async (Todo todo, TodoDb db) =&gt;
{
    db.Todos.Add(todo);
    await db.SaveChangesAsync();

    return Results.Created($"/todoitems/{todo.Id}", todo);
});

todoItems.MapPut("/{id}", async (int id, Todo inputTodo, TodoDb db) =&gt;
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return Results.NotFound();

    todo.Name = inputTodo.Name;
    todo.IsComplete = inputTodo.IsComplete;

    await db.SaveChangesAsync();

    return Results.NoContent();
});

todoItems.MapDelete("/{id}", async (int id, TodoDb db) =&gt;
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return Results.NoContent();
    }

    return Results.NotFound();
});

app.Run();
</code></pre>
</section>
<section id="tabpanel_10_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">
<pre><code class="lang-csharp">using NSwag.AspNetCore;
using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();

builder.Services.AddEndpointsApiExplorer();
builder.Services.AddOpenApiDocument(config =&gt;
{
    config.DocumentName = "TodoAPI";
    config.Title = "TodoAPI v1";
    config.Version = "v1";
});

var app = builder.Build();

if (app.Environment.IsDevelopment())
{
    app.UseOpenApi();
    app.UseSwaggerUi(config =&gt;
    {
        config.DocumentTitle = "TodoAPI";
        config.Path = "/swagger";
        config.DocumentPath = "/swagger/{documentName}/swagger.json";
        config.DocExpansion = "list";
    });
}

var todoItems = app.MapGroup("/todoitems");

todoItems.MapGet("/", async (TodoDb db) =&gt;
    await db.Todos.ToListAsync());

todoItems.MapGet("/complete", async (TodoDb db) =&gt;
    await db.Todos.Where(t =&gt; t.IsComplete).ToListAsync());

todoItems.MapGet("/{id}", async (int id, TodoDb db) =&gt;
    await db.Todos.FindAsync(id)
        is Todo todo
            ? Results.Ok(todo)
            : Results.NotFound());

todoItems.MapPost("/", async (Todo todo, TodoDb db) =&gt;
{
    db.Todos.Add(todo);
    await db.SaveChangesAsync();

    return Results.Created($"/todoitems/{todo.Id}", todo);
});

todoItems.MapPut("/{id}", async (int id, Todo inputTodo, TodoDb db) =&gt;
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return Results.NotFound();

    todo.Name = inputTodo.Name;
    todo.IsComplete = inputTodo.IsComplete;

    await db.SaveChangesAsync();

    return Results.NoContent();
});

todoItems.MapDelete("/{id}", async (int id, TodoDb db) =&gt;
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return Results.NoContent();
    }

    return Results.NotFound();
});

app.Run();
</code></pre>
</section>
</div>

<p>The preceding code has the following changes:</p>
<ul>
<li>Adds <code>var todoItems = app.MapGroup("/todoitems");</code> to set up the group using the URL prefix <code>/todoitems</code>.</li>
<li>Changes all the <code>app.Map&lt;HttpVerb&gt;</code> methods to <code>todoItems.Map&lt;HttpVerb&gt;</code>.</li>
<li>Removes the URL prefix <code>/todoitems</code> from the <code>Map&lt;HttpVerb&gt;</code> method calls.</li>
</ul>
<p>Test the endpoints to verify that they work the same.</p>
<h2 id="use-the-typedresults-api">Use the TypedResults API</h2>
<p>Returning <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.http.typedresults" class="no-loc" data-linktype="absolute-path">TypedResults</a> rather than <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.http.results" class="no-loc" data-linktype="absolute-path">Results</a> has several advantages, including testability and automatically returning the response type metadata for OpenAPI to describe the endpoint. For more information, see <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/minimal-apis/responses#typedresults-vs-results" data-linktype="absolute-path">TypedResults vs Results</a>.</p>
<p>The <code>Map&lt;HttpVerb&gt;</code> methods can call route handler methods instead of using lambdas. To see an example, update <em>Program.cs</em> with the following code:</p>
<div class="tabGroup" id="tabgroup_11">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_11_visual-studio" role="tab" aria-controls="tabpanel_11_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_11_visual-studio-code" role="tab" aria-controls="tabpanel_11_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_11_visual-studio" role="tabpanel" data-tab="visual-studio">
<pre><code class="lang-csharp">using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();
var app = builder.Build();

var todoItems = app.MapGroup("/todoitems");

todoItems.MapGet("/", GetAllTodos);
todoItems.MapGet("/complete", GetCompleteTodos);
todoItems.MapGet("/{id}", GetTodo);
todoItems.MapPost("/", CreateTodo);
todoItems.MapPut("/{id}", UpdateTodo);
todoItems.MapDelete("/{id}", DeleteTodo);

app.Run();

static async Task&lt;IResult&gt; GetAllTodos(TodoDb db)
{
    return TypedResults.Ok(await db.Todos.ToArrayAsync());
}

static async Task&lt;IResult&gt; GetCompleteTodos(TodoDb db)
{
    return TypedResults.Ok(await db.Todos.Where(t =&gt; t.IsComplete).ToListAsync());
}

static async Task&lt;IResult&gt; GetTodo(int id, TodoDb db)
{
    return await db.Todos.FindAsync(id)
        is Todo todo
            ? TypedResults.Ok(todo)
            : TypedResults.NotFound();
}

static async Task&lt;IResult&gt; CreateTodo(Todo todo, TodoDb db)
{
    db.Todos.Add(todo);
    await db.SaveChangesAsync();

    return TypedResults.Created($"/todoitems/{todo.Id}", todo);
}

static async Task&lt;IResult&gt; UpdateTodo(int id, Todo inputTodo, TodoDb db)
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return TypedResults.NotFound();

    todo.Name = inputTodo.Name;
    todo.IsComplete = inputTodo.IsComplete;

    await db.SaveChangesAsync();

    return TypedResults.NoContent();
}

static async Task&lt;IResult&gt; DeleteTodo(int id, TodoDb db)
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return TypedResults.NoContent();
    }

    return TypedResults.NotFound();
}
</code></pre>
</section>
<section id="tabpanel_11_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">
<pre><code class="lang-csharp">using NSwag.AspNetCore;
using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();

builder.Services.AddEndpointsApiExplorer();
builder.Services.AddOpenApiDocument(config =&gt;
{
    config.DocumentName = "TodoAPI";
    config.Title = "TodoAPI v1";
    config.Version = "v1";
});

var app = builder.Build();

if (app.Environment.IsDevelopment())
{
    app.UseOpenApi();
    app.UseSwaggerUi(config =&gt;
    {
        config.DocumentTitle = "TodoAPI";
        config.Path = "/swagger";
        config.DocumentPath = "/swagger/{documentName}/swagger.json";
        config.DocExpansion = "list";
    });
}

var todoItems = app.MapGroup("/todoitems");

todoItems.MapGet("/", GetAllTodos);
todoItems.MapGet("/complete", GetCompleteTodos);
todoItems.MapGet("/{id}", GetTodo);
todoItems.MapPost("/", CreateTodo);
todoItems.MapPut("/{id}", UpdateTodo);
todoItems.MapDelete("/{id}", DeleteTodo);

app.Run();

static async Task&lt;IResult&gt; GetAllTodos(TodoDb db)
{
    return TypedResults.Ok(await db.Todos.ToArrayAsync());
}

static async Task&lt;IResult&gt; GetCompleteTodos(TodoDb db)
{
    return TypedResults.Ok(await db.Todos.Where(t =&gt; t.IsComplete).ToListAsync());
}

static async Task&lt;IResult&gt; GetTodo(int id, TodoDb db)
{
    return await db.Todos.FindAsync(id)
        is Todo todo
            ? TypedResults.Ok(todo)
            : TypedResults.NotFound();
}

static async Task&lt;IResult&gt; CreateTodo(Todo todo, TodoDb db)
{
    db.Todos.Add(todo);
    await db.SaveChangesAsync();

    return TypedResults.Created($"/todoitems/{todo.Id}", todo);
}

static async Task&lt;IResult&gt; UpdateTodo(int id, Todo inputTodo, TodoDb db)
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return TypedResults.NotFound();

    todo.Name = inputTodo.Name;
    todo.IsComplete = inputTodo.IsComplete;

    await db.SaveChangesAsync();

    return TypedResults.NoContent();
}

static async Task&lt;IResult&gt; DeleteTodo(int id, TodoDb db)
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return TypedResults.NoContent();
    }

    return TypedResults.NotFound();
}
</code></pre>
</section>
</div>

<p>The <code>Map&lt;HttpVerb&gt;</code> code now calls methods instead of lambdas:</p>
<pre><code class="lang-csharp">var todoItems = app.MapGroup("/todoitems");

todoItems.MapGet("/", GetAllTodos);
todoItems.MapGet("/complete", GetCompleteTodos);
todoItems.MapGet("/{id}", GetTodo);
todoItems.MapPost("/", CreateTodo);
todoItems.MapPut("/{id}", UpdateTodo);
todoItems.MapDelete("/{id}", DeleteTodo);
</code></pre>
<p>These methods return objects that implement <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.http.iresult" class="no-loc" data-linktype="absolute-path">IResult</a> and are defined by <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.http.typedresults" class="no-loc" data-linktype="absolute-path">TypedResults</a>:</p>
<pre><code class="lang-csharp">static async Task&lt;IResult&gt; GetAllTodos(TodoDb db)
{
    return TypedResults.Ok(await db.Todos.ToArrayAsync());
}

static async Task&lt;IResult&gt; GetCompleteTodos(TodoDb db)
{
    return TypedResults.Ok(await db.Todos.Where(t =&gt; t.IsComplete).ToListAsync());
}

static async Task&lt;IResult&gt; GetTodo(int id, TodoDb db)
{
    return await db.Todos.FindAsync(id)
        is Todo todo
            ? TypedResults.Ok(todo)
            : TypedResults.NotFound();
}

static async Task&lt;IResult&gt; CreateTodo(Todo todo, TodoDb db)
{
    db.Todos.Add(todo);
    await db.SaveChangesAsync();

    return TypedResults.Created($"/todoitems/{todo.Id}", todo);
}

static async Task&lt;IResult&gt; UpdateTodo(int id, Todo inputTodo, TodoDb db)
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return TypedResults.NotFound();

    todo.Name = inputTodo.Name;
    todo.IsComplete = inputTodo.IsComplete;

    await db.SaveChangesAsync();

    return TypedResults.NoContent();
}

static async Task&lt;IResult&gt; DeleteTodo(int id, TodoDb db)
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return TypedResults.NoContent();
    }

    return TypedResults.NotFound();
}
</code></pre>
<p>Unit tests can call these methods and test that they return the correct type. For example, if the method is <code>GetAllTodos</code>:</p>
<pre><code class="lang-csharp">static async Task&lt;IResult&gt; GetAllTodos(TodoDb db)
{
    return TypedResults.Ok(await db.Todos.ToArrayAsync());
}
</code></pre>
<p>Unit test code can verify that an object of type <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.http.httpresults.ok-1.value#microsoft-aspnetcore-http-httpresults-ok-1-value" data-linktype="absolute-path">Ok&lt;Todo[]&gt;</a> is returned from the handler method. For example:</p>
<pre><code class="lang-csharp">public async Task GetAllTodos_ReturnsOkOfTodosResult()
{
    // Arrange
    var db = CreateDbContext();

    // Act
    var result = await TodosApi.GetAllTodos(db);

    // Assert: Check for the correct returned type
    Assert.IsType&lt;Ok&lt;Todo[]&gt;&gt;(result);
}
</code></pre>
<p><a name="over-post-v7"></a></p>
<h2 id="prevent-over-posting">Prevent over-posting</h2>
<p>Currently the sample app exposes the entire <code>Todo</code> object. Production apps In production applications, a subset of the model is often used to restrict the data that can be input and returned. There are multiple reasons behind this and security is a major one. The subset of a model is usually referred to as a Data Transfer Object (DTO), input model, or view model. <strong>DTO</strong> is used in this article.</p>
<p>A DTO can be used to:</p>
<ul>
<li>Prevent over-posting.</li>
<li>Hide properties that clients aren't supposed to view.</li>
<li>Omit some properties to reduce payload size.</li>
<li>Flatten object graphs that contain nested objects. Flattened object graphs can be more convenient for clients.</li>
</ul>
<p>To demonstrate the DTO approach, update the <code>Todo</code> class to include a secret field:</p>
<pre><code class="lang-csharp">public class Todo
{
    public int Id { get; set; }
    public string? Name { get; set; }
    public bool IsComplete { get; set; }
    public string? Secret { get; set; }
}
</code></pre>
<p>The secret field needs to be hidden from this app, but an administrative app could choose to expose it.</p>
<p>Verify you can post and get the secret field.</p>
<p>Create a file named <code>TodoItemDTO.cs</code> with the following code:</p>
<pre><code class="lang-csharp">public class TodoItemDTO
{
    public int Id { get; set; }
    public string? Name { get; set; }
    public bool IsComplete { get; set; }

    public TodoItemDTO() { }
    public TodoItemDTO(Todo todoItem) =&gt;
    (Id, Name, IsComplete) = (todoItem.Id, todoItem.Name, todoItem.IsComplete);
}
</code></pre>
<p>Replace the contents of the <code>Program.cs</code> file with the following code to use this DTO model:</p>
<div class="tabGroup" id="tabgroup_12">
<ul role="tablist">
<li role="presentation">
<a href="#tabpanel_12_visual-studio" role="tab" aria-controls="tabpanel_12_visual-studio" data-tab="visual-studio" tabindex="0" aria-selected="true" data-linktype="self-bookmark">Visual Studio</a>
</li>
<li role="presentation">
<a href="#tabpanel_12_visual-studio-code" role="tab" aria-controls="tabpanel_12_visual-studio-code" data-tab="visual-studio-code" tabindex="-1" data-linktype="self-bookmark">Visual Studio Code</a>
</li>
</ul>
<section id="tabpanel_12_visual-studio" role="tabpanel" data-tab="visual-studio">
<pre><code class="lang-csharp">using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();
var app = builder.Build();

RouteGroupBuilder todoItems = app.MapGroup("/todoitems");

todoItems.MapGet("/", GetAllTodos);
todoItems.MapGet("/complete", GetCompleteTodos);
todoItems.MapGet("/{id}", GetTodo);
todoItems.MapPost("/", CreateTodo);
todoItems.MapPut("/{id}", UpdateTodo);
todoItems.MapDelete("/{id}", DeleteTodo);

app.Run();

static async Task&lt;IResult&gt; GetAllTodos(TodoDb db)
{
    return TypedResults.Ok(await db.Todos.Select(x =&gt; new TodoItemDTO(x)).ToArrayAsync());
}

static async Task&lt;IResult&gt; GetCompleteTodos(TodoDb db) {
    return TypedResults.Ok(await db.Todos.Where(t =&gt; t.IsComplete).Select(x =&gt; new TodoItemDTO(x)).ToListAsync());
}

static async Task&lt;IResult&gt; GetTodo(int id, TodoDb db)
{
    return await db.Todos.FindAsync(id)
        is Todo todo
            ? TypedResults.Ok(new TodoItemDTO(todo))
            : TypedResults.NotFound();
}

static async Task&lt;IResult&gt; CreateTodo(TodoItemDTO todoItemDTO, TodoDb db)
{
    var todoItem = new Todo
    {
        IsComplete = todoItemDTO.IsComplete,
        Name = todoItemDTO.Name
    };

    db.Todos.Add(todoItem);
    await db.SaveChangesAsync();

    todoItemDTO = new TodoItemDTO(todoItem);

    return TypedResults.Created($"/todoitems/{todoItem.Id}", todoItemDTO);
}

static async Task&lt;IResult&gt; UpdateTodo(int id, TodoItemDTO todoItemDTO, TodoDb db)
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return TypedResults.NotFound();

    todo.Name = todoItemDTO.Name;
    todo.IsComplete = todoItemDTO.IsComplete;

    await db.SaveChangesAsync();

    return TypedResults.NoContent();
}

static async Task&lt;IResult&gt; DeleteTodo(int id, TodoDb db)
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return TypedResults.NoContent();
    }

    return TypedResults.NotFound();
}
</code></pre>
</section>
<section id="tabpanel_12_visual-studio-code" role="tabpanel" data-tab="visual-studio-code" aria-hidden="true" hidden="hidden">
<pre><code class="lang-csharp">using NSwag.AspNetCore;
using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext&lt;TodoDb&gt;(opt =&gt; opt.UseInMemoryDatabase("TodoList"));
builder.Services.AddDatabaseDeveloperPageExceptionFilter();

builder.Services.AddEndpointsApiExplorer();
builder.Services.AddOpenApiDocument(config =&gt;
{
    config.DocumentName = "TodoAPI";
    config.Title = "TodoAPI v1";
    config.Version = "v1";
});

var app = builder.Build();

if (app.Environment.IsDevelopment())
{
    app.UseOpenApi();
    app.UseSwaggerUi(config =&gt;
    {
        config.DocumentTitle = "TodoAPI";
        config.Path = "/swagger";
        config.DocumentPath = "/swagger/{documentName}/swagger.json";
        config.DocExpansion = "list";
    });
}

RouteGroupBuilder todoItems = app.MapGroup("/todoitems");

todoItems.MapGet("/", GetAllTodos);
todoItems.MapGet("/complete", GetCompleteTodos);
todoItems.MapGet("/{id}", GetTodo);
todoItems.MapPost("/", CreateTodo);
todoItems.MapPut("/{id}", UpdateTodo);
todoItems.MapDelete("/{id}", DeleteTodo);

app.Run();

static async Task&lt;IResult&gt; GetAllTodos(TodoDb db)
{
    return TypedResults.Ok(await db.Todos.Select(x =&gt; new TodoItemDTO(x)).ToArrayAsync());
}

static async Task&lt;IResult&gt; GetCompleteTodos(TodoDb db) {
    return TypedResults.Ok(await db.Todos.Where(t =&gt; t.IsComplete).Select(x =&gt; new TodoItemDTO(x)).ToListAsync());
}

static async Task&lt;IResult&gt; GetTodo(int id, TodoDb db)
{
    return await db.Todos.FindAsync(id)
        is Todo todo
            ? TypedResults.Ok(new TodoItemDTO(todo))
            : TypedResults.NotFound();
}

static async Task&lt;IResult&gt; CreateTodo(TodoItemDTO todoItemDTO, TodoDb db)
{
    var todoItem = new Todo
    {
        IsComplete = todoItemDTO.IsComplete,
        Name = todoItemDTO.Name
    };

    db.Todos.Add(todoItem);
    await db.SaveChangesAsync();

    todoItemDTO = new TodoItemDTO(todoItem);

    return TypedResults.Created($"/todoitems/{todoItem.Id}", todoItemDTO);
}

static async Task&lt;IResult&gt; UpdateTodo(int id, TodoItemDTO todoItemDTO, TodoDb db)
{
    var todo = await db.Todos.FindAsync(id);

    if (todo is null) return TypedResults.NotFound();

    todo.Name = todoItemDTO.Name;
    todo.IsComplete = todoItemDTO.IsComplete;

    await db.SaveChangesAsync();

    return TypedResults.NoContent();
}

static async Task&lt;IResult&gt; DeleteTodo(int id, TodoDb db)
{
    if (await db.Todos.FindAsync(id) is Todo todo)
    {
        db.Todos.Remove(todo);
        await db.SaveChangesAsync();
        return TypedResults.NoContent();
    }

    return TypedResults.NotFound();
}
</code></pre>
</section>
</div>

<p>Verify you can post and get all fields except the secret field.</p>
<p><a name="diff-v7"></a></p>
<h2 id="troubleshooting-with-the-completed-sample">Troubleshooting with the completed sample</h2>
<p>If you run into a problem you can't resolve, compare your code to the completed project. <a href="https://github.com/dotnet/AspNetCore.Docs/tree/main/aspnetcore/tutorials/min-web-api/samples" data-linktype="external">View or download completed project</a> (<a href="../overview553c.html?view=aspnetcore-9.0#how-to-download-a-sample" data-linktype="relative-path">how to download</a>).</p>
<h2 id="next-steps">Next steps</h2>
<ul>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/minimal-apis/responses?view=aspnetcore-9.0#configure-json-serialization-options" data-linktype="relative-path">Configure JSON serialization options</a>.</li>
<li>Handle errors and exceptions: The <a href="https://learn.microsoft.com/en-us/aspnet/core/web-api/handle-errors?view=aspnetcore-9.0#developer-exception-page" data-linktype="relative-path">developer exception page</a> is enabled by default in the development environment for minimal API apps. For information about how to handle errors and exceptions, see <a href="https://learn.microsoft.com/en-us/aspnet/core/web-api/handle-errors?view=aspnetcore-9.0" data-linktype="relative-path">Handle errors in ASP.NET Core APIs</a>.</li>
<li>For an example of testing a minimal API app, see <a href="https://github.com/dotnet/AspNetCore.Docs.Samples/tree/main/fundamentals/minimal-apis/samples/MinApiTestsSample" data-linktype="external">this GitHub sample</a>.</li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/openapi/aspnetcore-openapi?view=aspnetcore-9.0" data-linktype="relative-path">OpenAPI support in minimal APIs</a>.</li>
<li><a href="https://learn.microsoft.com/en-us/azure/app-service/quickstart-dotnetcore" data-linktype="absolute-path">Quickstart: Publish to Azure</a>.</li>
<li><a href="https://www.tessferrandez.com/blog/2023/10/31/organizing-minimal-apis.html" data-linktype="external">Organizing ASP.NET Core Minimal APIs</a>.</li>
</ul>
<h3 id="learn-more">Learn more</h3>
<p>See <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/minimal-apis?view=aspnetcore-9.0" data-linktype="relative-path">Minimal APIs quick reference</a></p>
</div>
</div>
					
		<div
			id="ms--inline-notifications"
			class="margin-block-xs"
			data-bi-name="inline-notification"
		></div>
	 
		<div
			id="assertive-live-region"
			role="alert"
			aria-live="assertive"
			class="visually-hidden"
			aria-relevant="additions"
			aria-atomic="true"
		></div>
		<div
			id="polite-live-region"
			role="status"
			aria-live="polite"
			class="visually-hidden"
			aria-relevant="additions"
			aria-atomic="true"
		></div>
	
					
			
		<!-- feedback section -->
		<section
			class="feedback-section position-relative margin-top-lg border border-radius padding-xxs display-none-print"
			data-bi-name="open-source-feedback-section"
			data-open-source-feedback-section
			hidden
		>
			<div class="display-flex flex-direction-column flex-direction-row-tablet">
				<div
					class="width-450-tablet padding-inline-xs padding-inline-xs-tablet padding-top-xs padding-bottom-sm padding-top-xs-tablet background-color-body-medium"
				>
					<div class="display-flex flex-direction-column">
						<div class="padding-bottom-xxs">
							<span class="icon margin-right-xxs" aria-hidden="true">
								<span class="docon docon-brand-github"></span>
							</span>
							<span class="font-weight-semibold">
								Collaborate with us on GitHub
							</span>
						</div>
						<span class="line-height-normal">
							The source for this content can be found on GitHub, where you can also create and review issues and pull requests. For more information, see <a href="https://learn.microsoft.com/contribute/content/dotnet/dotnet-contribute">our contributor guide</a>.
						</span>
					</div>
				</div>
				<div
					class="display-flex gap-xs width-full-tablet flex-direction-column padding-xs justify-content-space-evenly"
				>
					<div class="media">
						
					<div class="media-left">
						<div class="image image-36x36" hidden data-open-source-image-container>
							<img
								class="theme-display is-light"
								src="https://learn.microsoft.com/media/logos/logo_net.svg"
								aria-hidden="true"
								data-open-source-image-light
							/>
							<img
								class="theme-display is-dark is-high-contrast"
								src="https://learn.microsoft.com/media/logos/logo_net.svg"
								aria-hidden="true"
								data-open-source-image-dark
							/>
						</div>
					</div>
			  

						<div class="media-content">
							<p
								class="font-size-xl font-weight-semibold margin-bottom-xxs"
								data-open-source-product-title
							>
								ASP.NET Core
							</p>
							<div class="display-flex gap-xs flex-direction-column">
								<p class="line-height-normal" data-open-source-product-description></p>
								<div class="display-flex gap-xs flex-direction-column">
									<a href="#" data-github-link>
										<span class="icon margin-right-xxs" aria-hidden="true">
											<span class="docon docon-bug"></span>
										</span>
										<span>Open a documentation issue</span>
									</a>
									<a
										href="https://github.com/dotnet/aspnetcore/blob/main/CONTRIBUTING.md"
										class="display-block margin-top-auto font-size-md"
										data-feedback-product-url
									>
										<span class="icon margin-right-xxs" aria-hidden="true">
											<span class="docon docon-feedback"></span>
										</span>
										<span>Provide product feedback</span>
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<!-- end feedback section -->
	
			
		<!-- feedback section -->
		<section
			id="site-user-feedback-footer"
			class="font-size-sm margin-top-md display-none-print display-none-desktop"
			data-test-id="site-user-feedback-footer"
			data-bi-name="site-feedback-section"
		>
			<hr class="hr" />
			<h2 id="ms--feedback" class="title is-3">Feedback</h2>
			<div class="display-flex flex-wrap-wrap align-items-center">
				<p class="font-weight-semibold margin-xxs margin-left-none">
					Was this page helpful?
				</p>
				<div class="buttons">
					<button
						class="thumb-rating-button like button button-primary button-sm"
						data-test-id="footer-rating-yes"
						data-binary-rating-response="rating-yes"
						type="button"
						title="This article is helpful"
						data-bi-name="button-rating-yes"
						aria-pressed="false"
					>
						<span class="icon" aria-hidden="true">
							<span class="docon docon-like"></span>
						</span>
						<span>Yes</span>
					</button>
					<button
						class="thumb-rating-button dislike button button-primary button-sm"
						data-test-id="footer-rating-no"
						data-binary-rating-response="rating-no"
						type="button"
						title="This article is not helpful"
						data-bi-name="button-rating-no"
						aria-pressed="false"
					>
						<span class="icon" aria-hidden="true">
							<span class="docon docon-dislike"></span>
						</span>
						<span>No</span>
					</button>
				</div>
			</div>
		</section>
		<!-- end feedback section -->
	
		
				</div>
				
		<div id="ms--additional-resources-mobile" class="display-none-print">
			<hr class="hr" hidden />
			<h2 id="ms--additional-resources-mobile-heading" class="title is-3" hidden>
				Additional resources
			</h2>
			
		<section
			id="right-rail-recommendations-mobile"
			class=""
			data-bi-name="recommendations"
			hidden
		></section>
	 
		<section
			id="right-rail-training-mobile"
			class=""
			data-bi-name="learning-resource-card"
			hidden
		></section>
	 
		<section
			id="right-rail-events-mobile"
			class=""
			data-bi-name="events-card"
			hidden
		></section>
	 
		<section
			id="right-rail-qna-mobile"
			class="margin-top-xxs"
			data-bi-name="qna-link-card"
			hidden
		></section>
	
		</div>
	
			</div>
			
		<div
			id="action-panel"
			role="region"
			aria-label="Action Panel"
			class="action-panel"
			tabindex="-1"
		></div>
	
		
				</main>
				<aside
					id="layout-body-aside"
					class="layout-body-aside "
					data-bi-name="aside"
			  >
					
		<div
			id="ms--additional-resources"
			class="right-container padding-sm display-none display-block-desktop height-full"
			data-bi-name="pageactions"
			role="complementary"
			aria-label="Additional resources"
		>
			<div id="affixed-right-container" data-bi-name="right-column">
				
		<nav
			id="side-doc-outline"
			class="doc-outline border-bottom padding-bottom-xs margin-bottom-xs"
			data-bi-name="intopic toc"
			aria-label="In this article"
		>
			<h3>In this article</h3>
		</nav>
	
				<!-- Feedback -->
				
		<section
			id="ms--site-user-feedback-right-rail"
			class="font-size-sm display-none-print"
			data-test-id="site-user-feedback-right-rail"
			data-bi-name="site-feedback-right-rail"
		>
			<p class="font-weight-semibold margin-bottom-xs">Was this page helpful?</p>
			<div class="buttons">
				<button
					class="thumb-rating-button like button button-primary button-sm"
					data-test-id="right-rail-rating-yes"
					data-binary-rating-response="rating-yes"
					type="button"
					title="This article is helpful"
					data-bi-name="button-rating-yes"
					aria-pressed="false"
				>
					<span class="icon" aria-hidden="true">
						<span class="docon docon-like"></span>
					</span>
					<span>Yes</span>
				</button>
				<button
					class="thumb-rating-button dislike button button-primary button-sm"
					data-test-id="right-rail-rating-no"
					data-binary-rating-response="rating-no"
					type="button"
					title="This article is not helpful"
					data-bi-name="button-rating-no"
					aria-pressed="false"
				>
					<span class="icon" aria-hidden="true">
						<span class="docon docon-dislike"></span>
					</span>
					<span>No</span>
				</button>
			</div>
		</section>
	
			</div>
		</div>
	
			  </aside> <section
					id="layout-body-flyout"
					class="layout-body-flyout "
					data-bi-name="flyout"
			  >
					 <div
	class="height-full border-left background-color-body-medium"
	id="ask-learn-flyout"
></div>
			  </section> <div class="layout-body-footer " data-bi-name="layout-footer">
		<footer
			id="footer"
			data-test-id="footer"
			data-bi-name="footer"
			class="footer-layout has-padding has-default-focus border-top  uhf-container"
			role="contentinfo"
		>
			<div class="display-flex gap-xs flex-wrap-wrap is-full-height padding-right-lg-desktop">
				
		<a
			data-mscc-ic="false"
			href="#"
			data-bi-name="select-locale"
			class="locale-selector-link flex-shrink-0 button button-sm button-clear external-link-indicator"
			id=""
			title=""
			><span class="icon" aria-hidden="true"
				><span class="docon docon-world"></span></span
			><span class="local-selector-link-text">en-us</span></a
		>
	
				<div class="ccpa-privacy-link" data-ccpa-privacy-link hidden>
		
		<a
			data-mscc-ic="false"
			href="https://aka.ms/yourcaliforniaprivacychoices"
			data-bi-name="your-privacy-choices"
			class="button button-sm button-clear flex-shrink-0 external-link-indicator"
			id=""
			title=""
			>
		<svg
			xmlns="http://www.w3.org/2000/svg"
			viewBox="0 0 30 14"
			xml:space="preserve"
			height="16"
			width="43"
			aria-hidden="true"
			focusable="false"
		>
			<path
				d="M7.4 12.8h6.8l3.1-11.6H7.4C4.2 1.2 1.6 3.8 1.6 7s2.6 5.8 5.8 5.8z"
				style="fill-rule:evenodd;clip-rule:evenodd;fill:#fff"
			></path>
			<path
				d="M22.6 0H7.4c-3.9 0-7 3.1-7 7s3.1 7 7 7h15.2c3.9 0 7-3.1 7-7s-3.2-7-7-7zm-21 7c0-3.2 2.6-5.8 5.8-5.8h9.9l-3.1 11.6H7.4c-3.2 0-5.8-2.6-5.8-5.8z"
				style="fill-rule:evenodd;clip-rule:evenodd;fill:#06f"
			></path>
			<path
				d="M24.6 4c.2.2.2.6 0 .8L22.5 7l2.2 2.2c.2.2.2.6 0 .8-.2.2-.6.2-.8 0l-2.2-2.2-2.2 2.2c-.2.2-.6.2-.8 0-.2-.2-.2-.6 0-.8L20.8 7l-2.2-2.2c-.2-.2-.2-.6 0-.8.2-.2.6-.2.8 0l2.2 2.2L23.8 4c.2-.2.6-.2.8 0z"
				style="fill:#fff"
			></path>
			<path
				d="M12.7 4.1c.2.2.3.6.1.8L8.6 9.8c-.1.1-.2.2-.3.2-.2.1-.5.1-.7-.1L5.4 7.7c-.2-.2-.2-.6 0-.8.2-.2.6-.2.8 0L8 8.6l3.8-4.5c.2-.2.6-.2.9 0z"
				style="fill:#06f"
			></path>
		</svg>
	
			<span>Your Privacy Choices</span></a
		>
	
	</div>
				<div class="flex-shrink-0">
		<div class="dropdown has-caret-up">
			<button
				data-test-id="theme-selector-button"
				class="dropdown-trigger button button-clear button-sm has-inner-focus theme-dropdown-trigger"
				aria-controls="{{ themeMenuId }}"
				aria-expanded="false"
				title="Theme"
				data-bi-name="theme"
			>
				<span class="icon">
					<span class="docon docon-sun" aria-hidden="true"></span>
				</span>
				<span>Theme</span>
				<span class="icon expanded-indicator" aria-hidden="true">
					<span class="docon docon-chevron-down-light"></span>
				</span>
			</button>
			<div class="dropdown-menu" id="{{ themeMenuId }}" role="menu">
				<ul class="theme-selector padding-xxs" data-test-id="theme-dropdown-menu">
					<li class="theme display-block">
						<button
							class="button button-clear button-sm theme-control button-block justify-content-flex-start text-align-left"
							data-theme-to="light"
						>
							<span class="theme-light margin-right-xxs">
								<span
									class="theme-selector-icon border display-inline-block has-body-background"
									aria-hidden="true"
								>
									<svg class="svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 14">
										<rect width="22" height="14" class="has-fill-body-background" />
										<rect x="5" y="5" width="12" height="4" class="has-fill-secondary" />
										<rect x="5" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="8" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="11" y="2" width="3" height="1" class="has-fill-secondary" />
										<rect x="1" y="1" width="2" height="2" class="has-fill-secondary" />
										<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary" />
										<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary" />
									</svg>
								</span>
							</span>
							<span role="menuitem"> Light </span>
						</button>
					</li>
					<li class="theme display-block">
						<button
							class="button button-clear button-sm theme-control button-block justify-content-flex-start text-align-left"
							data-theme-to="dark"
						>
							<span class="theme-dark margin-right-xxs">
								<span
									class="border theme-selector-icon display-inline-block has-body-background"
									aria-hidden="true"
								>
									<svg class="svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 14">
										<rect width="22" height="14" class="has-fill-body-background" />
										<rect x="5" y="5" width="12" height="4" class="has-fill-secondary" />
										<rect x="5" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="8" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="11" y="2" width="3" height="1" class="has-fill-secondary" />
										<rect x="1" y="1" width="2" height="2" class="has-fill-secondary" />
										<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary" />
										<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary" />
									</svg>
								</span>
							</span>
							<span role="menuitem"> Dark </span>
						</button>
					</li>
					<li class="theme display-block">
						<button
							class="button button-clear button-sm theme-control button-block justify-content-flex-start text-align-left"
							data-theme-to="high-contrast"
						>
							<span class="theme-high-contrast margin-right-xxs">
								<span
									class="border theme-selector-icon display-inline-block has-body-background"
									aria-hidden="true"
								>
									<svg class="svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 14">
										<rect width="22" height="14" class="has-fill-body-background" />
										<rect x="5" y="5" width="12" height="4" class="has-fill-secondary" />
										<rect x="5" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="8" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="11" y="2" width="3" height="1" class="has-fill-secondary" />
										<rect x="1" y="1" width="2" height="2" class="has-fill-secondary" />
										<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary" />
										<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary" />
									</svg>
								</span>
							</span>
							<span role="menuitem"> High contrast </span>
						</button>
					</li>
				</ul>
			</div>
		</div>
	</div>
			</div>
			<ul class="links" data-bi-name="footerlinks">
				<li class="manage-cookies-holder" hidden=""></li>
				<li>
		
		<a
			data-mscc-ic="false"
			href="https://learn.microsoft.com/en-us/principles-for-ai-generated-content"
			data-bi-name="aiDisclaimer"
			class=" external-link-indicator"
			id=""
			title=""
			>AI Disclaimer</a
		>
	
	</li><li>
		
		<a
			data-mscc-ic="false"
			href="https://learn.microsoft.com/en-us/previous-versions/"
			data-bi-name="archivelink"
			class=" external-link-indicator"
			id=""
			title=""
			>Previous Versions</a
		>
	
	</li> <li>
		
		<a
			data-mscc-ic="false"
			href="https://techcommunity.microsoft.com/t5/microsoft-learn-blog/bg-p/MicrosoftLearnBlog"
			data-bi-name="bloglink"
			class=" external-link-indicator"
			id=""
			title=""
			>Blog</a
		>
	
	</li> <li>
		
		<a
			data-mscc-ic="false"
			href="https://learn.microsoft.com/en-us/contribute"
			data-bi-name="contributorGuide"
			class=" external-link-indicator"
			id=""
			title=""
			>Contribute</a
		>
	
	</li><li>
		
		<a
			data-mscc-ic="false"
			href="https://go.microsoft.com/fwlink/?LinkId=521839"
			data-bi-name="privacy"
			class=" external-link-indicator"
			id=""
			title=""
			>Privacy</a
		>
	
	</li><li>
		
		<a
			data-mscc-ic="false"
			href="https://learn.microsoft.com/en-us/legal/termsofuse"
			data-bi-name="termsofuse"
			class=" external-link-indicator"
			id=""
			title=""
			>Terms of Use</a
		>
	
	</li><li>
		
		<a
			data-mscc-ic="false"
			href="https://www.microsoft.com/legal/intellectualproperty/Trademarks/"
			data-bi-name="trademarks"
			class=" external-link-indicator"
			id=""
			title=""
			>Trademarks</a
		>
	
	</li>
				<li>&copy; Microsoft 2025</li>
			</ul>
		</footer>
	</footer>
			</body>
		
<!-- Mirrored from learn.microsoft.com/en-us/aspnet/core/tutorials/min-web-api?view=aspnetcore-9.0 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Aug 2025 14:53:03 GMT -->
</html>