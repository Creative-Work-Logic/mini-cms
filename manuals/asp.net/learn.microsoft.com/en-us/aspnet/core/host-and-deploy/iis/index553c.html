 <!DOCTYPE html>
		<html
			class="layout layout-holy-grail   show-table-of-contents conceptual show-breadcrumb default-focus"
			lang="en-us"
			dir="ltr"
			data-authenticated="false"
			data-auth-status-determined="false"
			data-target="docs"
			x-ms-format-detection="none"
		>
			
		
<!-- Mirrored from learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/?view=aspnetcore-9.0 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Aug 2025 14:53:03 GMT -->
<head>
			<title>Host ASP.NET Core on Windows with IIS | Microsoft Learn</title>
			<meta charset="utf-8" />
			<meta name="viewport" content="width=device-width, initial-scale=1.0" />
			<meta name="color-scheme" content="light dark" />

			<meta name="description" content="Learn how to host ASP.NET Core apps on Windows Server Internet Information Services (IIS)." />
			<link rel="canonical" href="index553c.html?view=aspnetcore-9.0" /> 

			<!-- Non-customizable open graph and sharing-related metadata -->
			<meta name="twitter:card" content="summary" />
			<meta name="twitter:site" content="@MicrosoftLearn" />
			<meta property="og:type" content="website" />
			<meta property="og:image:alt" content="Host ASP.NET Core on Windows with IIS | Microsoft Learn" />
			<meta property="og:image" content="https://learn.microsoft.com/dotnet/media/dotnet-logo.png" />
			<!-- Page specific open graph and sharing-related metadata -->
			<meta property="og:title" content="Host ASP.NET Core on Windows with IIS" />
			<meta property="og:url" content="index553c.html?view=aspnetcore-9.0" />
			<meta property="og:description" content="Learn how to host ASP.NET Core apps on Windows Server Internet Information Services (IIS)." />
			<meta name="platform_id" content="53b1511e-fac6-a237-9067-337a8fa3c929" /> <meta name="scope" content="ASP.NET Core" />
			<meta name="locale" content="en-us" />
			 <meta name="adobe-target" content="true" />
			<meta name="uhfHeaderId" content="MSDocsHeader-AspNet" />

			<meta name="page_type" content="conceptual" />

			<!--page specific meta tags-->
			

			<!-- custom meta tags -->
			
		<meta name="breadcrumb_path" content="/aspnet/core/breadcrumb/toc.json" />
	
		<meta name="feedback_system" content="OpenSource" />
	
		<meta name="feedback_product_url" content="https://github.com/dotnet/aspnetcore/blob/main/CONTRIBUTING.md" />
	
		<meta name="ms.service" content="aspnet-core" />
	
		<meta name="ms.topic" content="conceptual" />
	
		<meta name="ms.subservice" content="hosting-deployment" />
	
		<meta name="author" content="tdykstra" />
	
		<meta name="monikerRange" content="&gt;= aspnetcore-2.1" />
	
		<meta name="ms.author" content="tdykstra" />
	
		<meta name="ms.custom" content="mvc, sfi-ropc-nochange" />
	
		<meta name="ms.date" content="2024-04-26T00:00:00Z" />
	
		<meta name="uid" content="host-and-deploy/iis/index" />
	
		<meta name="document_id" content="ec484002-18c1-6a0d-00de-820d56f038d3" />
	
		<meta name="document_version_independent_id" content="7903ce53-2cbb-f083-7479-c8abc30211a0" />
	
		<meta name="updated_at" content="2025-08-01T13:31:00Z" />
	
		<meta name="original_content_git_url" content="https://github.com/dotnet/AspNetCore.Docs/blob/live/aspnetcore/host-and-deploy/iis/index.md" />
	
		<meta name="gitcommit" content="https://github.com/dotnet/AspNetCore.Docs/blob/6a51096c09da531a44f5de89218041792966a565/aspnetcore/host-and-deploy/iis/index.md" />
	
		<meta name="git_commit_id" content="6a51096c09da531a44f5de89218041792966a565" />
	
		<meta name="monikers" content="aspnetcore-2.1" />
	
		<meta name="monikers" content="aspnetcore-2.2" />
	
		<meta name="monikers" content="aspnetcore-3.0" />
	
		<meta name="monikers" content="aspnetcore-3.1" />
	
		<meta name="monikers" content="aspnetcore-5.0" />
	
		<meta name="monikers" content="aspnetcore-6.0" />
	
		<meta name="monikers" content="aspnetcore-7.0" />
	
		<meta name="monikers" content="aspnetcore-8.0" />
	
		<meta name="monikers" content="aspnetcore-9.0" />
	
		<meta name="monikers" content="aspnetcore-10.0" />
	
		<meta name="default_moniker" content="aspnetcore-9.0" />
	
		<meta name="site_name" content="Docs" />
	
		<meta name="depot_name" content="MSDN.aspnet-core-conceptual" />
	
		<meta name="schema" content="Conceptual" />
	
		<meta name="toc_rel" content="../../toc.json" />
	
		<meta name="pdf_url_template" content="https://learn.microsoft.com/pdfstore/en-us/MSDN.aspnet-core-conceptual/{branchName}{pdfName}" />
	
		<meta name="feedback_help_link_type" content="" />
	
		<meta name="feedback_help_link_url" content="" />
	
		<meta name="word_count" content="10544" />
	
		<meta name="config_moniker_range" content="&gt;= aspnetcore-1.0" />
	
		<meta name="asset_id" content="host-and-deploy/iis/index" />
	
		<meta name="moniker_range_name" content="37fa60b1fa5386966cfa742f834a698e" />
	
		<meta name="item_type" content="Content" />
	
		<meta name="source_path" content="aspnetcore/host-and-deploy/iis/index.md" />
	
		<meta name="previous_tlsh_hash" content="434E3D63B70DC610FFC21E3F195F390162F0C88DAFF477D012152A91E16A7FB357AA2A9BA793A38C33BB165353F3A64F56D1EF2A916C27631A2414BDC1CC2085529A3B75DA" />
	
		<meta name="github_feedback_content_git_url" content="https://github.com/dotnet/AspNetCore.Docs/blob/main/aspnetcore/host-and-deploy/iis/index.md" />
	 
		<meta name="cmProducts" content="https://authoring-docs-microsoft.poolparty.biz/devrel/d452572f-6212-498f-9050-ca4a9e50a425" data-source="generated" />
	
		<meta name="cmProducts" content="https://authoring-docs-microsoft.poolparty.biz/devrel/7696cda6-0510-47f6-8302-71bb5d2e28cf" data-source="generated" />
	
		<meta name="cmProducts" content="https://authoring-docs-microsoft.poolparty.biz/devrel/bcbcbad5-4208-4783-8035-8481272c98b8" data-source="generated" />
	
		<meta name="spProducts" content="https://authoring-docs-microsoft.poolparty.biz/devrel/a12e40b7-59a2-4437-96e2-166ce622b864" data-source="generated" />
	
		<meta name="spProducts" content="https://authoring-docs-microsoft.poolparty.biz/devrel/69c76c32-967e-4c65-b89a-74cc527db725" data-source="generated" />
	
		<meta name="spProducts" content="https://authoring-docs-microsoft.poolparty.biz/devrel/43b2e5aa-8a6d-4de2-a252-692232e5edc8" data-source="generated" />
	

			<!-- assets and js globals -->
			
			<link rel="stylesheet" href="https://learn.microsoft.com/static/assets/0.4.03137.7032-e8b681c0/styles/site-ltr.css" />
			<link rel="preconnect" href="http://mscom.demdex.net/" crossorigin />
						<link rel="dns-prefetch" href="http://target.microsoft.com/" />
						<link rel="dns-prefetch" href="http://microsoftmscompoc.tt.omtrdc.net/" />
						<link
							rel="preload"
							as="script"
							href="https://learn.microsoft.com/static/third-party/adobe-target/at-js/2.9.0/at.js"
							integrity="sha384-1/viVM50hgc33O2gOgkWz3EjiD/Fy/ld1dKYXJRUyjNYVEjSUGcSN+iPiQF7e4cu"
							crossorigin="anonymous"
							id="adobe-target-script"
							type="application/javascript"
						/>
			<script src="https://wcpstatic.microsoft.com/mscc/lib/v2/wcp-consent.js"></script>
			<script src="https://js.monitor.azure.com/scripts/c/ms.jsll-4.min.js"></script>
			<script src="https://learn.microsoft.com/_themes/docs.theme/master/en-us/_themes/global/deprecation.js"></script>

			<!-- msdocs global object -->
			<script id="msdocs-script">
		var msDocs = {
  "environment": {
    "accessLevel": "online",
    "azurePortalHostname": "portal.azure.com",
    "reviewFeatures": false,
    "supportLevel": "production",
    "systemContent": true,
    "siteName": "learn",
    "legacyHosting": false
  },
  "data": {
    "contentLocale": "en-us",
    "contentDir": "ltr",
    "userLocale": "en-us",
    "userDir": "ltr",
    "pageTemplate": "Conceptual",
    "brand": "",
    "context": {},
    "standardFeedback": false,
    "showFeedbackReport": false,
    "feedbackHelpLinkType": "",
    "feedbackHelpLinkUrl": "",
    "feedbackSystem": "OpenSource",
    "feedbackGitHubRepo": "dotnet/AspNetCore.Docs",
    "feedbackProductUrl": "https://github.com/dotnet/aspnetcore/blob/main/CONTRIBUTING.md",
    "extendBreadcrumb": false,
    "isEditDisplayable": true,
    "isPrivateUnauthorized": false,
    "hideViewSource": false,
    "isPermissioned": false,
    "hasRecommendations": true,
    "contributors": [
      {
        "name": "tdykstra",
        "url": "https://github.com/tdykstra"
      },
      {
        "name": "Dickson-Mwendia",
        "url": "https://github.com/Dickson-Mwendia"
      },
      {
        "name": "wadepickett",
        "url": "https://github.com/wadepickett"
      },
      {
        "name": "Copilot",
        "url": "https://github.com/Copilot"
      },
      {
        "name": "Rick-Anderson",
        "url": "https://github.com/Rick-Anderson"
      },
      {
        "name": "guardrex",
        "url": "https://github.com/guardrex"
      },
      {
        "name": "asbjornu",
        "url": "https://github.com/asbjornu"
      },
      {
        "name": "serpent5",
        "url": "https://github.com/serpent5"
      },
      {
        "name": "scottaddie",
        "url": "https://github.com/scottaddie"
      },
      {
        "name": "jkotalik",
        "url": "https://github.com/jkotalik"
      },
      {
        "name": "MelbourneDeveloper",
        "url": "https://github.com/MelbourneDeveloper"
      },
      {
        "name": "mairaw",
        "url": "https://github.com/mairaw"
      },
      {
        "name": "ohelmer",
        "url": "https://github.com/ohelmer"
      },
      {
        "name": "analogrelay",
        "url": "https://github.com/analogrelay"
      },
      {
        "name": "nschonni",
        "url": "https://github.com/nschonni"
      },
      {
        "name": "Code-DJ",
        "url": "https://github.com/Code-DJ"
      },
      {
        "name": "ardalis",
        "url": "https://github.com/ardalis"
      },
      {
        "name": "robinvanpoppel",
        "url": "https://github.com/robinvanpoppel"
      }
    ],
    "openSourceFeedbackIssueUrl": "https://github.com/dotnet/aspnetcore.docs/issues/new?template=customer-feedback.yml",
    "openSourceFeedbackIssueTitle": "",
    "openSourceFeedbackIssueLabels": "Source - Docs.ms,:watch: Not Triaged"
  },
  "functions": {}
};;
	</script>

			<!-- base scripts, msdocs global should be before this -->
			<script src="https://learn.microsoft.com/static/assets/0.4.03137.7032-e8b681c0/scripts/en-us/index-docs.js"></script>
			

			<!-- json-ld -->
			
		</head>
	
			<body
				id="body"
				data-bi-name="body"
				class="layout-body "
				lang="en-us"
				dir="ltr"
			>
				<header class="layout-body-header">
		<div class="header-holder has-default-focus">
			
		<a
			href="#main"
			
			style="z-index: 1070"
			class="outline-color-text visually-hidden-until-focused position-fixed inner-focus focus-visible top-0 left-0 right-0 padding-xs text-align-center background-color-body"
			
		>
			Skip to main content
		</a>
	
		<a
			href="#"
			data-skip-to-ask-learn
			style="z-index: 1070"
			class="outline-color-text visually-hidden-until-focused position-fixed inner-focus focus-visible top-0 left-0 right-0 padding-xs text-align-center background-color-body"
			hidden
		>
			Skip to Ask Learn chat experience
		</a>
	

			<div hidden id="cookie-consent-holder" data-test-id="cookie-consent-container"></div>
			<!-- Unsupported browser warning -->
			<div
				id="unsupported-browser"
				style="background-color: white; color: black; padding: 16px; border-bottom: 1px solid grey;"
				hidden
			>
				<div style="max-width: 800px; margin: 0 auto;">
					<p style="font-size: 24px">This browser is no longer supported.</p>
					<p style="font-size: 16px; margin-top: 16px;">
						Upgrade to Microsoft Edge to take advantage of the latest features, security updates, and technical support.
					</p>
					<div style="margin-top: 12px;">
						<a
							href="https://go.microsoft.com/fwlink/p/?LinkID=2092881"
							style="background-color: #0078d4; border: 1px solid #0078d4; color: white; padding: 6px 12px; border-radius: 2px; display: inline-block;"
						>
							Download Microsoft Edge
						</a>
						<a
							href="https://learn.microsoft.com/en-us/lifecycle/faq/internet-explorer-microsoft-edge"
							style="background-color: white; padding: 6px 12px; border: 1px solid #505050; color: #171717; border-radius: 2px; display: inline-block;"
						>
							More info about Internet Explorer and Microsoft Edge
						</a>
					</div>
				</div>
			</div>
			<!-- site header -->
			<header
				id="ms--site-header"
				data-test-id="site-header-wrapper"
				role="banner"
				itemscope="itemscope"
				itemtype="http://schema.org/Organization"
			>
				<div
					id="ms--mobile-nav"
					class="site-header display-none-tablet padding-inline-none gap-none"
					data-bi-name="mobile-header"
					data-test-id="mobile-header"
				></div>
				<div
					id="ms--primary-nav"
					class="site-header display-none display-flex-tablet"
					data-bi-name="L1-header"
					data-test-id="primary-header"
				></div>
				<div
					id="ms--secondary-nav"
					class="site-header display-none display-flex-tablet"
					data-bi-name="L2-header"
					data-test-id="secondary-header"
				></div>
			</header>
			
		<!-- banner -->
		<div data-banner>
			<div id="disclaimer-holder"></div>
			
		</div>
		<!-- banner end -->
	
		</div>
	</header>
				 <section
					id="layout-body-menu"
					class="layout-body-menu display-flex"
					data-bi-name="menu"
			  >
					<div
		id="left-container"
		class="left-container display-none display-block-tablet padding-inline-sm padding-bottom-sm width-full"
	>
		<nav
			id="affixed-left-container"
			class="margin-top-sm-tablet position-sticky display-flex flex-direction-column"
			aria-label="Primary"
		></nav>
	</div>
			  </section>

				<main
					id="main"
					role="main"
					class="layout-body-main "
					data-bi-name="content"
					lang="en-us"
					dir="ltr"
				>
					
			<div
		id="ms--content-header"
		class="content-header default-focus border-bottom-none"
		data-bi-name="content-header"
	>
		<div class="content-header-controls margin-xxs margin-inline-sm-tablet">
			<button
				type="button"
				class="contents-button button button-sm margin-right-xxs"
				data-bi-name="contents-expand"
				aria-haspopup="true"
				data-contents-button
			>
				<span class="icon" aria-hidden="true"><span class="docon docon-menu"></span></span>
				<span class="contents-expand-title"> Table of contents </span>
			</button>
			<button
				type="button"
				class="ap-collapse-behavior ap-expanded button button-sm"
				data-bi-name="ap-collapse"
				aria-controls="action-panel"
			>
				<span class="icon" aria-hidden="true"><span class="docon docon-exit-mode"></span></span>
				<span>Exit editor mode</span>
			</button>
		</div>
	</div>
			<div data-main-column class="padding-sm padding-top-none padding-top-sm-tablet">
				<div>
					
		<div id="article-header" class="background-color-body margin-bottom-xs display-none-print">
			<div class="display-flex align-items-center justify-content-space-between">
				
		<details
			id="article-header-breadcrumbs-overflow-popover"
			class="popover"
			data-for="article-header-breadcrumbs"
		>
			<summary
				class="button button-clear button-primary button-sm inner-focus"
				aria-label="All breadcrumbs"
			>
				<span class="icon">
					<span class="docon docon-more"></span>
				</span>
			</summary>
			<div id="article-header-breadcrumbs-overflow" class="popover-content padding-none"></div>
		</details>

		<bread-crumbs
			id="article-header-breadcrumbs"
			data-test-id="article-header-breadcrumbs"
			class="overflow-hidden flex-grow-1 margin-right-sm margin-right-md-tablet margin-right-lg-desktop margin-left-negative-xxs padding-left-xxs"
		></bread-crumbs>
	 
		<div
			id="article-header-page-actions"
			class="opacity-none margin-left-auto display-flex flex-wrap-no-wrap align-items-stretch"
		>
			
		<button
			class="button button-sm border-none inner-focus display-none-tablet flex-shrink-0 "
			data-bi-name="ask-learn-assistant-entry"
			data-test-id="ask-learn-assistant-modal-entry-mobile"
			data-ask-learn-modal-entry
			type="button"
			style="min-width: max-content;"
			aria-expanded="false"
			aria-label="Ask Learn"
			hidden
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
		</button>
		<button
			class="button button-sm display-none display-inline-flex-tablet display-none-desktop flex-shrink-0 margin-right-xxs border-color-ask-learn "
			data-bi-name="ask-learn-assistant-entry"
			data-test-id="ask-learn-assistant-modal-entry-tablet"
			data-ask-learn-modal-entry
			type="button"
			style="min-width: max-content;"
			aria-expanded="false"
			hidden
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
			<span>Ask Learn</span>
		</button>
		<button
			class="button button-sm display-none flex-shrink-0 display-inline-flex-desktop margin-right-xxs	border-color-ask-learn "
			data-bi-name="ask-learn-assistant-entry"
			data-test-id="ask-learn-assistant-flyout-entry"
			data-ask-learn-flyout-entry
			data-flyout-button="toggle"
			type="button"
			style="min-width: max-content;"
			aria-expanded="false"
			aria-controls="ask-learn-flyout"
			hidden
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-chat-sparkle-fill gradient-ask-learn-logo"></span>
			</span>
			<span>Ask Learn</span>
		</button>
	 
		<button
			type="button"
			id="ms--focus-mode-button"
			data-focus-mode
			data-bi-name="focus-mode-entry"
			class="button button-sm flex-shrink-0 margin-right-xxs display-none display-inline-flex-desktop"
		>
			<span class="icon font-size-lg" aria-hidden="true">
				<span class="docon docon-glasses"></span>
			</span>
			<span>Focus mode</span>
		</button>
	 

			<details class="popover popover-right" id="article-header-page-actions-overflow">
				<summary
					class="justify-content-flex-start button button-clear button-sm button-primary inner-focus"
					aria-label="More actions"
					title="More actions"
				>
					<span class="icon" aria-hidden="true">
						<span class="docon docon-more-vertical"></span>
					</span>
				</summary>
				<div class="popover-content">
					
		<button
			data-page-action-item="overflow-mobile"
			type="button"
			class="button-block button-sm has-inner-focus button button-clear display-none-tablet justify-content-flex-start text-align-left"
			data-bi-name="contents-expand"
			data-contents-button
			data-popover-close
		>
			<span class="icon">
				<span class="docon docon-editor-list-bullet" aria-hidden="true"></span>
			</span>
			<span class="contents-expand-title">Table of contents</span>
		</button>
	 
		<a
			id="lang-link-overflow"
			class="button-sm has-inner-focus button button-clear button-block justify-content-flex-start text-align-left"
			data-bi-name="language-toggle"
			data-page-action-item="overflow-all"
			data-check-hidden="true"
			data-read-in-link
			href="#"
			hidden
		>
			<span class="icon" aria-hidden="true" data-read-in-link-icon>
				<span class="docon docon-locale-globe"></span>
			</span>
			<span data-read-in-link-text>Read in English</span>
		</a>
	 
		<button
			type="button"
			class="collection button button-clear button-sm button-block justify-content-flex-start text-align-left inner-focus"
			data-list-type="collection"
			data-bi-name="collection"
			data-page-action-item="overflow-all"
			data-check-hidden="true"
			data-popover-close
		>
			<span class="icon" aria-hidden="true">
				<span class="docon docon-circle-addition"></span>
			</span>
			<span class="collection-status">Add</span>
		</button>
	
					
		<button
			type="button"
			class="collection button button-block button-clear button-sm justify-content-flex-start text-align-left inner-focus"
			data-list-type="plan"
			data-bi-name="plan"
			data-page-action-item="overflow-all"
			data-check-hidden="true"
			data-popover-close
			hidden
		>
			<span class="icon" aria-hidden="true">
				<span class="docon docon-circle-addition"></span>
			</span>
			<span class="plan-status">Add to plan</span>
		</button>
	  
		<a
			data-contenteditbtn
			class="button button-clear button-block button-sm inner-focus justify-content-flex-start text-align-left text-decoration-none"
			data-bi-name="edit"
			
			href="https://github.com/dotnet/AspNetCore.Docs/blob/main/aspnetcore/host-and-deploy/iis/index.md"
			data-original_content_git_url="https://github.com/dotnet/AspNetCore.Docs/blob/live/aspnetcore/host-and-deploy/iis/index.md"
			data-original_content_git_url_template="{repo}/blob/{branch}/aspnetcore/host-and-deploy/iis/index.md"
			data-pr_repo=""
			data-pr_branch=""
		>
			<span class="icon" aria-hidden="true">
				<span class="docon docon-edit-outline"></span>
			</span>
			<span>Edit</span>
		</a>
	
					
		<hr class="margin-block-xxs" />
		<h4 class="font-size-sm padding-left-xxs">Share via</h4>
		
					<a
						class="button button-clear button-sm inner-focus button-block justify-content-flex-start text-align-left text-decoration-none share-facebook"
						data-bi-name="facebook"
						data-page-action-item="overflow-all"
						href="#"
					>
						<span class="icon color-primary" aria-hidden="true">
							<span class="docon docon-facebook-share"></span>
						</span>
						<span>Facebook</span>
					</a>

					<a
						href="#"
						class="button button-clear button-sm inner-focus button-block justify-content-flex-start text-align-left text-decoration-none share-twitter"
						data-bi-name="twitter"
						data-page-action-item="overflow-all"
					>
						<span class="icon color-text" aria-hidden="true">
							<span class="docon docon-xlogo-share"></span>
						</span>
						<span>x.com</span>
					</a>

					<a
						href="#"
						class="button button-clear button-sm inner-focus button-block justify-content-flex-start text-align-left text-decoration-none share-linkedin"
						data-bi-name="linkedin"
						data-page-action-item="overflow-all"
					>
						<span class="icon color-primary" aria-hidden="true">
							<span class="docon docon-linked-in-logo"></span>
						</span>
						<span>LinkedIn</span>
					</a>
					<a
						href="#"
						class="button button-clear button-sm inner-focus button-block justify-content-flex-start text-align-left text-decoration-none share-email"
						data-bi-name="email"
						data-page-action-item="overflow-all"
					>
						<span class="icon color-primary" aria-hidden="true">
							<span class="docon docon-mail-message"></span>
						</span>
						<span>Email</span>
					</a>
			  
	 
		<hr class="margin-block-xxs" />
		<button
			class="button button-block button-clear button-sm justify-content-flex-start text-align-left inner-focus"
			type="button"
			data-bi-name="print"
			data-page-action-item="overflow-all"
			data-popover-close
			data-print-page
			data-check-hidden="true"
		>
			<span class="icon color-primary" aria-hidden="true">
				<span class="docon docon-print"></span>
			</span>
			<span>Print</span>
		</button>
	
				</div>
			</details>
		</div>
	
			</div>
		</div>
	
					<!-- azure disclaimer -->
					
					<!-- privateUnauthorizedTemplate is hidden by default -->
					
		<div unauthorized-private-section data-bi-name="permission-content-unauthorized-private" hidden>
			<hr class="hr margin-top-xs margin-bottom-sm" />
			<div class="notification notification-info">
				<div class="notification-content">
					<p class="margin-top-none notification-title">
						<span class="icon">
							<span class="docon docon-exclamation-circle-solid" aria-hidden="true"></span>
						</span>
						<span>Note</span>
					</p>
					<p class="margin-top-none authentication-determined not-authenticated">
						Access to this page requires authorization. You can try <a class="docs-sign-in" href="#" data-bi-name="permission-content-sign-in">signing in</a> or <a  class="docs-change-directory" data-bi-name="permisson-content-change-directory">changing directories</a>.
					</p>
					<p class="margin-top-none authentication-determined authenticated">
						Access to this page requires authorization. You can try <a class="docs-change-directory" data-bi-name="permisson-content-change-directory">changing directories</a>.
					</p>
				</div>
			</div>
		</div>
	
					<div class="content"><h1 id="host-aspnet-core-on-windows-with-iis">Host ASP.NET Core on Windows with IIS</h1></div>
					
		<div
			id="article-metadata"
			class="page-metadata-container display-flex gap-xxs justify-content-space-between align-items-center flex-wrap-wrap"
		>
			
		<div class="margin-block-xxs">
			<ul class="metadata page-metadata" data-bi-name="page info" lang="en-us" dir="ltr">
				  <li class="visibility-hidden-visual-diff">
			<local-time
				format="twoDigitNumeric"
				datetime="2024-07-31T19:33:00.000Z"
				data-article-date-source="calculated"
				class="is-invisible"
			>
				2024-07-31
			</local-time>
		</li>  
			</ul>
		</div>
	 
				<div
					id="user-feedback"
					class="margin-block-xxs display-none display-none-print"
					hidden
					data-hide-on-archived
				>
					
		<button
			id="user-feedback-button"
			data-test-id="conceptual-feedback-button"
			class="button button-sm button-clear button-primary display-none"
			type="button"
			data-bi-name="user-feedback-button"
			data-user-feedback-button
			hidden
		>
			<span class="icon" aria-hidden="true">
				<span class="docon docon-like"></span>
			</span>
			<span>Feedback</span>
		</button>
	
				</div>
		  
		</div>
	 
		<nav
			id="center-doc-outline"
			class="doc-outline is-hidden-desktop display-none-print margin-bottom-sm"
			data-bi-name="intopic toc"
			aria-label="In this article"
		>
			<h2 id="ms--in-this-article" class="title is-6 margin-block-xs">
				In this article
			</h2>
		</nav>
	
					<div class="content"><div data-moniker="aspnetcore-2.1 aspnetcore-2.2 aspnetcore-3.0 aspnetcore-3.1 aspnetcore-5.0 aspnetcore-6.0 aspnetcore-7.0 aspnetcore-8.0">
<div class="NOTE">
<p>Note</p>
<p>This isn't the latest version of this article. For the current release, see the <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/?view=aspnetcore-9.0&amp;preserve-view=true" data-linktype="relative-path">.NET 9 version of this article</a>.</p>
</div>
</div>
<div data-moniker="aspnetcore-3.0 aspnetcore-3.1 aspnetcore-5.0 aspnetcore-7.0">
<div class="WARNING">
<p>Warning</p>
<p>This version of ASP.NET Core is no longer supported. For more information, see the <a href="https://dotnet.microsoft.com/platform/support/policy/dotnet-core" data-linktype="external">.NET and .NET Core Support Policy</a>. For the current release, see the <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/?view=aspnetcore-9.0&amp;preserve-view=true" data-linktype="relative-path">.NET 9 version of this article</a>.</p>
</div>
</div>
<div data-moniker="aspnetcore-10.0">
<div class="IMPORTANT">
<p>Important</p>
<p>This information relates to a pre-release product that may be substantially modified before it's commercially released. Microsoft makes no warranties, express or implied, with respect to the information provided here.</p>
<p>For the current release, see the <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/?view=aspnetcore-9.0&amp;preserve-view=true" data-linktype="relative-path">.NET 9 version of this article</a>.</p>
</div>
</div>
<!--
Include either this file or 'not-latest-version-without-not-supported-content.md' at the top 
of articles.

'not-latest-version.md' (this file): Includes not-supported content.
'not-latest-version-without-not-supported-content.md': Doesn't include not-supported content.

Use this file in articles that target >=7.0. For articles that target >=8.0 prior to 9.0
reaching EOL, 'not-latest-version-without-not-supported-content.md' must be used to avoid
a zone/file moniker range mismatch error.

When a new version is released, it might be necessary to temporarily comment out the current 
version moniker range section until the new moniker is created.

Markdown to include this file:

[!INCLUDE[](~/includes/not-latest-version.md)]
-->
<div data-moniker="aspnetcore-10.0 aspnetcore-5.0 aspnetcore-6.0 aspnetcore-7.0 aspnetcore-8.0 aspnetcore-9.0">
<p>Internet Information Services (IIS) is a flexible, secure and manageable Web Server for hosting web apps, including ASP.NET Core.</p>
<h2 id="supported-platforms">Supported platforms</h2>
<p>The following operating systems are supported:</p>
<ul>
<li>Windows 7 or later</li>
<li>Windows Server 2012 R2 or later</li>
</ul>
<p>Apps published for 32-bit (x86) or 64-bit (x64) deployment are supported. Deploy a 32-bit app with a 32-bit (x86) .NET SDK unless the app:</p>
<ul>
<li>Requires the larger virtual memory address space available to a 64-bit app.</li>
<li>Requires the larger IIS stack size.</li>
<li>Has 64-bit native dependencies.</li>
</ul>
<h2 id="install-the-aspnet-core-modulehosting-bundle">Install the ASP.NET Core Module/Hosting Bundle</h2>
<p>Download the latest installer using the following link:</p>
<p><a href="https://dotnet.microsoft.com/permalink/dotnetcore-current-windows-runtime-bundle-installer" data-linktype="external">Current .NET Hosting Bundle installer (direct download)</a></p>
<p>For more details instructions on how to install the ASP.NET Core Module, or installing different versions, see <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/hosting-bundle?view=aspnetcore-9.0" data-linktype="relative-path">Install the .NET Hosting Bundle</a>.</p>
<p>To download previous versions of the hosting bundle, see <a href="https://github.com/dotnet/AspNetCore.Docs/issues/28642" data-linktype="external">this GitHub issue</a>.</p>
<h2 id="get-started">Get started</h2>
<p>For getting started with hosting a website on IIS, see our <a href="https://learn.microsoft.com/en-us/aspnet/core/tutorials/publish-to-iis?view=aspnetcore-9.0" data-linktype="relative-path">getting started guide</a>.</p>
<p>For getting started with hosting a website on Azure App Services, see our <a href="../azure-apps/index553c.html?view=aspnetcore-9.0" data-linktype="relative-path">deploying to Azure App Service guide</a>.</p>
<h2 id="configuration">Configuration</h2>
<p>For configuration guidance, see <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/advanced?view=aspnetcore-9.0" data-linktype="relative-path">Advanced configuration</a>.</p>
<h2 id="deployment-resources-for-iis-administrators">Deployment resources for IIS administrators</h2>
<ul>
<li><a href="https://learn.microsoft.com/en-us/iis" data-linktype="absolute-path">IIS documentation</a></li>
<li><a href="https://learn.microsoft.com/en-us/iis/get-started/getting-started-with-iis/getting-started-with-the-iis-manager-in-iis-7-and-iis-8" data-linktype="absolute-path">Getting Started with the IIS Manager in IIS</a></li>
<li><a href="https://learn.microsoft.com/en-us/dotnet/core/deploying/" data-linktype="absolute-path">.NET application deployment</a></li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Module (ANCM) for IIS</a></li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/directory-structure?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core directory structure</a></li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/modules?view=aspnetcore-9.0" data-linktype="relative-path">IIS modules with ASP.NET Core</a></li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/test/troubleshoot-azure-iis?view=aspnetcore-9.0" data-linktype="relative-path">Troubleshoot ASP.NET Core on Azure App Service and IIS</a></li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/azure-iis-errors-reference?view=aspnetcore-9.0" data-linktype="relative-path">Common error troubleshooting for Azure App Service and IIS with ASP.NET Core</a></li>
</ul>
<h2 id="overlapped-recycle">Overlapped recycle</h2>
<p>In general, we recommend using a pattern like <a href="https://www.martinfowler.com/bliki/BlueGreenDeployment.html" data-linktype="external">blue-green deployments</a> for zero-downtime deployments. Features like Overlapped Recycle help, but don't guarantee that you can do a zero-downtime deployment. For more information, see <a href="https://github.com/dotnet/aspnetcore/issues/10117" data-linktype="external">this GitHub issue</a>.</p>
<h2 id="optional-client-certificates">Optional client certificates</h2>
<p>For information on apps that must protect a subset of the app with a certificate, see <a href="https://learn.microsoft.com/en-us/aspnet/core/security/authentication/certauth?view=aspnetcore-9.0#optional-client-certificates" data-linktype="relative-path">Optional client certificates</a>.</p>
<h2 id="additional-resources">Additional resources</h2>
<ul>
<li><a href="../../test/troubleshoot553c.html?view=aspnetcore-9.0" data-linktype="relative-path">Troubleshoot and debug ASP.NET Core projects</a></li>
<li><a href="../../overview553c.html?view=aspnetcore-9.0" data-linktype="relative-path">Overview of ASP.NET Core</a></li>
<li><a href="https://www.iis.net/" data-linktype="external">The Official Microsoft IIS Site</a></li>
<li><a href="https://learn.microsoft.com/en-us/windows-server/windows-server" data-linktype="absolute-path">Windows Server technical content library</a></li>
<li><a href="https://learn.microsoft.com/en-us/iis/get-started/whats-new-in-iis-10/http2-on-iis" data-linktype="absolute-path">HTTP/2 on IIS</a></li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/transform-webconfig?view=aspnetcore-9.0" data-linktype="relative-path">Transform web.config</a></li>
</ul>
</div>
<div data-moniker="aspnetcore-3.0 aspnetcore-3.1">
<p>For a tutorial experience on publishing an ASP.NET Core app to an IIS server, see <a href="https://learn.microsoft.com/en-us/aspnet/core/tutorials/publish-to-iis?view=aspnetcore-9.0" data-linktype="relative-path">Publish an ASP.NET Core app to IIS</a>.</p>
<p><a href="#install-the-net-hosting-bundle" data-linktype="self-bookmark">Install the .NET Hosting Bundle</a></p>
<h2 id="supported-operating-systems">Supported operating systems</h2>
<p>The following operating systems are supported:</p>
<ul>
<li>Windows 7 or later</li>
<li>Windows Server 2012 R2 or later</li>
</ul>
<p><a href="../../fundamentals/servers/httpsys553c.html?view=aspnetcore-9.0" data-linktype="relative-path">HTTP.sys server</a> (formerly called WebListener) doesn't work in a reverse proxy configuration with IIS. Use the <a href="../../fundamentals/servers/kestrel553c.html?view=aspnetcore-9.0" data-linktype="relative-path">Kestrel server</a>.</p>
<p>For information on hosting in Azure, see <a href="../azure-apps/index553c.html?view=aspnetcore-9.0" data-linktype="relative-path">Deploy ASP.NET Core apps to Azure App Service</a>.</p>
<p>For troubleshooting guidance, see <a href="../../test/troubleshoot553c.html?view=aspnetcore-9.0" data-linktype="relative-path">Troubleshoot and debug ASP.NET Core projects</a>.</p>
<h2 id="supported-platforms-1">Supported platforms</h2>
<p>Apps published for 32-bit (x86) or 64-bit (x64) deployment are supported. Deploy a 32-bit app with a 32-bit (x86) .NET SDK unless the app:</p>
<ul>
<li>Requires the larger virtual memory address space available to a 64-bit app.</li>
<li>Requires the larger IIS stack size.</li>
<li>Has 64-bit native dependencies.</li>
</ul>
<p>Apps published for 32-bit (x86) must have 32-bit enabled for their IIS Application Pools. For more information, see the <a href="#create-the-iis-site" data-linktype="self-bookmark">Create the IIS site</a> section.</p>
<p>Use a 64-bit (x64) .NET SDK to publish a 64-bit app. A 64-bit runtime must be present on the host system.</p>
<h2 id="hosting-models">Hosting models</h2>
<h3 id="in-process-hosting-model">In-process hosting model</h3>
<p>Using in-process hosting, an ASP.NET Core app runs in the same process as its IIS worker process. In-process hosting provides improved performance over out-of-process hosting because requests aren't proxied over the loopback adapter, a network interface that returns outgoing network traffic back to the same machine. IIS handles process management with the <a href="https://learn.microsoft.com/en-us/iis/manage/provisioning-and-managing-iis/features-of-the-windows-process-activation-service-was" data-linktype="absolute-path">Windows Process Activation Service (WAS)</a>.</p>
<p>The <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Module</a>:</p>
<ul>
<li>Performs app initialization.
<ul>
<li>Loads the <a href="https://learn.microsoft.com/en-us/dotnet/standard/glossary#coreclr" data-linktype="absolute-path">CoreCLR</a>.</li>
<li>Calls <code>Program.Main</code>.</li>
</ul>
</li>
<li>Handles the lifetime of the IIS native request.</li>
</ul>
<p>The following diagram illustrates the relationship between IIS, the ASP.NET Core Module, and an app hosted in-process:</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/index/_static/ancm-inprocess.png?view=aspnetcore-9.0" alt="ASP.NET Core Module in the in-process hosting scenario" data-linktype="relative-path"></p>
<ol>
<li>A request arrives from the web to the kernel-mode HTTP.sys driver.</li>
<li>The driver routes the native request to IIS on the website's configured port, usually 80 (HTTP) or 443 (HTTPS).</li>
<li>The ASP.NET Core Module receives the native request and passes it to IIS HTTP Server (<code>IISHttpServer</code>). IIS HTTP Server is an in-process server implementation for IIS that converts the request from native to managed.</li>
</ol>
<p>After the IIS HTTP Server processes the request:</p>
<ol>
<li>The request is sent to the ASP.NET Core middleware pipeline.</li>
<li>The middleware pipeline handles the request and passes it on as an <code>HttpContext</code> instance to the app's logic.</li>
<li>The app's response is passed back to IIS through IIS HTTP Server.</li>
<li>IIS sends the response to the client that initiated the request.</li>
</ol>
<p>In-process hosting is opt-in for existing apps. The ASP.NET Core web templates use the in-process hosting model.</p>
<p><code>CreateDefaultBuilder</code> adds an <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.hosting.server.iserver" class="no-loc" data-linktype="absolute-path">IServer</a> instance by calling the <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.hosting.webhostbuilderiisextensions.useiis" class="no-loc" data-linktype="absolute-path">UseIIS</a> method to boot the <a href="https://learn.microsoft.com/en-us/dotnet/standard/glossary#coreclr" data-linktype="absolute-path">CoreCLR</a> and host the app inside of the IIS worker process (<code>w3wp.exe</code> or <code>iisexpress.exe</code>). Performance tests indicate that hosting a .NET app in-process delivers significantly higher request throughput compared to hosting the app out-of-process and proxying requests to <a href="../../fundamentals/servers/kestrel553c.html?view=aspnetcore-9.0" data-linktype="relative-path">Kestrel</a>.</p>
<p>Apps published as a single file executable can't be loaded by the in-process hosting model.</p>
<h3 id="out-of-process-hosting-model">Out-of-process hosting model</h3>
<p>Because ASP.NET Core apps run in a process separate from the IIS worker process, the ASP.NET Core Module handles process management. The module starts the process for the ASP.NET Core app when the first request arrives and restarts the app if it shuts down or crashes. This is essentially the same behavior as seen with apps that run in-process that are managed by the <a href="https://learn.microsoft.com/en-us/iis/manage/provisioning-and-managing-iis/features-of-the-windows-process-activation-service-was" data-linktype="absolute-path">Windows Process Activation Service (WAS)</a>.</p>
<p>The following diagram illustrates the relationship between IIS, the ASP.NET Core Module, and an app hosted out-of-process:</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/index/_static/ancm-outofprocess.png?view=aspnetcore-9.0" alt="ASP.NET Core Module in the out-of-process hosting scenario" data-linktype="relative-path"></p>
<ol>
<li>Requests arrive from the web to the kernel-mode HTTP.sys driver.</li>
<li>The driver routes the requests to IIS on the website's configured port. The configured port is usually 80 (HTTP) or 443 (HTTPS).</li>
<li>The module forwards the requests to Kestrel on a random port for the app. The random port isn't 80 or 443.</li>
</ol>
<!-- make this a bullet list -->
<p>The ASP.NET Core Module specifies the port via an environment variable at startup. The <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.hosting.webhostbuilderiisextensions.useiisintegration" class="no-loc" data-linktype="absolute-path">UseIISIntegration</a> extension configures the server to listen on <code>http://localhost:{PORT}</code>. Additional checks are performed, and requests that don't originate from the module are rejected. The module doesn't support HTTPS forwarding. Requests are forwarded over HTTP even if received by IIS over HTTPS.</p>
<p>After Kestrel picks up the request from the module, the request is forwarded into the ASP.NET Core middleware pipeline. The middleware pipeline handles the request and passes it on as an <code>HttpContext</code> instance to the app's logic. Middleware added by IIS Integration updates the scheme, remote IP, and pathbase to account for forwarding the request to Kestrel. The app's response is passed back to IIS, which forwards it back to the HTTP client that initiated the request.</p>
<p>For ASP.NET Core Module configuration guidance, see <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Module (ANCM) for IIS</a>.</p>
<p>For more information on hosting, see <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/?view=aspnetcore-9.0#host" data-linktype="relative-path">Host in ASP.NET Core</a>.</p>
<h2 id="application-configuration">Application configuration</h2>
<h3 id="enable-the-iisintegration-components">Enable the IISIntegration components</h3>
<p>When building a host in <code>CreateHostBuilder</code> (<code>Program.cs</code>), call <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.hosting.host.createdefaultbuilder" class="no-loc" data-linktype="absolute-path">CreateDefaultBuilder</a> to enable IIS integration:</p>
<pre><code class="lang-csharp">public static IHostBuilder CreateHostBuilder(string[] args) =&gt;
    Host.CreateDefaultBuilder(args)
        ...
</code></pre>
<p>For more information on <code>CreateDefaultBuilder</code>, see <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/host/generic-host?view=aspnetcore-9.0#default-builder-settings" data-linktype="relative-path">.NET Generic Host in ASP.NET Core</a>.</p>
<h3 id="iis-options">IIS options</h3>
<p><strong>In-process hosting model</strong></p>
<p>To configure IIS Server options, include a service configuration for <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.iisserveroptions" class="no-loc" data-linktype="absolute-path">IISServerOptions</a> in <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.hosting.istartup.configureservices" class="no-loc" data-linktype="absolute-path">ConfigureServices</a>. The following example disables AutomaticAuthentication:</p>
<pre><code class="lang-csharp">services.Configure&lt;IISServerOptions&gt;(options =&gt; 
{
    options.AutomaticAuthentication = false;
});
</code></pre>
<table>
<thead>
<tr>
<th>Option</th>
<th style="text-align: center;">Default</th>
<th>Setting</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>AutomaticAuthentication</code></td>
<td style="text-align: center;"><code>true</code></td>
<td>If <code>true</code>, IIS Server sets the <code>HttpContext.User</code> authenticated by <a href="https://learn.microsoft.com/en-us/aspnet/core/security/authentication/windowsauth?view=aspnetcore-9.0" data-linktype="relative-path">Windows Authentication</a>. If <code>false</code>, the server only provides an identity for <code>HttpContext.User</code> and responds to challenges when explicitly requested by the <code>AuthenticationScheme</code>. Windows Authentication must be enabled in IIS for <code>AutomaticAuthentication</code> to function. For more information, see <a href="https://learn.microsoft.com/en-us/aspnet/core/security/authentication/windowsauth?view=aspnetcore-9.0" data-linktype="relative-path">Windows Authentication</a>.</td>
</tr>
<tr>
<td><code>AuthenticationDisplayName</code></td>
<td style="text-align: center;"><code>null</code></td>
<td>Sets the display name shown to users on login pages.</td>
</tr>
<tr>
<td><code>AllowSynchronousIO</code></td>
<td style="text-align: center;"><code>false</code></td>
<td>Whether synchronous I/O is allowed for the <code>HttpContext.Request</code> and the <code>HttpContext.Response</code>.</td>
</tr>
<tr>
<td><code>MaxRequestBodySize</code></td>
<td style="text-align: center;"><code>30000000</code></td>
<td>Gets or sets the max request body size for the <code>HttpRequest</code>. Note that IIS itself has the limit <code>maxAllowedContentLength</code> which will be processed before the <code>MaxRequestBodySize</code> set in the <code>IISServerOptions</code>. Changing the <code>MaxRequestBodySize</code> won't affect the <code>maxAllowedContentLength</code>. To increase <code>maxAllowedContentLength</code>, add an entry in the <code>web.config</code> to set <code>maxAllowedContentLength</code> to a higher value. For more details, see <a href="https://learn.microsoft.com/en-us/iis/configuration/system.webServer/security/requestFiltering/requestLimits/#configuration" data-linktype="absolute-path">Configuration</a>.</td>
</tr>
</tbody>
</table>
<p><strong>Out-of-process hosting model</strong></p>
<p>To configure IIS options, include a service configuration for <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.iisoptions" class="no-loc" data-linktype="absolute-path">IISOptions</a> in <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.hosting.istartup.configureservices" class="no-loc" data-linktype="absolute-path">ConfigureServices</a>. The following example prevents the app from populating <code>HttpContext.Connection.ClientCertificate</code>:</p>
<pre><code class="lang-csharp">services.Configure&lt;IISOptions&gt;(options =&gt; 
{
    options.ForwardClientCertificate = false;
});
</code></pre>
<table>
<thead>
<tr>
<th>Option</th>
<th style="text-align: center;">Default</th>
<th>Setting</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>AutomaticAuthentication</code></td>
<td style="text-align: center;"><code>true</code></td>
<td>If <code>true</code>, <a href="#enable-the-iisintegration-components" data-linktype="self-bookmark">IIS Integration Middleware</a> sets the <code>HttpContext.User</code> authenticated by <a href="https://learn.microsoft.com/en-us/aspnet/core/security/authentication/windowsauth?view=aspnetcore-9.0" data-linktype="relative-path">Windows Authentication</a>. If <code>false</code>, the middleware only provides an identity for <code>HttpContext.User</code> and responds to challenges when explicitly requested by the <code>AuthenticationScheme</code>. Windows Authentication must be enabled in IIS for <code>AutomaticAuthentication</code> to function. For more information, see the <a href="https://learn.microsoft.com/en-us/aspnet/core/security/authentication/windowsauth?view=aspnetcore-9.0" data-linktype="relative-path">Windows Authentication</a> topic.</td>
</tr>
<tr>
<td><code>AuthenticationDisplayName</code></td>
<td style="text-align: center;"><code>null</code></td>
<td>Sets the display name shown to users on login pages.</td>
</tr>
<tr>
<td><code>ForwardClientCertificate</code></td>
<td style="text-align: center;"><code>true</code></td>
<td>If <code>true</code> and the <code>MS-ASPNETCORE-CLIENTCERT</code> request header is present, the <code>HttpContext.Connection.ClientCertificate</code> is populated.</td>
</tr>
</tbody>
</table>
<h3 id="proxy-server-and-load-balancer-scenarios">Proxy server and load balancer scenarios</h3>
<p>The <a href="#enable-the-iisintegration-components" data-linktype="self-bookmark">IIS Integration Middleware</a> and the ASP.NET Core Module are configured to forward the:</p>
<ul>
<li>Scheme (HTTP/HTTPS).</li>
<li>Remote IP address where the request originated.</li>
</ul>
<p>The <a href="#enable-the-iisintegration-components" data-linktype="self-bookmark">IIS Integration Middleware</a> configures Forwarded Headers Middleware.</p>
<p>Additional configuration might be required for apps hosted behind additional proxy servers and load balancers. For more information, see <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/proxy-load-balancer?view=aspnetcore-9.0" data-linktype="relative-path">Configure ASP.NET Core to work with proxy servers and load balancers</a>.</p>
<h3 id="webconfig-file"><code>web.config</code> file</h3>
<p>The <code>web.config</code> file configures the <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Module</a>. Creating, transforming, and publishing the <code>web.config</code> file is handled by an MSBuild target (<code>_TransformWebConfig</code>) when the project is published. This target is present in the Web SDK targets (<code>Microsoft.NET.Sdk.Web</code>). The SDK is set at the top of the project file:</p>
<pre><code class="lang-xml">&lt;Project Sdk="Microsoft.NET.Sdk.Web"&gt;
</code></pre>
<p>If a <code>web.config</code> file isn't present in the project, the file is created with the correct <code>processPath</code> and <code>arguments</code> to configure the ASP.NET Core Module and moved to <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/directory-structure?view=aspnetcore-9.0" data-linktype="relative-path">published output</a>.</p>
<p>If a <code>web.config</code> file is present in the project, the file is transformed with the correct <code>processPath</code> and <code>arguments</code> to configure the ASP.NET Core Module and moved to published output. The transformation doesn't modify IIS configuration settings in the file.</p>
<p>The <code>web.config</code> file may provide additional IIS configuration settings that control active IIS modules. For information on IIS modules that are capable of processing requests with ASP.NET Core apps, see the <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/modules?view=aspnetcore-9.0" data-linktype="relative-path">IIS modules</a> topic.</p>
<p>To prevent the Web SDK from transforming the <code>web.config</code> file, use the <code>&lt;IsTransformWebConfigDisabled&gt;</code> property in the project file:</p>
<pre><code class="lang-xml">&lt;PropertyGroup&gt;
  &lt;IsTransformWebConfigDisabled&gt;true&lt;/IsTransformWebConfigDisabled&gt;
&lt;/PropertyGroup&gt;
</code></pre>
<p>When disabling the Web SDK from transforming the file, the <code>processPath</code> and <code>arguments</code> should be manually set by the developer. For more information, see <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Module (ANCM) for IIS</a>.</p>
<h3 id="webconfig-file-location"><code>web.config</code> file location</h3>
<p>In order to set up the <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Module</a> correctly, the <code>web.config</code> file must be present at the <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/?view=aspnetcore-9.0#content-root" data-linktype="relative-path">content root</a> path (typically the app base path) of the deployed app. This is the same location as the website physical path provided to IIS. The <code>web.config</code> file is required at the root of the app to enable the publishing of multiple apps using Web Deploy.</p>
<p>Sensitive files exist on the app's physical path, such as <code>{ASSEMBLY}.runtimeconfig.json</code>, <code>{ASSEMBLY}.xml</code> (XML Documentation comments), and <code>{ASSEMBLY}.deps.json</code>, where the placeholder <code>{ASSEMBLY}</code> is the assembly name. When the <code>web.config</code> file is present and the site starts normally, IIS doesn't serve these sensitive files if they're requested. If the <code>web.config</code> file is missing, incorrectly named, or unable to configure the site for normal startup, IIS may serve sensitive files publicly.</p>
<p><strong>The <code>web.config</code> file must be present in the deployment at all times, correctly named, and able to configure the site for normal start up. Never remove the <code>web.config</code> file from a production deployment.</strong></p>
<h3 id="transform-webconfig">Transform web.config</h3>
<p>If you need to transform <code>web.config</code> on publish, see <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/transform-webconfig?view=aspnetcore-9.0" data-linktype="relative-path">Transform web.config</a>. You might need to transform <code>web.config</code> on publish to set environment variables based on the configuration, profile, or environment.</p>
<h2 id="iis-configuration">IIS configuration</h2>
<p><strong>Windows Server operating systems</strong></p>
<p>Enable the <strong>Web Server (IIS)</strong> server role and establish role services.</p>
<ol>
<li><p>Use the <strong>Add Roles and Features</strong> wizard from the <strong>Manage</strong> menu or the link in <strong>Server Manager</strong>. On the <strong>Server Roles</strong> step, check the box for <strong>Web Server (IIS)</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/index/_static/server-roles-ws2016.png?view=aspnetcore-9.0" alt="The Web Server IIS role is selected in the Select server roles step." data-linktype="relative-path"></p>
</li>
<li><p>After the <strong>Features</strong> step, the <strong>Role services</strong> step loads for Web Server (IIS). Select the IIS role services desired or accept the default role services provided.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/index/_static/role-services-ws2016.png?view=aspnetcore-9.0" alt="The default role services are selected in the Select role services step." data-linktype="relative-path"></p>
<p><strong>Windows Authentication (Optional)</strong><br>
To enable Windows Authentication, expand the following nodes: <strong>Web Server</strong> &gt; <strong>Security</strong>. Select the <strong>Windows Authentication</strong> feature. For more information, see <a href="https://learn.microsoft.com/en-us/iis/configuration/system.webServer/security/authentication/windowsAuthentication/" data-linktype="absolute-path">Windows Authentication <code>&lt;windowsAuthentication&gt;</code></a> and <a href="https://learn.microsoft.com/en-us/aspnet/core/security/authentication/windowsauth?view=aspnetcore-9.0" data-linktype="relative-path">Configure Windows authentication</a>.</p>
<p><strong>WebSockets (Optional)</strong><br>
WebSockets is supported with ASP.NET Core 1.1 or later. To enable WebSockets, expand the following nodes: <strong>Web Server</strong> &gt; <strong>Application Development</strong>. Select the <strong>WebSocket Protocol</strong> feature. For more information, see <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/websockets?view=aspnetcore-9.0" data-linktype="relative-path">WebSockets</a>.</p>
</li>
<li><p>Proceed through the <strong>Confirmation</strong> step to install the web server role and services. A server/IIS restart isn't required after installing the <strong>Web Server (IIS)</strong> role.</p>
</li>
</ol>
<p><strong>Windows desktop operating systems</strong></p>
<p>Enable the <strong>IIS Management Console</strong> and <strong>World Wide Web Services</strong>.</p>
<ol>
<li><p>Navigate to <strong>Control Panel</strong> &gt; <strong>Programs</strong> &gt; <strong>Programs and Features</strong> &gt; <strong>Turn Windows features on or off</strong> (left side of the screen).</p>
</li>
<li><p>Open the <strong>Internet Information Services</strong> node. Open the <strong>Web Management Tools</strong> node.</p>
</li>
<li><p>Check the box for <strong>IIS Management Console</strong>.</p>
</li>
<li><p>Check the box for <strong>World Wide Web Services</strong>.</p>
</li>
<li><p>Accept the default features for <strong>World Wide Web Services</strong> or customize the IIS features.</p>
<p><strong>Windows Authentication (Optional)</strong><br>
To enable Windows Authentication, expand the following nodes: <strong>World Wide Web Services</strong> &gt; <strong>Security</strong>. Select the <strong>Windows Authentication</strong> feature. For more information, see <a href="https://learn.microsoft.com/en-us/iis/configuration/system.webServer/security/authentication/windowsAuthentication/" data-linktype="absolute-path">Windows Authentication &lt;windowsAuthentication&gt;</a> and <a href="https://learn.microsoft.com/en-us/aspnet/core/security/authentication/windowsauth?view=aspnetcore-9.0" data-linktype="relative-path">Configure Windows authentication</a>.</p>
<p><strong>WebSockets (Optional)</strong><br>
WebSockets is supported with ASP.NET Core 1.1 or later. To enable WebSockets, expand the following nodes: <strong>World Wide Web Services</strong> &gt; <strong>Application Development Features</strong>. Select the <strong>WebSocket Protocol</strong> feature. For more information, see <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/websockets?view=aspnetcore-9.0" data-linktype="relative-path">WebSockets</a>.</p>
</li>
<li><p>If the IIS installation requires a restart, restart the system.</p>
</li>
</ol>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/index/_static/windows-features-win10.png?view=aspnetcore-9.0" alt="IIS Management Console and World Wide Web Services are selected in Windows Features." data-linktype="relative-path"></p>
<h2 id="install-the-net-hosting-bundle">Install the .NET Hosting Bundle</h2>
<p>Install the <em>.NET Hosting Bundle</em> on the hosting system. The bundle installs the .NET Runtime, .NET Library, and the <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Module</a>. The module allows ASP.NET Core apps to run behind IIS.</p>
<div class="IMPORTANT">
<p>Important</p>
<p>If the Hosting Bundle is installed before IIS, the bundle installation must be repaired. Run the Hosting Bundle installer again after installing IIS.</p>
<p>If the Hosting Bundle is installed after installing the 64-bit (x64) version of .NET, SDKs might appear to be missing (<a href="../../test/troubleshoot553c.html?view=aspnetcore-9.0#no-net-sdks-were-detected" data-linktype="relative-path">No .NET SDKs were detected</a>). To resolve the problem, see <a href="../../test/troubleshoot553c.html?view=aspnetcore-9.0#missing-sdk-after-installing-the-net-hosting-bundle" data-linktype="relative-path">Troubleshoot and debug ASP.NET Core projects</a>.</p>
</div>
<h3 id="direct-download-current-version">Direct download (current version)</h3>
<p>Download the installer using the following link:</p>
<p><a href="https://dotnet.microsoft.com/permalink/dotnetcore-current-windows-runtime-bundle-installer" data-linktype="external">Current .NET Hosting Bundle installer (direct download)</a></p>
<h3 id="earlier-versions-of-the-installer">Earlier versions of the installer</h3>
<p>To obtain an earlier version of the installer:</p>
<ol>
<li>Navigate to the <a href="https://dotnet.microsoft.com/download/dotnet-core" data-linktype="external">Download .NET</a> page.</li>
<li>Select the desired .NET version.</li>
<li>In the <strong>Run apps - Runtime</strong> column, find the row of the .NET runtime version desired.</li>
<li>Download the installer using the <strong>Hosting Bundle</strong> link.</li>
</ol>
<div class="WARNING">
<p>Warning</p>
<p>Some installers contain release versions that have reached their end of life (EOL) and are no longer supported by Microsoft. For more information, see the <a href="https://dotnet.microsoft.com/platform/support/policy/dotnet-core" data-linktype="external">support policy</a>.</p>
</div>
<h3 id="install-the-hosting-bundle">Install the Hosting Bundle</h3>
<ol>
<li><p>Run the installer on the server. The following parameters are available when running the installer from an administrator command shell:</p>
<ul>
<li><code>OPT_NO_ANCM=1</code>: Skip installing the ASP.NET Core Module.</li>
<li><code>OPT_NO_RUNTIME=1</code>: Skip installing the .NET runtime. Used when the server only hosts <a href="https://learn.microsoft.com/en-us/dotnet/core/deploying/#self-contained-deployments-scd" data-linktype="absolute-path">self-contained deployments (SCD)</a>.</li>
<li><code>OPT_NO_SHAREDFX=1</code>: Skip installing the ASP.NET Shared Framework (ASP.NET runtime). Used when the server only hosts <a href="https://learn.microsoft.com/en-us/dotnet/core/deploying/#self-contained-deployments-scd" data-linktype="absolute-path">self-contained deployments (SCD)</a>.</li>
<li><code>OPT_NO_X86=1</code>: Skip installing x86 runtimes. Use this parameter when you know that you won't be hosting 32-bit apps. If there's any chance that you will host both 32-bit and 64-bit apps in the future, don't use this parameter and install both runtimes.</li>
<li><code>OPT_NO_SHARED_CONFIG_CHECK=1</code>: Disable the check for using an IIS Shared Configuration when the shared configuration (<code>applicationHost.config</code>) is on the same machine as the IIS installation. <em>Only available for ASP.NET Core 2.2 or later Hosting Bundler installers.</em> For more information, see <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0#aspnet-core-module-with-an-iis-shared-configuration" data-linktype="relative-path">ASP.NET Core Module (ANCM) for IIS</a>.</li>
</ul>
</li>
<li><p>Restarting IIS picks up a change to the system PATH, which is an environment variable, made by the installer. To restart the web server, stop the Windows Process Activation Service (WAS) and then restart the World Wide Web Publishing Service (W3SVC). Restart the system <strong>or</strong> execute the following commands in an elevated command shell:</p>
<pre><code class="lang-console">net stop was /y
net start w3svc
</code></pre>
</li>
</ol>
<p>ASP.NET Core doesn't adopt roll-forward behavior for patch releases of shared framework packages. After upgrading the shared framework by installing a new hosting bundle, restart the system <strong>or</strong> execute the following commands in an elevated command shell:</p>
<pre><code class="lang-console">net stop was /y
net start w3svc
</code></pre>
<div class="NOTE">
<p>Note</p>
<p>For information on IIS Shared Configuration, see <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0#aspnet-core-module-with-an-iis-shared-configuration" data-linktype="relative-path">ASP.NET Core Module with IIS Shared Configuration</a>.</p>
</div>
<h2 id="install-web-deploy-when-publishing-with-visual-studio">Install Web Deploy when publishing with Visual Studio</h2>
<p>When deploying apps to servers with <a href="https://learn.microsoft.com/en-us/iis/install/installing-publishing-technologies/installing-and-configuring-web-deploy-on-iis-80-or-later" data-linktype="absolute-path">Web Deploy</a>, install the latest version of Web Deploy on the server. To install Web Deploy, use the <a href="https://www.microsoft.com/web/downloads/platform.aspx" data-linktype="external">Web Platform Installer (WebPI)</a> or see <a href="https://www.iis.net/downloads/microsoft/web-deploy" data-linktype="external">IIS Downloads: Web Deploy</a>. The preferred method is to use WebPI. WebPI offers a standalone setup and a configuration for hosting providers.</p>
<h2 id="create-the-iis-site">Create the IIS site</h2>
<ol>
<li><p>On the hosting system, create a folder to contain the app's published folders and files. In a following step, the folder's path is provided to IIS as the physical path to the app. For more information on an app's deployment folder and file layout, see <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/directory-structure?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core directory structure</a>.</p>
</li>
<li><p>In IIS Manager, open the server's node in the <strong>Connections</strong> panel. Right-click the <strong>Sites</strong> folder. Select <strong>Add Website</strong> from the contextual menu.</p>
</li>
<li><p>Provide a <strong>Site name</strong> and set the <strong>Physical path</strong> to the app's deployment folder. Provide the <strong>Binding</strong> configuration and create the website by selecting <strong>OK</strong>:</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/index/_static/add-website-ws2016.png?view=aspnetcore-9.0" alt="Supply the Site name, physical path, and Host name in the Add Website step." data-linktype="relative-path"></p>
<div class="WARNING">
<p>Warning</p>
<p>Top-level wildcard bindings (<code>http://*:80/</code> and <code>http://+:80</code>) should <strong>not</strong> be used. Top-level wildcard bindings can open up your app to security vulnerabilities. This applies to both strong and weak wildcards. Use explicit host names rather than wildcards. Subdomain wildcard binding (for example, <code>*.mysub.com</code>) doesn't have this security risk if you control the entire parent domain (as opposed to <code>*.com</code>, which is vulnerable). See <a href="https://www.rfc-editor.org/rfc/rfc9110#field.host" data-linktype="external">RFC 9110: HTTP Semantics (Section 7.2: Host and :authority)</a> for more information.</p>
</div>
</li>
<li><p>Under the server's node, select <strong>Application Pools</strong>.</p>
</li>
<li><p>Right-click the site's app pool and select <strong>Basic Settings</strong> from the contextual menu.</p>
</li>
<li><p>In the <strong>Edit Application Pool</strong> window, set the <strong>.NET CLR version</strong> to <strong>No Managed Code</strong>:</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/index/_static/edit-apppool-ws2016.png?view=aspnetcore-9.0" alt="Set No Managed Code for the .NET CLR version." data-linktype="relative-path"></p>
<p>ASP.NET Core runs in a separate process and manages the runtime. ASP.NET Core doesn't rely on loading the desktop CLR (.NET CLR). The Core Common Language Runtime (CoreCLR) for .NET is booted to host the app in the worker process. Setting the <strong>.NET CLR version</strong> to <strong>No Managed Code</strong> is optional but recommended.</p>
</li>
<li><p><em>ASP.NET Core 2.2 or later</em>:</p>
<ul>
<li><p>For a 32-bit (x86) <a href="https://learn.microsoft.com/en-us/dotnet/core/deploying/#self-contained-deployments-scd" data-linktype="absolute-path">self-contained deployment</a> published with a 32-bit SDK that uses the <a href="#in-process-hosting-model" data-linktype="self-bookmark">in-process hosting model</a>, enable the Application Pool for 32-bit. In IIS Manager, navigate to <strong>Application Pools</strong> in the <strong>Connections</strong> sidebar. Select the app's Application Pool. In the <strong>Actions</strong> sidebar, select <strong>Advanced Settings</strong>. Set <strong>Enable 32-Bit Applications</strong> to <code>True</code>.</p>
</li>
<li><p>For a 64-bit (x64) <a href="https://learn.microsoft.com/en-us/dotnet/core/deploying/#self-contained-deployments-scd" data-linktype="absolute-path">self-contained deployment</a> that uses the <a href="#in-process-hosting-model" data-linktype="self-bookmark">in-process hosting model</a>, disable the app pool for 32-bit (x86) processes. In IIS Manager, navigate to <strong>Application Pools</strong> in the <strong>Connections</strong> sidebar. Select the app's Application Pool. In the <strong>Actions</strong> sidebar, select <strong>Advanced Settings</strong>. Set <strong>Enable 32-Bit Applications</strong> to <code>False</code>.</p>
</li>
</ul>
</li>
<li><p>Confirm the process model identity has the proper permissions.</p>
<p>If the default identity of the app pool (<strong>Process Model</strong> &gt; <strong>Identity</strong>) is changed from <strong>ApplicationPoolIdentity</strong> to another identity, verify that the new identity has the required permissions to access the app's folder, database, and other required resources. For example, the app pool requires read and write access to folders where the app reads and writes files.</p>
</li>
</ol>
<p><strong>Windows Authentication configuration (Optional)</strong><br>
For more information, see <a href="https://learn.microsoft.com/en-us/aspnet/core/security/authentication/windowsauth?view=aspnetcore-9.0" data-linktype="relative-path">Configure Windows authentication</a>.</p>
<h2 id="deploy-the-app">Deploy the app</h2>
<p>Deploy the app to the IIS <strong>Physical path</strong> folder that was established in the <a href="#create-the-iis-site" data-linktype="self-bookmark">Create the IIS site</a> section. <a href="https://learn.microsoft.com/en-us/iis/publish/using-web-deploy/introduction-to-web-deploy" data-linktype="absolute-path">Web Deploy</a> is the recommended mechanism for deployment, but several options exist for moving the app from the project's <code>publish</code> folder to the hosting system's deployment folder.</p>
<h3 id="web-deploy-with-visual-studio">Web Deploy with Visual Studio</h3>
<p>See the <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/visual-studio-publish-profiles?view=aspnetcore-9.0#publish-profiles" data-linktype="relative-path">Visual Studio publish profiles for ASP.NET Core app deployment</a> topic to learn how to create a publish profile for use with Web Deploy. If the hosting provider provides a Publish Profile or support for creating one, download their profile and import it using the Visual Studio <strong>Publish</strong> dialog:</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/index/_static/pub-dialog.png?view=aspnetcore-9.0" alt="Publish dialog page" data-linktype="relative-path"></p>
<h3 id="web-deploy-outside-of-visual-studio">Web Deploy outside of Visual Studio</h3>
<p><a href="https://learn.microsoft.com/en-us/iis/publish/using-web-deploy/introduction-to-web-deploy" data-linktype="absolute-path">Web Deploy</a> can also be used outside of Visual Studio from the command line. For more information, see <a href="https://learn.microsoft.com/en-us/iis/publish/using-web-deploy/use-the-web-deployment-tool" data-linktype="absolute-path">Web Deployment Tool</a>.</p>
<h3 id="alternatives-to-web-deploy">Alternatives to Web Deploy</h3>
<p>Use any of several methods to move the app to the hosting system, such as manual copy, <a href="https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/xcopy" data-linktype="absolute-path">Xcopy</a>, <a href="https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/robocopy" data-linktype="absolute-path">Robocopy</a>, or <a href="https://learn.microsoft.com/en-us/powershell/" data-linktype="absolute-path">PowerShell</a>.</p>
<p>For more information on ASP.NET Core deployment to IIS, see the <a href="#deployment-resources-for-iis-administrators" data-linktype="self-bookmark">Deployment resources for IIS administrators</a> section.</p>
<h2 id="browse-the-website">Browse the website</h2>
<p>After the app is deployed to the hosting system, make a request to one of the app's public endpoints.</p>
<p>In the following example, the site is bound to an IIS <strong>Host name</strong> of <code>www.mysite.com</code> on <strong>Port</strong> <code>80</code>. A request is made to <code>http://www.mysite.com</code>:</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/index/_static/browsewebsite.png?view=aspnetcore-9.0" alt="The Microsoft Edge browser has loaded the IIS startup page." data-linktype="relative-path"></p>
<h2 id="locked-deployment-files">Locked deployment files</h2>
<p>Files in the deployment folder are locked when the app is running. Locked files can't be overwritten during deployment. To release locked files in a deployment, stop the app pool using <strong>one</strong> of the following approaches:</p>
<ul>
<li><p>Use Web Deploy and reference <code>Microsoft.NET.Sdk.Web</code> in the project file. An <code>app_offline.htm</code> file is placed at the root of the web app directory. When the file is present, the ASP.NET Core Module gracefully shuts down the app and serves the <code>app_offline.htm</code> file during the deployment. For more information, see the <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0#app_offlinehtm" data-linktype="relative-path">ASP.NET Core Module configuration reference</a>.</p>
</li>
<li><p>Manually stop the app pool in the IIS Manager on the server.</p>
</li>
<li><p>Use PowerShell to drop <code>app_offline.htm</code> (requires PowerShell 5 or later):</p>
<pre><code class="lang-powershell">$pathToApp = 'PATH_TO_APP'

# Stop the AppPool
New-Item -Path $pathToApp app_offline.htm

# Provide script commands here to deploy the app

# Restart the AppPool
Remove-Item -Path $pathToApp app_offline.htm
</code></pre>
</li>
</ul>
<h2 id="data-protection">Data protection</h2>
<p>The <a href="../../security/data-protection/introduction553c.html?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Data Protection stack</a> is used by several ASP.NET Core <a href="../../fundamentals/middleware/index553c.html?view=aspnetcore-9.0" data-linktype="relative-path">middlewares</a>, including middleware used in authentication. Even if Data Protection APIs aren't called by user code, data protection should be configured with a deployment script or in user code to create a persistent cryptographic <a href="https://learn.microsoft.com/en-us/aspnet/core/security/data-protection/implementation/key-management?view=aspnetcore-9.0" data-linktype="relative-path">key store</a>. If data protection isn't configured, the keys are held in memory and discarded when the app restarts.</p>
<p>If the key ring is stored in memory when the app restarts:</p>
<ul>
<li>All cookie-based authentication tokens are invalidated.</li>
<li>Users are required to sign in again on their next request.</li>
<li>Any data protected with the key ring can no longer be decrypted. This may include <a href="https://learn.microsoft.com/en-us/aspnet/core/security/anti-request-forgery?view=aspnetcore-9.0#aspnet-core-antiforgery-configuration" data-linktype="relative-path">CSRF tokens</a> and <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/app-state?view=aspnetcore-9.0#tempdata" data-linktype="relative-path">ASP.NET Core MVC TempData cookies</a>.</li>
</ul>
<p>To configure data protection under IIS to persist the key ring, use <strong>one</strong> of the following approaches:</p>
<ul>
<li><p><strong>Create Data Protection Registry Keys</strong></p>
<p>Data protection keys used by ASP.NET Core apps are stored in the registry external to the apps. To persist the keys for a given app, create registry keys for the app pool.</p>
<p>For standalone, non-webfarm IIS installations, the <a href="https://github.com/dotnet/AspNetCore/blob/main/src/DataProtection/Provision-AutoGenKeys.ps1" data-linktype="external">Data Protection Provision-AutoGenKeys.ps1 PowerShell script</a> can be used for each app pool used with an ASP.NET Core app. This script creates a registry key in the HKLM registry that's accessible only to the worker process account of the app's app pool. Keys are encrypted at rest using DPAPI with a machine-wide key.</p>
<p>In web farm scenarios, an app can be configured to use a UNC path to store its data protection key ring. By default, the data protection keys aren't encrypted. Ensure that the file permissions for the network share are limited to the Windows account the app runs under. An X509 certificate can be used to protect keys at rest. Consider a mechanism to allow users to upload certificates: Place certificates into the user's trusted certificate store and ensure they're available on all machines where the user's app runs. See <a href="https://learn.microsoft.com/en-us/aspnet/core/security/data-protection/configuration/overview?view=aspnetcore-9.0" data-linktype="relative-path">Configure ASP.NET Core Data Protection</a> for details.</p>
</li>
<li><p><strong>Configure the IIS Application Pool to load the user profile</strong></p>
<p>This setting is in the <strong>Process Model</strong> section under the <strong>Advanced Settings</strong> for the app pool. Set <strong>Load User Profile</strong> to <code>True</code>. When set to <code>True</code>, keys are stored in the user profile directory and protected using DPAPI with a key specific to the user account. Keys are persisted to the <em>%LOCALAPPDATA%/ASP.NET/DataProtection-Keys</em> folder.</p>
<p>The app pool's <a href="https://learn.microsoft.com/en-us/iis/configuration/system.applicationhost/applicationpools/add/processmodel#configuration" data-linktype="absolute-path">setProfileEnvironment attribute</a> must also be enabled. The default value of <code>setProfileEnvironment</code> is <code>true</code>. In some scenarios (for example, Windows OS), <code>setProfileEnvironment</code> is set to <code>false</code>. If keys aren't stored in the user profile directory as expected:</p>
<ol>
<li>Navigate to the <em>%windir%/system32/inetsrv/config</em> folder.</li>
<li>Open the <em>applicationHost.config</em> file.</li>
<li>Locate the <code>&lt;system.applicationHost&gt;&lt;applicationPools&gt;&lt;applicationPoolDefaults&gt;&lt;processModel&gt;</code> element.</li>
<li>Confirm that the <code>setProfileEnvironment</code> attribute isn't present, which defaults the value to <code>true</code>, or explicitly set the attribute's value to <code>true</code>.</li>
</ol>
</li>
<li><p><strong>Use the file system as a key ring store</strong></p>
<p>Adjust the app code to <a href="https://learn.microsoft.com/en-us/aspnet/core/security/data-protection/configuration/overview?view=aspnetcore-9.0" data-linktype="relative-path">use the file system as a key ring store</a>. Use an X509 certificate to protect the key ring and ensure the certificate is a trusted certificate. If the certificate is self-signed, place the certificate in the Trusted Root store.</p>
<p>When using IIS in a web farm:</p>
<ul>
<li>Use a file share that all machines can access.</li>
<li>Deploy an X509 certificate to each machine. Configure <a href="https://learn.microsoft.com/en-us/aspnet/core/security/data-protection/configuration/overview?view=aspnetcore-9.0" data-linktype="relative-path">data protection in code</a>.</li>
</ul>
</li>
<li><p><strong>Set a machine-wide policy for data protection</strong></p>
<p>The data protection system has limited support for setting a default <a href="https://learn.microsoft.com/en-us/aspnet/core/security/data-protection/configuration/machine-wide-policy?view=aspnetcore-9.0" data-linktype="relative-path">machine-wide policy</a> for all apps that consume the Data Protection APIs. For more information, see <a href="../../security/data-protection/introduction553c.html?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Data Protection Overview</a>.</p>
</li>
</ul>
<h2 id="virtual-directories">Virtual Directories</h2>
<p><a href="https://learn.microsoft.com/en-us/iis/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis#virtual-directories" data-linktype="absolute-path">IIS Virtual Directories</a> aren't supported with ASP.NET Core apps. An app can be hosted as a <a href="#sub-applications" data-linktype="self-bookmark">sub-application</a>.</p>
<h2 id="sub-applications">Sub-applications</h2>
<p>An ASP.NET Core app can be hosted as an <a href="https://learn.microsoft.com/en-us/iis/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis#applications" data-linktype="absolute-path">IIS sub-application (sub-app)</a>. The sub-app's path becomes part of the root app's URL.</p>
<p>Static asset links within the sub-app should use tilde-slash (<code>~/</code>) notation. Tilde-slash notation triggers a <a href="https://learn.microsoft.com/en-us/aspnet/core/mvc/views/tag-helpers/intro?view=aspnetcore-9.0" data-linktype="relative-path">Tag Helper</a> to prepend the sub-app's pathbase to the rendered relative link. For a sub-app at <code>/subapp_path</code>, an image linked with <code>src="~/image.png"</code> is rendered as <code>src="/subapp_path/image.png"</code>. The root app's Static File Middleware doesn't process the static file request. The request is processed by the sub-app's Static File Middleware.</p>
<p>If a static asset's <code>src</code> attribute is set to an absolute path (for example, <code>src="/image.png"</code>), the link is rendered without the sub-app's pathbase. The root app's Static File Middleware attempts to serve the asset from the root app's <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/?view=aspnetcore-9.0#web-root" data-linktype="relative-path">web root</a>, which results in a <em>404 - Not Found</em> response unless the static asset is available from the root app.</p>
<p>To host an ASP.NET Core app as a sub-app under another ASP.NET Core app:</p>
<ol>
<li><p>Establish an app pool for the sub-app. Set the <strong>.NET CLR Version</strong> to <strong>No Managed Code</strong> because the Core Common Language Runtime (CoreCLR) for .NET is booted to host the app in the worker process, not the desktop CLR (.NET CLR).</p>
</li>
<li><p>Add the root site in IIS Manager with the sub-app in a folder under the root site.</p>
</li>
<li><p>Right-click the sub-app folder in IIS Manager and select <strong>Convert to Application</strong>.</p>
</li>
<li><p>In the <strong>Add Application</strong> dialog, use the <strong>Select</strong> button for the <strong>Application Pool</strong> to assign the app pool that you created for the sub-app. Select <strong>OK</strong>.</p>
</li>
</ol>
<p>The assignment of a separate app pool to the sub-app is a requirement when using the in-process hosting model.</p>
<p>For more information on the in-process hosting model and configuring the ASP.NET Core Module, see <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Module (ANCM) for IIS</a>.</p>
<h2 id="configuration-of-iis-with-webconfig">Configuration of IIS with web.config</h2>
<p>IIS configuration is influenced by the <code>&lt;system.webServer&gt;</code> section of <em>web.config</em> for IIS scenarios that are functional for ASP.NET Core apps with the ASP.NET Core Module. For example, IIS configuration is functional for dynamic compression. If IIS is configured at the server level to use dynamic compression, the <code>&lt;urlCompression&gt;</code> element in the app's <em>web.config</em> file can disable it for an ASP.NET Core app.</p>
<p>For more information, see the following topics:</p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/iis/configuration/system.webServer/" data-linktype="absolute-path">Configuration reference for &lt;system.webServer&gt;</a></li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Module (ANCM) for IIS</a></li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/modules?view=aspnetcore-9.0" data-linktype="relative-path">IIS modules with ASP.NET Core</a></li>
</ul>
<p>To set environment variables for individual apps running in isolated app pools (supported for IIS 10.0 or later), see the <em>AppCmd.exe command</em> section of the <a href="https://learn.microsoft.com/en-us/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe" data-linktype="absolute-path">Environment Variables &lt;environmentVariables&gt;</a> topic in the IIS reference documentation.</p>
<h3 id="sections-that-arent-used-by-aspnet-core">Sections that aren't used by ASP.NET Core</h3>
<p>Configuration sections of ASP.NET apps in <em>web.config</em> aren't used by ASP.NET Core apps for configuration:</p>
<ul>
<li><code>&lt;system.web&gt;</code></li>
<li><code>&lt;appSettings&gt;</code></li>
<li><code>&lt;connectionStrings&gt;</code></li>
<li><code>&lt;location&gt;</code></li>
</ul>
<p>ASP.NET Core apps are configured using other configuration providers. For more information, see <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/configuration/?view=aspnetcore-9.0" data-linktype="relative-path">Configuration</a> and <a href="https://learn.microsoft.com/en-us/dotnet/core/run-time-config/" data-linktype="absolute-path">.NET run-time configuration settings</a></p>
<h2 id="application-pools">Application Pools</h2>
<p>App pool isolation is determined by the hosting model:</p>
<ul>
<li>In-process hosting: Apps are required to run in separate app pools.</li>
<li>Out-of-process hosting: We recommend isolating the apps from each other by running each app in its own app pool.</li>
</ul>
<p>The IIS <strong>Add Website</strong> dialog defaults to a single app pool per app. When a <strong>Site name</strong> is provided, the text is automatically transferred to the <strong>Application pool</strong> textbox. A new app pool is created using the site name when the site is added.</p>
<h2 id="application-pool-identity">Application Pool Identity</h2>
<p>An app pool identity account allows an app to run under a unique account without having to create and manage domains or local accounts. On IIS 8.0 or later, the IIS Admin Worker Process (WAS) creates a virtual account with the name of the new app pool and runs the app pool's worker processes under this account by default. In the IIS Management Console under <strong>Advanced Settings</strong> for the app pool, ensure that the <strong>Identity</strong> is set to use <strong>ApplicationPoolIdentity</strong>:</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/index/_static/apppool-identity.png?view=aspnetcore-9.0" alt="Application pool advanced settings dialog" data-linktype="relative-path"></p>
<p>The IIS management process creates a secure identifier with the name of the app pool in the Windows Security System. Resources can be secured using this identity. However, this identity isn't a real user account and doesn't show up in the Windows User Management Console.</p>
<p>If the IIS worker process requires elevated access to the app, modify the Access Control List (ACL) for the directory containing the app:</p>
<ol>
<li><p>Open Windows Explorer and navigate to the directory.</p>
</li>
<li><p>Right-click on the directory and select <strong>Properties</strong>.</p>
</li>
<li><p>Under the <strong>Security</strong> tab, select the <strong>Edit</strong> button and then the <strong>Add</strong> button.</p>
</li>
<li><p>Select the <strong>Locations</strong> button and make sure the system is selected.</p>
</li>
<li><p>Enter <code>IIS AppPool\{APP POOL NAME}</code>, where the placeholder <code>{APP POOL NAME}</code> is the app pool name, in <strong>Enter the object names to select</strong> area. Select the <strong>Check Names</strong> button. For the <em>DefaultAppPool</em> check the names using <code>IIS AppPool\DefaultAppPool</code>. When the <strong>Check Names</strong> button is selected, a value of <code>DefaultAppPool</code> is indicated in the object names area. It isn't possible to enter the app pool name directly into the object names area. Use the <code>IIS AppPool\{APP POOL NAME}</code> format, where the placeholder <code>{APP POOL NAME}</code> is the app pool name, when checking for the object name.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/index/_static/select-users-or-groups-1.png?view=aspnetcore-9.0" alt="Select users or groups dialog for the app folder: The app pool name of &quot;DefaultAppPool&quot; is appended to &quot;IIS AppPool&quot; in the object names area before selecting &quot;Check Names.&quot;" data-linktype="relative-path"></p>
</li>
<li><p>Select <strong>OK</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/index/_static/select-users-or-groups-2.png?view=aspnetcore-9.0" alt="Select users or groups dialog for the app folder: After selecting &quot;Check Names,&quot; the object name &quot;DefaultAppPool&quot; is shown in the object names area." data-linktype="relative-path"></p>
</li>
<li><p>Read &amp; execute permissions should be granted by default. Provide additional permissions as needed.</p>
</li>
</ol>
<p>Access can also be granted at a command prompt using the <strong>ICACLS</strong> tool. Using the <code>DefaultAppPool</code> as an example, the following command is used:</p>
<pre><code class="lang-console">ICACLS C:\sites\MyWebApp /grant "IIS AppPool\DefaultAppPool":F
</code></pre>
<p>For more information, see the <a href="https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/icacls" data-linktype="absolute-path">icacls</a> topic.</p>
<h2 id="http2-support">HTTP/2 support</h2>
<p><a href="https://httpwg.org/specs/rfc7540.html" data-linktype="external">HTTP/2</a> is supported with ASP.NET Core in the following IIS deployment scenarios:</p>
<ul>
<li>In-process
<ul>
<li>Windows Server 2016/Windows 10 or later; IIS 10 or later</li>
<li>TLS 1.2 or later connection</li>
</ul>
</li>
<li>Out-of-process
<ul>
<li>Windows Server 2016/Windows 10 or later; IIS 10 or later</li>
<li>Public-facing edge server connections use HTTP/2, but the reverse proxy connection to the <a href="../../fundamentals/servers/kestrel553c.html?view=aspnetcore-9.0" data-linktype="relative-path">Kestrel server</a> uses HTTP/1.1.</li>
<li>TLS 1.2 or later connection</li>
</ul>
</li>
</ul>
<p>For an in-process deployment when an HTTP/2 connection is established, <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.http.httprequest.protocol" data-linktype="absolute-path"><code>HttpRequest.Protocol</code></a> reports <code>HTTP/2</code>. For an out-of-process deployment when an HTTP/2 connection is established, <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.http.httprequest.protocol" data-linktype="absolute-path"><code>HttpRequest.Protocol</code></a> reports <code>HTTP/1.1</code>.</p>
<p>For more information on the in-process and out-of-process hosting models, see <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Module (ANCM) for IIS</a>.</p>
<p>HTTP/2 is enabled by default. Connections fall back to HTTP/1.1 if an HTTP/2 connection isn't established. For more information on HTTP/2 configuration with IIS deployments, see <a href="https://learn.microsoft.com/en-us/iis/get-started/whats-new-in-iis-10/http2-on-iis" data-linktype="absolute-path">HTTP/2 on IIS</a>.</p>
<h2 id="cors-preflight-requests">CORS preflight requests</h2>
<p><em>This section only applies to ASP.NET Core apps that target the .NET Framework.</em></p>
<p>For an ASP.NET Core app that targets the .NET Framework, OPTIONS requests aren't passed to the app by default in IIS. To learn how to configure the app's IIS handlers in <code>web.config</code> to pass OPTIONS requests, see <a href="https://learn.microsoft.com/en-us/aspnet/web-api/overview/security/enabling-cross-origin-requests-in-web-api#how-cors-works" data-linktype="absolute-path">Enable cross-origin requests in ASP.NET Web API 2: How CORS Works</a>.</p>
<h2 id="application-initialization-module-and-idle-timeout">Application Initialization Module and Idle Timeout</h2>
<p>When hosted in IIS by the ASP.NET Core Module version 2:</p>
<ul>
<li><a href="#application-initialization-module" data-linktype="self-bookmark">Application Initialization Module</a>: App's hosted <a href="#in-process-hosting-model" data-linktype="self-bookmark">in-process</a> or <a href="#out-of-process-hosting-model" data-linktype="self-bookmark">out-of-process</a> can be configured to start automatically on a worker process restart or server restart.</li>
<li><a href="#idle-timeout" data-linktype="self-bookmark">Idle Timeout</a>: App's hosted <a href="#in-process-hosting-model" data-linktype="self-bookmark">in-process</a> can be configured not to timeout during periods of inactivity.</li>
</ul>
<h3 id="application-initialization-module">Application Initialization Module</h3>
<p><em>Applies to apps hosted in-process and out-of-process.</em></p>
<p><a href="https://learn.microsoft.com/en-us/iis/get-started/whats-new-in-iis-8/iis-80-application-initialization" data-linktype="absolute-path">IIS Application Initialization</a> is an IIS feature that sends an HTTP request to the app when the app pool starts or is recycled. The request triggers the app to start. By default, IIS issues a request to the app's root URL (<code>/</code>) to initialize the app (see the <a href="#application-initialization-module-and-idle-timeout-additional-resources" data-linktype="self-bookmark">additional resources</a> for more details on configuration).</p>
<p>Confirm that the IIS Application Initialization role feature in enabled:</p>
<p>On Windows 7 or later desktop systems when using IIS locally:</p>
<ol>
<li>Navigate to <strong>Control Panel</strong> &gt; <strong>Programs</strong> &gt; <strong>Programs and Features</strong> &gt; <strong>Turn Windows features on or off</strong> (left side of the screen).</li>
<li>Open <strong>Internet Information Services</strong> &gt; <strong>World Wide Web Services</strong> &gt; <strong>Application Development Features</strong>.</li>
<li>Select the checkbox for <strong>Application Initialization</strong>.</li>
</ol>
<p>On Windows Server 2008 R2 or later:</p>
<ol>
<li>Open the <strong>Add Roles and Features Wizard</strong>.</li>
<li>In the <strong>Select role services</strong> panel, open the <strong>Application Development</strong> node.</li>
<li>Select the checkbox for <strong>Application Initialization</strong>.</li>
</ol>
<p>Use either of the following approaches to enable the Application Initialization Module for the site:</p>
<ul>
<li><p>Using IIS Manager:</p>
<ol>
<li>Select <strong>Application Pools</strong> in the <strong>Connections</strong> panel.</li>
<li>Right-click the app's app pool in the list and select <strong>Advanced Settings</strong>.</li>
<li>The default <strong>Start Mode</strong> is <strong>OnDemand</strong>. Set the <strong>Start Mode</strong> to <strong>AlwaysRunning</strong>. Select <strong>OK</strong>.</li>
<li>Open the <strong>Sites</strong> node in the <strong>Connections</strong> panel.</li>
<li>Right-click the app and select <strong>Manage Website</strong> &gt; <strong>Advanced Settings</strong>.</li>
<li>The default <strong>Preload Enabled</strong> setting is <strong>False</strong>. Set <strong>Preload Enabled</strong> to <strong>True</strong>. Select <strong>OK</strong>.</li>
</ol>
</li>
<li><p>Using <code>web.config</code>, add the <code>&lt;applicationInitialization&gt;</code> element with <code>doAppInitAfterRestart</code> set to <code>true</code> to the <code>&lt;system.webServer&gt;</code> elements in the app's web.config` file:</p>
<pre><code class="lang-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;configuration&gt;
  &lt;location path="." inheritInChildApplications="false"&gt;
    &lt;system.webServer&gt;
      &lt;applicationInitialization doAppInitAfterRestart="true" /&gt;
    &lt;/system.webServer&gt;
  &lt;/location&gt;
&lt;/configuration&gt;
</code></pre>
</li>
</ul>
<h3 id="idle-timeout">Idle Timeout</h3>
<p><em>Only applies to apps hosted in-process.</em></p>
<p>To prevent the app from idling, set the app pool's idle timeout using IIS Manager:</p>
<ol>
<li>Select <strong>Application Pools</strong> in the <strong>Connections</strong> panel.</li>
<li>Right-click the app's app pool in the list and select <strong>Advanced Settings</strong>.</li>
<li>The default <strong>Idle Time-out (minutes)</strong> is <strong>20</strong> minutes. Set the <strong>Idle Time-out (minutes)</strong> to <strong>0</strong> (zero). Select <strong>OK</strong>.</li>
<li>Recycle the worker process.</li>
</ol>
<p>To prevent apps hosted <a href="#out-of-process-hosting-model" data-linktype="self-bookmark">out-of-process</a> from timing out, use either of the following approaches:</p>
<ul>
<li>Ping the app from an external service in order to keep it running.</li>
<li>If the app only hosts background services, avoid IIS hosting and use a <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/windows-service?view=aspnetcore-9.0" data-linktype="relative-path">Windows Service to host the ASP.NET Core app</a>.</li>
</ul>
<h3 id="application-initialization-module-and-idle-timeout-additional-resources">Application Initialization Module and Idle Timeout additional resources</h3>
<ul>
<li><a href="https://learn.microsoft.com/en-us/iis/get-started/whats-new-in-iis-8/iis-80-application-initialization" data-linktype="absolute-path">IIS 8.0 Application Initialization</a></li>
<li><a href="https://learn.microsoft.com/en-us/iis/configuration/system.webserver/applicationinitialization/" data-linktype="absolute-path">Application Initialization &lt;applicationInitialization&gt;</a>.</li>
<li><a href="https://learn.microsoft.com/en-us/iis/configuration/system.applicationhost/applicationpools/add/processmodel" data-linktype="absolute-path">Process Model Settings for an Application Pool &lt;processModel&gt;</a>.</li>
</ul>
<h2 id="deployment-resources-for-iis-administrators-1">Deployment resources for IIS administrators</h2>
<ul>
<li><a href="https://learn.microsoft.com/en-us/iis" data-linktype="absolute-path">IIS documentation</a></li>
<li><a href="https://learn.microsoft.com/en-us/iis/get-started/getting-started-with-iis/getting-started-with-the-iis-manager-in-iis-7-and-iis-8" data-linktype="absolute-path">Getting Started with the IIS Manager in IIS</a></li>
<li><a href="https://learn.microsoft.com/en-us/dotnet/core/deploying/" data-linktype="absolute-path">.NET application deployment</a></li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Module (ANCM) for IIS</a></li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/directory-structure?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core directory structure</a></li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/modules?view=aspnetcore-9.0" data-linktype="relative-path">IIS modules with ASP.NET Core</a></li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/test/troubleshoot-azure-iis?view=aspnetcore-9.0" data-linktype="relative-path">Troubleshoot ASP.NET Core on Azure App Service and IIS</a></li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/azure-iis-errors-reference?view=aspnetcore-9.0" data-linktype="relative-path">Common error troubleshooting for Azure App Service and IIS with ASP.NET Core</a></li>
</ul>
<h2 id="additional-resources-1">Additional resources</h2>
<ul>
<li><a href="../../test/troubleshoot553c.html?view=aspnetcore-9.0" data-linktype="relative-path">Troubleshoot and debug ASP.NET Core projects</a></li>
<li><a href="../../overview553c.html?view=aspnetcore-9.0" data-linktype="relative-path">Overview of ASP.NET Core</a></li>
<li><a href="https://www.iis.net/" data-linktype="external">The Official Microsoft IIS Site</a></li>
<li><a href="https://learn.microsoft.com/en-us/windows-server/windows-server" data-linktype="absolute-path">Windows Server technical content library</a></li>
<li><a href="https://learn.microsoft.com/en-us/iis/get-started/whats-new-in-iis-10/http2-on-iis" data-linktype="absolute-path">HTTP/2 on IIS</a></li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/transform-webconfig?view=aspnetcore-9.0" data-linktype="relative-path">Transform web.config</a></li>
</ul>
</div>
<div data-moniker="aspnetcore-2.1">
<p>For a tutorial experience on publishing an ASP.NET Core app to an IIS server, see <a href="https://learn.microsoft.com/en-us/aspnet/core/tutorials/publish-to-iis?view=aspnetcore-9.0" data-linktype="relative-path">Publish an ASP.NET Core app to IIS</a>.</p>
<p><a href="#install-the-net-hosting-bundle" data-linktype="self-bookmark">Install the .NET Hosting Bundle</a></p>
<h2 id="supported-operating-systems-1">Supported operating systems</h2>
<p>The following operating systems are supported:</p>
<ul>
<li>Windows 7 or later</li>
<li>Windows Server 2008 R2 or later</li>
</ul>
<p><a href="../../fundamentals/servers/httpsys553c.html?view=aspnetcore-9.0" data-linktype="relative-path">HTTP.sys server</a> (formerly called WebListener) doesn't work in a reverse proxy configuration with IIS. Use the <a href="../../fundamentals/servers/kestrel553c.html?view=aspnetcore-9.0" data-linktype="relative-path">Kestrel server</a>.</p>
<p>For information on hosting in Azure, see <a href="../azure-apps/index553c.html?view=aspnetcore-9.0" data-linktype="relative-path">Deploy ASP.NET Core apps to Azure App Service</a>.</p>
<p>For troubleshooting guidance, see <a href="../../test/troubleshoot553c.html?view=aspnetcore-9.0" data-linktype="relative-path">Troubleshoot and debug ASP.NET Core projects</a>.</p>
<h2 id="supported-platforms-2">Supported platforms</h2>
<p>Apps published for 32-bit (x86) or 64-bit (x64) deployment are supported. Deploy a 32-bit app with a 32-bit (x86) .NET SDK unless the app:</p>
<ul>
<li>Requires the larger virtual memory address space available to a 64-bit app.</li>
<li>Requires the larger IIS stack size.</li>
<li>Has 64-bit native dependencies.</li>
</ul>
<p>Use a 64-bit (x64) .NET SDK to publish a 64-bit app. A 64-bit runtime must be present on the host system.</p>
<p>ASP.NET Core ships with <a href="../../fundamentals/servers/kestrel553c.html?view=aspnetcore-9.0" data-linktype="relative-path">Kestrel server</a>, a default, cross-platform HTTP server.</p>
<p>When using <a href="https://learn.microsoft.com/en-us/iis/get-started/introduction-to-iis/introduction-to-iis-architecture" data-linktype="absolute-path">IIS</a> or <a href="https://learn.microsoft.com/en-us/iis/extensions/introduction-to-iis-express/iis-express-overview" data-linktype="absolute-path">IIS Express</a>, the app runs in a process separate from the IIS worker process (<em>out-of-process</em>) with the <a href="../../fundamentals/servers/index553c.html?view=aspnetcore-9.0#kestrel" data-linktype="relative-path">Kestrel server</a>.</p>
<p>Because ASP.NET Core apps run in a process separate from the IIS worker process, the module handles process management. The module starts the process for the ASP.NET Core app when the first request arrives and restarts the app if it shuts down or crashes. This is essentially the same behavior as seen with apps that run in-process that are managed by the <a href="https://learn.microsoft.com/en-us/iis/manage/provisioning-and-managing-iis/features-of-the-windows-process-activation-service-was" data-linktype="absolute-path">Windows Process Activation Service (WAS)</a>.</p>
<p>The following diagram illustrates the relationship between IIS, the ASP.NET Core Module, and an app hosted out-of-process:</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/index/_static/ancm-outofprocess.png?view=aspnetcore-9.0" alt="ASP.NET Core Module" data-linktype="relative-path"></p>
<p>Requests arrive from the web to the kernel-mode HTTP.sys driver. The driver routes the requests to IIS on the website's configured port, usually 80 (HTTP) or 443 (HTTPS). The module forwards the requests to Kestrel on a random port for the app, which isn't port 80 or 443.</p>
<p>The module specifies the port via an environment variable at startup, and the <a href="index553c.html?view=aspnetcore-9.0#enable-the-iisintegration-components" data-linktype="relative-path">IIS Integration Middleware</a> configures the server to listen on <code>http://localhost:{port}</code>. Additional checks are performed, and requests that don't originate from the module are rejected. The module doesn't support HTTPS forwarding, so requests are forwarded over HTTP even if received by IIS over HTTPS.</p>
<p>After Kestrel picks up the request from the module, the request is pushed into the ASP.NET Core middleware pipeline. The middleware pipeline handles the request and passes it on as an <code>HttpContext</code> instance to the app's logic. Middleware added by IIS Integration updates the scheme, remote IP, and pathbase to account for forwarding the request to Kestrel. The app's response is passed back to IIS, which pushes it back out to the HTTP client that initiated the request.</p>
<p><code>CreateDefaultBuilder</code> configures <a href="../../fundamentals/servers/kestrel553c.html?view=aspnetcore-9.0" data-linktype="relative-path">Kestrel</a> server as the web server and enables IIS Integration by configuring the base path and port for the <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Module</a>.</p>
<p>The ASP.NET Core Module generates a dynamic port to assign to the backend process. <code>CreateDefaultBuilder</code> calls the <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.hosting.webhostbuilderiisextensions.useiisintegration" class="no-loc" data-linktype="absolute-path">UseIISIntegration</a> method. <code>UseIISIntegration</code> configures Kestrel to listen on the dynamic port at the localhost IP address (<code>127.0.0.1</code>). If the dynamic port is 1234, Kestrel listens at <code>127.0.0.1:1234</code>. This configuration replaces other URL configurations provided by:</p>
<ul>
<li><code>UseUrls</code></li>
<li><a href="../../fundamentals/servers/kestrel553c.html?view=aspnetcore-9.0#endpoint-configuration" data-linktype="relative-path">Kestrel's Listen API</a></li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/configuration/?view=aspnetcore-9.0" data-linktype="relative-path">Configuration</a> (or <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/host/web-host?view=aspnetcore-9.0#override-configuration" data-linktype="relative-path">command-line --urls option</a>)</li>
</ul>
<p>Calls to <code>UseUrls</code> or Kestrel's <code>Listen</code> API aren't required when using the module. If <code>UseUrls</code> or <code>Listen</code> is called, Kestrel listens on the port specified only when running the app without IIS.</p>
<p>For ASP.NET Core Module configuration guidance, see <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Module (ANCM) for IIS</a>.</p>
<p>For more information on hosting, see <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/?view=aspnetcore-9.0#host" data-linktype="relative-path">Host in ASP.NET Core</a>.</p>
<h2 id="application-configuration-1">Application configuration</h2>
<h3 id="enable-the-iisintegration-components-1">Enable the IISIntegration components</h3>
<p>When building a host in <code>CreateWebHostBuilder</code> (<code>Program.cs</code>), call <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.webhost.createdefaultbuilder" class="no-loc" data-linktype="absolute-path">CreateDefaultBuilder</a> to enable IIS integration:</p>
<pre><code class="lang-csharp">public static IWebHostBuilder CreateWebHostBuilder(string[] args) =&gt;
    WebHost.CreateDefaultBuilder(args)
        ...
</code></pre>
<p>For more information on <code>CreateDefaultBuilder</code>, see <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/host/web-host?view=aspnetcore-9.0#set-up-a-host" data-linktype="relative-path">ASP.NET Core Web Host</a>.</p>
<h3 id="iis-options-1">IIS options</h3>
<table>
<thead>
<tr>
<th>Option</th>
<th style="text-align: center;">Default</th>
<th>Setting</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>AutomaticAuthentication</code></td>
<td style="text-align: center;"><code>true</code></td>
<td>If <code>true</code>, IIS Server sets the <code>HttpContext.User</code> authenticated by <a href="https://learn.microsoft.com/en-us/aspnet/core/security/authentication/windowsauth?view=aspnetcore-9.0" data-linktype="relative-path">Windows Authentication</a>. If <code>false</code>, the server only provides an identity for <code>HttpContext.User</code> and responds to challenges when explicitly requested by the <code>AuthenticationScheme</code>. Windows Authentication must be enabled in IIS for <code>AutomaticAuthentication</code> to function. For more information, see <a href="https://learn.microsoft.com/en-us/aspnet/core/security/authentication/windowsauth?view=aspnetcore-9.0" data-linktype="relative-path">Windows Authentication</a>.</td>
</tr>
<tr>
<td><code>AuthenticationDisplayName</code></td>
<td style="text-align: center;"><code>null</code></td>
<td>Sets the display name shown to users on login pages.</td>
</tr>
</tbody>
</table>
<p>To configure IIS options, include a service configuration for <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.iisoptions" class="no-loc" data-linktype="absolute-path">IISOptions</a> in <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.hosting.istartup.configureservices" class="no-loc" data-linktype="absolute-path">ConfigureServices</a>. The following example prevents the app from populating <code>HttpContext.Connection.ClientCertificate</code>:</p>
<pre><code class="lang-csharp">services.Configure&lt;IISOptions&gt;(options =&gt; 
{
    options.ForwardClientCertificate = false;
});
</code></pre>
<table>
<thead>
<tr>
<th>Option</th>
<th style="text-align: center;">Default</th>
<th>Setting</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>AutomaticAuthentication</code></td>
<td style="text-align: center;"><code>true</code></td>
<td>If <code>true</code>, <a href="#enable-the-iisintegration-components" data-linktype="self-bookmark">IIS Integration Middleware</a> sets the <code>HttpContext.User</code> authenticated by <a href="https://learn.microsoft.com/en-us/aspnet/core/security/authentication/windowsauth?view=aspnetcore-9.0" data-linktype="relative-path">Windows Authentication</a>. If <code>false</code>, the middleware only provides an identity for <code>HttpContext.User</code> and responds to challenges when explicitly requested by the <code>AuthenticationScheme</code>. Windows Authentication must be enabled in IIS for <code>AutomaticAuthentication</code> to function. For more information, see the <a href="https://learn.microsoft.com/en-us/aspnet/core/security/authentication/windowsauth?view=aspnetcore-9.0" data-linktype="relative-path">Windows Authentication</a> topic.</td>
</tr>
<tr>
<td><code>AuthenticationDisplayName</code></td>
<td style="text-align: center;"><code>null</code></td>
<td>Sets the display name shown to users on login pages.</td>
</tr>
<tr>
<td><code>ForwardClientCertificate</code></td>
<td style="text-align: center;"><code>true</code></td>
<td>If <code>true</code> and the <code>MS-ASPNETCORE-CLIENTCERT</code> request header is present, the <code>HttpContext.Connection.ClientCertificate</code> is populated.</td>
</tr>
</tbody>
</table>
<h3 id="proxy-server-and-load-balancer-scenarios-1">Proxy server and load balancer scenarios</h3>
<p>The <a href="#enable-the-iisintegration-components" data-linktype="self-bookmark">IIS Integration Middleware</a>, which configures Forwarded Headers Middleware, and the ASP.NET Core Module are configured to forward the scheme (HTTP/HTTPS) and the remote IP address where the request originated. Additional configuration might be required for apps hosted behind additional proxy servers and load balancers. For more information, see <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/proxy-load-balancer?view=aspnetcore-9.0" data-linktype="relative-path">Configure ASP.NET Core to work with proxy servers and load balancers</a>.</p>
<h3 id="webconfig-file-1">web.config file</h3>
<p>The <em>web.config</em> file configures the <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Module</a>. Creating, transforming, and publishing the <em>web.config</em> file is handled by an MSBuild target (<code>_TransformWebConfig</code>) when the project is published. This target is present in the Web SDK targets (<code>Microsoft.NET.Sdk.Web</code>). The SDK is set at the top of the project file:</p>
<pre><code class="lang-xml">&lt;Project Sdk="Microsoft.NET.Sdk.Web"&gt;
</code></pre>
<p>If a <em>web.config</em> file isn't present in the project, the file is created with the correct <em>processPath</em> and <em>arguments</em> to configure the ASP.NET Core Module and moved to <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/directory-structure?view=aspnetcore-9.0" data-linktype="relative-path">published output</a>.</p>
<p>If a <em>web.config</em> file is present in the project, the file is transformed with the correct <em>processPath</em> and <em>arguments</em> to configure the ASP.NET Core Module and moved to published output. The transformation doesn't modify IIS configuration settings in the file.</p>
<p>The <em>web.config</em> file may provide additional IIS configuration settings that control active IIS modules. For information on IIS modules that are capable of processing requests with ASP.NET Core apps, see the <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/modules?view=aspnetcore-9.0" data-linktype="relative-path">IIS modules</a> topic.</p>
<p>To prevent the Web SDK from transforming the <em>web.config</em> file, use the <strong>&lt;IsTransformWebConfigDisabled&gt;</strong> property in the project file:</p>
<pre><code class="lang-xml">&lt;PropertyGroup&gt;
  &lt;IsTransformWebConfigDisabled&gt;true&lt;/IsTransformWebConfigDisabled&gt;
&lt;/PropertyGroup&gt;
</code></pre>
<p>When disabling the Web SDK from transforming the file, the <em>processPath</em> and <em>arguments</em> should be manually set by the developer. For more information, see <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Module (ANCM) for IIS</a>.</p>
<h3 id="webconfig-file-location-1">web.config file location</h3>
<p>In order to set up the <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Module</a> correctly, the <em>web.config</em> file must be present at the <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/?view=aspnetcore-9.0#content-root" data-linktype="relative-path">content root</a> path (typically the app base path) of the deployed app. This is the same location as the website physical path provided to IIS. The <em>web.config</em> file is required at the root of the app to enable the publishing of multiple apps using Web Deploy.</p>
<p>Sensitive files exist on the app's physical path, such as <em>&lt;assembly&gt;.runtimeconfig.json</em>, <em>&lt;assembly&gt;.xml</em> (XML Documentation comments), and <em>&lt;assembly&gt;.deps.json</em>. When the <em>web.config</em> file is present and the site starts normally, IIS doesn't serve these sensitive files if they're requested. If the <em>web.config</em> file is missing, incorrectly named, or unable to configure the site for normal startup, IIS may serve sensitive files publicly.</p>
<p><strong>The <em>web.config</em> file must be present in the deployment at all times, correctly named, and able to configure the site for normal start up. Never remove the <em>web.config</em> file from a production deployment.</strong></p>
<h3 id="transform-webconfig-1">Transform web.config</h3>
<p>If you need to transform <em>web.config</em> on publish (for example, set environment variables based on the configuration, profile, or environment), see <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/transform-webconfig?view=aspnetcore-9.0" data-linktype="relative-path">Transform web.config</a>.</p>
<h2 id="iis-configuration-1">IIS configuration</h2>
<p><strong>Windows Server operating systems</strong></p>
<p>Enable the <strong>Web Server (IIS)</strong> server role and establish role services.</p>
<ol>
<li><p>Use the <strong>Add Roles and Features</strong> wizard from the <strong>Manage</strong> menu or the link in <strong>Server Manager</strong>. On the <strong>Server Roles</strong> step, check the box for <strong>Web Server (IIS)</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/index/_static/server-roles-ws2016.png?view=aspnetcore-9.0" alt="The Web Server IIS role is selected in the Select server roles step." data-linktype="relative-path"></p>
</li>
<li><p>After the <strong>Features</strong> step, the <strong>Role services</strong> step loads for Web Server (IIS). Select the IIS role services desired or accept the default role services provided.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/index/_static/role-services-ws2016.png?view=aspnetcore-9.0" alt="The default role services are selected in the Select role services step." data-linktype="relative-path"></p>
<p><strong>Windows Authentication (Optional)</strong><br>
To enable Windows Authentication, expand the following nodes: <strong>Web Server</strong> &gt; <strong>Security</strong>. Select the <strong>Windows Authentication</strong> feature. For more information, see <a href="https://learn.microsoft.com/en-us/iis/configuration/system.webServer/security/authentication/windowsAuthentication/" data-linktype="absolute-path">Windows Authentication &lt;windowsAuthentication&gt;</a> and <a href="https://learn.microsoft.com/en-us/aspnet/core/security/authentication/windowsauth?view=aspnetcore-9.0" data-linktype="relative-path">Configure Windows authentication</a>.</p>
<p><strong>WebSockets (Optional)</strong><br>
WebSockets is supported with ASP.NET Core 1.1 or later. To enable WebSockets, expand the following nodes: <strong>Web Server</strong> &gt; <strong>Application Development</strong>. Select the <strong>WebSocket Protocol</strong> feature. For more information, see <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/websockets?view=aspnetcore-9.0" data-linktype="relative-path">WebSockets</a>.</p>
</li>
<li><p>Proceed through the <strong>Confirmation</strong> step to install the web server role and services. A server/IIS restart isn't required after installing the <strong>Web Server (IIS)</strong> role.</p>
</li>
</ol>
<p><strong>Windows desktop operating systems</strong></p>
<p>Enable the <strong>IIS Management Console</strong> and <strong>World Wide Web Services</strong>.</p>
<ol>
<li><p>Navigate to <strong>Control Panel</strong> &gt; <strong>Programs</strong> &gt; <strong>Programs and Features</strong> &gt; <strong>Turn Windows features on or off</strong> (left side of the screen).</p>
</li>
<li><p>Open the <strong>Internet Information Services</strong> node. Open the <strong>Web Management Tools</strong> node.</p>
</li>
<li><p>Check the box for <strong>IIS Management Console</strong>.</p>
</li>
<li><p>Check the box for <strong>World Wide Web Services</strong>.</p>
</li>
<li><p>Accept the default features for <strong>World Wide Web Services</strong> or customize the IIS features.</p>
<p><strong>Windows Authentication (Optional)</strong><br>
To enable Windows Authentication, expand the following nodes: <strong>World Wide Web Services</strong> &gt; <strong>Security</strong>. Select the <strong>Windows Authentication</strong> feature. For more information, see <a href="https://learn.microsoft.com/en-us/iis/configuration/system.webServer/security/authentication/windowsAuthentication/" data-linktype="absolute-path">Windows Authentication &lt;windowsAuthentication&gt;</a> and <a href="https://learn.microsoft.com/en-us/aspnet/core/security/authentication/windowsauth?view=aspnetcore-9.0" data-linktype="relative-path">Configure Windows authentication</a>.</p>
<p><strong>WebSockets (Optional)</strong><br>
WebSockets is supported with ASP.NET Core 1.1 or later. To enable WebSockets, expand the following nodes: <strong>World Wide Web Services</strong> &gt; <strong>Application Development Features</strong>. Select the <strong>WebSocket Protocol</strong> feature. For more information, see <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/websockets?view=aspnetcore-9.0" data-linktype="relative-path">WebSockets</a>.</p>
</li>
<li><p>If the IIS installation requires a restart, restart the system.</p>
</li>
</ol>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/index/_static/windows-features-win10.png?view=aspnetcore-9.0" alt="IIS Management Console and World Wide Web Services are selected in Windows Features." data-linktype="relative-path"></p>
<h2 id="install-the-net-hosting-bundle-1">Install the .NET Hosting Bundle</h2>
<p>Install the <em>.NET Hosting Bundle</em> on the hosting system. The bundle installs the .NET Runtime, .NET Library, and the <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Module</a>. The module allows ASP.NET Core apps to run behind IIS.</p>
<div class="IMPORTANT">
<p>Important</p>
<p>If the Hosting Bundle is installed before IIS, the bundle installation must be repaired. Run the Hosting Bundle installer again after installing IIS.</p>
<p>If the Hosting Bundle is installed after installing the 64-bit (x64) version of .NET, SDKs might appear to be missing (<a href="../../test/troubleshoot553c.html?view=aspnetcore-9.0#no-net-sdks-were-detected" data-linktype="relative-path">No .NET SDKs were detected</a>). To resolve the problem, see <a href="../../test/troubleshoot553c.html?view=aspnetcore-9.0#missing-sdk-after-installing-the-net-hosting-bundle" data-linktype="relative-path">Troubleshoot and debug ASP.NET Core projects</a>.</p>
</div>
<h3 id="download">Download</h3>
<ol>
<li>Navigate to the <a href="https://dotnet.microsoft.com/download/dotnet-core" data-linktype="external">Download .NET</a> page.</li>
<li>Select the desired .NET version.</li>
<li>In the <strong>Run apps - Runtime</strong> column, find the row of the .NET runtime version desired.</li>
<li>Download the installer using the <strong>Hosting Bundle</strong> link.</li>
</ol>
<div class="WARNING">
<p>Warning</p>
<p>Some installers contain release versions that have reached their end of life (EOL) and are no longer supported by Microsoft. For more information, see the <a href="https://dotnet.microsoft.com/platform/support/policy/dotnet-core" data-linktype="external">support policy</a>.</p>
</div>
<h3 id="install-the-hosting-bundle-1">Install the Hosting Bundle</h3>
<ol>
<li><p>Run the installer on the server. The following parameters are available when running the installer from an administrator command shell:</p>
<ul>
<li><code>OPT_NO_ANCM=1</code>: Skip installing the ASP.NET Core Module.</li>
<li><code>OPT_NO_RUNTIME=1</code>: Skip installing the .NET runtime. Used when the server only hosts <a href="https://learn.microsoft.com/en-us/dotnet/core/deploying/#self-contained-deployments-scd" data-linktype="absolute-path">self-contained deployments (SCD)</a>.</li>
<li><code>OPT_NO_SHAREDFX=1</code>: Skip installing the ASP.NET Shared Framework (ASP.NET runtime). Used when the server only hosts <a href="https://learn.microsoft.com/en-us/dotnet/core/deploying/#self-contained-deployments-scd" data-linktype="absolute-path">self-contained deployments (SCD)</a>.</li>
<li><code>OPT_NO_X86=1</code>: Skip installing x86 runtimes. Use this parameter when you know that you won't be hosting 32-bit apps. If there's any chance that you will host both 32-bit and 64-bit apps in the future, don't use this parameter and install both runtimes.</li>
<li><code>OPT_NO_SHARED_CONFIG_CHECK=1</code>: Disable the check for using an IIS Shared Configuration when the shared configuration (<em>applicationHost.config</em>) is on the same machine as the IIS installation. <em>Only available for ASP.NET Core 2.2 or later Hosting Bundler installers.</em> For more information, see <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0#aspnet-core-module-with-an-iis-shared-configuration" data-linktype="relative-path">ASP.NET Core Module (ANCM) for IIS</a>.</li>
</ul>
</li>
<li><p>Restart the system or execute the following commands in a command shell:</p>
<pre><code class="lang-console">net stop was /y
net start w3svc
</code></pre>
<p>Restarting IIS picks up a change to the system PATH, which is an environment variable, made by the installer.</p>
</li>
</ol>
<p>It isn't necessary to manually stop individual sites in IIS when installing the Hosting Bundle. Hosted apps (IIS sites) restart when IIS restarts. Apps start up again when they receive their first request, including from the <a href="#application-initialization-module-and-idle-timeout" data-linktype="self-bookmark">Application Initialization Module</a>.</p>
<p>ASP.NET Core adopts roll-forward behavior for patch releases of shared framework packages. When apps hosted by IIS restart with IIS, the apps load with the latest patch releases of their referenced packages when they receive their first request. If IIS isn't restarted, apps restart and exhibit roll-forward behavior when their worker processes are recycled and they receive their first request.</p>
<div class="NOTE">
<p>Note</p>
<p>For information on IIS Shared Configuration, see <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0#aspnet-core-module-with-an-iis-shared-configuration" data-linktype="relative-path">ASP.NET Core Module with IIS Shared Configuration</a>.</p>
</div>
<h2 id="install-web-deploy-when-publishing-with-visual-studio-1">Install Web Deploy when publishing with Visual Studio</h2>
<p>When deploying apps to servers with <a href="https://learn.microsoft.com/en-us/iis/install/installing-publishing-technologies/installing-and-configuring-web-deploy-on-iis-80-or-later" data-linktype="absolute-path">Web Deploy</a>, install the latest version of Web Deploy on the server. To install Web Deploy, use the <a href="https://www.microsoft.com/web/downloads/platform.aspx" data-linktype="external">Web Platform Installer (WebPI)</a> or <a href="https://www.iis.net/downloads/microsoft/web-deploy" data-linktype="external">IIS Downloads: Web Deploy</a>. The preferred method is to use WebPI. WebPI offers a standalone setup and a configuration for hosting providers.</p>
<h2 id="create-the-iis-site-1">Create the IIS site</h2>
<ol>
<li><p>On the hosting system, create a folder to contain the app's published folders and files. In a following step, the folder's path is provided to IIS as the physical path to the app. For more information on an app's deployment folder and file layout, see <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/directory-structure?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core directory structure</a>.</p>
</li>
<li><p>In IIS Manager, open the server's node in the <strong>Connections</strong> panel. Right-click the <strong>Sites</strong> folder. Select <strong>Add Website</strong> from the contextual menu.</p>
</li>
<li><p>Provide a <strong>Site name</strong> and set the <strong>Physical path</strong> to the app's deployment folder. Provide the <strong>Binding</strong> configuration and create the website by selecting <strong>OK</strong>:</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/index/_static/add-website-ws2016.png?view=aspnetcore-9.0" alt="Supply the Site name, physical path, and Host name in the Add Website step." data-linktype="relative-path"></p>
<div class="WARNING">
<p>Warning</p>
<p>Top-level wildcard bindings (<code>http://*:80/</code> and <code>http://+:80</code>) should <strong>not</strong> be used. Top-level wildcard bindings can open up your app to security vulnerabilities. This applies to both strong and weak wildcards. Use explicit host names rather than wildcards. Subdomain wildcard binding (for example, <code>*.mysub.com</code>) doesn't have this security risk if you control the entire parent domain (as opposed to <code>*.com</code>, which is vulnerable). See <a href="https://www.rfc-editor.org/rfc/rfc9110#field.host" data-linktype="external">RFC 9110: HTTP Semantics (Section 7.2: Host and :authority)</a> for more information.</p>
</div>
</li>
<li><p>Under the server's node, select <strong>Application Pools</strong>.</p>
</li>
<li><p>Right-click the site's app pool and select <strong>Basic Settings</strong> from the contextual menu.</p>
</li>
<li><p>In the <strong>Edit Application Pool</strong> window, set the <strong>.NET CLR version</strong> to <strong>No Managed Code</strong>:</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/index/_static/edit-apppool-ws2016.png?view=aspnetcore-9.0" alt="Set No Managed Code for the .NET CLR version." data-linktype="relative-path"></p>
<p>ASP.NET Core runs in a separate process and manages the runtime. ASP.NET Core doesn't rely on loading the desktop CLR (.NET CLR)—the Core Common Language Runtime (CoreCLR) for .NET is booted to host the app in the worker process. Setting the <strong>.NET CLR version</strong> to <strong>No Managed Code</strong> is optional but recommended.</p>
</li>
<li><p><em>ASP.NET Core 2.2 or later</em>: For a 64-bit (x64) <a href="https://learn.microsoft.com/en-us/dotnet/core/deploying/#self-contained-deployments-scd" data-linktype="absolute-path">self-contained deployment</a> that uses the <a href="#in-process-hosting-model" data-linktype="self-bookmark">in-process hosting model</a>, disable the app pool for 32-bit (x86) processes.</p>
<p>In the <strong>Actions</strong> sidebar of IIS Manager &gt; <strong>Application Pools</strong>, select <strong>Set Application Pool Defaults</strong> or <strong>Advanced Settings</strong>. Locate <strong>Enable 32-Bit Applications</strong> and set the value to <code>False</code>. This setting doesn't affect apps deployed for <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0#out-of-process-hosting-model" data-linktype="relative-path">out-of-process hosting</a>.</p>
</li>
<li><p>Confirm the process model identity has the proper permissions.</p>
<p>If the default identity of the app pool (<strong>Process Model</strong> &gt; <strong>Identity</strong>) is changed from <strong>ApplicationPoolIdentity</strong> to another identity, verify that the new identity has the required permissions to access the app's folder, database, and other required resources. For example, the app pool requires read and write access to folders where the app reads and writes files.</p>
</li>
</ol>
<p><strong>Windows Authentication configuration (Optional)</strong><br>
For more information, see <a href="https://learn.microsoft.com/en-us/aspnet/core/security/authentication/windowsauth?view=aspnetcore-9.0" data-linktype="relative-path">Configure Windows authentication</a>.</p>
<h2 id="deploy-the-app-1">Deploy the app</h2>
<p>Deploy the app to the IIS <strong>Physical path</strong> folder that was established in the <a href="#create-the-iis-site" data-linktype="self-bookmark">Create the IIS site</a> section. <a href="https://learn.microsoft.com/en-us/iis/publish/using-web-deploy/introduction-to-web-deploy" data-linktype="absolute-path">Web Deploy</a> is the recommended mechanism for deployment, but several options exist for moving the app from the project's <em>publish</em> folder to the hosting system's deployment folder.</p>
<h3 id="web-deploy-with-visual-studio-1">Web Deploy with Visual Studio</h3>
<p>See the <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/visual-studio-publish-profiles?view=aspnetcore-9.0#publish-profiles" data-linktype="relative-path">Visual Studio publish profiles for ASP.NET Core app deployment</a> topic to learn how to create a publish profile for use with Web Deploy. If the hosting provider provides a Publish Profile or support for creating one, download their profile and import it using the Visual Studio <strong>Publish</strong> dialog:</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/index/_static/pub-dialog.png?view=aspnetcore-9.0" alt="Publish dialog page" data-linktype="relative-path"></p>
<h3 id="web-deploy-outside-of-visual-studio-1">Web Deploy outside of Visual Studio</h3>
<p><a href="https://learn.microsoft.com/en-us/iis/publish/using-web-deploy/introduction-to-web-deploy" data-linktype="absolute-path">Web Deploy</a> can also be used outside of Visual Studio from the command line. For more information, see <a href="https://learn.microsoft.com/en-us/iis/publish/using-web-deploy/use-the-web-deployment-tool" data-linktype="absolute-path">Web Deployment Tool</a>.</p>
<h3 id="alternatives-to-web-deploy-1">Alternatives to Web Deploy</h3>
<p>Use any of several methods to move the app to the hosting system, such as manual copy, <a href="https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/xcopy" data-linktype="absolute-path">Xcopy</a>, <a href="https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/robocopy" data-linktype="absolute-path">Robocopy</a>, or <a href="https://learn.microsoft.com/en-us/powershell/" data-linktype="absolute-path">PowerShell</a>.</p>
<p>For more information on ASP.NET Core deployment to IIS, see the <a href="#deployment-resources-for-iis-administrators" data-linktype="self-bookmark">Deployment resources for IIS administrators</a> section.</p>
<h2 id="browse-the-website-1">Browse the website</h2>
<p>After the app is deployed to the hosting system, make a request to one of the app's public endpoints.</p>
<p>In the following example, the site is bound to an IIS <strong>Host name</strong> of <code>www.mysite.com</code> on <strong>Port</strong> <code>80</code>. A request is made to <code>http://www.mysite.com</code>:</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/index/_static/browsewebsite.png?view=aspnetcore-9.0" alt="The Microsoft Edge browser has loaded the IIS startup page." data-linktype="relative-path"></p>
<h2 id="locked-deployment-files-1">Locked deployment files</h2>
<p>Files in the deployment folder are locked when the app is running. Locked files can't be overwritten during deployment. To release locked files in a deployment, stop the app pool using <strong>one</strong> of the following approaches:</p>
<ul>
<li><p>Use Web Deploy and reference <code>Microsoft.NET.Sdk.Web</code> in the project file. An <code>app_offline.htm</code> file is placed at the root of the web app directory. When the file is present, the ASP.NET Core Module gracefully shuts down the app and serves the <code>app_offline.htm</code> file during the deployment. For more information, see the <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0#app_offlinehtm" data-linktype="relative-path">ASP.NET Core Module configuration reference</a>.</p>
</li>
<li><p>Manually stop the app pool in the IIS Manager on the server.</p>
</li>
<li><p>Use PowerShell to drop <code>app_offline.htm</code> (requires PowerShell 5 or later):</p>
<pre><code class="lang-powershell">$pathToApp = 'PATH_TO_APP'

# Stop the AppPool
New-Item -Path $pathToApp app_offline.htm

# Provide script commands here to deploy the app

# Restart the AppPool
Remove-Item -Path $pathToApp app_offline.htm

</code></pre>
</li>
</ul>
<h2 id="data-protection-1">Data protection</h2>
<p>The <a href="../../security/data-protection/introduction553c.html?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Data Protection stack</a> is used by several ASP.NET Core <a href="../../fundamentals/middleware/index553c.html?view=aspnetcore-9.0" data-linktype="relative-path">middlewares</a>, including middleware used in authentication. Even if Data Protection APIs aren't called by user code, data protection should be configured with a deployment script or in user code to create a persistent cryptographic <a href="https://learn.microsoft.com/en-us/aspnet/core/security/data-protection/implementation/key-management?view=aspnetcore-9.0" data-linktype="relative-path">key store</a>. If data protection isn't configured, the keys are held in memory and discarded when the app restarts.</p>
<p>If the key ring is stored in memory when the app restarts:</p>
<ul>
<li>All cookie-based authentication tokens are invalidated.</li>
<li>Users are required to sign in again on their next request.</li>
<li>Any data protected with the key ring can no longer be decrypted. This may include <a href="https://learn.microsoft.com/en-us/aspnet/core/security/anti-request-forgery?view=aspnetcore-9.0#aspnet-core-antiforgery-configuration" data-linktype="relative-path">CSRF tokens</a> and <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/app-state?view=aspnetcore-9.0#tempdata" data-linktype="relative-path">ASP.NET Core MVC TempData cookies</a>.</li>
</ul>
<p>To configure data protection under IIS to persist the key ring, use <strong>one</strong> of the following approaches:</p>
<ul>
<li><p><strong>Create Data Protection Registry Keys</strong></p>
<p>Data protection keys used by ASP.NET Core apps are stored in the registry external to the apps. To persist the keys for a given app, create registry keys for the app pool.</p>
<p>For standalone, non-webfarm IIS installations, the <a href="https://github.com/dotnet/AspNetCore/blob/main/src/DataProtection/Provision-AutoGenKeys.ps1" data-linktype="external">Data Protection Provision-AutoGenKeys.ps1 PowerShell script</a> can be used for each app pool used with an ASP.NET Core app. This script creates a registry key in the HKLM registry that's accessible only to the worker process account of the app's app pool. Keys are encrypted at rest using DPAPI with a machine-wide key.</p>
<p>In web farm scenarios, an app can be configured to use a UNC path to store its data protection key ring. By default, the data protection keys aren't encrypted. Ensure that the file permissions for the network share are limited to the Windows account the app runs under. An X509 certificate can be used to protect keys at rest. Consider a mechanism to allow users to upload certificates: Place certificates into the user's trusted certificate store and ensure they're available on all machines where the user's app runs. See <a href="https://learn.microsoft.com/en-us/aspnet/core/security/data-protection/configuration/overview?view=aspnetcore-9.0" data-linktype="relative-path">Configure ASP.NET Core Data Protection</a> for details.</p>
</li>
<li><p><strong>Configure the IIS Application Pool to load the user profile</strong></p>
<p>This setting is in the <strong>Process Model</strong> section under the <strong>Advanced Settings</strong> for the app pool. Set <strong>Load User Profile</strong> to <code>True</code>. When set to <code>True</code>, keys are stored in the user profile directory and protected using DPAPI with a key specific to the user account. Keys are persisted to the <em>%LOCALAPPDATA%/ASP.NET/DataProtection-Keys</em> folder.</p>
<p>The app pool's <a href="https://learn.microsoft.com/en-us/iis/configuration/system.applicationhost/applicationpools/add/processmodel#configuration" data-linktype="absolute-path">setProfileEnvironment attribute</a> must also be enabled. The default value of <code>setProfileEnvironment</code> is <code>true</code>. In some scenarios (for example, Windows OS), <code>setProfileEnvironment</code> is set to <code>false</code>. If keys aren't stored in the user profile directory as expected:</p>
<ol>
<li>Navigate to the <em>%windir%/system32/inetsrv/config</em> folder.</li>
<li>Open the <em>applicationHost.config</em> file.</li>
<li>Locate the <code>&lt;system.applicationHost&gt;&lt;applicationPools&gt;&lt;applicationPoolDefaults&gt;&lt;processModel&gt;</code> element.</li>
<li>Confirm that the <code>setProfileEnvironment</code> attribute isn't present, which defaults the value to <code>true</code>, or explicitly set the attribute's value to <code>true</code>.</li>
</ol>
</li>
<li><p><strong>Use the file system as a key ring store</strong></p>
<p>Adjust the app code to <a href="https://learn.microsoft.com/en-us/aspnet/core/security/data-protection/configuration/overview?view=aspnetcore-9.0" data-linktype="relative-path">use the file system as a key ring store</a>. Use an X509 certificate to protect the key ring and ensure the certificate is a trusted certificate. If the certificate is self-signed, place the certificate in the Trusted Root store.</p>
<p>When using IIS in a web farm:</p>
<ul>
<li>Use a file share that all machines can access.</li>
<li>Deploy an X509 certificate to each machine. Configure <a href="https://learn.microsoft.com/en-us/aspnet/core/security/data-protection/configuration/overview?view=aspnetcore-9.0" data-linktype="relative-path">data protection in code</a>.</li>
</ul>
</li>
<li><p><strong>Set a machine-wide policy for data protection</strong></p>
<p>The data protection system has limited support for setting a default <a href="https://learn.microsoft.com/en-us/aspnet/core/security/data-protection/configuration/machine-wide-policy?view=aspnetcore-9.0" data-linktype="relative-path">machine-wide policy</a> for all apps that consume the Data Protection APIs. For more information, see <a href="../../security/data-protection/introduction553c.html?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Data Protection Overview</a>.</p>
</li>
</ul>
<h2 id="virtual-directories-1">Virtual Directories</h2>
<p><a href="https://learn.microsoft.com/en-us/iis/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis#virtual-directories" data-linktype="absolute-path">IIS Virtual Directories</a> aren't supported with ASP.NET Core apps. An app can be hosted as a <a href="#sub-applications" data-linktype="self-bookmark">sub-application</a>.</p>
<h2 id="sub-applications-1">Sub-applications</h2>
<p>An ASP.NET Core app can be hosted as an <a href="https://learn.microsoft.com/en-us/iis/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis#applications" data-linktype="absolute-path">IIS sub-application (sub-app)</a>. The sub-app's path becomes part of the root app's URL.</p>
<p>A sub-app shouldn't include the ASP.NET Core Module as a handler. If the module is added as a handler in a sub-app's <em>web.config</em> file, a <em>500.19 Internal Server Error</em> referencing the faulty config file is received when attempting to browse the sub-app.</p>
<p>The following example shows a published <em>web.config</em> file for an ASP.NET Core sub-app:</p>
<pre><code class="lang-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;configuration&gt;
  &lt;system.webServer&gt;
    &lt;aspNetCore processPath="dotnet" 
      arguments=".\MyApp.dll" 
      stdoutLogEnabled="false" 
      stdoutLogFile=".\logs\stdout" /&gt;
  &lt;/system.webServer&gt;
&lt;/configuration&gt;
</code></pre>
<p>When hosting a non-ASP.NET Core sub-app underneath an ASP.NET Core app, explicitly remove the inherited handler in the sub-app's <em>web.config</em> file:</p>
<pre><code class="lang-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;configuration&gt;
  &lt;system.webServer&gt;
    &lt;handlers&gt;
      &lt;remove name="aspNetCore" /&gt;
    &lt;/handlers&gt;
    &lt;aspNetCore processPath="dotnet" 
      arguments=".\MyApp.dll" 
      stdoutLogEnabled="false" 
      stdoutLogFile=".\logs\stdout" /&gt;
  &lt;/system.webServer&gt;
&lt;/configuration&gt;
</code></pre>
<p>Static asset links within the sub-app should use tilde-slash (<code>~/</code>) notation. Tilde-slash notation triggers a <a href="https://learn.microsoft.com/en-us/aspnet/core/mvc/views/tag-helpers/intro?view=aspnetcore-9.0" data-linktype="relative-path">Tag Helper</a> to prepend the sub-app's pathbase to the rendered relative link. For a sub-app at <code>/subapp_path</code>, an image linked with <code>src="~/image.png"</code> is rendered as <code>src="/subapp_path/image.png"</code>. The root app's Static File Middleware doesn't process the static file request. The request is processed by the sub-app's Static File Middleware.</p>
<p>If a static asset's <code>src</code> attribute is set to an absolute path (for example, <code>src="/image.png"</code>), the link is rendered without the sub-app's pathbase. The root app's Static File Middleware attempts to serve the asset from the root app's <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/?view=aspnetcore-9.0#web-root" data-linktype="relative-path">web root</a>, which results in a <em>404 - Not Found</em> response unless the static asset is available from the root app.</p>
<p>To host an ASP.NET Core app as a sub-app under another ASP.NET Core app:</p>
<ol>
<li><p>Establish an app pool for the sub-app. Set the <strong>.NET CLR Version</strong> to <strong>No Managed Code</strong> because the Core Common Language Runtime (CoreCLR) for .NET is booted to host the app in the worker process, not the desktop CLR (.NET CLR).</p>
</li>
<li><p>Add the root site in IIS Manager with the sub-app in a folder under the root site.</p>
</li>
<li><p>Right-click the sub-app folder in IIS Manager and select <strong>Convert to Application</strong>.</p>
</li>
<li><p>In the <strong>Add Application</strong> dialog, use the <strong>Select</strong> button for the <strong>Application Pool</strong> to assign the app pool that you created for the sub-app. Select <strong>OK</strong>.</p>
</li>
</ol>
<p>The assignment of a separate app pool to the sub-app is a requirement when using the in-process hosting model.</p>
<p>For more information on the in-process hosting model and configuring the ASP.NET Core Module, see <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Module (ANCM) for IIS</a>.</p>
<h2 id="configuration-of-iis-with-webconfig-1">Configuration of IIS with web.config</h2>
<p>IIS configuration is influenced by the <code>&lt;system.webServer&gt;</code> section of <em>web.config</em> for IIS scenarios that are functional for ASP.NET Core apps with the ASP.NET Core Module. For example, IIS configuration is functional for dynamic compression. If IIS is configured at the server level to use dynamic compression, the <code>&lt;urlCompression&gt;</code> element in the app's <em>web.config</em> file can disable it for an ASP.NET Core app.</p>
<p>For more information, see the following topics:</p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/iis/configuration/system.webServer/" data-linktype="absolute-path">Configuration reference for &lt;system.webServer&gt;</a></li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Module (ANCM) for IIS</a></li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/modules?view=aspnetcore-9.0" data-linktype="relative-path">IIS modules with ASP.NET Core</a></li>
</ul>
<p>To set environment variables for individual apps running in isolated app pools (supported for IIS 10.0 or later), see the <em>AppCmd.exe command</em> section of the <a href="https://learn.microsoft.com/en-us/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe" data-linktype="absolute-path">Environment Variables &lt;environmentVariables&gt;</a> topic in the IIS reference documentation.</p>
<h3 id="sections-that-arent-used-by-aspnet-core-1">Sections that aren't used by ASP.NET Core</h3>
<p>Configuration sections of ASP.NET 4.x apps in <em>web.config</em> aren't used by ASP.NET Core apps for configuration:</p>
<ul>
<li><code>&lt;system.web&gt;</code></li>
<li><code>&lt;appSettings&gt;</code></li>
<li><code>&lt;connectionStrings&gt;</code></li>
<li><code>&lt;location&gt;</code></li>
</ul>
<p>ASP.NET Core apps are configured using other configuration providers. For more information, see <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/configuration/?view=aspnetcore-9.0" data-linktype="relative-path">Configuration</a>.</p>
<h2 id="application-pools-1">Application Pools</h2>
<p>When hosting multiple websites on a server, we recommend isolating the apps from each other by running each app in its own app pool. The IIS <strong>Add Website</strong> dialog defaults to this configuration. When a <strong>Site name</strong> is provided, the text is automatically transferred to the <strong>Application pool</strong> textbox. A new app pool is created using the site name when the site is added.</p>
<h2 id="application-pool-identity-1">Application Pool Identity</h2>
<p>An app pool identity account allows an app to run under a unique account without having to create and manage domains or local accounts. On IIS 8.0 or later, the IIS Admin Worker Process (WAS) creates a virtual account with the name of the new app pool and runs the app pool's worker processes under this account by default. In the IIS Management Console under <strong>Advanced Settings</strong> for the app pool, ensure that the <strong>Identity</strong> is set to use <strong>ApplicationPoolIdentity</strong>:</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/index/_static/apppool-identity.png?view=aspnetcore-9.0" alt="Application pool advanced settings dialog" data-linktype="relative-path"></p>
<p>The IIS management process creates a secure identifier with the name of the app pool in the Windows Security System. Resources can be secured using this identity. However, this identity isn't a real user account and doesn't show up in the Windows User Management Console.</p>
<p>If the IIS worker process requires elevated access to the app, modify the Access Control List (ACL) for the directory containing the app:</p>
<ol>
<li><p>Open Windows Explorer and navigate to the directory.</p>
</li>
<li><p>Right-click on the directory and select <strong>Properties</strong>.</p>
</li>
<li><p>Under the <strong>Security</strong> tab, select the <strong>Edit</strong> button and then the <strong>Add</strong> button.</p>
</li>
<li><p>Select the <strong>Locations</strong> button and make sure the system is selected.</p>
</li>
<li><p>Enter <strong>IIS AppPool\&lt;app_pool_name&gt;</strong> in <strong>Enter the object names to select</strong> area. Select the <strong>Check Names</strong> button. For the <em>DefaultAppPool</em> check the names using <strong>IIS AppPool\DefaultAppPool</strong>. When the <strong>Check Names</strong> button is selected, a value of <strong>DefaultAppPool</strong> is indicated in the object names area. It isn't possible to enter the app pool name directly into the object names area. Use the <strong>IIS AppPool\&lt;app_pool_name&gt;</strong> format when checking for the object name.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/index/_static/select-users-or-groups-1.png?view=aspnetcore-9.0" alt="Select users or groups dialog for the app folder: The app pool name of &quot;DefaultAppPool&quot; is appended to &quot;IIS AppPool&quot; in the object names area before selecting &quot;Check Names.&quot;" data-linktype="relative-path"></p>
</li>
<li><p>Select <strong>OK</strong>.</p>
<p><img src="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/index/_static/select-users-or-groups-2.png?view=aspnetcore-9.0" alt="Select users or groups dialog for the app folder: After selecting &quot;Check Names,&quot; the object name &quot;DefaultAppPool&quot; is shown in the object names area." data-linktype="relative-path"></p>
</li>
<li><p>Read &amp; execute permissions should be granted by default. Provide additional permissions as needed.</p>
</li>
</ol>
<p>Access can also be granted at a command prompt using the <strong>ICACLS</strong> tool. Using the <em>DefaultAppPool</em> as an example, the following command is used:</p>
<pre><code class="lang-console">ICACLS C:\sites\MyWebApp /grant "IIS AppPool\DefaultAppPool":F
</code></pre>
<p>For more information, see the <a href="https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/icacls" data-linktype="absolute-path">icacls</a> topic.</p>
<h2 id="http2-support-1">HTTP/2 support</h2>
<p><a href="https://httpwg.org/specs/rfc7540.html" data-linktype="external">HTTP/2</a> is supported for out-of-process deployments that meet the following base requirements:</p>
<ul>
<li>Windows Server 2016/Windows 10 or later; IIS 10 or later</li>
<li>Public-facing edge server connections use HTTP/2, but the reverse proxy connection to the <a href="../../fundamentals/servers/kestrel553c.html?view=aspnetcore-9.0" data-linktype="relative-path">Kestrel server</a> uses HTTP/1.1.</li>
<li>Target framework: Not applicable to out-of-process deployments, since the HTTP/2 connection is handled entirely by IIS.</li>
<li>TLS 1.2 or later connection</li>
</ul>
<p>If an HTTP/2 connection is established, <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.http.httprequest.protocol" data-linktype="absolute-path">HttpRequest.Protocol</a> reports <code>HTTP/1.1</code>.</p>
<p>HTTP/2 is enabled by default. Connections fall back to HTTP/1.1 if an HTTP/2 connection isn't established. For more information on HTTP/2 configuration with IIS deployments, see <a href="https://learn.microsoft.com/en-us/iis/get-started/whats-new-in-iis-10/http2-on-iis" data-linktype="absolute-path">HTTP/2 on IIS</a>.</p>
<h2 id="cors-preflight-requests-1">CORS preflight requests</h2>
<p><em>This section only applies to ASP.NET Core apps that target the .NET Framework.</em></p>
<p>For an ASP.NET Core app that targets the .NET Framework, OPTIONS requests aren't passed to the app by default in IIS. To learn how to configure the app's IIS handlers in <em>web.config</em> to pass OPTIONS requests, see <a href="https://learn.microsoft.com/en-us/aspnet/web-api/overview/security/enabling-cross-origin-requests-in-web-api#how-cors-works" data-linktype="absolute-path">Enable cross-origin requests in ASP.NET Web API 2: How CORS Works</a>.</p>
<h2 id="deployment-resources-for-iis-administrators-2">Deployment resources for IIS administrators</h2>
<ul>
<li><a href="https://learn.microsoft.com/en-us/iis" data-linktype="absolute-path">IIS documentation</a></li>
<li><a href="https://learn.microsoft.com/en-us/iis/get-started/getting-started-with-iis/getting-started-with-the-iis-manager-in-iis-7-and-iis-8" data-linktype="absolute-path">Getting Started with the IIS Manager in IIS</a></li>
<li><a href="https://learn.microsoft.com/en-us/dotnet/core/deploying/" data-linktype="absolute-path">.NET application deployment</a></li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core Module (ANCM) for IIS</a></li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/directory-structure?view=aspnetcore-9.0" data-linktype="relative-path">ASP.NET Core directory structure</a></li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/modules?view=aspnetcore-9.0" data-linktype="relative-path">IIS modules with ASP.NET Core</a></li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/test/troubleshoot-azure-iis?view=aspnetcore-9.0" data-linktype="relative-path">Troubleshoot ASP.NET Core on Azure App Service and IIS</a></li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/azure-iis-errors-reference?view=aspnetcore-9.0" data-linktype="relative-path">Common error troubleshooting for Azure App Service and IIS with ASP.NET Core</a></li>
</ul>
<h2 id="additional-resources-2">Additional resources</h2>
<ul>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/tutorials/publish-to-iis?view=aspnetcore-9.0" data-linktype="relative-path">Publish an ASP.NET Core app to IIS</a></li>
<li><a href="../../test/troubleshoot553c.html?view=aspnetcore-9.0" data-linktype="relative-path">Troubleshoot and debug ASP.NET Core projects</a></li>
<li><a href="../../overview553c.html?view=aspnetcore-9.0" data-linktype="relative-path">Overview of ASP.NET Core</a></li>
<li><a href="https://www.iis.net/" data-linktype="external">The Official Microsoft IIS Site</a></li>
<li><a href="https://learn.microsoft.com/en-us/windows-server/windows-server" data-linktype="absolute-path">Windows Server technical content library</a></li>
<li><a href="https://learn.microsoft.com/en-us/iis/get-started/whats-new-in-iis-10/http2-on-iis" data-linktype="absolute-path">HTTP/2 on IIS</a></li>
<li><a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/transform-webconfig?view=aspnetcore-9.0" data-linktype="relative-path">Transform web.config</a></li>
</ul>
</div>
</div>
					
		<div
			id="ms--inline-notifications"
			class="margin-block-xs"
			data-bi-name="inline-notification"
		></div>
	 
		<div
			id="assertive-live-region"
			role="alert"
			aria-live="assertive"
			class="visually-hidden"
			aria-relevant="additions"
			aria-atomic="true"
		></div>
		<div
			id="polite-live-region"
			role="status"
			aria-live="polite"
			class="visually-hidden"
			aria-relevant="additions"
			aria-atomic="true"
		></div>
	
					
			
		<!-- feedback section -->
		<section
			class="feedback-section position-relative margin-top-lg border border-radius padding-xxs display-none-print"
			data-bi-name="open-source-feedback-section"
			data-open-source-feedback-section
			hidden
		>
			<div class="display-flex flex-direction-column flex-direction-row-tablet">
				<div
					class="width-450-tablet padding-inline-xs padding-inline-xs-tablet padding-top-xs padding-bottom-sm padding-top-xs-tablet background-color-body-medium"
				>
					<div class="display-flex flex-direction-column">
						<div class="padding-bottom-xxs">
							<span class="icon margin-right-xxs" aria-hidden="true">
								<span class="docon docon-brand-github"></span>
							</span>
							<span class="font-weight-semibold">
								Collaborate with us on GitHub
							</span>
						</div>
						<span class="line-height-normal">
							The source for this content can be found on GitHub, where you can also create and review issues and pull requests. For more information, see <a href="https://learn.microsoft.com/contribute/content/dotnet/dotnet-contribute">our contributor guide</a>.
						</span>
					</div>
				</div>
				<div
					class="display-flex gap-xs width-full-tablet flex-direction-column padding-xs justify-content-space-evenly"
				>
					<div class="media">
						
					<div class="media-left">
						<div class="image image-36x36" hidden data-open-source-image-container>
							<img
								class="theme-display is-light"
								src="https://learn.microsoft.com/media/logos/logo_net.svg"
								aria-hidden="true"
								data-open-source-image-light
							/>
							<img
								class="theme-display is-dark is-high-contrast"
								src="https://learn.microsoft.com/media/logos/logo_net.svg"
								aria-hidden="true"
								data-open-source-image-dark
							/>
						</div>
					</div>
			  

						<div class="media-content">
							<p
								class="font-size-xl font-weight-semibold margin-bottom-xxs"
								data-open-source-product-title
							>
								ASP.NET Core
							</p>
							<div class="display-flex gap-xs flex-direction-column">
								<p class="line-height-normal" data-open-source-product-description></p>
								<div class="display-flex gap-xs flex-direction-column">
									<a href="#" data-github-link>
										<span class="icon margin-right-xxs" aria-hidden="true">
											<span class="docon docon-bug"></span>
										</span>
										<span>Open a documentation issue</span>
									</a>
									<a
										href="https://github.com/dotnet/aspnetcore/blob/main/CONTRIBUTING.md"
										class="display-block margin-top-auto font-size-md"
										data-feedback-product-url
									>
										<span class="icon margin-right-xxs" aria-hidden="true">
											<span class="docon docon-feedback"></span>
										</span>
										<span>Provide product feedback</span>
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<!-- end feedback section -->
	
			
		<!-- feedback section -->
		<section
			id="site-user-feedback-footer"
			class="font-size-sm margin-top-md display-none-print display-none-desktop"
			data-test-id="site-user-feedback-footer"
			data-bi-name="site-feedback-section"
		>
			<hr class="hr" />
			<h2 id="ms--feedback" class="title is-3">Feedback</h2>
			<div class="display-flex flex-wrap-wrap align-items-center">
				<p class="font-weight-semibold margin-xxs margin-left-none">
					Was this page helpful?
				</p>
				<div class="buttons">
					<button
						class="thumb-rating-button like button button-primary button-sm"
						data-test-id="footer-rating-yes"
						data-binary-rating-response="rating-yes"
						type="button"
						title="This article is helpful"
						data-bi-name="button-rating-yes"
						aria-pressed="false"
					>
						<span class="icon" aria-hidden="true">
							<span class="docon docon-like"></span>
						</span>
						<span>Yes</span>
					</button>
					<button
						class="thumb-rating-button dislike button button-primary button-sm"
						data-test-id="footer-rating-no"
						data-binary-rating-response="rating-no"
						type="button"
						title="This article is not helpful"
						data-bi-name="button-rating-no"
						aria-pressed="false"
					>
						<span class="icon" aria-hidden="true">
							<span class="docon docon-dislike"></span>
						</span>
						<span>No</span>
					</button>
				</div>
			</div>
		</section>
		<!-- end feedback section -->
	
		
				</div>
				
		<div id="ms--additional-resources-mobile" class="display-none-print">
			<hr class="hr" hidden />
			<h2 id="ms--additional-resources-mobile-heading" class="title is-3" hidden>
				Additional resources
			</h2>
			
		<section
			id="right-rail-recommendations-mobile"
			class=""
			data-bi-name="recommendations"
			hidden
		></section>
	 
		<section
			id="right-rail-training-mobile"
			class=""
			data-bi-name="learning-resource-card"
			hidden
		></section>
	 
		<section
			id="right-rail-events-mobile"
			class=""
			data-bi-name="events-card"
			hidden
		></section>
	 
		<section
			id="right-rail-qna-mobile"
			class="margin-top-xxs"
			data-bi-name="qna-link-card"
			hidden
		></section>
	
		</div>
	
			</div>
			
		<div
			id="action-panel"
			role="region"
			aria-label="Action Panel"
			class="action-panel"
			tabindex="-1"
		></div>
	
		
				</main>
				<aside
					id="layout-body-aside"
					class="layout-body-aside "
					data-bi-name="aside"
			  >
					
		<div
			id="ms--additional-resources"
			class="right-container padding-sm display-none display-block-desktop height-full"
			data-bi-name="pageactions"
			role="complementary"
			aria-label="Additional resources"
		>
			<div id="affixed-right-container" data-bi-name="right-column">
				
		<nav
			id="side-doc-outline"
			class="doc-outline border-bottom padding-bottom-xs margin-bottom-xs"
			data-bi-name="intopic toc"
			aria-label="In this article"
		>
			<h3>In this article</h3>
		</nav>
	
				<!-- Feedback -->
				
		<section
			id="ms--site-user-feedback-right-rail"
			class="font-size-sm display-none-print"
			data-test-id="site-user-feedback-right-rail"
			data-bi-name="site-feedback-right-rail"
		>
			<p class="font-weight-semibold margin-bottom-xs">Was this page helpful?</p>
			<div class="buttons">
				<button
					class="thumb-rating-button like button button-primary button-sm"
					data-test-id="right-rail-rating-yes"
					data-binary-rating-response="rating-yes"
					type="button"
					title="This article is helpful"
					data-bi-name="button-rating-yes"
					aria-pressed="false"
				>
					<span class="icon" aria-hidden="true">
						<span class="docon docon-like"></span>
					</span>
					<span>Yes</span>
				</button>
				<button
					class="thumb-rating-button dislike button button-primary button-sm"
					data-test-id="right-rail-rating-no"
					data-binary-rating-response="rating-no"
					type="button"
					title="This article is not helpful"
					data-bi-name="button-rating-no"
					aria-pressed="false"
				>
					<span class="icon" aria-hidden="true">
						<span class="docon docon-dislike"></span>
					</span>
					<span>No</span>
				</button>
			</div>
		</section>
	
			</div>
		</div>
	
			  </aside> <section
					id="layout-body-flyout"
					class="layout-body-flyout "
					data-bi-name="flyout"
			  >
					 <div
	class="height-full border-left background-color-body-medium"
	id="ask-learn-flyout"
></div>
			  </section> <div class="layout-body-footer " data-bi-name="layout-footer">
		<footer
			id="footer"
			data-test-id="footer"
			data-bi-name="footer"
			class="footer-layout has-padding has-default-focus border-top  uhf-container"
			role="contentinfo"
		>
			<div class="display-flex gap-xs flex-wrap-wrap is-full-height padding-right-lg-desktop">
				
		<a
			data-mscc-ic="false"
			href="#"
			data-bi-name="select-locale"
			class="locale-selector-link flex-shrink-0 button button-sm button-clear external-link-indicator"
			id=""
			title=""
			><span class="icon" aria-hidden="true"
				><span class="docon docon-world"></span></span
			><span class="local-selector-link-text">en-us</span></a
		>
	
				<div class="ccpa-privacy-link" data-ccpa-privacy-link hidden>
		
		<a
			data-mscc-ic="false"
			href="https://aka.ms/yourcaliforniaprivacychoices"
			data-bi-name="your-privacy-choices"
			class="button button-sm button-clear flex-shrink-0 external-link-indicator"
			id=""
			title=""
			>
		<svg
			xmlns="http://www.w3.org/2000/svg"
			viewBox="0 0 30 14"
			xml:space="preserve"
			height="16"
			width="43"
			aria-hidden="true"
			focusable="false"
		>
			<path
				d="M7.4 12.8h6.8l3.1-11.6H7.4C4.2 1.2 1.6 3.8 1.6 7s2.6 5.8 5.8 5.8z"
				style="fill-rule:evenodd;clip-rule:evenodd;fill:#fff"
			></path>
			<path
				d="M22.6 0H7.4c-3.9 0-7 3.1-7 7s3.1 7 7 7h15.2c3.9 0 7-3.1 7-7s-3.2-7-7-7zm-21 7c0-3.2 2.6-5.8 5.8-5.8h9.9l-3.1 11.6H7.4c-3.2 0-5.8-2.6-5.8-5.8z"
				style="fill-rule:evenodd;clip-rule:evenodd;fill:#06f"
			></path>
			<path
				d="M24.6 4c.2.2.2.6 0 .8L22.5 7l2.2 2.2c.2.2.2.6 0 .8-.2.2-.6.2-.8 0l-2.2-2.2-2.2 2.2c-.2.2-.6.2-.8 0-.2-.2-.2-.6 0-.8L20.8 7l-2.2-2.2c-.2-.2-.2-.6 0-.8.2-.2.6-.2.8 0l2.2 2.2L23.8 4c.2-.2.6-.2.8 0z"
				style="fill:#fff"
			></path>
			<path
				d="M12.7 4.1c.2.2.3.6.1.8L8.6 9.8c-.1.1-.2.2-.3.2-.2.1-.5.1-.7-.1L5.4 7.7c-.2-.2-.2-.6 0-.8.2-.2.6-.2.8 0L8 8.6l3.8-4.5c.2-.2.6-.2.9 0z"
				style="fill:#06f"
			></path>
		</svg>
	
			<span>Your Privacy Choices</span></a
		>
	
	</div>
				<div class="flex-shrink-0">
		<div class="dropdown has-caret-up">
			<button
				data-test-id="theme-selector-button"
				class="dropdown-trigger button button-clear button-sm has-inner-focus theme-dropdown-trigger"
				aria-controls="{{ themeMenuId }}"
				aria-expanded="false"
				title="Theme"
				data-bi-name="theme"
			>
				<span class="icon">
					<span class="docon docon-sun" aria-hidden="true"></span>
				</span>
				<span>Theme</span>
				<span class="icon expanded-indicator" aria-hidden="true">
					<span class="docon docon-chevron-down-light"></span>
				</span>
			</button>
			<div class="dropdown-menu" id="{{ themeMenuId }}" role="menu">
				<ul class="theme-selector padding-xxs" data-test-id="theme-dropdown-menu">
					<li class="theme display-block">
						<button
							class="button button-clear button-sm theme-control button-block justify-content-flex-start text-align-left"
							data-theme-to="light"
						>
							<span class="theme-light margin-right-xxs">
								<span
									class="theme-selector-icon border display-inline-block has-body-background"
									aria-hidden="true"
								>
									<svg class="svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 14">
										<rect width="22" height="14" class="has-fill-body-background" />
										<rect x="5" y="5" width="12" height="4" class="has-fill-secondary" />
										<rect x="5" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="8" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="11" y="2" width="3" height="1" class="has-fill-secondary" />
										<rect x="1" y="1" width="2" height="2" class="has-fill-secondary" />
										<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary" />
										<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary" />
									</svg>
								</span>
							</span>
							<span role="menuitem"> Light </span>
						</button>
					</li>
					<li class="theme display-block">
						<button
							class="button button-clear button-sm theme-control button-block justify-content-flex-start text-align-left"
							data-theme-to="dark"
						>
							<span class="theme-dark margin-right-xxs">
								<span
									class="border theme-selector-icon display-inline-block has-body-background"
									aria-hidden="true"
								>
									<svg class="svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 14">
										<rect width="22" height="14" class="has-fill-body-background" />
										<rect x="5" y="5" width="12" height="4" class="has-fill-secondary" />
										<rect x="5" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="8" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="11" y="2" width="3" height="1" class="has-fill-secondary" />
										<rect x="1" y="1" width="2" height="2" class="has-fill-secondary" />
										<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary" />
										<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary" />
									</svg>
								</span>
							</span>
							<span role="menuitem"> Dark </span>
						</button>
					</li>
					<li class="theme display-block">
						<button
							class="button button-clear button-sm theme-control button-block justify-content-flex-start text-align-left"
							data-theme-to="high-contrast"
						>
							<span class="theme-high-contrast margin-right-xxs">
								<span
									class="border theme-selector-icon display-inline-block has-body-background"
									aria-hidden="true"
								>
									<svg class="svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 14">
										<rect width="22" height="14" class="has-fill-body-background" />
										<rect x="5" y="5" width="12" height="4" class="has-fill-secondary" />
										<rect x="5" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="8" y="2" width="2" height="1" class="has-fill-secondary" />
										<rect x="11" y="2" width="3" height="1" class="has-fill-secondary" />
										<rect x="1" y="1" width="2" height="2" class="has-fill-secondary" />
										<rect x="5" y="10" width="7" height="2" rx="0.3" class="has-fill-primary" />
										<rect x="19" y="1" width="2" height="2" rx="1" class="has-fill-secondary" />
									</svg>
								</span>
							</span>
							<span role="menuitem"> High contrast </span>
						</button>
					</li>
				</ul>
			</div>
		</div>
	</div>
			</div>
			<ul class="links" data-bi-name="footerlinks">
				<li class="manage-cookies-holder" hidden=""></li>
				<li>
		
		<a
			data-mscc-ic="false"
			href="https://learn.microsoft.com/en-us/principles-for-ai-generated-content"
			data-bi-name="aiDisclaimer"
			class=" external-link-indicator"
			id=""
			title=""
			>AI Disclaimer</a
		>
	
	</li><li>
		
		<a
			data-mscc-ic="false"
			href="https://learn.microsoft.com/en-us/previous-versions/"
			data-bi-name="archivelink"
			class=" external-link-indicator"
			id=""
			title=""
			>Previous Versions</a
		>
	
	</li> <li>
		
		<a
			data-mscc-ic="false"
			href="https://techcommunity.microsoft.com/t5/microsoft-learn-blog/bg-p/MicrosoftLearnBlog"
			data-bi-name="bloglink"
			class=" external-link-indicator"
			id=""
			title=""
			>Blog</a
		>
	
	</li> <li>
		
		<a
			data-mscc-ic="false"
			href="https://learn.microsoft.com/en-us/contribute"
			data-bi-name="contributorGuide"
			class=" external-link-indicator"
			id=""
			title=""
			>Contribute</a
		>
	
	</li><li>
		
		<a
			data-mscc-ic="false"
			href="https://go.microsoft.com/fwlink/?LinkId=521839"
			data-bi-name="privacy"
			class=" external-link-indicator"
			id=""
			title=""
			>Privacy</a
		>
	
	</li><li>
		
		<a
			data-mscc-ic="false"
			href="https://learn.microsoft.com/en-us/legal/termsofuse"
			data-bi-name="termsofuse"
			class=" external-link-indicator"
			id=""
			title=""
			>Terms of Use</a
		>
	
	</li><li>
		
		<a
			data-mscc-ic="false"
			href="https://www.microsoft.com/legal/intellectualproperty/Trademarks/"
			data-bi-name="trademarks"
			class=" external-link-indicator"
			id=""
			title=""
			>Trademarks</a
		>
	
	</li>
				<li>&copy; Microsoft 2025</li>
			</ul>
		</footer>
	</footer>
			</body>
		
<!-- Mirrored from learn.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/?view=aspnetcore-9.0 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Aug 2025 14:53:03 GMT -->
</html>