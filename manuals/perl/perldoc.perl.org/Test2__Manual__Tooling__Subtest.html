<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from perldoc.perl.org/Test2::Manual::Tooling::Subtest by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Aug 2025 16:20:53 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Test2::Manual::Tooling::Subtest - How to implement a tool that makes use of subtests. - Perldoc Browser</title>
    <link rel="search" href="opensearch.xml" type="application/opensearchdescription+xml" title="Perldoc Browser">
    <link rel="canonical" href="Test2__Manual__Tooling__Subtest.html">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/stackoverflow-light.min.css" rel="stylesheet">
    <link href="css/perldoc.css" rel="stylesheet">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-KVNWBNT5FB"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-KVNWBNT5FB');
      gtag('config', 'UA-50555-3');
    </script>
  </head>
  <body>
    <nav class="navbar navbar-expand-md bg-dark" data-bs-theme="dark"><div class="container-fluid">
  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <a class="navbar-brand" href="index.html"><img src="images/perl_camel_30.png" width="30" height="30" class="d-inline-block align-text-top" alt="Perl Camel Logo"> Perldoc Browser</a>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav me-auto">
      <li class="nav-item dropdown text-nowrap">
        <a class="nav-link dropdown-toggle" href="#" id="dropdownlink-stable" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">5.42.0</a>
        <div class="dropdown-menu" aria-labelledby="dropdownlink-stable">
          <a class="dropdown-item" href="Test2__Manual__Tooling__Subtest.html">Latest</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item active" href="https://perldoc.perl.org/5.42.0/Test2::Manual::Tooling::Subtest">5.42.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.3/Test2::Manual::Tooling::Subtest">5.40.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.2/Test2::Manual::Tooling::Subtest">5.40.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.1/Test2::Manual::Tooling::Subtest">5.40.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.0/Test2::Manual::Tooling::Subtest">5.40.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.5/Test2::Manual::Tooling::Subtest">5.38.5</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.4/Test2::Manual::Tooling::Subtest">5.38.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.3/Test2::Manual::Tooling::Subtest">5.38.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.2/Test2::Manual::Tooling::Subtest">5.38.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.1/Test2::Manual::Tooling::Subtest">5.38.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.0/Test2::Manual::Tooling::Subtest">5.38.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.36.3/Test2::Manual::Tooling::Subtest">5.36.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.36.2/Test2::Manual::Tooling::Subtest">5.36.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.36.1/Test2::Manual::Tooling::Subtest">5.36.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.36.0/Test2::Manual::Tooling::Subtest">5.36.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.34.3/Test2::Manual::Tooling::Subtest">5.34.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.34.2/Test2::Manual::Tooling::Subtest">5.34.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.34.1/Test2::Manual::Tooling::Subtest">5.34.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.34.0/Test2::Manual::Tooling::Subtest">5.34.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.32.1/Test2::Manual::Tooling::Subtest">5.32.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.32.0/Test2::Manual::Tooling::Subtest">5.32.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.30.3/Test2::Manual::Tooling::Subtest">5.30.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.30.2/Test2::Manual::Tooling::Subtest">5.30.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.30.1/Test2::Manual::Tooling::Subtest">5.30.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.30.0/Test2::Manual::Tooling::Subtest">5.30.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.28.3/Test2::Manual::Tooling::Subtest">5.28.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.28.2/Test2::Manual::Tooling::Subtest">5.28.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.28.1/Test2::Manual::Tooling::Subtest">5.28.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.28.0/Test2::Manual::Tooling::Subtest">5.28.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.26.3/Test2::Manual::Tooling::Subtest">5.26.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.26.2/Test2::Manual::Tooling::Subtest">5.26.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.26.1/Test2::Manual::Tooling::Subtest">5.26.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.26.0/Test2::Manual::Tooling::Subtest">5.26.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.4/Test2::Manual::Tooling::Subtest">5.24.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.3/Test2::Manual::Tooling::Subtest">5.24.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.2/Test2::Manual::Tooling::Subtest">5.24.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.1/Test2::Manual::Tooling::Subtest">5.24.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.0/Test2::Manual::Tooling::Subtest">5.24.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.4/Test2::Manual::Tooling::Subtest">5.22.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.3/Test2::Manual::Tooling::Subtest">5.22.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.2/Test2::Manual::Tooling::Subtest">5.22.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.1/Test2::Manual::Tooling::Subtest">5.22.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.0/Test2::Manual::Tooling::Subtest">5.22.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.20.3/Test2::Manual::Tooling::Subtest">5.20.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.20.2/Test2::Manual::Tooling::Subtest">5.20.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.20.1/Test2::Manual::Tooling::Subtest">5.20.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.20.0/Test2::Manual::Tooling::Subtest">5.20.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.4/Test2::Manual::Tooling::Subtest">5.18.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.3/Test2::Manual::Tooling::Subtest">5.18.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.2/Test2::Manual::Tooling::Subtest">5.18.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.1/Test2::Manual::Tooling::Subtest">5.18.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.0/Test2::Manual::Tooling::Subtest">5.18.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.16.3/Test2::Manual::Tooling::Subtest">5.16.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.16.2/Test2::Manual::Tooling::Subtest">5.16.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.16.1/Test2::Manual::Tooling::Subtest">5.16.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.16.0/Test2::Manual::Tooling::Subtest">5.16.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.4/Test2::Manual::Tooling::Subtest">5.14.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.3/Test2::Manual::Tooling::Subtest">5.14.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.2/Test2::Manual::Tooling::Subtest">5.14.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.1/Test2::Manual::Tooling::Subtest">5.14.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.0/Test2::Manual::Tooling::Subtest">5.14.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.5/Test2::Manual::Tooling::Subtest">5.12.5</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.4/Test2::Manual::Tooling::Subtest">5.12.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.3/Test2::Manual::Tooling::Subtest">5.12.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.2/Test2::Manual::Tooling::Subtest">5.12.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.1/Test2::Manual::Tooling::Subtest">5.12.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.0/Test2::Manual::Tooling::Subtest">5.12.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.10.1/Test2::Manual::Tooling::Subtest">5.10.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.10.0/Test2::Manual::Tooling::Subtest">5.10.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.9/Test2::Manual::Tooling::Subtest">5.8.9</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.8/Test2::Manual::Tooling::Subtest">5.8.8</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.7/Test2::Manual::Tooling::Subtest">5.8.7</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.6/Test2::Manual::Tooling::Subtest">5.8.6</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.5/Test2::Manual::Tooling::Subtest">5.8.5</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.4/Test2::Manual::Tooling::Subtest">5.8.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.3/Test2::Manual::Tooling::Subtest">5.8.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.2/Test2::Manual::Tooling::Subtest">5.8.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.1/Test2::Manual::Tooling::Subtest">5.8.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.0/Test2::Manual::Tooling::Subtest">5.8.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.6.2/Test2::Manual::Tooling::Subtest">5.6.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.6.1/Test2::Manual::Tooling::Subtest">5.6.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.6.0/Test2::Manual::Tooling::Subtest">5.6.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005_04/Test2::Manual::Tooling::Subtest">5.005_04</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005_03/Test2::Manual::Tooling::Subtest">5.005_03</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005_02/Test2::Manual::Tooling::Subtest">5.005_02</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005_01/Test2::Manual::Tooling::Subtest">5.005_01</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005/Test2::Manual::Tooling::Subtest">5.005</a>
        </div>
      </li>
      <li class="nav-item dropdown text-nowrap">
        <a class="nav-link dropdown-toggle" href="#" id="dropdownlink-dev" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Dev</a>
        <div class="dropdown-menu" aria-labelledby="dropdownlink-dev">
          <a class="dropdown-item" href="https://perldoc.perl.org/blead/Test2::Manual::Tooling::Subtest">blead</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.43.1/Test2::Manual::Tooling::Subtest">5.43.1</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.42.0-RC3/Test2::Manual::Tooling::Subtest">5.42.0-RC3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.42.0-RC2/Test2::Manual::Tooling::Subtest">5.42.0-RC2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.42.0-RC1/Test2::Manual::Tooling::Subtest">5.42.0-RC1</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.13/Test2::Manual::Tooling::Subtest">5.41.13</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.12/Test2::Manual::Tooling::Subtest">5.41.12</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.11/Test2::Manual::Tooling::Subtest">5.41.11</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.10/Test2::Manual::Tooling::Subtest">5.41.10</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.9/Test2::Manual::Tooling::Subtest">5.41.9</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.8/Test2::Manual::Tooling::Subtest">5.41.8</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.7/Test2::Manual::Tooling::Subtest">5.41.7</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.6/Test2::Manual::Tooling::Subtest">5.41.6</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.5/Test2::Manual::Tooling::Subtest">5.41.5</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.4/Test2::Manual::Tooling::Subtest">5.41.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.3/Test2::Manual::Tooling::Subtest">5.41.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.2/Test2::Manual::Tooling::Subtest">5.41.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.1/Test2::Manual::Tooling::Subtest">5.41.1</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.3-RC1/Test2::Manual::Tooling::Subtest">5.40.3-RC1</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.5-RC1/Test2::Manual::Tooling::Subtest">5.38.5-RC1</a>
        </div>
      </li>
      <li class="nav-item dropdown text-nowrap">
        <a class="nav-link dropdown-toggle" href="#" id="dropdownlink-nav" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Documentation</a>
        <div class="dropdown-menu" aria-labelledby="dropdownlink-nav">
          <a class="dropdown-item" href="perl.html">Perl</a>
          <a class="dropdown-item" href="perlintro.html">Intro</a>
          <a class="dropdown-item" href="perl.html#Tutorials">Tutorials</a>
          <a class="dropdown-item" href="perlfaq.html">FAQs</a>
          <a class="dropdown-item" href="perl.html#Reference-Manual">Reference</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="perlop.html">Operators</a>
          <a class="dropdown-item" href="functions.html">Functions</a>
          <a class="dropdown-item" href="variables.html">Variables</a>
          <a class="dropdown-item" href="modules.html">Modules</a>
          <a class="dropdown-item" href="perlutil.html">Utilities</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="perldelta.html">Release Notes</a>
          <a class="dropdown-item" href="perlcommunity.html">Community</a>
          <a class="dropdown-item" href="perlhist.html">History</a>
        </div>
      </li>
    </ul>
    <ul class="navbar-nav">
      <button id="content-expand-button" type="button" class="btn btn-dark d-none d-lg-inline-block me-4">Expand</button>
      <script src="js/perldoc-expand-page.js"></script>
    </ul>
    <form class="form-inline" method="get" action="https://perldoc.perl.org/search">
      <input id="search-input" class="form-control me-3" type="search" name="q" placeholder="[S]earch" aria-label="Search" value="">
    </form>
    <script src="js/perldoc-focus-search.js"></script>
  </div>
</div></nav>

    <div id="wrapperlicious" class="container-fluid">
      <div id="perldocdiv">
        <div id="links">
          <a href="Test2__Manual__Tooling__Subtest.html">Test2::Manual::Tooling::Subtest</a>
          <div id="more">
            (<a href="https://perldoc.perl.org/Test2::Manual::Tooling::Subtest.txt">source</a>,
            <a href="https://metacpan.org/pod/Test2::Manual::Tooling::Subtest">CPAN</a>)
          </div>
            <div id="moduleversion">version 1.302210</div>
        </div>
        <h1><a id="toc">CONTENTS</a></h1>
                  <ul>
              <li>
                <a class="text-decoration-none" href="#NAME">NAME</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#DESCRIPTION">DESCRIPTION</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#WHICH-TYPE-OF-SUBTEST-DO-I-NEED?">WHICH TYPE OF SUBTEST DO I NEED?</a>
                            <ul>
              <li>
                <a class="text-decoration-none" href="#SUBTEST-WITH-USER-SUPPLIED-CODEREF">SUBTEST WITH USER SUPPLIED CODEREF</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#SUBTEST-WITH-TOOL-SIDE-CODEREF">SUBTEST WITH TOOL-SIDE CODEREF</a>
              </li>
          </ul>

              </li>
              <li>
                <a class="text-decoration-none" href="#SEE-ALSO">SEE ALSO</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#SOURCE">SOURCE</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#MAINTAINERS">MAINTAINERS</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#AUTHORS">AUTHORS</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#COPYRIGHT">COPYRIGHT</a>
              </li>
          </ul>

      <h1 id="NAME"><a class="permalink" href="#NAME">#</a>NAME</h1>

<p>Test2::Manual::Tooling::Subtest - How to implement a tool that makes use of subtests.</p>

<h1 id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">#</a>DESCRIPTION</h1>

<p>Subtests are a nice way of making related events visually, and architecturally distinct.</p>

<h1 id="WHICH-TYPE-OF-SUBTEST-DO-I-NEED?"><a class="permalink" href="#WHICH-TYPE-OF-SUBTEST-DO-I-NEED?">#</a><a id="WHICH"></a><a id="WHICH-TYPE-OF-SUBTEST-DO-I-NEED"></a>WHICH TYPE OF SUBTEST DO I NEED?</h1>

<p>There are 2 types of subtest. The first type is subtests with user-supplied coderefs, such as the <code>subtest()</code> function itself. The second type is subtest that do not have any user supplied coderefs.</p>

<p>So which type do you need? The answer to that is simple, if you are going to let the user define the subtest with their own codeblock, you have the first type, otherwise you have the second.</p>

<p>In either case, you will still need use the same API function: <code>Test2::API::run_subtest</code>.</p>

<h2 id="SUBTEST-WITH-USER-SUPPLIED-CODEREF"><a class="permalink" href="#SUBTEST-WITH-USER-SUPPLIED-CODEREF">#</a><a id="SUBTEST"></a>SUBTEST WITH USER SUPPLIED CODEREF</h2>

<p>This example will emulate the <code>subtest</code> function.</p>

<pre><code>use Test2::API qw/context run_subtest/;

sub my_subtest {
    my ($name, $code) = @_;

    # Like any other tool, you need to acquire a context, if you do not then
    # things will not report the correct file and line number.
    my $ctx = context();

    my $bool = run_subtest($name, $code);

    $ctx-&gt;release;

    return $bool;
}</code></pre>

<p>This looks incredibly simple... and it is. <code>run_subtest()</code> does all the hard work for you. This will issue an <a href="Test2__Event__Subtest.html">Test2::Event::Subtest</a> event with the results of the subtest. The subtest event itself will report to the proper file and line number due to the context you acquired (even though it does not <i>look</i> like you used the context.</p>

<p><code>run_subtest()</code> can take additional arguments:</p>

<pre><code>run_subtest($name, $code, \%params, @args);</code></pre>

<dl>

<dt id="@args"><a class="permalink" href="#@args">#</a><a id="args"></a>@args</dt>
<dd>

<p>This allows you to pass arguments into the codeblock that gets run.</p>

</dd>
<dt id="\%params"><a class="permalink" href="#%5C%25params">#</a><a id="params"></a>\%params</dt>
<dd>

<p>This is a hashref of parameters. Currently there are 3 possible parameters:</p>

<dl>

<dt id="buffered-=&gt;-$bool"><a class="permalink" href="#buffered-=%3E-$bool">#</a><a id="buffered"></a><a id="buffered-bool"></a>buffered =&gt; $bool</dt>
<dd>

<p>This will turn the subtest into the new style buffered subtest. This type of subtest is recommended, but not default.</p>

</dd>
<dt id="inherit_trace-=&gt;-$bool"><a class="permalink" href="#inherit_trace-=%3E-$bool">#</a><a id="inherit_trace"></a><a id="inherit_trace-bool"></a>inherit_trace =&gt; $bool</dt>
<dd>

<p>This is used for tool-side coderefs.</p>

</dd>
<dt id="no_fork-=&gt;-$bool"><a class="permalink" href="#no_fork-=%3E-$bool">#</a><a id="no_fork"></a><a id="no_fork-bool"></a>no_fork =&gt; $bool</dt>
<dd>

<p>react to forking/threading inside the subtest itself. In general you are unlikely to need/want this parameter.</p>

</dd>
</dl>

</dd>
</dl>

<h2 id="SUBTEST-WITH-TOOL-SIDE-CODEREF"><a class="permalink" href="#SUBTEST-WITH-TOOL-SIDE-CODEREF">#</a><a id="SUBTEST1"></a>SUBTEST WITH TOOL-SIDE CODEREF</h2>

<p>This is particularly useful if you want to turn a tool that wraps other tools into a subtest. For this we will be using the tool we created in <a href="Test2__Manual__Tooling__Nesting.html">Test2::Manual::Tooling::Nesting</a>.</p>

<pre><code>use Test2::API qw/context run_subtest/;

sub check_class {
    my $class = shift;

    my $ctx = context();

    my $code = sub {
        my $obj = $class-&gt;new;
        is($obj-&gt;foo, &#39;foo&#39;, &quot;got foo&quot;);
        is($obj-&gt;bar, &#39;bar&#39;, &quot;got bar&quot;);
    };

    my $bool = run_subtest($class, $code, {buffered =&gt; 1, inherit_trace =&gt; 1});

    $ctx-&gt;release;

    return $bool;
}</code></pre>

<p>The <code>run_subtest()</code> function does all the heavy lifting for us. All we need to do is give the function a name, a coderef to run, and the <code>inherit_trace =&gt; 1</code> parameter. The <code>buffered =&gt; 1</code> parameter is optional, but recommended.</p>

<p>The <code>inherit_trace</code> parameter tells the subtest tool that the contexts acquired inside the nested tools should use the same trace as the subtest itself. For user-supplied codeblocks you do not use inherit_trace because you want errors to report to the user-supplied file+line.</p>

<h1 id="SEE-ALSO"><a class="permalink" href="#SEE-ALSO">#</a><a id="SEE"></a>SEE ALSO</h1>

<p><a href="Test2__Manual.html">Test2::Manual</a> - Primary index of the manual.</p>

<h1 id="SOURCE"><a class="permalink" href="#SOURCE">#</a>SOURCE</h1>

<p>The source code repository for Test2-Manual can be found at <i>https://github.com/Test-More/test-more/</i>.</p>

<h1 id="MAINTAINERS"><a class="permalink" href="#MAINTAINERS">#</a>MAINTAINERS</h1>

<dl>

<dt id="Chad-Granum-&lt;exodist@cpan.org&gt;"><a class="permalink" href="#Chad-Granum-%3Cexodist@cpan.org%3E">#</a><a id="Chad"></a><a id="Chad-Granum-exodist-cpan.org"></a>Chad Granum &lt;exodist@cpan.org&gt;</dt>
<dd>

</dd>
</dl>

<h1 id="AUTHORS"><a class="permalink" href="#AUTHORS">#</a>AUTHORS</h1>

<dl>

<dt id="Chad-Granum-&lt;exodist@cpan.org&gt;1"><a class="permalink" href="#Chad-Granum-%3Cexodist@cpan.org%3E1">#</a><a id="Chad1"></a><a id="Chad-Granum-exodist-cpan.org1"></a>Chad Granum &lt;exodist@cpan.org&gt;</dt>
<dd>

</dd>
</dl>

<h1 id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">#</a>COPYRIGHT</h1>

<p>Copyright Chad Granum &lt;exodist@cpan.org&gt;.</p>

<p>This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>

<p>See <i>http://dev.perl.org/licenses/</i></p>


      </div>
      <div id="footer">
        <p>Perldoc Browser is maintained by Dan Book (<a href="https://metacpan.org/author/DBOOK">DBOOK</a>). Please contact him via the <a href="https://github.com/Grinnz/perldoc-browser/issues">GitHub issue tracker</a> or <a href="mailto:dbook@cpan.org">email</a> regarding any issues with the site itself, search, or rendering of documentation.</p>

<p>The Perl documentation is maintained by the Perl 5 Porters in the development of Perl. Please contact them via the <a href="https://github.com/Perl/perl5/issues">Perl issue tracker</a>, the <a href="https://lists.perl.org/list/perl5-porters.html">mailing list</a>, or <a href="https://kiwiirc.com/client/irc.perl.org/p5p">IRC</a> to report any issues with the contents or format of the documentation.</p>


      </div>
    </div>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/highlight.pack.js"></script>
    <script>hljs.highlightAll();</script>
  </body>

<!-- Mirrored from perldoc.perl.org/Test2::Manual::Tooling::Subtest by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Aug 2025 16:20:53 GMT -->
</html>
