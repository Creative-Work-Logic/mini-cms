<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from perldoc.perl.org/functions/eval by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Aug 2025 16:20:52 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>eval - Perldoc Browser</title>
    <link rel="search" href="../opensearch.xml" type="application/opensearchdescription+xml" title="Perldoc Browser">
    <link rel="canonical" href="eval.html">
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/stackoverflow-light.min.css" rel="stylesheet">
    <link href="../css/perldoc.css" rel="stylesheet">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-KVNWBNT5FB"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-KVNWBNT5FB');
      gtag('config', 'UA-50555-3');
    </script>
  </head>
  <body>
    <nav class="navbar navbar-expand-md bg-dark" data-bs-theme="dark"><div class="container-fluid">
  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <a class="navbar-brand" href="../index.html"><img src="../images/perl_camel_30.png" width="30" height="30" class="d-inline-block align-text-top" alt="Perl Camel Logo"> Perldoc Browser</a>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav me-auto">
      <li class="nav-item dropdown text-nowrap">
        <a class="nav-link dropdown-toggle" href="#" id="dropdownlink-stable" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">5.42.0</a>
        <div class="dropdown-menu" aria-labelledby="dropdownlink-stable">
          <a class="dropdown-item" href="eval.html">Latest</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item active" href="https://perldoc.perl.org/5.42.0/functions/eval">5.42.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.3/functions/eval">5.40.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.2/functions/eval">5.40.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.1/functions/eval">5.40.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.0/functions/eval">5.40.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.5/functions/eval">5.38.5</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.4/functions/eval">5.38.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.3/functions/eval">5.38.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.2/functions/eval">5.38.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.1/functions/eval">5.38.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.0/functions/eval">5.38.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.36.3/functions/eval">5.36.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.36.2/functions/eval">5.36.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.36.1/functions/eval">5.36.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.36.0/functions/eval">5.36.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.34.3/functions/eval">5.34.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.34.2/functions/eval">5.34.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.34.1/functions/eval">5.34.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.34.0/functions/eval">5.34.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.32.1/functions/eval">5.32.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.32.0/functions/eval">5.32.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.30.3/functions/eval">5.30.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.30.2/functions/eval">5.30.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.30.1/functions/eval">5.30.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.30.0/functions/eval">5.30.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.28.3/functions/eval">5.28.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.28.2/functions/eval">5.28.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.28.1/functions/eval">5.28.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.28.0/functions/eval">5.28.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.26.3/functions/eval">5.26.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.26.2/functions/eval">5.26.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.26.1/functions/eval">5.26.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.26.0/functions/eval">5.26.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.4/functions/eval">5.24.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.3/functions/eval">5.24.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.2/functions/eval">5.24.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.1/functions/eval">5.24.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.0/functions/eval">5.24.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.4/functions/eval">5.22.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.3/functions/eval">5.22.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.2/functions/eval">5.22.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.1/functions/eval">5.22.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.0/functions/eval">5.22.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.20.3/functions/eval">5.20.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.20.2/functions/eval">5.20.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.20.1/functions/eval">5.20.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.20.0/functions/eval">5.20.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.4/functions/eval">5.18.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.3/functions/eval">5.18.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.2/functions/eval">5.18.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.1/functions/eval">5.18.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.0/functions/eval">5.18.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.16.3/functions/eval">5.16.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.16.2/functions/eval">5.16.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.16.1/functions/eval">5.16.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.16.0/functions/eval">5.16.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.4/functions/eval">5.14.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.3/functions/eval">5.14.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.2/functions/eval">5.14.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.1/functions/eval">5.14.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.0/functions/eval">5.14.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.5/functions/eval">5.12.5</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.4/functions/eval">5.12.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.3/functions/eval">5.12.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.2/functions/eval">5.12.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.1/functions/eval">5.12.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.0/functions/eval">5.12.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.10.1/functions/eval">5.10.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.10.0/functions/eval">5.10.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.9/functions/eval">5.8.9</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.8/functions/eval">5.8.8</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.7/functions/eval">5.8.7</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.6/functions/eval">5.8.6</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.5/functions/eval">5.8.5</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.4/functions/eval">5.8.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.3/functions/eval">5.8.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.2/functions/eval">5.8.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.1/functions/eval">5.8.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.0/functions/eval">5.8.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.6.2/functions/eval">5.6.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.6.1/functions/eval">5.6.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.6.0/functions/eval">5.6.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005_04/functions/eval">5.005_04</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005_03/functions/eval">5.005_03</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005_02/functions/eval">5.005_02</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005_01/functions/eval">5.005_01</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005/functions/eval">5.005</a>
        </div>
      </li>
      <li class="nav-item dropdown text-nowrap">
        <a class="nav-link dropdown-toggle" href="#" id="dropdownlink-dev" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Dev</a>
        <div class="dropdown-menu" aria-labelledby="dropdownlink-dev">
          <a class="dropdown-item" href="https://perldoc.perl.org/blead/functions/eval">blead</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.43.1/functions/eval">5.43.1</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.42.0-RC3/functions/eval">5.42.0-RC3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.42.0-RC2/functions/eval">5.42.0-RC2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.42.0-RC1/functions/eval">5.42.0-RC1</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.13/functions/eval">5.41.13</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.12/functions/eval">5.41.12</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.11/functions/eval">5.41.11</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.10/functions/eval">5.41.10</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.9/functions/eval">5.41.9</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.8/functions/eval">5.41.8</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.7/functions/eval">5.41.7</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.6/functions/eval">5.41.6</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.5/functions/eval">5.41.5</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.4/functions/eval">5.41.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.3/functions/eval">5.41.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.2/functions/eval">5.41.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.1/functions/eval">5.41.1</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.3-RC1/functions/eval">5.40.3-RC1</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.5-RC1/functions/eval">5.38.5-RC1</a>
        </div>
      </li>
      <li class="nav-item dropdown text-nowrap">
        <a class="nav-link dropdown-toggle" href="#" id="dropdownlink-nav" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Documentation</a>
        <div class="dropdown-menu" aria-labelledby="dropdownlink-nav">
          <a class="dropdown-item" href="../perl.html">Perl</a>
          <a class="dropdown-item" href="../perlintro.html">Intro</a>
          <a class="dropdown-item" href="../perl.html#Tutorials">Tutorials</a>
          <a class="dropdown-item" href="../perlfaq.html">FAQs</a>
          <a class="dropdown-item" href="../perl.html#Reference-Manual">Reference</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="../perlop.html">Operators</a>
          <a class="dropdown-item" href="../functions.html">Functions</a>
          <a class="dropdown-item" href="../variables.html">Variables</a>
          <a class="dropdown-item" href="../modules.html">Modules</a>
          <a class="dropdown-item" href="../perlutil.html">Utilities</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="../perldelta.html">Release Notes</a>
          <a class="dropdown-item" href="../perlcommunity.html">Community</a>
          <a class="dropdown-item" href="../perlhist.html">History</a>
        </div>
      </li>
    </ul>
    <ul class="navbar-nav">
      <button id="content-expand-button" type="button" class="btn btn-dark d-none d-lg-inline-block me-4">Expand</button>
      <script src="../js/perldoc-expand-page.js"></script>
    </ul>
    <form class="form-inline" method="get" action="https://perldoc.perl.org/search">
      <input id="search-input" class="form-control me-3" type="search" name="q" placeholder="[S]earch" aria-label="Search" value="">
    </form>
    <script src="../js/perldoc-focus-search.js"></script>
  </div>
</div></nav>

    <div id="wrapperlicious" class="container-fluid">
      <div id="perldocdiv">
        <div id="links">
          <a href="../functions.html">functions</a>
            / <a href="eval.html">eval</a>
          <div id="more">
            (<a href="https://perldoc.perl.org/functions/eval.txt">source</a>,
            <a href="https://metacpan.org/pod/perlfunc#eval-EXPR">CPAN</a>)
          </div>
        </div>
      <dl>

<dt id="eval-EXPR"><a class="permalink" href="#eval-EXPR">#</a><a id="eval1"></a>eval EXPR        </dt>
<dd>

</dd>
<dt id="eval-BLOCK"><a class="permalink" href="#eval-BLOCK">#</a><a id="eval2"></a>eval BLOCK</dt>
<dd>

</dd>
<dt id="eval"><a class="permalink" href="#eval">#</a>eval</dt>
<dd>

<p><code>eval</code> in all its forms is used to execute a little Perl program, trapping any errors encountered so they don&#39;t crash the calling program.</p>

<p>Plain <code>eval</code> with no argument is just <code>eval EXPR</code>, where the expression is understood to be contained in <a href="../perlvar.html#%24_"><code>$_</code></a>. Thus there are only two real <code>eval</code> forms; the one with an EXPR is often called &quot;string eval&quot;. In a string eval, the value of the expression (which is itself determined within scalar context) is first parsed, and if there were no errors, executed as a block within the lexical context of the current Perl program. This form is typically used to delay parsing and subsequent execution of the text of EXPR until run time. Note that the value is parsed every time the <code>eval</code> executes.</p>

<p>The other form is called &quot;block eval&quot;. It is less general than string eval, but the code within the BLOCK is parsed only once (at the same time the code surrounding the <code>eval</code> itself was parsed) and executed within the context of the current Perl program. This form is typically used to trap exceptions more efficiently than the first, while also providing the benefit of checking the code within BLOCK at compile time. BLOCK is parsed and compiled just once. Since errors are trapped, it often is used to check if a given feature is available.</p>

<p>In both forms, the value returned is the value of the last expression evaluated inside the mini-program; a return statement may also be used, just as with subroutines. The expression providing the return value is evaluated in void, scalar, or list context, depending on the context of the <code>eval</code> itself. See <a href="wantarray.html"><code>wantarray</code></a> for more on how the evaluation context can be determined.</p>

<p>If there is a syntax error or runtime error, or a <a href="die.html"><code>die</code></a> statement is executed, <code>eval</code> returns <a href="undef.html"><code>undef</code></a> in scalar context, or an empty list in list context, and <a href="../perlvar.html#%24%40"><code>$@</code></a> is set to the error message. (Prior to 5.16, a bug caused <a href="undef.html"><code>undef</code></a> to be returned in list context for syntax errors, but not for runtime errors.) If there was no error, <a href="../perlvar.html#%24%40"><code>$@</code></a> is set to the empty string. A control flow operator like <a href="last.html"><code>last</code></a> or <a href="goto.html"><code>goto</code></a> can bypass the setting of <a href="../perlvar.html#%24%40"><code>$@</code></a>. Beware that using <code>eval</code> neither silences Perl from printing warnings to STDERR, nor does it stuff the text of warning messages into <a href="../perlvar.html#%24%40"><code>$@</code></a>. To do either of those, you have to use the <a href="../perlvar.html#%25SIG"><code>$SIG{__WARN__}</code></a> facility, or turn off warnings inside the BLOCK or EXPR using <span style="white-space: nowrap;"><code>no warnings &#39;all&#39;</code></span>. See <a href="warn.html"><code>warn</code></a>, <a href="../perlvar.html">perlvar</a>, and <a href="../warnings.html">warnings</a>.</p>

<p>Note that, because <code>eval</code> traps otherwise-fatal errors, it is useful for determining whether a particular feature (such as <a href="socket.html"><code>socket</code></a> or <a href="symlink.html"><code>symlink</code></a>) is implemented. It is also Perl&#39;s exception-trapping mechanism, where the <a href="die.html"><code>die</code></a> operator is used to raise exceptions.</p>

<p>Before Perl 5.14, the assignment to <a href="../perlvar.html#%24%40"><code>$@</code></a> occurred before restoration of localized variables, which means that for your code to run on older versions, a temporary is required if you want to mask some, but not all errors:</p>

<pre><code># alter $@ on nefarious repugnancy only
{
   my $e;
   {
     local $@; # protect existing $@
     eval { test_repugnancy() };
     # $@ =~ /nefarious/ and die $@; # Perl 5.14 and higher only
     $@ =~ /nefarious/ and $e = $@;
   }
   die $e if defined $e
}</code></pre>

<p>There are some different considerations for each form:</p>

<dl>

<dt id="String-eval"><a class="permalink" href="#String-eval">#</a><a id="String"></a>String eval</dt>
<dd>

<p>Since the return value of EXPR is executed as a block within the lexical context of the current Perl program, any outer lexical variables are visible to it, and any package variable settings or subroutine and format definitions remain afterwards.</p>

<p>Note that when <code>BEGIN {}</code> blocks are embedded inside of an eval block the contents of the block will be executed immediately and before the rest of the eval code is executed. You can disable this entirely by</p>

<pre><code>local ${^MAX_NESTED_EVAL_BEGIN_BLOCKS} = 0;
eval $string;</code></pre>

<p>which will cause any embedded <code>BEGIN</code> blocks in <code>$string</code> to throw an exception.</p>

<dl>

<dt id="Under-the-&quot;unicode_eval&quot;-feature"><a class="permalink" href="#Under-the-%22unicode_eval%22-feature">#</a><a id="Under"></a><a id="Under-the-unicode_eval-feature"></a>Under the <a href="../feature.html#The-%27unicode_eval%27-and-%27evalbytes%27-features"><code>&quot;unicode_eval&quot;</code> feature</a></dt>
<dd>

<p>If this feature is enabled (which is the default under a <code>use 5.16</code> or higher declaration), Perl assumes that EXPR is a character string. Any <span style="white-space: nowrap;"><code>use utf8</code></span> or <span style="white-space: nowrap;"><code>no utf8</code></span> declarations within the string thus have no effect. Source filters are forbidden as well. (<code>unicode_strings</code>, however, can appear within the string.)</p>

<p>See also the <a href="evalbytes.html"><code>evalbytes</code></a> operator, which works properly with source filters.</p>

</dd>
<dt id="Outside-the-&quot;unicode_eval&quot;-feature"><a class="permalink" href="#Outside-the-%22unicode_eval%22-feature">#</a><a id="Outside"></a><a id="Outside-the-unicode_eval-feature"></a>Outside the <code>&quot;unicode_eval&quot;</code> feature</dt>
<dd>

<p>In this case, the behavior is problematic and is not so easily described. Here are two bugs that cannot easily be fixed without breaking existing programs:</p>

<ul>

<li><p>Perl&#39;s internal storage of EXPR affects the behavior of the executed code. For example:</p>

<pre><code>my $v = eval &quot;use utf8; &#39;$expr&#39;&quot;;</code></pre>

<p>If $expr is <code>&quot;\xc4\x80&quot;</code> (U+0100 in UTF-8), then the value stored in <code>$v</code> will depend on whether Perl stores $expr &quot;upgraded&quot; (cf. <a href="../utf8.html">utf8</a>) or not:</p>

<ul>

<li><p>If upgraded, <code>$v</code> will be <code>&quot;\xc4\x80&quot;</code> (i.e., the <code>use utf8</code> has no effect.)</p>

</li>
<li><p>If non-upgraded, <code>$v</code> will be <code>&quot;\x{100}&quot;</code>.</p>

</li>
</ul>

<p>This is undesirable since being upgraded or not should not affect a string&#39;s behavior.</p>

</li>
<li><p>Source filters activated within <code>eval</code> leak out into whichever file scope is currently being compiled. To give an example with the CPAN module <a href="https://metacpan.org/pod/Semi::Semicolons">Semi::Semicolons</a>:</p>

<pre><code>BEGIN { eval &quot;use Semi::Semicolons; # not filtered&quot; }
# filtered here!</code></pre>

<p><a href="evalbytes.html"><code>evalbytes</code></a> fixes that to work the way one would expect:</p>

<pre><code>use feature &quot;evalbytes&quot;;
BEGIN { evalbytes &quot;use Semi::Semicolons; # filtered&quot; }
# not filtered</code></pre>

</li>
</ul>

</dd>
</dl>

<p>Problems can arise if the string expands a scalar containing a floating point number. That scalar can expand to letters, such as <code>&quot;NaN&quot;</code> or <code>&quot;Infinity&quot;</code>; or, within the scope of a <a href="../locale.html"><code>use locale</code></a>, the decimal point character may be something other than a dot (such as a comma). None of these are likely to parse as you are likely expecting.</p>

<p>You should be especially careful to remember what&#39;s being looked at when:</p>

<pre><code>eval $x;        # CASE 1
eval &quot;$x&quot;;      # CASE 2

eval &#39;$x&#39;;      # CASE 3
eval { $x };    # CASE 4

eval &quot;\$$x++&quot;;  # CASE 5
$$x++;          # CASE 6</code></pre>

<p>Cases 1 and 2 above behave identically: they run the code contained in the variable $x. (Although case 2 has misleading double quotes making the reader wonder what else might be happening (nothing is).) Cases 3 and 4 likewise behave in the same way: they run the code <code>&#39;$x&#39;</code>, which does nothing but return the value of $x. (Case 4 is preferred for purely visual reasons, but it also has the advantage of compiling at compile-time instead of at run-time.) Case 5 is a place where normally you <i>would</i> like to use double quotes, except that in this particular situation, you can just use symbolic references instead, as in case 6.</p>

<p>An <code>eval &#39;&#39;</code> executed within a subroutine defined in the <code>DB</code> package doesn&#39;t see the usual surrounding lexical scope, but rather the scope of the first non-DB piece of code that called it. You don&#39;t normally need to worry about this unless you are writing a Perl debugger.</p>

<p>The final semicolon, if any, may be omitted from the value of EXPR.</p>

</dd>
<dt id="Block-eval"><a class="permalink" href="#Block-eval">#</a><a id="Block"></a>Block eval</dt>
<dd>

<p>If the code to be executed doesn&#39;t vary, you may use the eval-BLOCK form to trap run-time errors without incurring the penalty of recompiling each time. The error, if any, is still returned in <a href="../perlvar.html#%24%40"><code>$@</code></a>. Examples:</p>

<pre><code># make divide-by-zero nonfatal
eval { $answer = $x / $y; }; warn $@ if $@;

# same thing, but less efficient
eval &#39;$answer = $x / $y&#39;; warn $@ if $@;

# a compile-time error
eval { $answer = }; # WRONG

# a run-time error
eval &#39;$answer =&#39;;   # sets $@</code></pre>

<p>If you want to trap errors when loading an XS module, some problems with the binary interface (such as Perl version skew) may be fatal even with <code>eval</code> unless <code>$ENV{PERL_DL_NONLAZY}</code> is set. See <a href="../perlrun.html#PERL_DL_NONLAZY">perlrun</a>.</p>

<p>Using the <code>eval {}</code> form as an exception trap in libraries does have some issues. Due to the current arguably broken state of <code>__DIE__</code> hooks, you may wish not to trigger any <code>__DIE__</code> hooks that user code may have installed. You can use the <code>local $SIG{__DIE__}</code> construct for this purpose, as this example shows:</p>

<pre><code># a private exception trap for divide-by-zero
eval { local $SIG{&#39;__DIE__&#39;}; $answer = $x / $y; };
warn $@ if $@;</code></pre>

<p>This is especially significant, given that <code>__DIE__</code> hooks can call <a href="die.html"><code>die</code></a> again, which has the effect of changing their error messages:</p>

<pre><code># __DIE__ hooks may modify error messages
{
   local $SIG{&#39;__DIE__&#39;} =
          sub { (my $x = $_[0]) =~ s/foo/bar/g; die $x };
   eval { die &quot;foo lives here&quot; };
   print $@ if $@;                # prints &quot;bar lives here&quot;
}</code></pre>

<p>Because this promotes action at a distance, this counterintuitive behavior may be fixed in a future release.</p>

<p><code>eval BLOCK</code> does <i>not</i> count as a loop, so the loop control statements <a href="next.html"><code>next</code></a>, <a href="last.html"><code>last</code></a>, or <a href="redo.html"><code>redo</code></a> cannot be used to leave or restart the block.</p>

<p>The final semicolon, if any, may be omitted from within the BLOCK.</p>

</dd>
</dl>

</dd>
</dl>


      </div>
      <div id="footer">
        <p>Perldoc Browser is maintained by Dan Book (<a href="https://metacpan.org/author/DBOOK">DBOOK</a>). Please contact him via the <a href="https://github.com/Grinnz/perldoc-browser/issues">GitHub issue tracker</a> or <a href="mailto:dbook@cpan.org">email</a> regarding any issues with the site itself, search, or rendering of documentation.</p>

<p>The Perl documentation is maintained by the Perl 5 Porters in the development of Perl. Please contact them via the <a href="https://github.com/Perl/perl5/issues">Perl issue tracker</a>, the <a href="https://lists.perl.org/list/perl5-porters.html">mailing list</a>, or <a href="https://kiwiirc.com/client/irc.perl.org/p5p">IRC</a> to report any issues with the contents or format of the documentation.</p>


      </div>
    </div>
    <script src="../js/bootstrap.bundle.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.highlightAll();</script>
  </body>

<!-- Mirrored from perldoc.perl.org/functions/eval by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Aug 2025 16:20:52 GMT -->
</html>
