<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from perldoc.perl.org/5.6.0/perlos2 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Aug 2025 16:20:46 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>perlos2 - Perl under OS/2, DOS, Win0.3*, Win0.95 and WinNT. - Perldoc Browser</title>
    <link rel="search" href="../opensearch.xml" type="application/opensearchdescription+xml" title="Perldoc Browser">
    <link rel="canonical" href="../perlos2.html">
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/stackoverflow-light.min.css" rel="stylesheet">
    <link href="../css/perldoc.css" rel="stylesheet">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-KVNWBNT5FB"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-KVNWBNT5FB');
      gtag('config', 'UA-50555-3');
    </script>
  </head>
  <body>
    <nav class="navbar navbar-expand-md bg-dark" data-bs-theme="dark"><div class="container-fluid">
  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <a class="navbar-brand" href="../index.html"><img src="../images/perl_camel_30.png" width="30" height="30" class="d-inline-block align-text-top" alt="Perl Camel Logo"> Perldoc Browser</a>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav me-auto">
      <li class="nav-item dropdown text-nowrap">
        <a class="nav-link dropdown-toggle" href="#" id="dropdownlink-stable" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">5.6.0</a>
        <div class="dropdown-menu" aria-labelledby="dropdownlink-stable">
          <a class="dropdown-item" href="../perlos2.html">Latest</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.42.0/perlos2">5.42.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.3/perlos2">5.40.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.2/perlos2">5.40.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.1/perlos2">5.40.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.0/perlos2">5.40.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.5/perlos2">5.38.5</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.4/perlos2">5.38.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.3/perlos2">5.38.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.2/perlos2">5.38.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.1/perlos2">5.38.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.0/perlos2">5.38.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.36.3/perlos2">5.36.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.36.2/perlos2">5.36.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.36.1/perlos2">5.36.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.36.0/perlos2">5.36.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.34.3/perlos2">5.34.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.34.2/perlos2">5.34.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.34.1/perlos2">5.34.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.34.0/perlos2">5.34.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.32.1/perlos2">5.32.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.32.0/perlos2">5.32.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.30.3/perlos2">5.30.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.30.2/perlos2">5.30.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.30.1/perlos2">5.30.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.30.0/perlos2">5.30.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.28.3/perlos2">5.28.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.28.2/perlos2">5.28.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.28.1/perlos2">5.28.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.28.0/perlos2">5.28.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.26.3/perlos2">5.26.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.26.2/perlos2">5.26.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.26.1/perlos2">5.26.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.26.0/perlos2">5.26.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.4/perlos2">5.24.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.3/perlos2">5.24.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.2/perlos2">5.24.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.1/perlos2">5.24.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.0/perlos2">5.24.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.4/perlos2">5.22.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.3/perlos2">5.22.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.2/perlos2">5.22.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.1/perlos2">5.22.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.0/perlos2">5.22.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.20.3/perlos2">5.20.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.20.2/perlos2">5.20.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.20.1/perlos2">5.20.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.20.0/perlos2">5.20.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.4/perlos2">5.18.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.3/perlos2">5.18.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.2/perlos2">5.18.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.1/perlos2">5.18.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.0/perlos2">5.18.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.16.3/perlos2">5.16.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.16.2/perlos2">5.16.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.16.1/perlos2">5.16.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.16.0/perlos2">5.16.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.4/perlos2">5.14.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.3/perlos2">5.14.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.2/perlos2">5.14.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.1/perlos2">5.14.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.0/perlos2">5.14.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.5/perlos2">5.12.5</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.4/perlos2">5.12.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.3/perlos2">5.12.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.2/perlos2">5.12.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.1/perlos2">5.12.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.0/perlos2">5.12.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.10.1/perlos2">5.10.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.10.0/perlos2">5.10.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.9/perlos2">5.8.9</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.8/perlos2">5.8.8</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.7/perlos2">5.8.7</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.6/perlos2">5.8.6</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.5/perlos2">5.8.5</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.4/perlos2">5.8.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.3/perlos2">5.8.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.2/perlos2">5.8.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.1/perlos2">5.8.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.0/perlos2">5.8.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="../5.6.2/perlos2.html">5.6.2</a>
          <a class="dropdown-item" href="../5.6.1/perlos2.html">5.6.1</a>
          <a class="dropdown-item active" href="perlos2.html">5.6.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005_04/perlos2">5.005_04</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005_03/perlos2">5.005_03</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005_02/perlos2">5.005_02</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005_01/perlos2">5.005_01</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005/perlos2">5.005</a>
        </div>
      </li>
      <li class="nav-item dropdown text-nowrap">
        <a class="nav-link dropdown-toggle" href="#" id="dropdownlink-dev" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Dev</a>
        <div class="dropdown-menu" aria-labelledby="dropdownlink-dev">
          <a class="dropdown-item" href="https://perldoc.perl.org/blead/perlos2">blead</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.43.1/perlos2">5.43.1</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.42.0-RC3/perlos2">5.42.0-RC3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.42.0-RC2/perlos2">5.42.0-RC2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.42.0-RC1/perlos2">5.42.0-RC1</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.13/perlos2">5.41.13</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.12/perlos2">5.41.12</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.11/perlos2">5.41.11</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.10/perlos2">5.41.10</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.9/perlos2">5.41.9</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.8/perlos2">5.41.8</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.7/perlos2">5.41.7</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.6/perlos2">5.41.6</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.5/perlos2">5.41.5</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.4/perlos2">5.41.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.3/perlos2">5.41.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.2/perlos2">5.41.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.1/perlos2">5.41.1</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.3-RC1/perlos2">5.40.3-RC1</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.5-RC1/perlos2">5.38.5-RC1</a>
        </div>
      </li>
      <li class="nav-item dropdown text-nowrap">
        <a class="nav-link dropdown-toggle" href="#" id="dropdownlink-nav" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Documentation</a>
        <div class="dropdown-menu" aria-labelledby="dropdownlink-nav">
          <a class="dropdown-item" href="perl.html">Perl</a>
          <a class="dropdown-item" href="perlintro.html">Intro</a>
          <a class="dropdown-item" href="perl.html#Tutorials">Tutorials</a>
          <a class="dropdown-item" href="perlfaq.html">FAQs</a>
          <a class="dropdown-item" href="perl.html#Reference-Manual">Reference</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="perlop.html">Operators</a>
          <a class="dropdown-item" href="functions.html">Functions</a>
          <a class="dropdown-item" href="variables.html">Variables</a>
          <a class="dropdown-item" href="modules.html">Modules</a>
          <a class="dropdown-item" href="perlutil.html">Utilities</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="perldelta.html">Release Notes</a>
          <a class="dropdown-item" href="perlcommunity.html">Community</a>
          <a class="dropdown-item" href="perlhist.html">History</a>
        </div>
      </li>
    </ul>
    <ul class="navbar-nav">
      <button id="content-expand-button" type="button" class="btn btn-dark d-none d-lg-inline-block me-4">Expand</button>
      <script src="../js/perldoc-expand-page.js"></script>
    </ul>
    <form class="form-inline" method="get" action="https://perldoc.perl.org/5.6.0/search">
      <input id="search-input" class="form-control me-3" type="search" name="q" placeholder="[S]earch" aria-label="Search" value="">
    </form>
    <script src="../js/perldoc-focus-search.js"></script>
  </div>
</div></nav>

    <div id="wrapperlicious" class="container-fluid">
      <div id="perldocdiv">
        <div id="links">
          <a href="perlos2.html">perlos2</a>
          <div id="more">
            (<a href="https://perldoc.perl.org/5.6.0/perlos2.txt">source</a>,
            <a href="https://metacpan.org/pod/perlos2">CPAN</a>)
          </div>
        </div>
        <div class="leading-notice">
          You are viewing the version of this documentation from Perl 5.6.0.
            <a href="../perlos2.html">View the latest version</a>
        </div>
        <h1><a id="toc">CONTENTS</a></h1>
                  <ul>
              <li>
                <a class="text-decoration-none" href="#NAME">NAME</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#SYNOPSIS">SYNOPSIS</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#DESCRIPTION">DESCRIPTION</a>
                            <ul>
              <li>
                <a class="text-decoration-none" href="#Target">Target</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Other-OSes">Other OSes</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Prerequisites">Prerequisites</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Starting-Perl-programs-under-OS/2-(and-DOS-and...)">Starting Perl programs under OS/2 (and DOS and...)</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Starting-OS/2-(and-DOS)-programs-under-Perl">Starting OS/2 (and DOS) programs under Perl</a>
              </li>
          </ul>

              </li>
              <li>
                <a class="text-decoration-none" href="#Frequently-asked-questions">Frequently asked questions</a>
                            <ul>
              <li>
                <a class="text-decoration-none" href="#I-cannot-run-external-programs">I cannot run external programs</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#I-cannot-embed-perl-into-my-program,-or-use-perl.dll-from-my-program.">I cannot embed perl into my program, or use perl.dll from my program.</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#%60%60-and-pipe-open-do-not-work-under-DOS.">`` and pipe-open do not work under DOS.</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Cannot-start-find.exe-%22pattern%22-file">Cannot start find.exe &quot;pattern&quot; file</a>
              </li>
          </ul>

              </li>
              <li>
                <a class="text-decoration-none" href="#INSTALLATION">INSTALLATION</a>
                            <ul>
              <li>
                <a class="text-decoration-none" href="#Automatic-binary-installation">Automatic binary installation</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Manual-binary-installation">Manual binary installation</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Warning">Warning</a>
              </li>
          </ul>

              </li>
              <li>
                <a class="text-decoration-none" href="#Accessing-documentation">Accessing documentation</a>
                            <ul>
              <li>
                <a class="text-decoration-none" href="#OS/2-.INF-file">OS/2 .INF file</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Plain-text">Plain text</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Manpages">Manpages</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#HTML">HTML</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#GNU-info-files">GNU info files</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#.PDF-files">.PDF files</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#LaTeX-docs">LaTeX docs</a>
              </li>
          </ul>

              </li>
              <li>
                <a class="text-decoration-none" href="#BUILD">BUILD</a>
                            <ul>
              <li>
                <a class="text-decoration-none" href="#Prerequisites1">Prerequisites</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Getting-perl-source">Getting perl source</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Application-of-the-patches">Application of the patches</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Hand-editing">Hand-editing</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Making">Making</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Testing">Testing</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Installing-the-built-perl">Installing the built perl</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#a.out-style-build">a.out-style build</a>
              </li>
          </ul>

              </li>
              <li>
                <a class="text-decoration-none" href="#Build-FAQ">Build FAQ</a>
                            <ul>
              <li>
                <a class="text-decoration-none" href="#Some-/-became-%5C-in-pdksh.">Some / became \ in pdksh.</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#&#39;errno&#39;-unresolved-external">&#39;errno&#39; - unresolved external</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Problems-with-tr-or-sed">Problems with tr or sed</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Some-problem-(forget-which-;-)">Some problem (forget which ;-)</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Library-...-not-found">Library ... not found</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Segfault-in-make">Segfault in make</a>
              </li>
          </ul>

              </li>
              <li>
                <a class="text-decoration-none" href="#Specific-(mis)features-of-OS/2-port">Specific (mis)features of OS/2 port</a>
                            <ul>
              <li>
                <a class="text-decoration-none" href="#setpriority,-getpriority">setpriority, getpriority</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#system()">system()</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#extproc-on-the-first-line">extproc on the first line</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Additional-modules:">Additional modules:</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Prebuilt-methods:">Prebuilt methods:</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Misfeatures">Misfeatures</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Modifications">Modifications</a>
              </li>
          </ul>

              </li>
              <li>
                <a class="text-decoration-none" href="#Perl-flavors">Perl flavors</a>
                            <ul>
              <li>
                <a class="text-decoration-none" href="#perl.exe">perl.exe</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#perl_.exe">perl_.exe</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#perl__.exe">perl__.exe</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#perl___.exe">perl___.exe</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Why-strange-names?">Why strange names?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Why-dynamic-linking?">Why dynamic linking?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Why-chimera-build?">Why chimera build?</a>
              </li>
          </ul>

              </li>
              <li>
                <a class="text-decoration-none" href="#ENVIRONMENT">ENVIRONMENT</a>
                            <ul>
              <li>
                <a class="text-decoration-none" href="#PERLLIB_PREFIX">PERLLIB_PREFIX</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#PERL_BADLANG1">PERL_BADLANG</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#PERL_BADFREE1">PERL_BADFREE</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#PERL_SH_DIR">PERL_SH_DIR</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#USE_PERL_FLOCK">USE_PERL_FLOCK</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#TMP-or-TEMP">TMP or TEMP</a>
              </li>
          </ul>

              </li>
              <li>
                <a class="text-decoration-none" href="#Evolution">Evolution</a>
                            <ul>
              <li>
                <a class="text-decoration-none" href="#Priorities">Priorities</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#DLL-name-mangling">DLL name mangling</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Threading">Threading</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Calls-to-external-programs">Calls to external programs</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Memory-allocation">Memory allocation</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Threads">Threads</a>
              </li>
          </ul>

              </li>
              <li>
                <a class="text-decoration-none" href="#AUTHOR">AUTHOR</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#SEE-ALSO">SEE ALSO</a>
              </li>
          </ul>

      <h1 id="NAME"><a class="permalink" href="#NAME">#</a>NAME</h1>

<p>perlos2 - Perl under OS/2, DOS, Win0.3*, Win0.95 and WinNT.</p>

<h1 id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">#</a>SYNOPSIS</h1>

<p>One can read this document in the following formats:</p>

<pre><code class="plaintext">man perlos2
view perl perlos2
explorer perlos2.html
info perlos2</code></pre>

<p>to list some (not all may be available simultaneously), or it may be read <i>as is</i>: either as <i>README.os2</i>, or <i>pod/perlos2.pod</i>.</p>

<p>To read the <i>.INF</i> version of documentation (<b>very</b> recommended) outside of OS/2, one needs an IBM&#39;s reader (may be available on IBM ftp sites (?) (URL anyone?)) or shipped with PC DOS 7.0 and IBM&#39;s Visual Age C++ 3.5.</p>

<p>A copy of a Win* viewer is contained in the &quot;Just add OS/2 Warp&quot; package</p>

<pre><code class="plaintext">ftp://ftp.software.ibm.com/ps/products/os2/tools/jaow/jaow.zip</code></pre>

<p>in <i>?:\JUST_ADD\view.exe</i>. This gives one an access to EMX&#39;s <i>.INF</i> docs as well (text form is available in <i>/emx/doc</i> in EMX&#39;s distribution).</p>

<p>Note that if you have <i>lynx.exe</i> installed, you can follow WWW links from this document in <i>.INF</i> format. If you have EMX docs installed correctly, you can follow library links (you need to have <code>view emxbook</code> working by setting <code>EMXBOOK</code> environment variable as it is described in EMX docs).</p>

<h1 id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">#</a>DESCRIPTION</h1>

<h2 id="Target"><a class="permalink" href="#Target">#</a>Target</h2>

<p>The target is to make OS/2 the best supported platform for using/building/developing Perl and <i>Perl applications</i>, as well as make Perl the best language to use under OS/2. The secondary target is to try to make this work under DOS and Win* as well (but not <b>too</b> hard).</p>

<p>The current state is quite close to this target. Known limitations:</p>

<ul>

<li><p>Some *nix programs use fork() a lot, but currently fork() is not supported after <i>use</i>ing dynamically loaded extensions.</p>

</li>
<li><p>You need a separate perl executable <i>perl__.exe</i> (see <a href="https://metacpan.org/pod/perl__.exe">perl__.exe</a>) to use PM code in your application (like the forthcoming Perl/Tk).</p>

</li>
<li><p>There is no simple way to access WPS objects. The only way I know is via <code>OS2::REXX</code> extension (see <a href="https://metacpan.org/pod/OS2::REXX">OS2::REXX</a>), and we do not have access to convenience methods of Object-REXX. (Is it possible at all? I know of no Object-REXX API.)</p>

</li>
</ul>

<p>Please keep this list up-to-date by informing me about other items.</p>

<h2 id="Other-OSes"><a class="permalink" href="#Other-OSes">#</a><a id="Other"></a>Other OSes</h2>

<p>Since OS/2 port of perl uses a remarkable EMX environment, it can run (and build extensions, and - possibly - be build itself) under any environment which can run EMX. The current list is DOS, DOS-inside-OS/2, Win0.3*, Win0.95 and WinNT. Out of many perl flavors, only one works, see <a href="#perl_.exe">&quot;perl_.exe&quot;</a>.</p>

<p>Note that not all features of Perl are available under these environments. This depends on the features the <i>extender</i> - most probably RSX - decided to implement.</p>

<p>Cf. <a href="https://metacpan.org/pod/Prerequisites">Prerequisites</a>.</p>

<h2 id="Prerequisites"><a class="permalink" href="#Prerequisites">#</a>Prerequisites</h2>

<dl>

<dt id="EMX"><a class="permalink" href="#EMX">#</a>EMX</dt>
<dd>

<p>EMX runtime is required (may be substituted by RSX). Note that it is possible to make <i>perl_.exe</i> to run under DOS without any external support by binding <i>emx.exe</i>/<i>rsx.exe</i> to it, see <a href="https://metacpan.org/pod/emxbind">emxbind</a>. Note that under DOS for best results one should use RSX runtime, which has much more functions working (like <code>fork</code>, <code>popen</code> and so on). In fact RSX is required if there is no VCPI present. Note the RSX requires DPMI.</p>

<p>Only the latest runtime is supported, currently <code>0.9c</code>. Perl may run under earlier versions of EMX, but this is not tested.</p>

<p>One can get different parts of EMX from, say</p>

<pre><code class="plaintext">ftp://ftp.cdrom.com/pub/os2/emx09c/
ftp://hobbes.nmsu.edu/os2/unix/emx09c/</code></pre>

<p>The runtime component should have the name <i>emxrt.zip</i>.</p>

<p><b>NOTE</b>. It is enough to have <i>emx.exe</i>/<i>rsx.exe</i> on your path. One does not need to specify them explicitly (though this</p>

<pre><code class="plaintext">emx perl_.exe -de 0</code></pre>

<p>will work as well.)</p>

</dd>
<dt id="RSX"><a class="permalink" href="#RSX">#</a>RSX</dt>
<dd>

<p>To run Perl on DPMI platforms one needs RSX runtime. This is needed under DOS-inside-OS/2, Win0.3*, Win0.95 and WinNT (see <a href="#Other-OSes">&quot;Other OSes&quot;</a>). RSX would not work with VCPI only, as EMX would, it requires DMPI.</p>

<p>Having RSX and the latest <i>sh.exe</i> one gets a fully functional <b>*nix</b>-ish environment under DOS, say, <code>fork</code>, <code>``</code> and pipe-<code>open</code> work. In fact, MakeMaker works (for static build), so one can have Perl development environment under DOS.</p>

<p>One can get RSX from, say</p>

<pre><code class="plaintext">ftp://ftp.cdrom.com/pub/os2/emx09c/contrib
ftp://ftp.uni-bielefeld.de/pub/systems/msdos/misc
ftp://ftp.leo.org/pub/comp/os/os2/leo/devtools/emx+gcc/contrib</code></pre>

<p>Contact the author on <code>rainer@mathematik.uni-bielefeld.de</code>.</p>

<p>The latest <i>sh.exe</i> with DOS hooks is available at</p>

<pre><code class="plaintext">ftp://ftp.math.ohio-state.edu/pub/users/ilya/os2/sh_dos.zip</code></pre>

</dd>
<dt id="HPFS"><a class="permalink" href="#HPFS">#</a>HPFS</dt>
<dd>

<p>Perl does not care about file systems, but to install the whole perl library intact one needs a file system which supports long file names.</p>

<p>Note that if you do not plan to build the perl itself, it may be possible to fool EMX to truncate file names. This is not supported, read EMX docs to see how to do it.</p>

</dd>
<dt id="pdksh"><a class="permalink" href="#pdksh">#</a>pdksh</dt>
<dd>

<p>To start external programs with complicated command lines (like with pipes in between, and/or quoting of arguments), Perl uses an external shell. With EMX port such shell should be named &lt;sh.exe&gt;, and located either in the wired-in-during-compile locations (usually <i>F:/bin</i>), or in configurable location (see <a href="#PERL_SH_DIR">&quot;PERL_SH_DIR&quot;</a>).</p>

<p>For best results use EMX pdksh. The soon-to-be-available standard binary (5.2.12?) runs under DOS (with <a href="https://metacpan.org/pod/RSX">RSX</a>) as well, meanwhile use the binary from</p>

<pre><code class="plaintext">ftp://ftp.math.ohio-state.edu/pub/users/ilya/os2/sh_dos.zip</code></pre>

</dd>
</dl>

<h2 id="Starting-Perl-programs-under-OS/2-(and-DOS-and...)"><a class="permalink" href="#Starting-Perl-programs-under-OS/2-(and-DOS-and...)">#</a><a id="Starting"></a><a id="Starting-Perl-programs-under-OS-2-and-DOS-and"></a>Starting Perl programs under OS/2 (and DOS and...)</h2>

<p>Start your Perl program <i>foo.pl</i> with arguments <code>arg1 arg2 arg3</code> the same way as on any other platform, by</p>

<pre><code class="plaintext">perl foo.pl arg1 arg2 arg3</code></pre>

<p>If you want to specify perl options <code>-my_opts</code> to the perl itself (as opposed to to your program), use</p>

<pre><code class="plaintext">perl -my_opts foo.pl arg1 arg2 arg3</code></pre>

<p>Alternately, if you use OS/2-ish shell, like CMD or 4os2, put the following at the start of your perl script:</p>

<pre><code class="plaintext">extproc perl -S -my_opts</code></pre>

<p>rename your program to <i>foo.cmd</i>, and start it by typing</p>

<pre><code class="plaintext">foo arg1 arg2 arg3</code></pre>

<p>Note that because of stupid OS/2 limitations the full path of the perl script is not available when you use <code>extproc</code>, thus you are forced to use <code>-S</code> perl switch, and your script should be on path. As a plus side, if you know a full path to your script, you may still start it with</p>

<pre><code class="plaintext">perl ../../blah/foo.cmd arg1 arg2 arg3</code></pre>

<p>(note that the argument <code>-my_opts</code> is taken care of by the <code>extproc</code> line in your script, see <a href="#extproc-on-the-first-line">&quot;<code>extproc</code> on the first line&quot;</a>).</p>

<p>To understand what the above <i>magic</i> does, read perl docs about <code>-S</code> switch - see <a href="perlrun.html">perlrun</a>, and cmdref about <code>extproc</code>:</p>

<pre><code class="plaintext">view perl perlrun
man perlrun
view cmdref extproc
help extproc</code></pre>

<p>or whatever method you prefer.</p>

<p>There are also endless possibilities to use <i>executable extensions</i> of 4os2, <i>associations</i> of WPS and so on... However, if you use *nixish shell (like <i>sh.exe</i> supplied in the binary distribution), you need to follow the syntax specified in <a href="perlrun.html#Switches">&quot;Switches&quot; in perlrun</a>.</p>

<p>Note that <b>-S</b> switch enables a search with additional extensions <i>.cmd</i>, <i>.btm</i>, <i>.bat</i>, <i>.pl</i> as well.</p>

<h2 id="Starting-OS/2-(and-DOS)-programs-under-Perl"><a class="permalink" href="#Starting-OS/2-(and-DOS)-programs-under-Perl">#</a><a id="Starting1"></a><a id="Starting-OS-2-and-DOS-programs-under-Perl"></a>Starting OS/2 (and DOS) programs under Perl</h2>

<p>This is what system() (see <a href="perlfunc.html#system">&quot;system&quot; in perlfunc</a>), <code>``</code> (see <a href="perlop.html#I%2FO-Operators">&quot;I/O Operators&quot; in perlop</a>), and <i>open pipe</i> (see <a href="perlfunc.html#open">&quot;open&quot; in perlfunc</a>) are for. (Avoid exec() (see <a href="perlfunc.html#exec">&quot;exec&quot; in perlfunc</a>) unless you know what you do).</p>

<p>Note however that to use some of these operators you need to have a sh-syntax shell installed (see <a href="#Pdksh">&quot;Pdksh&quot;</a>, <a href="#Frequently-asked-questions">&quot;Frequently asked questions&quot;</a>), and perl should be able to find it (see <a href="#PERL_SH_DIR">&quot;PERL_SH_DIR&quot;</a>).</p>

<p>The cases when the shell is used are:</p>

<ol>

<li><p>One-argument system() (see <a href="perlfunc.html#system">&quot;system&quot; in perlfunc</a>), exec() (see <a href="perlfunc.html#exec">&quot;exec&quot; in perlfunc</a>) with redirection or shell meta-characters;</p>

</li>
<li><p>Pipe-open (see <a href="perlfunc.html#open">&quot;open&quot; in perlfunc</a>) with the command which contains redirection or shell meta-characters;</p>

</li>
<li><p>Backticks <code>``</code> (see <a href="perlop.html#I%2FO-Operators">&quot;I/O Operators&quot; in perlop</a>) with the command which contains redirection or shell meta-characters;</p>

</li>
<li><p>If the executable called by system()/exec()/pipe-open()/<code>``</code> is a script with the &quot;magic&quot; <code>#!</code> line or <code>extproc</code> line which specifies shell;</p>

</li>
<li><p>If the executable called by system()/exec()/pipe-open()/<code>``</code> is a script without &quot;magic&quot; line, and <code>$ENV{EXECSHELL}</code> is set to shell;</p>

</li>
<li><p>If the executable called by system()/exec()/pipe-open()/<code>``</code> is not found;</p>

</li>
<li><p>For globbing (see <a href="perlfunc.html#glob">&quot;glob&quot; in perlfunc</a>, <a href="perlop.html#I%2FO-Operators">&quot;I/O Operators&quot; in perlop</a>).</p>

</li>
</ol>

<p>For the sake of speed for a common case, in the above algorithms backslashes in the command name are not considered as shell metacharacters.</p>

<p>Perl starts scripts which begin with cookies <code>extproc</code> or <code>#!</code> directly, without an intervention of shell. Perl uses the same algorithm to find the executable as <i>pdksh</i>: if the path on <code>#!</code> line does not work, and contains <code>/</code>, then the executable is searched in <i>.</i> and on <code>PATH</code>. To find arguments for these scripts Perl uses a different algorithm than <i>pdksh</i>: up to 3 arguments are recognized, and trailing whitespace is stripped.</p>

<p>If a script does not contain such a cooky, then to avoid calling <i>sh.exe</i>, Perl uses the same algorithm as <i>pdksh</i>: if <code>$ENV{EXECSHELL}</code> is set, the script is given as the first argument to this command, if not set, then <code>$ENV{COMSPEC} /c</code> is used (or a hardwired guess if <code>$ENV{COMSPEC}</code> is not set).</p>

<p>If starting scripts directly, Perl will use exactly the same algorithm as for the search of script given by <b>-S</b> command-line option: it will look in the current directory, then on components of <code>$ENV{PATH}</code> using the following order of appended extensions: no extension, <i>.cmd</i>, <i>.btm</i>, <i>.bat</i>, <i>.pl</i>.</p>

<p>Note that Perl will start to look for scripts only if OS/2 cannot start the specified application, thus <code>system &#39;blah&#39;</code> will not look for a script if there is an executable file <i>blah.exe</i> <i>anywhere</i> on <code>PATH</code>.</p>

<p>Note also that executable files on OS/2 can have an arbitrary extension, but <i>.exe</i> will be automatically appended if no dot is present in the name. The workaround as as simple as that: since <i>blah.</i> and <i>blah</i> denote the same file, to start an executable residing in file <i>n:/bin/blah</i> (no extension) give an argument <code>n:/bin/blah.</code> to system().</p>

<p>The last note is that currently it is not straightforward to start PM programs from VIO (=text-mode) Perl process and visa versa. Either ensure that shell will be used, as in <code>system &#39;cmd /c epm&#39;</code>, or start it using optional arguments to system() documented in <code>OS2::Process</code> module. This is considered a bug and should be fixed soon.</p>

<h1 id="Frequently-asked-questions"><a class="permalink" href="#Frequently-asked-questions">#</a><a id="Frequently"></a>Frequently asked questions</h1>

<h2 id="I-cannot-run-external-programs"><a class="permalink" href="#I-cannot-run-external-programs">#</a><a id="I"></a>I cannot run external programs</h2>

<ul>

<li><p>Did you run your programs with <code>-w</code> switch? See <a href="https://metacpan.org/pod/Starting%2520OS#2-(and-DOS)-programs-under-Perl">&quot;2 (and DOS) programs under Perl&quot; in Starting OS</a>.</p>

</li>
<li><p>Do you try to run <i>internal</i> shell commands, like <code>`copy a b`</code> (internal for <i>cmd.exe</i>), or <code>`glob a*b`</code> (internal for ksh)? You need to specify your shell explicitly, like <code>`cmd /c copy a b`</code>, since Perl cannot deduce which commands are internal to your shell.</p>

</li>
</ul>

<h2 id="I-cannot-embed-perl-into-my-program,-or-use-perl.dll-from-my-program."><a class="permalink" href="#I-cannot-embed-perl-into-my-program,-or-use-perl.dll-from-my-program.">#</a><a id="I1"></a><a id="I-cannot-embed-perl-into-my-program-or-use-perl.dll-from-my-program"></a>I cannot embed perl into my program, or use <i>perl.dll</i> from my program.</h2>

<dl>

<dt id="Is-your-program-EMX-compiled-with-Zmt-Zcrtdll?"><a class="permalink" href="#Is-your-program-EMX-compiled-with-Zmt-Zcrtdll?">#</a><a id="Is"></a><a id="Is-your-program-EMX-compiled-with--Zmt--Zcrtdll"></a>Is your program EMX-compiled with <code>-Zmt -Zcrtdll</code>?</dt>
<dd>

<p>If not, you need to build a stand-alone DLL for perl. Contact me, I did it once. Sockets would not work, as a lot of other stuff.</p>

</dd>
<dt id="Did-you-use-ExtUtils::Embed?"><a class="permalink" href="#Did-you-use-ExtUtils::Embed?">#</a><a id="Did"></a><a id="Did-you-use-ExtUtils::Embed"></a>Did you use <a href="https://perldoc.perl.org/5.6.0/ExtUtils::Embed">ExtUtils::Embed</a>?</dt>
<dd>

<p>I had reports it does not work. Somebody would need to fix it.</p>

</dd>
</dl>

<h2 id="``-and-pipe-open-do-not-work-under-DOS."><a class="permalink" href="#%60%60-and-pipe-open-do-not-work-under-DOS.">#</a><a id="and-pipe-open-do-not-work-under-DOS"></a><code>``</code> and pipe-<code>open</code> do not work under DOS.</h2>

<p>This may a variant of just <a href="#I-cannot-run-external-programs">&quot;I cannot run external programs&quot;</a>, or a deeper problem. Basically: you <i>need</i> RSX (see <a href="#Prerequisites">&quot;Prerequisites&quot;</a>) for these commands to work, and you may need a port of <i>sh.exe</i> which understands command arguments. One of such ports is listed in <a href="#Prerequisites">&quot;Prerequisites&quot;</a> under RSX. Do not forget to set variable <code><a href="#PERL_SH_DIR">&quot;PERL_SH_DIR&quot;</a></code> as well.</p>

<p>DPMI is required for RSX.</p>

<h2 id="Cannot-start-find.exe-&quot;pattern&quot;-file"><a class="permalink" href="#Cannot-start-find.exe-%22pattern%22-file">#</a><a id="Cannot"></a><a id="Cannot-start-find.exe-pattern-file"></a>Cannot start <code>find.exe &quot;pattern&quot; file</code></h2>

<p>Use one of</p>

<pre><code>system &#39;cmd&#39;, &#39;/c&#39;, &#39;find &quot;pattern&quot; file&#39;;
`cmd /c &#39;find &quot;pattern&quot; file&#39;`</code></pre>

<p>This would start <i>find.exe</i> via <i>cmd.exe</i> via <code>sh.exe</code> via <code>perl.exe</code>, but this is a price to pay if you want to use non-conforming program. In fact <i>find.exe</i> cannot be started at all using C library API only. Otherwise the following command-lines were equivalent:</p>

<pre><code class="plaintext">find &quot;pattern&quot; file
find pattern file</code></pre>

<h1 id="INSTALLATION"><a class="permalink" href="#INSTALLATION">#</a>INSTALLATION</h1>

<h2 id="Automatic-binary-installation"><a class="permalink" href="#Automatic-binary-installation">#</a><a id="Automatic"></a>Automatic binary installation</h2>

<p>The most convenient way of installing perl is via perl installer <i>install.exe</i>. Just follow the instructions, and 99% of the installation blues would go away.</p>

<p>Note however, that you need to have <i>unzip.exe</i> on your path, and EMX environment <i>running</i>. The latter means that if you just installed EMX, and made all the needed changes to <i>Config.sys</i>, you may need to reboot in between. Check EMX runtime by running</p>

<pre><code class="plaintext">emxrev</code></pre>

<p>A folder is created on your desktop which contains some useful objects.</p>

<p><b>Things not taken care of by automatic binary installation:</b></p>

<dl>

<dt id="PERL_BADLANG"><a class="permalink" href="#PERL_BADLANG">#</a><code>PERL_BADLANG</code></dt>
<dd>

<p>may be needed if you change your codepage <i>after</i> perl installation, and the new value is not supported by EMX. See <a href="#PERL_BADLANG">&quot;PERL_BADLANG&quot;</a>.</p>

</dd>
<dt id="PERL_BADFREE"><a class="permalink" href="#PERL_BADFREE">#</a><code>PERL_BADFREE</code></dt>
<dd>

<p>see <a href="#PERL_BADFREE">&quot;PERL_BADFREE&quot;</a>.</p>

</dd>
<dt id="Config.pm"><a class="permalink" href="#Config.pm">#</a><a id="Config"></a><i>Config.pm</i></dt>
<dd>

<p>This file resides somewhere deep in the location you installed your perl library, find it out by</p>

<pre><code>perl -MConfig -le &quot;print $INC{&#39;Config.pm&#39;}&quot;</code></pre>

<p>While most important values in this file <i>are</i> updated by the binary installer, some of them may need to be hand-edited. I know no such data, please keep me informed if you find one.</p>

</dd>
</dl>

<p><b>NOTE</b>. Because of a typo the binary installer of 5.00305 would install a variable <code>PERL_SHPATH</code> into <i>Config.sys</i>. Please remove this variable and put <code><a href="https://metacpan.org/pod/PERL_SH_DIR">PERL_SH_DIR</a></code> instead.</p>

<h2 id="Manual-binary-installation"><a class="permalink" href="#Manual-binary-installation">#</a><a id="Manual"></a>Manual binary installation</h2>

<p>As of version 5.00305, OS/2 perl binary distribution comes split into 11 components. Unfortunately, to enable configurable binary installation, the file paths in the zip files are not absolute, but relative to some directory.</p>

<p>Note that the extraction with the stored paths is still necessary (default with unzip, specify <code>-d</code> to pkunzip). However, you need to know where to extract the files. You need also to manually change entries in <i>Config.sys</i> to reflect where did you put the files. Note that if you have some primitive unzipper (like pkunzip), you may get a lot of warnings/errors during unzipping. Upgrade to <code>(w)unzip</code>.</p>

<p>Below is the sample of what to do to reproduce the configuration on my machine:</p>

<dl>

<dt id="Perl-VIO-and-PM-executables-(dynamically-linked)"><a class="permalink" href="#Perl-VIO-and-PM-executables-(dynamically-linked)">#</a><a id="Perl"></a><a id="Perl-VIO-and-PM-executables-dynamically-linked"></a>Perl VIO and PM executables (dynamically linked)</dt>
<dd>

<pre><code class="plaintext">unzip perl_exc.zip *.exe *.ico -d f:/emx.add/bin
unzip perl_exc.zip *.dll -d f:/emx.add/dll</code></pre>

<p>(have the directories with <code>*.exe</code> on PATH, and <code>*.dll</code> on LIBPATH);</p>

</dd>
<dt id="Perl_-VIO-executable-(statically-linked)"><a class="permalink" href="#Perl_-VIO-executable-(statically-linked)">#</a><a id="Perl_"></a><a id="Perl_-VIO-executable-statically-linked"></a>Perl_ VIO executable (statically linked)</dt>
<dd>

<pre><code class="plaintext">unzip perl_aou.zip -d f:/emx.add/bin</code></pre>

<p>(have the directory on PATH);</p>

</dd>
<dt id="Executables-for-Perl-utilities"><a class="permalink" href="#Executables-for-Perl-utilities">#</a><a id="Executables"></a>Executables for Perl utilities</dt>
<dd>

<pre><code class="plaintext">unzip perl_utl.zip -d f:/emx.add/bin</code></pre>

<p>(have the directory on PATH);</p>

</dd>
<dt id="Main-Perl-library"><a class="permalink" href="#Main-Perl-library">#</a><a id="Main"></a>Main Perl library</dt>
<dd>

<pre><code class="plaintext">unzip perl_mlb.zip -d f:/perllib/lib</code></pre>

<p>If this directory is preserved, you do not need to change anything. However, for perl to find it if it is changed, you need to <code>set PERLLIB_PREFIX</code> in <i>Config.sys</i>, see <a href="#PERLLIB_PREFIX">&quot;PERLLIB_PREFIX&quot;</a>.</p>

</dd>
<dt id="Additional-Perl-modules"><a class="permalink" href="#Additional-Perl-modules">#</a><a id="Additional"></a>Additional Perl modules</dt>
<dd>

<pre><code class="plaintext">unzip perl_ste.zip -d f:/perllib/lib/site_perl</code></pre>

<p>If you do not change this directory, do nothing. Otherwise put this directory and subdirectory <i>./os2</i> in <code>PERLLIB</code> or <code>PERL5LIB</code> variable. Do not use <code>PERL5LIB</code> unless you have it set already. See <a href="perl.html#ENVIRONMENT">&quot;ENVIRONMENT&quot; in perl</a>.</p>

</dd>
<dt id="Tools-to-compile-Perl-modules"><a class="permalink" href="#Tools-to-compile-Perl-modules">#</a><a id="Tools"></a>Tools to compile Perl modules</dt>
<dd>

<pre><code class="plaintext">unzip perl_blb.zip -d f:/perllib/lib</code></pre>

<p>If this directory is preserved, you do not need to change anything. However, for perl to find it if it is changed, you need to <code>set PERLLIB_PREFIX</code> in <i>Config.sys</i>, see <a href="#PERLLIB_PREFIX">&quot;PERLLIB_PREFIX&quot;</a>.</p>

</dd>
<dt id="Manpages-for-Perl-and-utilities"><a class="permalink" href="#Manpages-for-Perl-and-utilities">#</a><a id="Manpages1"></a>Manpages for Perl and utilities</dt>
<dd>

<pre><code class="plaintext">unzip perl_man.zip -d f:/perllib/man</code></pre>

<p>This directory should better be on <code>MANPATH</code>. You need to have a working man to access these files.</p>

</dd>
<dt id="Manpages-for-Perl-modules"><a class="permalink" href="#Manpages-for-Perl-modules">#</a><a id="Manpages2"></a>Manpages for Perl modules</dt>
<dd>

<pre><code class="plaintext">unzip perl_mam.zip -d f:/perllib/man</code></pre>

<p>This directory should better be on <code>MANPATH</code>. You need to have a working man to access these files.</p>

</dd>
<dt id="Source-for-Perl-documentation"><a class="permalink" href="#Source-for-Perl-documentation">#</a><a id="Source"></a>Source for Perl documentation</dt>
<dd>

<pre><code class="plaintext">unzip perl_pod.zip -d f:/perllib/lib</code></pre>

<p>This is used by by <code>perldoc</code> program (see <a href="perldoc.html">perldoc</a>), and may be used to generate HTML documentation usable by WWW browsers, and documentation in zillions of other formats: <code>info</code>, <code>LaTeX</code>, <code>Acrobat</code>, <code>FrameMaker</code> and so on.</p>

</dd>
<dt id="Perl-manual-in-.INF-format"><a class="permalink" href="#Perl-manual-in-.INF-format">#</a><a id="Perl1"></a>Perl manual in <i>.INF</i> format</dt>
<dd>

<pre><code class="plaintext">unzip perl_inf.zip -d d:/os2/book</code></pre>

<p>This directory should better be on <code>BOOKSHELF</code>.</p>

</dd>
<dt id="Pdksh"><a class="permalink" href="#Pdksh">#</a>Pdksh</dt>
<dd>

<pre><code class="plaintext">unzip perl_sh.zip -d f:/bin</code></pre>

<p>This is used by perl to run external commands which explicitly require shell, like the commands using <i>redirection</i> and <i>shell metacharacters</i>. It is also used instead of explicit <i>/bin/sh</i>.</p>

<p>Set <code>PERL_SH_DIR</code> (see <a href="#PERL_SH_DIR">&quot;PERL_SH_DIR&quot;</a>) if you move <i>sh.exe</i> from the above location.</p>

<p><b>Note.</b> It may be possible to use some other sh-compatible shell (<i>not tested</i>).</p>

</dd>
</dl>

<p>After you installed the components you needed and updated the <i>Config.sys</i> correspondingly, you need to hand-edit <i>Config.pm</i>. This file resides somewhere deep in the location you installed your perl library, find it out by</p>

<pre><code>perl -MConfig -le &quot;print $INC{&#39;Config.pm&#39;}&quot;</code></pre>

<p>You need to correct all the entries which look like file paths (they currently start with <code>f:/</code>).</p>

<h2 id="Warning"><a class="permalink" href="#Warning">#</a><b>Warning</b></h2>

<p>The automatic and manual perl installation leave precompiled paths inside perl executables. While these paths are overwriteable (see <a href="#PERLLIB_PREFIX">&quot;PERLLIB_PREFIX&quot;</a>, <a href="#PERL_SH_DIR">&quot;PERL_SH_DIR&quot;</a>), one may get better results by binary editing of paths inside the executables/DLLs.</p>

<h1 id="Accessing-documentation"><a class="permalink" href="#Accessing-documentation">#</a><a id="Accessing"></a>Accessing documentation</h1>

<p>Depending on how you built/installed perl you may have (otherwise identical) Perl documentation in the following formats:</p>

<h2 id="OS/2-.INF-file"><a class="permalink" href="#OS/2-.INF-file">#</a><a id="OS"></a><a id="OS-2-.INF-file"></a>OS/2 <i>.INF</i> file</h2>

<p>Most probably the most convenient form. Under OS/2 view it as</p>

<pre><code class="plaintext">view perl
view perl perlfunc
view perl less
view perl ExtUtils::MakeMaker</code></pre>

<p>(currently the last two may hit a wrong location, but this may improve soon). Under Win* see <a href="#SYNOPSIS">&quot;SYNOPSIS&quot;</a>.</p>

<p>If you want to build the docs yourself, and have <i>OS/2 toolkit</i>, run</p>

<pre><code class="plaintext">pod2ipf &gt; perl.ipf</code></pre>

<p>in <i>/perllib/lib/pod</i> directory, then</p>

<pre><code class="plaintext">ipfc /inf perl.ipf</code></pre>

<p>(Expect a lot of errors during the both steps.) Now move it on your BOOKSHELF path.</p>

<h2 id="Plain-text"><a class="permalink" href="#Plain-text">#</a><a id="Plain"></a>Plain text</h2>

<p>If you have perl documentation in the source form, perl utilities installed, and GNU groff installed, you may use</p>

<pre><code class="plaintext">perldoc perlfunc
perldoc less
perldoc ExtUtils::MakeMaker</code></pre>

<p>to access the perl documentation in the text form (note that you may get better results using perl manpages).</p>

<p>Alternately, try running pod2text on <i>.pod</i> files.</p>

<h2 id="Manpages"><a class="permalink" href="#Manpages">#</a>Manpages</h2>

<p>If you have man installed on your system, and you installed perl manpages, use something like this:</p>

<pre><code class="plaintext">man perlfunc
man 3 less
man ExtUtils.MakeMaker</code></pre>

<p>to access documentation for different components of Perl. Start with</p>

<pre><code class="plaintext">man perl</code></pre>

<p>Note that dot (<i>.</i>) is used as a package separator for documentation for packages, and as usual, sometimes you need to give the section - <code>3</code> above - to avoid shadowing by the <i>less(1) manpage</i>.</p>

<p>Make sure that the directory <b>above</b> the directory with manpages is on our <code>MANPATH</code>, like this</p>

<pre><code class="plaintext">set MANPATH=c:/man;f:/perllib/man</code></pre>

<h2 id="HTML"><a class="permalink" href="#HTML">#</a>HTML</h2>

<p>If you have some WWW browser available, installed the Perl documentation in the source form, and Perl utilities, you can build HTML docs. Cd to directory with <i>.pod</i> files, and do like this</p>

<pre><code class="plaintext">cd f:/perllib/lib/pod
pod2html</code></pre>

<p>After this you can direct your browser the file <i>perl.html</i> in this directory, and go ahead with reading docs, like this:</p>

<pre><code class="plaintext">explore file:///f:/perllib/lib/pod/perl.html</code></pre>

<p>Alternatively you may be able to get these docs prebuilt from CPAN.</p>

<h2 id="GNU-info-files"><a class="permalink" href="#GNU-info-files">#</a><a id="GNU"></a>GNU <code>info</code> files</h2>

<p>Users of Emacs would appreciate it very much, especially with <code>CPerl</code> mode loaded. You need to get latest <code>pod2info</code> from <code>CPAN</code>, or, alternately, prebuilt info pages.</p>

<h2 id=".PDF-files"><a class="permalink" href="#.PDF-files">#</a><a id="PDF-files"></a><i>.PDF</i> files</h2>

<p>for <code>Acrobat</code> are available on CPAN (for slightly old version of perl).</p>

<h2 id="LaTeX-docs"><a class="permalink" href="#LaTeX-docs">#</a><a id="LaTeX"></a><code>LaTeX</code> docs</h2>

<p>can be constructed using <code>pod2latex</code>.</p>

<h1 id="BUILD"><a class="permalink" href="#BUILD">#</a>BUILD</h1>

<p>Here we discuss how to build Perl under OS/2. There is an alternative (but maybe older) view on <a href="http://www.shadow.net/~troc/os2perl.html">http://www.shadow.net/~troc/os2perl.html</a>.</p>

<h2 id="Prerequisites1"><a class="permalink" href="#Prerequisites1">#</a>Prerequisites</h2>

<p>You need to have the latest EMX development environment, the full GNU tool suite (gawk renamed to awk, and GNU <i>find.exe</i> earlier on path than the OS/2 <i>find.exe</i>, same with <i>sort.exe</i>, to check use</p>

<pre><code class="plaintext">find --version
sort --version</code></pre>

<p>). You need the latest version of <i>pdksh</i> installed as <i>sh.exe</i>.</p>

<p>Check that you have <b>BSD</b> libraries and headers installed, and - optionally - Berkeley DB headers and libraries, and crypt.</p>

<p>Possible locations to get this from are</p>

<pre><code class="plaintext">ftp://hobbes.nmsu.edu/os2/unix/
ftp://ftp.cdrom.com/pub/os2/unix/
ftp://ftp.cdrom.com/pub/os2/dev32/
ftp://ftp.cdrom.com/pub/os2/emx09c/</code></pre>

<p>It is reported that the following archives contain enough utils to build perl: gnufutil.zip, gnusutil.zip, gnututil.zip, gnused.zip, gnupatch.zip, gnuawk.zip, gnumake.zip and ksh527rt.zip. Note that all these utilities are known to be available from LEO:</p>

<pre><code class="plaintext">ftp://ftp.leo.org/pub/comp/os/os2/leo/gnu</code></pre>

<p>Make sure that no copies or perl are currently running. Later steps of the build may fail since an older version of perl.dll loaded into memory may be found.</p>

<p>Also make sure that you have <i>/tmp</i> directory on the current drive, and <i>.</i> directory in your <code>LIBPATH</code>. One may try to correct the latter condition by</p>

<pre><code class="plaintext">set BEGINLIBPATH .</code></pre>

<p>if you use something like <i>CMD.EXE</i> or latest versions of <i>4os2.exe</i>.</p>

<p>Make sure your gcc is good for <code>-Zomf</code> linking: run <code>omflibs</code> script in <i>/emx/lib</i> directory.</p>

<p>Check that you have link386 installed. It comes standard with OS/2, but may be not installed due to customization. If typing</p>

<pre><code class="plaintext">link386</code></pre>

<p>shows you do not have it, do <i>Selective install</i>, and choose <code>Link object modules</code> in <i>Optional system utilities/More</i>. If you get into link386, press <code>Ctrl-C</code>.</p>

<h2 id="Getting-perl-source"><a class="permalink" href="#Getting-perl-source">#</a><a id="Getting"></a>Getting perl source</h2>

<p>You need to fetch the latest perl source (including developers releases). With some probability it is located in</p>

<pre><code class="plaintext">http://www.perl.com/CPAN/src/5.0
http://www.perl.com/CPAN/src/5.0/unsupported</code></pre>

<p>If not, you may need to dig in the indices to find it in the directory of the current maintainer.</p>

<p>Quick cycle of developers release may break the OS/2 build time to time, looking into</p>

<pre><code class="plaintext">http://www.perl.com/CPAN/ports/os2/ilyaz/</code></pre>

<p>may indicate the latest release which was publicly released by the maintainer. Note that the release may include some additional patches to apply to the current source of perl.</p>

<p>Extract it like this</p>

<pre><code class="plaintext">tar vzxf perl5.00409.tar.gz</code></pre>

<p>You may see a message about errors while extracting <i>Configure</i>. This is because there is a conflict with a similarly-named file <i>configure</i>.</p>

<p>Change to the directory of extraction.</p>

<h2 id="Application-of-the-patches"><a class="permalink" href="#Application-of-the-patches">#</a><a id="Application"></a>Application of the patches</h2>

<p>You need to apply the patches in <i>./os2/diff.*</i> like this:</p>

<pre><code class="plaintext">gnupatch -p0 &lt; os2\diff.configure</code></pre>

<p>You may also need to apply the patches supplied with the binary distribution of perl.</p>

<p>Note also that the <i>db.lib</i> and <i>db.a</i> from the EMX distribution are not suitable for multi-threaded compile (note that currently perl is not multithread-safe, but is compiled as multithreaded for compatibility with XFree86-OS/2). Get a corrected one from</p>

<pre><code class="plaintext">ftp://ftp.math.ohio-state.edu/pub/users/ilya/os2/db_mt.zip</code></pre>

<p>To make <code>-p</code> filetest work, one may also need to apply the following patch to EMX headers:</p>

<pre><code class="plaintext">--- /emx/include/sys/stat.h.orig	Thu May 23 13:48:16 1996
+++ /emx/include/sys/stat.h	Sun Jul 12 14:11:32 1998
@@ -53,7 +53,7 @@ struct stat
 #endif

 #if !defined (S_IFMT)
-#define S_IFMT   0160000  /* Mask for file type */
+#define S_IFMT   0170000  /* Mask for file type */
 #define S_IFIFO  0010000  /* Pipe */
 #define S_IFCHR  0020000  /* Character device */
 #define S_IFDIR  0040000  /* Directory */</code></pre>

<h2 id="Hand-editing"><a class="permalink" href="#Hand-editing">#</a><a id="Hand"></a>Hand-editing</h2>

<p>You may look into the file <i>./hints/os2.sh</i> and correct anything wrong you find there. I do not expect it is needed anywhere.</p>

<h2 id="Making"><a class="permalink" href="#Making">#</a>Making</h2>

<pre><code class="plaintext">sh Configure -des -D prefix=f:/perllib</code></pre>

<p><code>prefix</code> means: where to install the resulting perl library. Giving correct prefix you may avoid the need to specify <code>PERLLIB_PREFIX</code>, see <a href="#PERLLIB_PREFIX">&quot;PERLLIB_PREFIX&quot;</a>.</p>

<p><i>Ignore the message about missing <code>ln</code>, and about <code>-c</code> option to tr</i>. In fact if you can trace where the latter spurious warning comes from, please inform me.</p>

<p>Now</p>

<pre><code class="plaintext">make</code></pre>

<p>At some moment the built may die, reporting a <i>version mismatch</i> or <i>unable to run <i>perl</i></i>. This means that most of the build has been finished, and it is the time to move the constructed <i>perl.dll</i> to some <i>absolute</i> location in LIBPATH. After this is done the build should finish without a lot of fuss. <i>One can avoid the interruption if one has the correct prebuilt version of <i>perl.dll</i> on LIBPATH, but probably this is not needed anymore, since <i>miniperl.exe</i> is linked statically now.</i></p>

<p>Warnings which are safe to ignore: <i>mkfifo() redefined</i> inside <i>POSIX.c</i>.</p>

<h2 id="Testing"><a class="permalink" href="#Testing">#</a>Testing</h2>

<p>If you haven&#39;t yet moved perl.dll onto LIBPATH, do it now (alternatively, if you have a previous perl installation you&#39;d rather not disrupt until this one is installed, copy perl.dll to the t directory).</p>

<p>Now run</p>

<pre><code class="plaintext">make test</code></pre>

<p>All tests should succeed (with some of them skipped). Note that on one of the systems I see intermittent failures of <i>io/pipe.t</i> subtest 9. Any help to track what happens with this test is appreciated.</p>

<p>Some tests may generate extra messages similar to</p>

<dl>

<dt id="A-lot-of-bad-free"><a class="permalink" href="#A-lot-of-bad-free">#</a><a id="A"></a>A lot of <code>bad free</code></dt>
<dd>

<p>in database tests related to Berkeley DB. This is a confirmed bug of DB. You may disable this warnings, see <a href="#PERL_BADFREE">&quot;PERL_BADFREE&quot;</a>.</p>

<p>There is not much we can do with it (but apparently it does not cause any real error with data).</p>

</dd>
<dt id="Process-terminated-by-SIGTERM/SIGINT"><a class="permalink" href="#Process-terminated-by-SIGTERM/SIGINT">#</a><a id="Process"></a><a id="Process-terminated-by-SIGTERM-SIGINT"></a>Process terminated by SIGTERM/SIGINT</dt>
<dd>

<p>This is a standard message issued by OS/2 applications. *nix applications die in silence. It is considered a feature. One can easily disable this by appropriate sighandlers.</p>

<p>However the test engine bleeds these message to screen in unexpected moments. Two messages of this kind <i>should</i> be present during testing.</p>

</dd>
</dl>

<p>Two <i>lib/io_*</i> tests may generate popups (system error <code>SYS3175</code>), but should succeed anyway. This is due to a bug of EMX related to fork()ing with dynamically loaded libraries.</p>

<p>I submitted a patch to EMX which makes it possible to fork() with EMX dynamic libraries loaded, which makes <i>lib/io*</i> tests pass without skipping offended tests. This means that soon the number of skipped tests may decrease yet more.</p>

<p>To get finer test reports, call</p>

<pre><code class="plaintext">perl t/harness</code></pre>

<p>The report with <i>io/pipe.t</i> failing may look like this:</p>

<pre><code class="plaintext">Failed Test  Status Wstat Total Fail  Failed  List of failed
------------------------------------------------------------
io/pipe.t                    12    1   8.33%  9
7 tests skipped, plus 56 subtests skipped.
Failed 1/195 test scripts, 99.49% okay. 1/6542 subtests failed, 99.98% okay.</code></pre>

<p>The reasons for most important skipped tests are:</p>

<dl>

<dt id="op/fs.t"><a class="permalink" href="#op/fs.t">#</a><a id="op"></a><a id="op-fs.t"></a><i>op/fs.t</i></dt>
<dd>

<dl>

<dt id="18"><a class="permalink" href="#18">#</a><a id="pod18"></a>18</dt>
<dd>

<p>Checks <code>atime</code> and <code>mtime</code> of <code>stat()</code> - unfortunately, HPFS provides only 2sec time granularity (for compatibility with FAT?).</p>

</dd>
<dt id="25"><a class="permalink" href="#25">#</a><a id="pod25"></a>25</dt>
<dd>

<p>Checks <code>truncate()</code> on a filehandle just opened for write - I do not know why this should or should not work.</p>

</dd>
</dl>

</dd>
<dt id="lib/io_pipe.t"><a class="permalink" href="#lib/io_pipe.t">#</a><a id="lib"></a><a id="lib-io_pipe.t"></a><i>lib/io_pipe.t</i></dt>
<dd>

<p>Checks <code>IO::Pipe</code> module. Some feature of EMX - test fork()s with dynamic extension loaded - unsupported now.</p>

</dd>
<dt id="lib/io_sock.t"><a class="permalink" href="#lib/io_sock.t">#</a><a id="lib1"></a><a id="lib-io_sock.t"></a><i>lib/io_sock.t</i></dt>
<dd>

<p>Checks <code>IO::Socket</code> module. Some feature of EMX - test fork()s with dynamic extension loaded - unsupported now.</p>

</dd>
<dt id="op/stat.t"><a class="permalink" href="#op/stat.t">#</a><a id="op1"></a><a id="op-stat.t"></a><i>op/stat.t</i></dt>
<dd>

<p>Checks <code>stat()</code>. Tests:</p>

<dl>

<dt id="4"><a class="permalink" href="#4">#</a><a id="pod4"></a>4</dt>
<dd>

<p>Checks <code>atime</code> and <code>mtime</code> of <code>stat()</code> - unfortunately, HPFS provides only 2sec time granularity (for compatibility with FAT?).</p>

</dd>
</dl>

</dd>
<dt id="lib/io_udp.t"><a class="permalink" href="#lib/io_udp.t">#</a><a id="lib2"></a><a id="lib-io_udp.t"></a><i>lib/io_udp.t</i></dt>
<dd>

<p>It never terminates, apparently some bug in storing the last socket from which we obtained a message.</p>

</dd>
</dl>

<h2 id="Installing-the-built-perl"><a class="permalink" href="#Installing-the-built-perl">#</a><a id="Installing"></a>Installing the built perl</h2>

<p>If you haven&#39;t yet moved perl.dll onto LIBPATH, do it now.</p>

<p>Run</p>

<pre><code class="plaintext">make install</code></pre>

<p>It would put the generated files into needed locations. Manually put <i>perl.exe</i>, <i>perl__.exe</i> and <i>perl___.exe</i> to a location on your PATH, <i>perl.dll</i> to a location on your LIBPATH.</p>

<p>Run</p>

<pre><code class="plaintext">make cmdscripts INSTALLCMDDIR=d:/ir/on/path</code></pre>

<p>to convert perl utilities to <i>.cmd</i> files and put them on PATH. You need to put <i>.EXE</i>-utilities on path manually. They are installed in <code>$prefix/bin</code>, here <code>$prefix</code> is what you gave to <i>Configure</i>, see <a href="https://metacpan.org/pod/Making">Making</a>.</p>

<h2 id="a.out-style-build"><a class="permalink" href="#a.out-style-build">#</a><a id="a"></a><code>a.out</code>-style build</h2>

<p>Proceed as above, but make <i>perl_.exe</i> (see <a href="#perl_.exe">&quot;perl_.exe&quot;</a>) by</p>

<pre><code class="plaintext">make perl_</code></pre>

<p>test and install by</p>

<pre><code class="plaintext">make aout_test
make aout_install</code></pre>

<p>Manually put <i>perl_.exe</i> to a location on your PATH.</p>

<p>Since <code>perl_</code> has the extensions prebuilt, it does not suffer from the <i>dynamic extensions + fork()</i> syndrome, thus the failing tests look like</p>

<pre><code class="plaintext">Failed Test  Status Wstat Total Fail  Failed  List of failed
---------------------------------------------------------------
io/fs.t                      26   11  42.31%  2-5, 7-11, 18, 25
op/stat.t                    56    5   8.93%  3-4, 20, 35, 39
Failed 2/118 test scripts, 98.31% okay. 16/2445 subtests failed, 99.35% okay.</code></pre>

<p><b>Note.</b> The build process for <code>perl_</code> <i>does not know</i> about all the dependencies, so you should make sure that anything is up-to-date, say, by doing</p>

<pre><code class="plaintext">make perl.dll</code></pre>

<p>first.</p>

<h1 id="Build-FAQ"><a class="permalink" href="#Build-FAQ">#</a><a id="Build"></a>Build FAQ</h1>

<h2 id="Some-/-became-\-in-pdksh."><a class="permalink" href="#Some-/-became-%5C-in-pdksh.">#</a><a id="Some"></a><a id="Some-became-in-pdksh"></a>Some <code>/</code> became <code>\</code> in pdksh.</h2>

<p>You have a very old pdksh. See <a href="https://metacpan.org/pod/Prerequisites">Prerequisites</a>.</p>

<h2 id="&#39;errno&#39;-unresolved-external"><a class="permalink" href="#&#39;errno&#39;-unresolved-external">#</a><a id="errno---unresolved-external"></a><code>&#39;errno&#39;</code> - unresolved external</h2>

<p>You do not have MT-safe <i>db.lib</i>. See <a href="https://metacpan.org/pod/Prerequisites">Prerequisites</a>.</p>

<h2 id="Problems-with-tr-or-sed"><a class="permalink" href="#Problems-with-tr-or-sed">#</a><a id="Problems"></a>Problems with tr or sed</h2>

<p>reported with very old version of tr and sed.</p>

<h2 id="Some-problem-(forget-which-;-)"><a class="permalink" href="#Some-problem-(forget-which-;-)">#</a><a id="Some1"></a><a id="Some-problem-forget-which"></a>Some problem (forget which ;-)</h2>

<p>You have an older version of <i>perl.dll</i> on your LIBPATH, which broke the build of extensions.</p>

<h2 id="Library-...-not-found"><a class="permalink" href="#Library-...-not-found">#</a><a id="Library"></a>Library ... not found</h2>

<p>You did not run <code>omflibs</code>. See <a href="https://metacpan.org/pod/Prerequisites">Prerequisites</a>.</p>

<h2 id="Segfault-in-make"><a class="permalink" href="#Segfault-in-make">#</a><a id="Segfault"></a>Segfault in make</h2>

<p>You use an old version of GNU make. See <a href="https://metacpan.org/pod/Prerequisites">Prerequisites</a>.</p>

<h1 id="Specific-(mis)features-of-OS/2-port"><a class="permalink" href="#Specific-(mis)features-of-OS/2-port">#</a><a id="Specific"></a><a id="Specific-mis-features-of-OS-2-port"></a>Specific (mis)features of OS/2 port</h1>

<h2 id="setpriority,-getpriority"><a class="permalink" href="#setpriority,-getpriority">#</a><a id="setpriority"></a><a id="setpriority-getpriority"></a><code>setpriority</code>, <code>getpriority</code></h2>

<p>Note that these functions are compatible with *nix, not with the older ports of &#39;94 - 95. The priorities are absolute, go from 32 to -95, lower is quicker. 0 is the default priority.</p>

<h2 id="system()"><a class="permalink" href="#system()">#</a><a id="system"></a><code>system()</code></h2>

<p>Multi-argument form of <code>system()</code> allows an additional numeric argument. The meaning of this argument is described in <a href="https://metacpan.org/pod/OS2::Process">OS2::Process</a>.</p>

<h2 id="extproc-on-the-first-line"><a class="permalink" href="#extproc-on-the-first-line">#</a><a id="extproc"></a><code>extproc</code> on the first line</h2>

<p>If the first chars of a script are <code>&quot;extproc &quot;</code>, this line is treated as <code>#!</code>-line, thus all the switches on this line are processed (twice if script was started via cmd.exe).</p>

<h2 id="Additional-modules:"><a class="permalink" href="#Additional-modules:">#</a><a id="Additional1"></a><a id="Additional-modules"></a>Additional modules:</h2>

<p><a href="https://metacpan.org/pod/OS2::Process">OS2::Process</a>, <a href="https://metacpan.org/pod/OS2::REXX">OS2::REXX</a>, <a href="https://metacpan.org/pod/OS2::PrfDB">OS2::PrfDB</a>, <a href="https://metacpan.org/pod/OS2::ExtAttr">OS2::ExtAttr</a>. These modules provide access to additional numeric argument for <code>system</code> and to the list of the running processes, to DLLs having functions with REXX signature and to REXX runtime, to OS/2 databases in the <i>.INI</i> format, and to Extended Attributes.</p>

<p>Two additional extensions by Andreas Kaiser, <code>OS2::UPM</code>, and <code>OS2::FTP</code>, are included into my ftp directory, mirrored on CPAN.</p>

<h2 id="Prebuilt-methods:"><a class="permalink" href="#Prebuilt-methods:">#</a><a id="Prebuilt"></a><a id="Prebuilt-methods"></a>Prebuilt methods:</h2>

<dl>

<dt id="File::Copy::syscopy"><a class="permalink" href="#File::Copy::syscopy">#</a><a id="File"></a><code>File::Copy::syscopy</code></dt>
<dd>

<p>used by <code>File::Copy::copy</code>, see <a href="https://perldoc.perl.org/5.6.0/File::Copy">File::Copy</a>.</p>

</dd>
<dt id="DynaLoader::mod2fname"><a class="permalink" href="#DynaLoader::mod2fname">#</a><a id="DynaLoader"></a><code>DynaLoader::mod2fname</code></dt>
<dd>

<p>used by <code>DynaLoader</code> for DLL name mangling.</p>

</dd>
<dt id="Cwd::current_drive()"><a class="permalink" href="#Cwd::current_drive()">#</a><a id="Cwd"></a><a id="Cwd::current_drive"></a><code>Cwd::current_drive()</code></dt>
<dd>

<p>Self explanatory.</p>

</dd>
<dt id="Cwd::sys_chdir(name)"><a class="permalink" href="#Cwd::sys_chdir(name)">#</a><a id="Cwd1"></a><a id="Cwd::sys_chdir-name"></a><code>Cwd::sys_chdir(name)</code></dt>
<dd>

<p>leaves drive as it is.</p>

</dd>
<dt id="Cwd::change_drive(name)"><a class="permalink" href="#Cwd::change_drive(name)">#</a><a id="Cwd2"></a><a id="Cwd::change_drive-name"></a><code>Cwd::change_drive(name)</code></dt>
<dd>

</dd>
<dt id="Cwd::sys_is_absolute(name)"><a class="permalink" href="#Cwd::sys_is_absolute(name)">#</a><a id="Cwd3"></a><a id="Cwd::sys_is_absolute-name"></a><code>Cwd::sys_is_absolute(name)</code></dt>
<dd>

<p>means has drive letter and is_rooted.</p>

</dd>
<dt id="Cwd::sys_is_rooted(name)"><a class="permalink" href="#Cwd::sys_is_rooted(name)">#</a><a id="Cwd4"></a><a id="Cwd::sys_is_rooted-name"></a><code>Cwd::sys_is_rooted(name)</code></dt>
<dd>

<p>means has leading <code>[/\\]</code> (maybe after a drive-letter:).</p>

</dd>
<dt id="Cwd::sys_is_relative(name)"><a class="permalink" href="#Cwd::sys_is_relative(name)">#</a><a id="Cwd5"></a><a id="Cwd::sys_is_relative-name"></a><code>Cwd::sys_is_relative(name)</code></dt>
<dd>

<p>means changes with current dir.</p>

</dd>
<dt id="Cwd::sys_cwd(name)"><a class="permalink" href="#Cwd::sys_cwd(name)">#</a><a id="Cwd6"></a><a id="Cwd::sys_cwd-name"></a><code>Cwd::sys_cwd(name)</code></dt>
<dd>

<p>Interface to cwd from EMX. Used by <code>Cwd::cwd</code>.</p>

</dd>
<dt id="Cwd::sys_abspath(name,-dir)"><a class="permalink" href="#Cwd::sys_abspath(name,-dir)">#</a><a id="Cwd7"></a><a id="Cwd::sys_abspath-name-dir"></a><code>Cwd::sys_abspath(name, dir)</code></dt>
<dd>

<p>Really really odious function to implement. Returns absolute name of file which would have <code>name</code> if CWD were <code>dir</code>. <code>Dir</code> defaults to the current dir.</p>

</dd>
<dt id="Cwd::extLibpath([type])"><a class="permalink" href="#Cwd::extLibpath(%5Btype%5D)">#</a><a id="Cwd8"></a><a id="Cwd::extLibpath-type"></a><code>Cwd::extLibpath([type])</code></dt>
<dd>

<p>Get current value of extended library search path. If <code>type</code> is present and <i>true</i>, works with END_LIBPATH, otherwise with <code>BEGIN_LIBPATH</code>.</p>

</dd>
<dt id="Cwd::extLibpath_set(-path-[,-type-]-)"><a class="permalink" href="#Cwd::extLibpath_set(-path-%5B,-type-%5D-)">#</a><a id="Cwd9"></a><a id="Cwd::extLibpath_set-path-type"></a><code>Cwd::extLibpath_set( path [, type ] )</code></dt>
<dd>

<p>Set current value of extended library search path. If <code>type</code> is present and <i>true</i>, works with END_LIBPATH, otherwise with <code>BEGIN_LIBPATH</code>.</p>

</dd>
</dl>

<p>(Note that some of these may be moved to different libraries - eventually).</p>

<h2 id="Misfeatures"><a class="permalink" href="#Misfeatures">#</a>Misfeatures</h2>

<ul>

<li><p>Since <a href="http://man.he.net/man3/flock">flock(3)</a> is present in EMX, but is not functional, it is emulated by perl. To disable the emulations, set environment variable <code>USE_PERL_FLOCK=0</code>.</p>

</li>
<li><p>Here is the list of things which may be &quot;broken&quot; on EMX (from EMX docs):</p>

<ul>

<li><p>The functions <a href="http://man.he.net/man3/recvmsg">recvmsg(3)</a>, <a href="http://man.he.net/man3/sendmsg">sendmsg(3)</a>, and <a href="http://man.he.net/man3/socketpair">socketpair(3)</a> are not implemented.</p>

</li>
<li><p><a href="http://man.he.net/man3/sock_init">sock_init(3)</a> is not required and not implemented.</p>

</li>
<li><p><a href="http://man.he.net/man3/flock">flock(3)</a> is not yet implemented (dummy function). (Perl has a workaround.)</p>

</li>
<li><p><a href="http://man.he.net/man3/kill">kill(3)</a>: Special treatment of PID=0, PID=1 and PID=-1 is not implemented.</p>

</li>
<li><p><a href="http://man.he.net/man3/waitpid">waitpid(3)</a>:</p>

<pre><code class="plaintext">      WUNTRACED
	      Not implemented.
      waitpid() is not implemented for negative values of PID.</code></pre>

</li>
</ul>

<p>Note that <code>kill -9</code> does not work with the current version of EMX.</p>

</li>
<li><p>Since <i>sh.exe</i> is used for globing (see <a href="perlfunc.html#glob">&quot;glob&quot; in perlfunc</a>), the bugs of <i>sh.exe</i> plague perl as well.</p>

<p>In particular, uppercase letters do not work in <code>[...]</code>-patterns with the current pdksh.</p>

</li>
</ul>

<h2 id="Modifications"><a class="permalink" href="#Modifications">#</a>Modifications</h2>

<p>Perl modifies some standard C library calls in the following ways:</p>

<dl>

<dt id="popen"><a class="permalink" href="#popen">#</a><code>popen</code></dt>
<dd>

<p><code>my_popen</code> uses <i>sh.exe</i> if shell is required, cf. <a href="#PERL_SH_DIR">&quot;PERL_SH_DIR&quot;</a>.</p>

</dd>
<dt id="tmpnam"><a class="permalink" href="#tmpnam">#</a><code>tmpnam</code></dt>
<dd>

<p>is created using <code>TMP</code> or <code>TEMP</code> environment variable, via <code>tempnam</code>.</p>

</dd>
<dt id="tmpfile"><a class="permalink" href="#tmpfile">#</a><code>tmpfile</code></dt>
<dd>

<p>If the current directory is not writable, file is created using modified <code>tmpnam</code>, so there may be a race condition.</p>

</dd>
<dt id="ctermid"><a class="permalink" href="#ctermid">#</a><code>ctermid</code></dt>
<dd>

<p>a dummy implementation.</p>

</dd>
<dt id="stat"><a class="permalink" href="#stat">#</a><code>stat</code></dt>
<dd>

<p><code>os2_stat</code> special-cases <i>/dev/tty</i> and <i>/dev/con</i>.</p>

</dd>
<dt id="flock"><a class="permalink" href="#flock">#</a><code>flock</code></dt>
<dd>

<p>Since <a href="http://man.he.net/man3/flock">flock(3)</a> is present in EMX, but is not functional, it is emulated by perl. To disable the emulations, set environment variable <code>USE_PERL_FLOCK=0</code>.</p>

</dd>
</dl>

<h1 id="Perl-flavors"><a class="permalink" href="#Perl-flavors">#</a><a id="Perl2"></a>Perl flavors</h1>

<p>Because of idiosyncrasies of OS/2 one cannot have all the eggs in the same basket (though EMX environment tries hard to overcome this limitations, so the situation may somehow improve). There are 4 executables for Perl provided by the distribution:</p>

<h2 id="perl.exe"><a class="permalink" href="#perl.exe">#</a><a id="perl"></a><i>perl.exe</i></h2>

<p>The main workhorse. This is a chimera executable: it is compiled as an <code>a.out</code>-style executable, but is linked with <code>omf</code>-style dynamic library <i>perl.dll</i>, and with dynamic CRT DLL. This executable is a VIO application.</p>

<p>It can load perl dynamic extensions, and it can fork(). Unfortunately, with the current version of EMX it cannot fork() with dynamic extensions loaded (may be fixed by patches to EMX).</p>

<p><b>Note.</b> Keep in mind that fork() is needed to open a pipe to yourself.</p>

<h2 id="perl_.exe"><a class="permalink" href="#perl_.exe">#</a><a id="perl_"></a><i>perl_.exe</i></h2>

<p>This is a statically linked <code>a.out</code>-style executable. It can fork(), but cannot load dynamic Perl extensions. The supplied executable has a lot of extensions prebuilt, thus there are situations when it can perform tasks not possible using <i>perl.exe</i>, like fork()ing when having some standard extension loaded. This executable is a VIO application.</p>

<p><b>Note.</b> A better behaviour could be obtained from <code>perl.exe</code> if it were statically linked with standard <i>Perl extensions</i>, but dynamically linked with the <i>Perl DLL</i> and CRT DLL. Then it would be able to fork() with standard extensions, <i>and</i> would be able to dynamically load arbitrary extensions. Some changes to Makefiles and hint files should be necessary to achieve this.</p>

<p><i>This is also the only executable with does not require OS/2.</i> The friends locked into <code>M$</code> world would appreciate the fact that this executable runs under DOS, Win0.3*, Win0.95 and WinNT with an appropriate extender. See <a href="#Other-OSes">&quot;Other OSes&quot;</a>.</p>

<h2 id="perl__.exe"><a class="permalink" href="#perl__.exe">#</a><a id="perl__"></a><i>perl__.exe</i></h2>

<p>This is the same executable as <i>perl___.exe</i>, but it is a PM application.</p>

<p><b>Note.</b> Usually STDIN, STDERR, and STDOUT of a PM application are redirected to <code>nul</code>. However, it is possible to see them if you start <code>perl__.exe</code> from a PM program which emulates a console window, like <i>Shell mode</i> of Emacs or EPM. Thus it <i>is possible</i> to use Perl debugger (see <a href="perldebug.html">perldebug</a>) to debug your PM application.</p>

<p>This flavor is required if you load extensions which use PM, like the forthcoming <code>Perl/Tk</code>.</p>

<h2 id="perl___.exe"><a class="permalink" href="#perl___.exe">#</a><a id="perl___"></a><i>perl___.exe</i></h2>

<p>This is an <code>omf</code>-style executable which is dynamically linked to <i>perl.dll</i> and CRT DLL. I know no advantages of this executable over <code>perl.exe</code>, but it cannot fork() at all. Well, one advantage is that the build process is not so convoluted as with <code>perl.exe</code>.</p>

<p>It is a VIO application.</p>

<h2 id="Why-strange-names?"><a class="permalink" href="#Why-strange-names?">#</a><a id="Why"></a><a id="Why-strange-names"></a>Why strange names?</h2>

<p>Since Perl processes the <code>#!</code>-line (cf. <a href="perlrun.html#DESCRIPTION">&quot;DESCRIPTION&quot; in perlrun</a>, <a href="perlrun.html#Switches">&quot;Switches&quot; in perlrun</a>, <a href="perldiag.html#Not-a-perl-script">&quot;Not a perl script&quot; in perldiag</a>, <a href="perldiag.html#No-Perl-script-found-in-input">&quot;No Perl script found in input&quot; in perldiag</a>), it should know when a program <i>is a Perl</i>. There is some naming convention which allows Perl to distinguish correct lines from wrong ones. The above names are almost the only names allowed by this convention which do not contain digits (which have absolutely different semantics).</p>

<h2 id="Why-dynamic-linking?"><a class="permalink" href="#Why-dynamic-linking?">#</a><a id="Why1"></a><a id="Why-dynamic-linking"></a>Why dynamic linking?</h2>

<p>Well, having several executables dynamically linked to the same huge library has its advantages, but this would not substantiate the additional work to make it compile. The reason is stupid-but-quick &quot;hard&quot; dynamic linking used by OS/2.</p>

<p>The address tables of DLLs are patched only once, when they are loaded. The addresses of entry points into DLLs are guaranteed to be the same for all programs which use the same DLL, which reduces the amount of runtime patching - once DLL is loaded, its code is read-only.</p>

<p>While this allows some performance advantages, this makes life terrible for developers, since the above scheme makes it impossible for a DLL to be resolved to a symbol in the .EXE file, since this would need a DLL to have different relocations tables for the executables which use it.</p>

<p>However, a Perl extension is forced to use some symbols from the perl executable, say to know how to find the arguments provided on the perl internal evaluation stack. The solution is that the main code of interpreter should be contained in a DLL, and the <i>.EXE</i> file just loads this DLL into memory and supplies command-arguments.</p>

<p>This <i>greatly</i> increases the load time for the application (as well as the number of problems during compilation). Since interpreter is in a DLL, the CRT is basically forced to reside in a DLL as well (otherwise extensions would not be able to use CRT).</p>

<h2 id="Why-chimera-build?"><a class="permalink" href="#Why-chimera-build?">#</a><a id="Why2"></a><a id="Why-chimera-build"></a>Why chimera build?</h2>

<p>Current EMX environment does not allow DLLs compiled using Unixish <code>a.out</code> format to export symbols for data. This forces <code>omf</code>-style compile of <i>perl.dll</i>.</p>

<p>Current EMX environment does not allow <i>.EXE</i> files compiled in <code>omf</code> format to fork(). fork() is needed for exactly three Perl operations:</p>

<dl>

<dt id="explicit-fork()"><a class="permalink" href="#explicit-fork()">#</a><a id="explicit"></a><a id="explicit-fork"></a>explicit fork()</dt>
<dd>

<p>in the script, and</p>

</dd>
<dt id="open-FH,-&quot;|-&quot;"><a class="permalink" href="#open-FH,-%22%7C-%22">#</a><a id="open"></a><a id="open-FH"></a>open FH, &quot;|-&quot;</dt>
<dd>

</dd>
<dt id="open-FH,-&quot;-|&quot;"><a class="permalink" href="#open-FH,-%22-%7C%22">#</a><a id="open1"></a><a id="open-FH1"></a>open FH, &quot;-|&quot;</dt>
<dd>

<p>opening pipes to itself.</p>

</dd>
</dl>

<p>While these operations are not questions of life and death, a lot of useful scripts use them. This forces <code>a.out</code>-style compile of <i>perl.exe</i>.</p>

<h1 id="ENVIRONMENT"><a class="permalink" href="#ENVIRONMENT">#</a>ENVIRONMENT</h1>

<p>Here we list environment variables with are either OS/2- and DOS- and Win*-specific, or are more important under OS/2 than under other OSes.</p>

<h2 id="PERLLIB_PREFIX"><a class="permalink" href="#PERLLIB_PREFIX">#</a><code>PERLLIB_PREFIX</code></h2>

<p>Specific for EMX port. Should have the form</p>

<pre><code class="plaintext">path1;path2</code></pre>

<p>or</p>

<pre><code class="plaintext">path1 path2</code></pre>

<p>If the beginning of some prebuilt path matches <i>path1</i>, it is substituted with <i>path2</i>.</p>

<p>Should be used if the perl library is moved from the default location in preference to <code>PERL(5)LIB</code>, since this would not leave wrong entries in @INC. Say, if the compiled version of perl looks for @INC in <i>f:/perllib/lib</i>, and you want to install the library in <i>h:/opt/gnu</i>, do</p>

<pre><code class="plaintext">set PERLLIB_PREFIX=f:/perllib/lib;h:/opt/gnu</code></pre>

<h2 id="PERL_BADLANG1"><a class="permalink" href="#PERL_BADLANG1">#</a><code>PERL_BADLANG</code></h2>

<p>If 1, perl ignores setlocale() failing. May be useful with some strange <i>locale</i>s.</p>

<h2 id="PERL_BADFREE1"><a class="permalink" href="#PERL_BADFREE1">#</a><code>PERL_BADFREE</code></h2>

<p>If 1, perl would not warn of in case of unwarranted free(). May be useful in conjunction with the module DB_File, since Berkeley DB memory handling code is buggy.</p>

<h2 id="PERL_SH_DIR"><a class="permalink" href="#PERL_SH_DIR">#</a><code>PERL_SH_DIR</code></h2>

<p>Specific for EMX port. Gives the directory part of the location for <i>sh.exe</i>.</p>

<h2 id="USE_PERL_FLOCK"><a class="permalink" href="#USE_PERL_FLOCK">#</a><code>USE_PERL_FLOCK</code></h2>

<p>Specific for EMX port. Since <a href="http://man.he.net/man3/flock">flock(3)</a> is present in EMX, but is not functional, it is emulated by perl. To disable the emulations, set environment variable <code>USE_PERL_FLOCK=0</code>.</p>

<h2 id="TMP-or-TEMP"><a class="permalink" href="#TMP-or-TEMP">#</a><a id="TMP"></a><code>TMP</code> or <code>TEMP</code></h2>

<p>Specific for EMX port. Used as storage place for temporary files, most notably <code>-e</code> scripts.</p>

<h1 id="Evolution"><a class="permalink" href="#Evolution">#</a>Evolution</h1>

<p>Here we list major changes which could make you by surprise.</p>

<h2 id="Priorities"><a class="permalink" href="#Priorities">#</a>Priorities</h2>

<p><code>setpriority</code> and <code>getpriority</code> are not compatible with earlier ports by Andreas Kaiser. See <code>&quot;setpriority, getpriority&quot;</code>.</p>

<h2 id="DLL-name-mangling"><a class="permalink" href="#DLL-name-mangling">#</a><a id="DLL"></a>DLL name mangling</h2>

<p>With the release 5.003_01 the dynamically loadable libraries should be rebuilt. In particular, DLLs are now created with the names which contain a checksum, thus allowing workaround for OS/2 scheme of caching DLLs.</p>

<h2 id="Threading"><a class="permalink" href="#Threading">#</a>Threading</h2>

<p>As of release 5.003_01 perl is linked to multithreaded CRT DLL. If perl itself is not compiled multithread-enabled, so will not be perl malloc(). However, extensions may use multiple thread on their own risk.</p>

<p>Needed to compile <code>Perl/Tk</code> for XFree86-OS/2 out-of-the-box.</p>

<h2 id="Calls-to-external-programs"><a class="permalink" href="#Calls-to-external-programs">#</a><a id="Calls"></a>Calls to external programs</h2>

<p>Due to a popular demand the perl external program calling has been changed wrt Andreas Kaiser&#39;s port. <i>If</i> perl needs to call an external program <i>via shell</i>, the <i>f:/bin/sh.exe</i> will be called, or whatever is the override, see <a href="#PERL_SH_DIR">&quot;PERL_SH_DIR&quot;</a>.</p>

<p>Thus means that you need to get some copy of a <i>sh.exe</i> as well (I use one from pdksh). The drive <i>F:</i> above is set up automatically during the build to a correct value on the builder machine, but is overridable at runtime,</p>

<p><b>Reasons:</b> a consensus on <code>perl5-porters</code> was that perl should use one non-overridable shell per platform. The obvious choices for OS/2 are <i>cmd.exe</i> and <i>sh.exe</i>. Having perl build itself would be impossible with <i>cmd.exe</i> as a shell, thus I picked up <code>sh.exe</code>. Thus assures almost 100% compatibility with the scripts coming from *nix. As an added benefit this works as well under DOS if you use DOS-enabled port of pdksh (see <a href="#Prerequisites">&quot;Prerequisites&quot;</a>).</p>

<p><b>Disadvantages:</b> currently <i>sh.exe</i> of pdksh calls external programs via fork()/exec(), and there is <i>no</i> functioning exec() on OS/2. exec() is emulated by EMX by asyncroneous call while the caller waits for child completion (to pretend that the <code>pid</code> did not change). This means that 1 <i>extra</i> copy of <i>sh.exe</i> is made active via fork()/exec(), which may lead to some resources taken from the system (even if we do not count extra work needed for fork()ing).</p>

<p>Note that this a lesser issue now when we do not spawn <i>sh.exe</i> unless needed (metachars found).</p>

<p>One can always start <i>cmd.exe</i> explicitly via</p>

<pre><code class="plaintext">system &#39;cmd&#39;, &#39;/c&#39;, &#39;mycmd&#39;, &#39;arg1&#39;, &#39;arg2&#39;, ...</code></pre>

<p>If you need to use <i>cmd.exe</i>, and do not want to hand-edit thousands of your scripts, the long-term solution proposed on p5-p is to have a directive</p>

<pre><code>use OS2::Cmd;</code></pre>

<p>which will override system(), exec(), <code>``</code>, and <code>open(,&#39;...|&#39;)</code>. With current perl you may override only system(), readpipe() - the explicit version of <code>``</code>, and maybe exec(). The code will substitute the one-argument call to system() by <code>CORE::system(&#39;cmd.exe&#39;, &#39;/c&#39;, shift)</code>.</p>

<p>If you have some working code for <code>OS2::Cmd</code>, please send it to me, I will include it into distribution. I have no need for such a module, so cannot test it.</p>

<p>For the details of the current situation with calling external programs, see <a href="https://metacpan.org/pod/Starting%2520OS#2-(and-DOS)-programs-under-Perl">&quot;2 (and DOS) programs under Perl&quot; in Starting OS</a>.</p>

<ul>

<li><p>External scripts may be called by name. Perl will try the same extensions as when processing <b>-S</b> command-line switch.</p>

</li>
</ul>

<h2 id="Memory-allocation"><a class="permalink" href="#Memory-allocation">#</a><a id="Memory"></a>Memory allocation</h2>

<p>Perl uses its own malloc() under OS/2 - interpreters are usually malloc-bound for speed, but perl is not, since its malloc is lightning-fast. Perl-memory-usage-tuned benchmarks show that Perl&#39;s malloc is 5 times quickier than EMX one. I do not have convincing data about memory footpring, but a (pretty random) benchmark showed that Perl one is 5% better.</p>

<p>Combination of perl&#39;s malloc() and rigid DLL name resolution creates a special problem with library functions which expect their return value to be free()d by system&#39;s free(). To facilitate extensions which need to call such functions, system memory-allocation functions are still available with the prefix <code>emx_</code> added. (Currently only DLL perl has this, it should propagate to <i>perl_.exe</i> shortly.)</p>

<h2 id="Threads"><a class="permalink" href="#Threads">#</a>Threads</h2>

<p>One can build perl with thread support enabled by providing <code>-D usethreads</code> option to <i>Configure</i>. Currently OS/2 support of threads is very preliminary.</p>

<p>Most notable problems:</p>

<dl>

<dt id="COND_WAIT"><a class="permalink" href="#COND_WAIT">#</a><code>COND_WAIT</code></dt>
<dd>

<p>may have a race condition. Needs a reimplementation (in terms of chaining waiting threads, with linker list stored in per-thread structure?).</p>

</dd>
<dt id="os2.c"><a class="permalink" href="#os2.c">#</a><a id="os2"></a><i>os2.c</i></dt>
<dd>

<p>has a couple of static variables used in OS/2-specific functions. (Need to be moved to per-thread structure, or serialized?)</p>

</dd>
</dl>

<p>Note that these problems should not discourage experimenting, since they have a low probability of affecting small programs.</p>

<h1 id="AUTHOR"><a class="permalink" href="#AUTHOR">#</a>AUTHOR</h1>

<p>Ilya Zakharevich, ilya@math.ohio-state.edu</p>

<h1 id="SEE-ALSO"><a class="permalink" href="#SEE-ALSO">#</a><a id="SEE"></a>SEE ALSO</h1>

<p>perl(1).</p>

<div class="pod-errors"><p>1 POD Error</p><div class="pod-errors-detail"><p>The following errors were encountered while parsing the POD:</p><dl><dt><a class="permalink" href="#">#</a>Around line 947:</dt><dd><p>Expected text after =item, not a number</p></dd></dl></div></div>


      </div>
      <div id="footer">
        <p>Perldoc Browser is maintained by Dan Book (<a href="https://metacpan.org/author/DBOOK">DBOOK</a>). Please contact him via the <a href="https://github.com/Grinnz/perldoc-browser/issues">GitHub issue tracker</a> or <a href="mailto:dbook@cpan.org">email</a> regarding any issues with the site itself, search, or rendering of documentation.</p>

<p>The Perl documentation is maintained by the Perl 5 Porters in the development of Perl. Please contact them via the <a href="https://github.com/Perl/perl5/issues">Perl issue tracker</a>, the <a href="https://lists.perl.org/list/perl5-porters.html">mailing list</a>, or <a href="https://kiwiirc.com/client/irc.perl.org/p5p">IRC</a> to report any issues with the contents or format of the documentation.</p>


      </div>
    </div>
    <script src="../js/bootstrap.bundle.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.highlightAll();</script>
  </body>

<!-- Mirrored from perldoc.perl.org/5.6.0/perlos2 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Aug 2025 16:20:46 GMT -->
</html>
