<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from perldoc.perl.org/5.6.1/perlfaq8 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Aug 2025 16:20:46 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>perlfaq8 - System Interaction ($Revision: 1.39 $, $Date: 1999/05/23 18:37:57 $) - Perldoc Browser</title>
    <link rel="search" href="../opensearch.xml" type="application/opensearchdescription+xml" title="Perldoc Browser">
    <link rel="canonical" href="../perlfaq8.html">
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/stackoverflow-light.min.css" rel="stylesheet">
    <link href="../css/perldoc.css" rel="stylesheet">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-KVNWBNT5FB"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-KVNWBNT5FB');
      gtag('config', 'UA-50555-3');
    </script>
  </head>
  <body>
    <nav class="navbar navbar-expand-md bg-dark" data-bs-theme="dark"><div class="container-fluid">
  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <a class="navbar-brand" href="../index.html"><img src="../images/perl_camel_30.png" width="30" height="30" class="d-inline-block align-text-top" alt="Perl Camel Logo"> Perldoc Browser</a>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav me-auto">
      <li class="nav-item dropdown text-nowrap">
        <a class="nav-link dropdown-toggle" href="#" id="dropdownlink-stable" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">5.6.1</a>
        <div class="dropdown-menu" aria-labelledby="dropdownlink-stable">
          <a class="dropdown-item" href="../perlfaq8.html">Latest</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.42.0/perlfaq8">5.42.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.3/perlfaq8">5.40.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.2/perlfaq8">5.40.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.1/perlfaq8">5.40.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.0/perlfaq8">5.40.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.5/perlfaq8">5.38.5</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.4/perlfaq8">5.38.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.3/perlfaq8">5.38.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.2/perlfaq8">5.38.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.1/perlfaq8">5.38.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.0/perlfaq8">5.38.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.36.3/perlfaq8">5.36.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.36.2/perlfaq8">5.36.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.36.1/perlfaq8">5.36.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.36.0/perlfaq8">5.36.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.34.3/perlfaq8">5.34.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.34.2/perlfaq8">5.34.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.34.1/perlfaq8">5.34.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.34.0/perlfaq8">5.34.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.32.1/perlfaq8">5.32.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.32.0/perlfaq8">5.32.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.30.3/perlfaq8">5.30.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.30.2/perlfaq8">5.30.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.30.1/perlfaq8">5.30.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.30.0/perlfaq8">5.30.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.28.3/perlfaq8">5.28.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.28.2/perlfaq8">5.28.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.28.1/perlfaq8">5.28.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.28.0/perlfaq8">5.28.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.26.3/perlfaq8">5.26.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.26.2/perlfaq8">5.26.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.26.1/perlfaq8">5.26.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.26.0/perlfaq8">5.26.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.4/perlfaq8">5.24.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.3/perlfaq8">5.24.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.2/perlfaq8">5.24.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.1/perlfaq8">5.24.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.0/perlfaq8">5.24.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.4/perlfaq8">5.22.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.3/perlfaq8">5.22.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.2/perlfaq8">5.22.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.1/perlfaq8">5.22.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.0/perlfaq8">5.22.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.20.3/perlfaq8">5.20.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.20.2/perlfaq8">5.20.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.20.1/perlfaq8">5.20.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.20.0/perlfaq8">5.20.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.4/perlfaq8">5.18.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.3/perlfaq8">5.18.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.2/perlfaq8">5.18.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.1/perlfaq8">5.18.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.0/perlfaq8">5.18.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.16.3/perlfaq8">5.16.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.16.2/perlfaq8">5.16.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.16.1/perlfaq8">5.16.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.16.0/perlfaq8">5.16.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.4/perlfaq8">5.14.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.3/perlfaq8">5.14.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.2/perlfaq8">5.14.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.1/perlfaq8">5.14.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.0/perlfaq8">5.14.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.5/perlfaq8">5.12.5</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.4/perlfaq8">5.12.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.3/perlfaq8">5.12.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.2/perlfaq8">5.12.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.1/perlfaq8">5.12.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.0/perlfaq8">5.12.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.10.1/perlfaq8">5.10.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.10.0/perlfaq8">5.10.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.9/perlfaq8">5.8.9</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.8/perlfaq8">5.8.8</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.7/perlfaq8">5.8.7</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.6/perlfaq8">5.8.6</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.5/perlfaq8">5.8.5</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.4/perlfaq8">5.8.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.3/perlfaq8">5.8.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.2/perlfaq8">5.8.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.1/perlfaq8">5.8.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.0/perlfaq8">5.8.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="../5.6.2/perlfaq8.html">5.6.2</a>
          <a class="dropdown-item active" href="perlfaq8.html">5.6.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.6.0/perlfaq8">5.6.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005_04/perlfaq8">5.005_04</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005_03/perlfaq8">5.005_03</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005_02/perlfaq8">5.005_02</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005_01/perlfaq8">5.005_01</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005/perlfaq8">5.005</a>
        </div>
      </li>
      <li class="nav-item dropdown text-nowrap">
        <a class="nav-link dropdown-toggle" href="#" id="dropdownlink-dev" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Dev</a>
        <div class="dropdown-menu" aria-labelledby="dropdownlink-dev">
          <a class="dropdown-item" href="https://perldoc.perl.org/blead/perlfaq8">blead</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.43.1/perlfaq8">5.43.1</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.42.0-RC3/perlfaq8">5.42.0-RC3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.42.0-RC2/perlfaq8">5.42.0-RC2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.42.0-RC1/perlfaq8">5.42.0-RC1</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.13/perlfaq8">5.41.13</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.12/perlfaq8">5.41.12</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.11/perlfaq8">5.41.11</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.10/perlfaq8">5.41.10</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.9/perlfaq8">5.41.9</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.8/perlfaq8">5.41.8</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.7/perlfaq8">5.41.7</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.6/perlfaq8">5.41.6</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.5/perlfaq8">5.41.5</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.4/perlfaq8">5.41.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.3/perlfaq8">5.41.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.2/perlfaq8">5.41.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.1/perlfaq8">5.41.1</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.3-RC1/perlfaq8">5.40.3-RC1</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.5-RC1/perlfaq8">5.38.5-RC1</a>
        </div>
      </li>
      <li class="nav-item dropdown text-nowrap">
        <a class="nav-link dropdown-toggle" href="#" id="dropdownlink-nav" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Documentation</a>
        <div class="dropdown-menu" aria-labelledby="dropdownlink-nav">
          <a class="dropdown-item" href="perl.html">Perl</a>
          <a class="dropdown-item" href="perlintro.html">Intro</a>
          <a class="dropdown-item" href="perl.html#Tutorials">Tutorials</a>
          <a class="dropdown-item" href="perlfaq.html">FAQs</a>
          <a class="dropdown-item" href="perl.html#Reference-Manual">Reference</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="perlop.html">Operators</a>
          <a class="dropdown-item" href="functions.html">Functions</a>
          <a class="dropdown-item" href="variables.html">Variables</a>
          <a class="dropdown-item" href="modules.html">Modules</a>
          <a class="dropdown-item" href="perlutil.html">Utilities</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="perldelta.html">Release Notes</a>
          <a class="dropdown-item" href="perlcommunity.html">Community</a>
          <a class="dropdown-item" href="perlhist.html">History</a>
        </div>
      </li>
    </ul>
    <ul class="navbar-nav">
      <button id="content-expand-button" type="button" class="btn btn-dark d-none d-lg-inline-block me-4">Expand</button>
      <script src="../js/perldoc-expand-page.js"></script>
    </ul>
    <form class="form-inline" method="get" action="https://perldoc.perl.org/5.6.1/search">
      <input id="search-input" class="form-control me-3" type="search" name="q" placeholder="[S]earch" aria-label="Search" value="">
    </form>
    <script src="../js/perldoc-focus-search.js"></script>
  </div>
</div></nav>

    <div id="wrapperlicious" class="container-fluid">
      <div id="perldocdiv">
        <div id="links">
          <a href="perlfaq8.html">perlfaq8</a>
          <div id="more">
            (<a href="https://perldoc.perl.org/5.6.1/perlfaq8.txt">source</a>,
            <a href="https://metacpan.org/pod/perlfaq8">CPAN</a>)
          </div>
        </div>
        <div class="leading-notice">
          You are viewing the version of this documentation from Perl 5.6.1.
            <a href="../perlfaq8.html">View the latest version</a>
        </div>
        <h1><a id="toc">CONTENTS</a></h1>
                  <ul>
              <li>
                <a class="text-decoration-none" href="#NAME">NAME</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#DESCRIPTION">DESCRIPTION</a>
                            <ul>
              <li>
                <a class="text-decoration-none" href="#How-do-I-find-out-which-operating-system-I&#39;m-running-under?">How do I find out which operating system I&#39;m running under?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-come-exec()-doesn&#39;t-return?">How come exec() doesn&#39;t return?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-do-fancy-stuff-with-the-keyboard/screen/mouse?">How do I do fancy stuff with the keyboard/screen/mouse?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-print-something-out-in-color?">How do I print something out in color?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-read-just-one-key-without-waiting-for-a-return-key?">How do I read just one key without waiting for a return key?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-check-whether-input-is-ready-on-the-keyboard?">How do I check whether input is ready on the keyboard?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-clear-the-screen?">How do I clear the screen?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-get-the-screen-size?">How do I get the screen size?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-ask-the-user-for-a-password?">How do I ask the user for a password?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-read-and-write-the-serial-port?">How do I read and write the serial port?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-decode-encrypted-password-files?">How do I decode encrypted password files?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-start-a-process-in-the-background?">How do I start a process in the background?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-trap-control-characters/signals?">How do I trap control characters/signals?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-modify-the-shadow-password-file-on-a-Unix-system?">How do I modify the shadow password file on a Unix system?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-set-the-time-and-date?">How do I set the time and date?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-can-I-sleep()-or-alarm()-for-under-a-second?">How can I sleep() or alarm() for under a second?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-can-I-measure-time-under-a-second?">How can I measure time under a second?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-can-I-do-an-atexit()-or-setjmp()/longjmp()?-(Exception-handling)">How can I do an atexit() or setjmp()/longjmp()? (Exception handling)</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Why-doesn&#39;t-my-sockets-program-work-under-System-V-(Solaris)?-What-does-the-error-message-%22Protocol-not-supported%22-mean?">Why doesn&#39;t my sockets program work under System V (Solaris)? What does the error message &quot;Protocol not supported&quot; mean?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-can-I-call-my-system&#39;s-unique-C-functions-from-Perl?">How can I call my system&#39;s unique C functions from Perl?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Where-do-I-get-the-include-files-to-do-ioctl()-or-syscall()?">Where do I get the include files to do ioctl() or syscall()?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Why-do-setuid-perl-scripts-complain-about-kernel-problems?">Why do setuid perl scripts complain about kernel problems?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-can-I-open-a-pipe-both-to-and-from-a-command?">How can I open a pipe both to and from a command?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Why-can&#39;t-I-get-the-output-of-a-command-with-system()?">Why can&#39;t I get the output of a command with system()?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-can-I-capture-STDERR-from-an-external-command?">How can I capture STDERR from an external command?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Why-doesn&#39;t-open()-return-an-error-when-a-pipe-open-fails?">Why doesn&#39;t open() return an error when a pipe open fails?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#What&#39;s-wrong-with-using-backticks-in-a-void-context?">What&#39;s wrong with using backticks in a void context?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-can-I-call-backticks-without-shell-processing?">How can I call backticks without shell processing?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Why-can&#39;t-my-script-read-from-STDIN-after-I-gave-it-EOF-(%5ED-on-Unix,-%5EZ-on-MS-DOS)?">Why can&#39;t my script read from STDIN after I gave it EOF (^D on Unix, ^Z on MS-DOS)?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-can-I-convert-my-shell-script-to-perl?">How can I convert my shell script to perl?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Can-I-use-perl-to-run-a-telnet-or-ftp-session?">Can I use perl to run a telnet or ftp session?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-can-I-write-expect-in-Perl?">How can I write expect in Perl?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#Is-there-a-way-to-hide-perl&#39;s-command-line-from-programs-such-as-%22ps%22?">Is there a way to hide perl&#39;s command line from programs such as &quot;ps&quot;?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#I-%7Bchanged-directory,-modified-my-environment%7D-in-a-perl-script.-How-come-the-change-disappeared-when-I-exited-the-script?-How-do-I-get-my-changes-to-be-visible?">I {changed directory, modified my environment} in a perl script. How come the change disappeared when I exited the script? How do I get my changes to be visible?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-close-a-process&#39;s-filehandle-without-waiting-for-it-to-complete?">How do I close a process&#39;s filehandle without waiting for it to complete?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-fork-a-daemon-process?">How do I fork a daemon process?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-find-out-if-I&#39;m-running-interactively-or-not?">How do I find out if I&#39;m running interactively or not?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-timeout-a-slow-event?">How do I timeout a slow event?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-set-CPU-limits?">How do I set CPU limits?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-avoid-zombies-on-a-Unix-system?">How do I avoid zombies on a Unix system?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-use-an-SQL-database?">How do I use an SQL database?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-make-a-system()-exit-on-control-C?">How do I make a system() exit on control-C?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-open-a-file-without-blocking?">How do I open a file without blocking?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-install-a-module-from-CPAN?">How do I install a module from CPAN?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#What&#39;s-the-difference-between-require-and-use?">What&#39;s the difference between require and use?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-keep-my-own-module/library-directory?">How do I keep my own module/library directory?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-add-the-directory-my-program-lives-in-to-the-module/library-search-path?">How do I add the directory my program lives in to the module/library search path?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-add-a-directory-to-my-include-path-at-runtime?">How do I add a directory to my include path at runtime?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#What-is-socket.ph-and-where-do-I-get-it?">What is socket.ph and where do I get it?</a>
              </li>
          </ul>

              </li>
              <li>
                <a class="text-decoration-none" href="#AUTHOR-AND-COPYRIGHT">AUTHOR AND COPYRIGHT</a>
              </li>
          </ul>

      <h1 id="NAME"><a class="permalink" href="#NAME">#</a>NAME</h1>

<p>perlfaq8 - System Interaction ($Revision: 1.39 $, $Date: 1999/05/23 18:37:57 $)</p>

<h1 id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">#</a>DESCRIPTION</h1>

<p>This section of the Perl FAQ covers questions involving operating system interaction. Topics include interprocess communication (IPC), control over the user-interface (keyboard, screen and pointing devices), and most anything else not related to data manipulation.</p>

<p>Read the FAQs and documentation specific to the port of perl to your operating system (eg, <a href="perlvms.html">perlvms</a>, <a href="https://metacpan.org/pod/perlplan9">perlplan9</a>, ...). These should contain more detailed information on the vagaries of your perl.</p>

<h2 id="How-do-I-find-out-which-operating-system-I&#39;m-running-under?"><a class="permalink" href="#How-do-I-find-out-which-operating-system-I&#39;m-running-under?">#</a><a id="How"></a><a id="How-do-I-find-out-which-operating-system-Im-running-under"></a>How do I find out which operating system I&#39;m running under?</h2>

<p>The $^O variable ($OSNAME if you use English) contains an indication of the name of the operating system (not its release number) that your perl binary was built for.</p>

<h2 id="How-come-exec()-doesn&#39;t-return?"><a class="permalink" href="#How-come-exec()-doesn&#39;t-return?">#</a><a id="How1"></a><a id="How-come-exec-doesnt-return"></a>How come exec() doesn&#39;t return?</h2>

<p>Because that&#39;s what it does: it replaces your currently running program with a different one. If you want to keep going (as is probably the case if you&#39;re asking this question) use system() instead.</p>

<h2 id="How-do-I-do-fancy-stuff-with-the-keyboard/screen/mouse?"><a class="permalink" href="#How-do-I-do-fancy-stuff-with-the-keyboard/screen/mouse?">#</a><a id="How2"></a><a id="How-do-I-do-fancy-stuff-with-the-keyboard-screen-mouse"></a>How do I do fancy stuff with the keyboard/screen/mouse?</h2>

<p>How you access/control keyboards, screens, and pointing devices (&quot;mice&quot;) is system-dependent. Try the following modules:</p>

<dl>

<dt id="Keyboard"><a class="permalink" href="#Keyboard">#</a>Keyboard</dt>
<dd>

<pre><code class="plaintext">Term::Cap			Standard perl distribution
Term::ReadKey		CPAN
Term::ReadLine::Gnu		CPAN
Term::ReadLine::Perl	CPAN
Term::Screen		CPAN</code></pre>

</dd>
<dt id="Screen"><a class="permalink" href="#Screen">#</a>Screen</dt>
<dd>

<pre><code class="plaintext">Term::Cap			Standard perl distribution
Curses			CPAN
Term::ANSIColor		CPAN</code></pre>

</dd>
<dt id="Mouse"><a class="permalink" href="#Mouse">#</a>Mouse</dt>
<dd>

<pre><code class="plaintext">Tk				CPAN</code></pre>

</dd>
</dl>

<p>Some of these specific cases are shown below.</p>

<h2 id="How-do-I-print-something-out-in-color?"><a class="permalink" href="#How-do-I-print-something-out-in-color?">#</a><a id="How3"></a><a id="How-do-I-print-something-out-in-color"></a>How do I print something out in color?</h2>

<p>In general, you don&#39;t, because you don&#39;t know whether the recipient has a color-aware display device. If you know that they have an ANSI terminal that understands color, you can use the Term::ANSIColor module from CPAN:</p>

<pre><code>use Term::ANSIColor;
print color(&quot;red&quot;), &quot;Stop!\n&quot;, color(&quot;reset&quot;);
print color(&quot;green&quot;), &quot;Go!\n&quot;, color(&quot;reset&quot;);</code></pre>

<p>Or like this:</p>

<pre><code>use Term::ANSIColor qw(:constants);
print RED, &quot;Stop!\n&quot;, RESET;
print GREEN, &quot;Go!\n&quot;, RESET;</code></pre>

<h2 id="How-do-I-read-just-one-key-without-waiting-for-a-return-key?"><a class="permalink" href="#How-do-I-read-just-one-key-without-waiting-for-a-return-key?">#</a><a id="How4"></a><a id="How-do-I-read-just-one-key-without-waiting-for-a-return-key"></a>How do I read just one key without waiting for a return key?</h2>

<p>Controlling input buffering is a remarkably system-dependent matter. On many systems, you can just use the <b>stty</b> command as shown in <a href="perlfunc.html#getc">&quot;getc&quot; in perlfunc</a>, but as you see, that&#39;s already getting you into portability snags.</p>

<pre><code>open(TTY, &quot;+&lt;/dev/tty&quot;) or die &quot;no tty: $!&quot;;
system &quot;stty  cbreak &lt;/dev/tty &gt;/dev/tty 2&gt;&amp;1&quot;;
$key = getc(TTY);		# perhaps this works
# OR ELSE
sysread(TTY, $key, 1);	# probably this does
system &quot;stty -cbreak &lt;/dev/tty &gt;/dev/tty 2&gt;&amp;1&quot;;</code></pre>

<p>The Term::ReadKey module from CPAN offers an easy-to-use interface that should be more efficient than shelling out to <b>stty</b> for each key. It even includes limited support for Windows.</p>

<pre><code>use Term::ReadKey;
ReadMode(&#39;cbreak&#39;);
$key = ReadKey(0);
ReadMode(&#39;normal&#39;);</code></pre>

<p>However, using the code requires that you have a working C compiler and can use it to build and install a CPAN module. Here&#39;s a solution using the standard POSIX module, which is already on your systems (assuming your system supports POSIX).</p>

<pre><code>use HotKey;
$key = readkey();</code></pre>

<p>And here&#39;s the HotKey module, which hides the somewhat mystifying calls to manipulate the POSIX termios structures.</p>

<pre><code># HotKey.pm
package HotKey;

@ISA = qw(Exporter);
@EXPORT = qw(cbreak cooked readkey);

use strict;
use POSIX qw(:termios_h);
my ($term, $oterm, $echo, $noecho, $fd_stdin);

$fd_stdin = fileno(STDIN);
$term     = POSIX::Termios-&gt;new();
$term-&gt;getattr($fd_stdin);
$oterm     = $term-&gt;getlflag();

$echo     = ECHO | ECHOK | ICANON;
$noecho   = $oterm &amp; ~$echo;

sub cbreak {
    $term-&gt;setlflag($noecho);  # ok, so i don&#39;t want echo either
    $term-&gt;setcc(VTIME, 1);
    $term-&gt;setattr($fd_stdin, TCSANOW);
}

sub cooked {
    $term-&gt;setlflag($oterm);
    $term-&gt;setcc(VTIME, 0);
    $term-&gt;setattr($fd_stdin, TCSANOW);
}

sub readkey {
    my $key = &#39;&#39;;
    cbreak();
    sysread(STDIN, $key, 1);
    cooked();
    return $key;
}

END { cooked() }

1;</code></pre>

<h2 id="How-do-I-check-whether-input-is-ready-on-the-keyboard?"><a class="permalink" href="#How-do-I-check-whether-input-is-ready-on-the-keyboard?">#</a><a id="How5"></a><a id="How-do-I-check-whether-input-is-ready-on-the-keyboard"></a>How do I check whether input is ready on the keyboard?</h2>

<p>The easiest way to do this is to read a key in nonblocking mode with the Term::ReadKey module from CPAN, passing it an argument of -1 to indicate not to block:</p>

<pre><code>use Term::ReadKey;

ReadMode(&#39;cbreak&#39;);

if (defined ($char = ReadKey(-1)) ) {
    # input was waiting and it was $char
} else {
    # no input was waiting
}

ReadMode(&#39;normal&#39;);                  # restore normal tty settings</code></pre>

<h2 id="How-do-I-clear-the-screen?"><a class="permalink" href="#How-do-I-clear-the-screen?">#</a><a id="How6"></a><a id="How-do-I-clear-the-screen"></a>How do I clear the screen?</h2>

<p>If you only have do so infrequently, use <code>system</code>:</p>

<pre><code>system(&quot;clear&quot;);</code></pre>

<p>If you have to do this a lot, save the clear string so you can print it 100 times without calling a program 100 times:</p>

<pre><code>$clear_string = `clear`;
print $clear_string;</code></pre>

<p>If you&#39;re planning on doing other screen manipulations, like cursor positions, etc, you might wish to use Term::Cap module:</p>

<pre><code>use Term::Cap;
$terminal = Term::Cap-&gt;Tgetent( {OSPEED =&gt; 9600} );
$clear_string = $terminal-&gt;Tputs(&#39;cl&#39;);</code></pre>

<h2 id="How-do-I-get-the-screen-size?"><a class="permalink" href="#How-do-I-get-the-screen-size?">#</a><a id="How7"></a><a id="How-do-I-get-the-screen-size"></a>How do I get the screen size?</h2>

<p>If you have Term::ReadKey module installed from CPAN, you can use it to fetch the width and height in characters and in pixels:</p>

<pre><code>use Term::ReadKey;
($wchar, $hchar, $wpixels, $hpixels) = GetTerminalSize();</code></pre>

<p>This is more portable than the raw <code>ioctl</code>, but not as illustrative:</p>

<pre><code>require &#39;sys/ioctl.ph&#39;;
die &quot;no TIOCGWINSZ &quot; unless defined &amp;TIOCGWINSZ;
open(TTY, &quot;+&lt;/dev/tty&quot;)                     or die &quot;No tty: $!&quot;;
unless (ioctl(TTY, &amp;TIOCGWINSZ, $winsize=&#39;&#39;)) {
    die sprintf &quot;$0: ioctl TIOCGWINSZ (%08x: $!)\n&quot;, &amp;TIOCGWINSZ;
}
($row, $col, $xpixel, $ypixel) = unpack(&#39;S4&#39;, $winsize);
print &quot;(row,col) = ($row,$col)&quot;;
print &quot;  (xpixel,ypixel) = ($xpixel,$ypixel)&quot; if $xpixel || $ypixel;
print &quot;\n&quot;;</code></pre>

<h2 id="How-do-I-ask-the-user-for-a-password?"><a class="permalink" href="#How-do-I-ask-the-user-for-a-password?">#</a><a id="How8"></a><a id="How-do-I-ask-the-user-for-a-password"></a>How do I ask the user for a password?</h2>

<p>(This question has nothing to do with the web. See a different FAQ for that.)</p>

<p>There&#39;s an example of this in <a href="perlfunc.html#crypt">&quot;crypt&quot; in perlfunc</a>). First, you put the terminal into &quot;no echo&quot; mode, then just read the password normally. You may do this with an old-style ioctl() function, POSIX terminal control (see <a href="POSIX.html">POSIX</a> or its documentation the Camel Book), or a call to the <b>stty</b> program, with varying degrees of portability.</p>

<p>You can also do this for most systems using the Term::ReadKey module from CPAN, which is easier to use and in theory more portable.</p>

<pre><code>use Term::ReadKey;

ReadMode(&#39;noecho&#39;);
$password = ReadLine(0);</code></pre>

<h2 id="How-do-I-read-and-write-the-serial-port?"><a class="permalink" href="#How-do-I-read-and-write-the-serial-port?">#</a><a id="How9"></a><a id="How-do-I-read-and-write-the-serial-port"></a>How do I read and write the serial port?</h2>

<p>This depends on which operating system your program is running on. In the case of Unix, the serial ports will be accessible through files in /dev; on other systems, device names will doubtless differ. Several problem areas common to all device interaction are the following:</p>

<dl>

<dt id="lockfiles"><a class="permalink" href="#lockfiles">#</a>lockfiles</dt>
<dd>

<p>Your system may use lockfiles to control multiple access. Make sure you follow the correct protocol. Unpredictable behavior can result from multiple processes reading from one device.</p>

</dd>
<dt id="open-mode"><a class="permalink" href="#open-mode">#</a><a id="open"></a>open mode</dt>
<dd>

<p>If you expect to use both read and write operations on the device, you&#39;ll have to open it for update (see <a href="perlfunc.html#open">&quot;open&quot; in perlfunc</a> for details). You may wish to open it without running the risk of blocking by using sysopen() and <code>O_RDWR|O_NDELAY|O_NOCTTY</code> from the Fcntl module (part of the standard perl distribution). See <a href="perlfunc.html#sysopen">&quot;sysopen&quot; in perlfunc</a> for more on this approach.</p>

</dd>
<dt id="end-of-line"><a class="permalink" href="#end-of-line">#</a><a id="end"></a>end of line</dt>
<dd>

<p>Some devices will be expecting a &quot;\r&quot; at the end of each line rather than a &quot;\n&quot;. In some ports of perl, &quot;\r&quot; and &quot;\n&quot; are different from their usual (Unix) ASCII values of &quot;\012&quot; and &quot;\015&quot;. You may have to give the numeric values you want directly, using octal (&quot;\015&quot;), hex (&quot;0x0D&quot;), or as a control-character specification (&quot;\cM&quot;).</p>

<pre><code>print DEV &quot;atv1\012&quot;;	# wrong, for some devices
print DEV &quot;atv1\015&quot;;	# right, for some devices</code></pre>

<p>Even though with normal text files a &quot;\n&quot; will do the trick, there is still no unified scheme for terminating a line that is portable between Unix, DOS/Win, and Macintosh, except to terminate <i>ALL</i> line ends with &quot;\015\012&quot;, and strip what you don&#39;t need from the output. This applies especially to socket I/O and autoflushing, discussed next.</p>

</dd>
<dt id="flushing-output"><a class="permalink" href="#flushing-output">#</a><a id="flushing"></a>flushing output</dt>
<dd>

<p>If you expect characters to get to your device when you print() them, you&#39;ll want to autoflush that filehandle. You can use select() and the <code>$|</code> variable to control autoflushing (see <a>perlvar/$</a> and <a href="perlfunc.html#select">&quot;select&quot; in perlfunc</a>, or <a href="perlfaq5.html">perlfaq5</a>, ``How do I flush/unbuffer an output filehandle? Why must I do this?&#39;&#39;):</p>

<pre><code>$oldh = select(DEV);
$| = 1;
select($oldh);</code></pre>

<p>You&#39;ll also see code that does this without a temporary variable, as in</p>

<pre><code>select((select(DEV), $| = 1)[0]);</code></pre>

<p>Or if you don&#39;t mind pulling in a few thousand lines of code just because you&#39;re afraid of a little $| variable:</p>

<pre><code>use IO::Handle;
DEV-&gt;autoflush(1);</code></pre>

<p>As mentioned in the previous item, this still doesn&#39;t work when using socket I/O between Unix and Macintosh. You&#39;ll need to hardcode your line terminators, in that case.</p>

</dd>
<dt id="non-blocking-input"><a class="permalink" href="#non-blocking-input">#</a><a id="non"></a>non-blocking input</dt>
<dd>

<p>If you are doing a blocking read() or sysread(), you&#39;ll have to arrange for an alarm handler to provide a timeout (see <a href="perlfunc.html#alarm">&quot;alarm&quot; in perlfunc</a>). If you have a non-blocking open, you&#39;ll likely have a non-blocking read, which means you may have to use a 4-arg select() to determine whether I/O is ready on that device (see <a href="perlfunc.html#select">&quot;select&quot; in perlfunc</a>.</p>

</dd>
</dl>

<p>While trying to read from his caller-id box, the notorious Jamie Zawinski &lt;jwz@netscape.com&gt;, after much gnashing of teeth and fighting with sysread, sysopen, POSIX&#39;s tcgetattr business, and various other functions that go bump in the night, finally came up with this:</p>

<pre><code>    sub open_modem {
	use IPC::Open2;
	my $stty = `/bin/stty -g`;
	open2( \*MODEM_IN, \*MODEM_OUT, &quot;cu -l$modem_device -s2400 2&gt;&amp;1&quot;);
	# starting cu hoses /dev/tty&#39;s stty settings, even when it has
	# been opened on a pipe...
	system(&quot;/bin/stty $stty&quot;);
	$_ = &lt;MODEM_IN&gt;;
	chomp;
	if ( !m/^Connected/ ) {
	    print STDERR &quot;$0: cu printed `$_&#39; instead of `Connected&#39;\n&quot;;
	}
    }</code></pre>

<h2 id="How-do-I-decode-encrypted-password-files?"><a class="permalink" href="#How-do-I-decode-encrypted-password-files?">#</a><a id="How10"></a><a id="How-do-I-decode-encrypted-password-files"></a>How do I decode encrypted password files?</h2>

<p>You spend lots and lots of money on dedicated hardware, but this is bound to get you talked about.</p>

<p>Seriously, you can&#39;t if they are Unix password files--the Unix password system employs one-way encryption. It&#39;s more like hashing than encryption. The best you can check is whether something else hashes to the same string. You can&#39;t turn a hash back into the original string. Programs like Crack can forcibly (and intelligently) try to guess passwords, but don&#39;t (can&#39;t) guarantee quick success.</p>

<p>If you&#39;re worried about users selecting bad passwords, you should proactively check when they try to change their password (by modifying passwd(1), for example).</p>

<h2 id="How-do-I-start-a-process-in-the-background?"><a class="permalink" href="#How-do-I-start-a-process-in-the-background?">#</a><a id="How11"></a><a id="How-do-I-start-a-process-in-the-background"></a>How do I start a process in the background?</h2>

<p>You could use</p>

<pre><code class="plaintext">system(&quot;cmd &amp;&quot;)</code></pre>

<p>or you could use fork as documented in <a href="perlfunc.html#fork">&quot;fork&quot; in perlfunc</a>, with further examples in <a href="perlipc.html">perlipc</a>. Some things to be aware of, if you&#39;re on a Unix-like system:</p>

<dl>

<dt id="STDIN,-STDOUT,-and-STDERR-are-shared"><a class="permalink" href="#STDIN,-STDOUT,-and-STDERR-are-shared">#</a><a id="STDIN"></a><a id="STDIN-STDOUT-and-STDERR-are-shared"></a>STDIN, STDOUT, and STDERR are shared</dt>
<dd>

<p>Both the main process and the backgrounded one (the &quot;child&quot; process) share the same STDIN, STDOUT and STDERR filehandles. If both try to access them at once, strange things can happen. You may want to close or reopen these for the child. You can get around this with <code>open</code>ing a pipe (see <a href="perlfunc.html#open">&quot;open&quot; in perlfunc</a>) but on some systems this means that the child process cannot outlive the parent.</p>

</dd>
<dt id="Signals"><a class="permalink" href="#Signals">#</a>Signals</dt>
<dd>

<p>You&#39;ll have to catch the SIGCHLD signal, and possibly SIGPIPE too. SIGCHLD is sent when the backgrounded process finishes. SIGPIPE is sent when you write to a filehandle whose child process has closed (an untrapped SIGPIPE can cause your program to silently die). This is not an issue with <code>system(&quot;cmd&amp;&quot;)</code>.</p>

</dd>
<dt id="Zombies"><a class="permalink" href="#Zombies">#</a>Zombies</dt>
<dd>

<p>You have to be prepared to &quot;reap&quot; the child process when it finishes</p>

<pre><code>$SIG{CHLD} = sub { wait };</code></pre>

<p>See <a href="perlipc.html#Signals">&quot;Signals&quot; in perlipc</a> for other examples of code to do this. Zombies are not an issue with <code>system(&quot;prog &amp;&quot;)</code>.</p>

</dd>
</dl>

<h2 id="How-do-I-trap-control-characters/signals?"><a class="permalink" href="#How-do-I-trap-control-characters/signals?">#</a><a id="How12"></a><a id="How-do-I-trap-control-characters-signals"></a>How do I trap control characters/signals?</h2>

<p>You don&#39;t actually &quot;trap&quot; a control character. Instead, that character generates a signal which is sent to your terminal&#39;s currently foregrounded process group, which you then trap in your process. Signals are documented in <a href="perlipc.html#Signals">&quot;Signals&quot; in perlipc</a> and the section on ``Signals&#39;&#39; in the Camel.</p>

<p>Be warned that very few C libraries are re-entrant. Therefore, if you attempt to print() in a handler that got invoked during another stdio operation your internal structures will likely be in an inconsistent state, and your program will dump core. You can sometimes avoid this by using syswrite() instead of print().</p>

<p>Unless you&#39;re exceedingly careful, the only safe things to do inside a signal handler are (1) set a variable and (2) exit. In the first case, you should only set a variable in such a way that malloc() is not called (eg, by setting a variable that already has a value).</p>

<p>For example:</p>

<pre><code>    $Interrupted = 0;	# to ensure it has a value
    $SIG{INT} = sub {
        $Interrupted++;
	syswrite(STDERR, &quot;ouch\n&quot;, 5);
    }</code></pre>

<p>However, because syscalls restart by default, you&#39;ll find that if you&#39;re in a &quot;slow&quot; call, such as &lt;FH&gt;, read(), connect(), or wait(), that the only way to terminate them is by &quot;longjumping&quot; out; that is, by raising an exception. See the time-out handler for a blocking flock() in <a href="perlipc.html#Signals">&quot;Signals&quot; in perlipc</a> or the section on ``Signals&#39;&#39; in the Camel book.</p>

<h2 id="How-do-I-modify-the-shadow-password-file-on-a-Unix-system?"><a class="permalink" href="#How-do-I-modify-the-shadow-password-file-on-a-Unix-system?">#</a><a id="How13"></a><a id="How-do-I-modify-the-shadow-password-file-on-a-Unix-system"></a>How do I modify the shadow password file on a Unix system?</h2>

<p>If perl was installed correctly and your shadow library was written properly, the getpw*() functions described in <a href="perlfunc.html">perlfunc</a> should in theory provide (read-only) access to entries in the shadow password file. To change the file, make a new shadow password file (the format varies from system to system--see <a href="http://man.he.net/man5/passwd">passwd(5)</a> for specifics) and use pwd_mkdb(8) to install it (see <a href="http://man.he.net/man8/pwd_mkdb">pwd_mkdb(8)</a> for more details).</p>

<h2 id="How-do-I-set-the-time-and-date?"><a class="permalink" href="#How-do-I-set-the-time-and-date?">#</a><a id="How14"></a><a id="How-do-I-set-the-time-and-date"></a>How do I set the time and date?</h2>

<p>Assuming you&#39;re running under sufficient permissions, you should be able to set the system-wide date and time by running the date(1) program. (There is no way to set the time and date on a per-process basis.) This mechanism will work for Unix, MS-DOS, Windows, and NT; the VMS equivalent is <code>set time</code>.</p>

<p>However, if all you want to do is change your timezone, you can probably get away with setting an environment variable:</p>

<pre><code>$ENV{TZ} = &quot;MST7MDT&quot;;		   # unixish
$ENV{&#39;SYS$TIMEZONE_DIFFERENTIAL&#39;}=&quot;-5&quot; # vms
system &quot;trn comp.lang.perl.misc&quot;;</code></pre>

<h2 id="How-can-I-sleep()-or-alarm()-for-under-a-second?"><a class="permalink" href="#How-can-I-sleep()-or-alarm()-for-under-a-second?">#</a><a id="How15"></a><a id="How-can-I-sleep-or-alarm-for-under-a-second"></a>How can I sleep() or alarm() for under a second?</h2>

<p>If you want finer granularity than the 1 second that the sleep() function provides, the easiest way is to use the select() function as documented in <a href="perlfunc.html#select">&quot;select&quot; in perlfunc</a>. Try the Time::HiRes and the BSD::Itimer modules (available from CPAN).</p>

<h2 id="How-can-I-measure-time-under-a-second?"><a class="permalink" href="#How-can-I-measure-time-under-a-second?">#</a><a id="How16"></a><a id="How-can-I-measure-time-under-a-second"></a>How can I measure time under a second?</h2>

<p>In general, you may not be able to. The Time::HiRes module (available from CPAN) provides this functionality for some systems.</p>

<p>If your system supports both the syscall() function in Perl as well as a system call like gettimeofday(2), then you may be able to do something like this:</p>

<pre><code>require &#39;sys/syscall.ph&#39;;

$TIMEVAL_T = &quot;LL&quot;;

$done = $start = pack($TIMEVAL_T, ());

syscall(&amp;SYS_gettimeofday, $start, 0) != -1
           or die &quot;gettimeofday: $!&quot;;

   ##########################
   # DO YOUR OPERATION HERE #
   ##########################

syscall( &amp;SYS_gettimeofday, $done, 0) != -1
       or die &quot;gettimeofday: $!&quot;;

@start = unpack($TIMEVAL_T, $start);
@done  = unpack($TIMEVAL_T, $done);

# fix microseconds
for ($done[1], $start[1]) { $_ /= 1_000_000 }

$delta_time = sprintf &quot;%.4f&quot;, ($done[0]  + $done[1]  )
                                        -
                             ($start[0] + $start[1] );</code></pre>

<h2 id="How-can-I-do-an-atexit()-or-setjmp()/longjmp()?-(Exception-handling)"><a class="permalink" href="#How-can-I-do-an-atexit()-or-setjmp()/longjmp()?-(Exception-handling)">#</a><a id="How17"></a><a id="How-can-I-do-an-atexit-or-setjmp-longjmp-Exception-handling"></a>How can I do an atexit() or setjmp()/longjmp()? (Exception handling)</h2>

<p>Release 5 of Perl added the END block, which can be used to simulate atexit(). Each package&#39;s END block is called when the program or thread ends (see <a href="perlmod.html">perlmod</a> manpage for more details).</p>

<p>For example, you can use this to make sure your filter program managed to finish its output without filling up the disk:</p>

<pre><code>    END {
	close(STDOUT) || die &quot;stdout close failed: $!&quot;;
    } </code></pre>

<p>The END block isn&#39;t called when untrapped signals kill the program, though, so if you use END blocks you should also use</p>

<pre><code>use sigtrap qw(die normal-signals);</code></pre>

<p>Perl&#39;s exception-handling mechanism is its eval() operator. You can use eval() as setjmp and die() as longjmp. For details of this, see the section on signals, especially the time-out handler for a blocking flock() in <a href="perlipc.html#Signals">&quot;Signals&quot; in perlipc</a> or the section on ``Signals&#39;&#39; in the Camel Book.</p>

<p>If exception handling is all you&#39;re interested in, try the exceptions.pl library (part of the standard perl distribution).</p>

<p>If you want the atexit() syntax (and an rmexit() as well), try the AtExit module available from CPAN.</p>

<h2 id="Why-doesn&#39;t-my-sockets-program-work-under-System-V-(Solaris)?-What-does-the-error-message-&quot;Protocol-not-supported&quot;-mean?"><a class="permalink" href="#Why-doesn&#39;t-my-sockets-program-work-under-System-V-(Solaris)?-What-does-the-error-message-%22Protocol-not-supported%22-mean?">#</a><a id="Why"></a><a id="Why-doesnt-my-sockets-program-work-under-System-V-Solaris-What-does-the-error-message-Protocol-not-supported-mean"></a>Why doesn&#39;t my sockets program work under System V (Solaris)? What does the error message &quot;Protocol not supported&quot; mean?</h2>

<p>Some Sys-V based systems, notably Solaris 2.X, redefined some of the standard socket constants. Since these were constant across all architectures, they were often hardwired into perl code. The proper way to deal with this is to &quot;use Socket&quot; to get the correct values.</p>

<p>Note that even though SunOS and Solaris are binary compatible, these values are different. Go figure.</p>

<h2 id="How-can-I-call-my-system&#39;s-unique-C-functions-from-Perl?"><a class="permalink" href="#How-can-I-call-my-system&#39;s-unique-C-functions-from-Perl?">#</a><a id="How18"></a><a id="How-can-I-call-my-systems-unique-C-functions-from-Perl"></a>How can I call my system&#39;s unique C functions from Perl?</h2>

<p>In most cases, you write an external module to do it--see the answer to &quot;Where can I learn about linking C with Perl? [h2xs, xsubpp]&quot;. However, if the function is a system call, and your system supports syscall(), you can use the syscall function (documented in <a href="perlfunc.html">perlfunc</a>).</p>

<p>Remember to check the modules that came with your distribution, and CPAN as well--someone may already have written a module to do it.</p>

<h2 id="Where-do-I-get-the-include-files-to-do-ioctl()-or-syscall()?"><a class="permalink" href="#Where-do-I-get-the-include-files-to-do-ioctl()-or-syscall()?">#</a><a id="Where"></a><a id="Where-do-I-get-the-include-files-to-do-ioctl-or-syscall"></a>Where do I get the include files to do ioctl() or syscall()?</h2>

<p>Historically, these would be generated by the h2ph tool, part of the standard perl distribution. This program converts cpp(1) directives in C header files to files containing subroutine definitions, like &amp;SYS_getitimer, which you can use as arguments to your functions. It doesn&#39;t work perfectly, but it usually gets most of the job done. Simple files like <i>errno.h</i>, <i>syscall.h</i>, and <i>socket.h</i> were fine, but the hard ones like <i>ioctl.h</i> nearly always need to hand-edited. Here&#39;s how to install the *.ph files:</p>

<pre><code class="plaintext">1.  become super-user
2.  cd /usr/include
3.  h2ph *.h */*.h</code></pre>

<p>If your system supports dynamic loading, for reasons of portability and sanity you probably ought to use h2xs (also part of the standard perl distribution). This tool converts C header files to Perl extensions. See <a href="perlxstut.html">perlxstut</a> for how to get started with h2xs.</p>

<p>If your system doesn&#39;t support dynamic loading, you still probably ought to use h2xs. See <a href="perlxstut.html">perlxstut</a> and <a href="https://perldoc.perl.org/5.6.1/ExtUtils::MakeMaker">ExtUtils::MakeMaker</a> for more information (in brief, just use <b>make perl</b> instead of a plain <b>make</b> to rebuild perl with a new static extension).</p>

<h2 id="Why-do-setuid-perl-scripts-complain-about-kernel-problems?"><a class="permalink" href="#Why-do-setuid-perl-scripts-complain-about-kernel-problems?">#</a><a id="Why1"></a><a id="Why-do-setuid-perl-scripts-complain-about-kernel-problems"></a>Why do setuid perl scripts complain about kernel problems?</h2>

<p>Some operating systems have bugs in the kernel that make setuid scripts inherently insecure. Perl gives you a number of options (described in <a href="perlsec.html">perlsec</a>) to work around such systems.</p>

<h2 id="How-can-I-open-a-pipe-both-to-and-from-a-command?"><a class="permalink" href="#How-can-I-open-a-pipe-both-to-and-from-a-command?">#</a><a id="How19"></a><a id="How-can-I-open-a-pipe-both-to-and-from-a-command"></a>How can I open a pipe both to and from a command?</h2>

<p>The IPC::Open2 module (part of the standard perl distribution) is an easy-to-use approach that internally uses pipe(), fork(), and exec() to do the job. Make sure you read the deadlock warnings in its documentation, though (see <a href="https://perldoc.perl.org/5.6.1/IPC::Open2">IPC::Open2</a>). See <a href="perlipc.html#Bidirectional-Communication-with-Another-Process">&quot;Bidirectional Communication with Another Process&quot; in perlipc</a> and <a href="perlipc.html#Bidirectional-Communication-with-Yourself">&quot;Bidirectional Communication with Yourself&quot; in perlipc</a></p>

<p>You may also use the IPC::Open3 module (part of the standard perl distribution), but be warned that it has a different order of arguments from IPC::Open2 (see <a href="https://perldoc.perl.org/5.6.1/IPC::Open3">IPC::Open3</a>).</p>

<h2 id="Why-can&#39;t-I-get-the-output-of-a-command-with-system()?"><a class="permalink" href="#Why-can&#39;t-I-get-the-output-of-a-command-with-system()?">#</a><a id="Why2"></a><a id="Why-cant-I-get-the-output-of-a-command-with-system"></a>Why can&#39;t I get the output of a command with system()?</h2>

<p>You&#39;re confusing the purpose of system() and backticks (``). system() runs a command and returns exit status information (as a 16 bit value: the low 7 bits are the signal the process died from, if any, and the high 8 bits are the actual exit value). Backticks (``) run a command and return what it sent to STDOUT.</p>

<pre><code>$exit_status   = system(&quot;mail-users&quot;);
$output_string = `ls`;</code></pre>

<h2 id="How-can-I-capture-STDERR-from-an-external-command?"><a class="permalink" href="#How-can-I-capture-STDERR-from-an-external-command?">#</a><a id="How20"></a><a id="How-can-I-capture-STDERR-from-an-external-command"></a>How can I capture STDERR from an external command?</h2>

<p>There are three basic ways of running external commands:</p>

<pre><code>system $cmd;		# using system()
$output = `$cmd`;		# using backticks (``)
open (PIPE, &quot;cmd |&quot;);	# using open()</code></pre>

<p>With system(), both STDOUT and STDERR will go the same place as the script&#39;s STDOUT and STDERR, unless the system() command redirects them. Backticks and open() read <b>only</b> the STDOUT of your command.</p>

<p>With any of these, you can change file descriptors before the call:</p>

<pre><code>open(STDOUT, &quot;&gt;logfile&quot;);
system(&quot;ls&quot;);</code></pre>

<p>or you can use Bourne shell file-descriptor redirection:</p>

<pre><code>$output = `$cmd 2&gt;some_file`;
open (PIPE, &quot;cmd 2&gt;some_file |&quot;);</code></pre>

<p>You can also use file-descriptor redirection to make STDERR a duplicate of STDOUT:</p>

<pre><code>$output = `$cmd 2&gt;&amp;1`;
open (PIPE, &quot;cmd 2&gt;&amp;1 |&quot;);</code></pre>

<p>Note that you <i>cannot</i> simply open STDERR to be a dup of STDOUT in your Perl program and avoid calling the shell to do the redirection. This doesn&#39;t work:</p>

<pre><code>open(STDERR, &quot;&gt;&amp;STDOUT&quot;);
$alloutput = `cmd args`;  # stderr still escapes</code></pre>

<p>This fails because the open() makes STDERR go to where STDOUT was going at the time of the open(). The backticks then make STDOUT go to a string, but don&#39;t change STDERR (which still goes to the old STDOUT).</p>

<p>Note that you <i>must</i> use Bourne shell (sh(1)) redirection syntax in backticks, not csh(1)! Details on why Perl&#39;s system() and backtick and pipe opens all use the Bourne shell are in http://www.perl.com/CPAN/doc/FMTEYEWTK/versus/csh.whynot . To capture a command&#39;s STDERR and STDOUT together:</p>

<pre><code>$output = `cmd 2&gt;&amp;1`;                       # either with backticks
$pid = open(PH, &quot;cmd 2&gt;&amp;1 |&quot;);              # or with an open pipe
while (&lt;PH&gt;) { }                            #    plus a read</code></pre>

<p>To capture a command&#39;s STDOUT but discard its STDERR:</p>

<pre><code>$output = `cmd 2&gt;/dev/null`;                # either with backticks
$pid = open(PH, &quot;cmd 2&gt;/dev/null |&quot;);       # or with an open pipe
while (&lt;PH&gt;) { }                            #    plus a read</code></pre>

<p>To capture a command&#39;s STDERR but discard its STDOUT:</p>

<pre><code>$output = `cmd 2&gt;&amp;1 1&gt;/dev/null`;           # either with backticks
$pid = open(PH, &quot;cmd 2&gt;&amp;1 1&gt;/dev/null |&quot;);  # or with an open pipe
while (&lt;PH&gt;) { }                            #    plus a read</code></pre>

<p>To exchange a command&#39;s STDOUT and STDERR in order to capture the STDERR but leave its STDOUT to come out our old STDERR:</p>

<pre><code>$output = `cmd 3&gt;&amp;1 1&gt;&amp;2 2&gt;&amp;3 3&gt;&amp;-`;        # either with backticks
$pid = open(PH, &quot;cmd 3&gt;&amp;1 1&gt;&amp;2 2&gt;&amp;3 3&gt;&amp;-|&quot;);# or with an open pipe
while (&lt;PH&gt;) { }                            #    plus a read</code></pre>

<p>To read both a command&#39;s STDOUT and its STDERR separately, it&#39;s easiest and safest to redirect them separately to files, and then read from those files when the program is done:</p>

<pre><code>system(&quot;program args 1&gt;/tmp/program.stdout 2&gt;/tmp/program.stderr&quot;);</code></pre>

<p>Ordering is important in all these examples. That&#39;s because the shell processes file descriptor redirections in strictly left to right order.</p>

<pre><code>system(&quot;prog args 1&gt;tmpfile 2&gt;&amp;1&quot;);
system(&quot;prog args 2&gt;&amp;1 1&gt;tmpfile&quot;);</code></pre>

<p>The first command sends both standard out and standard error to the temporary file. The second command sends only the old standard output there, and the old standard error shows up on the old standard out.</p>

<h2 id="Why-doesn&#39;t-open()-return-an-error-when-a-pipe-open-fails?"><a class="permalink" href="#Why-doesn&#39;t-open()-return-an-error-when-a-pipe-open-fails?">#</a><a id="Why3"></a><a id="Why-doesnt-open-return-an-error-when-a-pipe-open-fails"></a>Why doesn&#39;t open() return an error when a pipe open fails?</h2>

<p>Because the pipe open takes place in two steps: first Perl calls fork() to start a new process, then this new process calls exec() to run the program you really wanted to open. The first step reports success or failure to your process, so open() can only tell you whether the fork() succeeded or not.</p>

<p>To find out if the exec() step succeeded, you have to catch SIGCHLD and wait() to get the exit status. You should also catch SIGPIPE if you&#39;re writing to the child--you may not have found out the exec() failed by the time you write. This is documented in <a href="perlipc.html">perlipc</a>.</p>

<p>In some cases, even this won&#39;t work. If the second argument to a piped open() contains shell metacharacters, perl fork()s, then exec()s a shell to decode the metacharacters and eventually run the desired program. Now when you call wait(), you only learn whether or not the <i>shell</i> could be successfully started...it&#39;s best to avoid shell metacharacters.</p>

<p>On systems that follow the spawn() paradigm, open() <i>might</i> do what you expect--unless perl uses a shell to start your command. In this case the fork()/exec() description still applies.</p>

<h2 id="What&#39;s-wrong-with-using-backticks-in-a-void-context?"><a class="permalink" href="#What&#39;s-wrong-with-using-backticks-in-a-void-context?">#</a><a id="What"></a><a id="Whats-wrong-with-using-backticks-in-a-void-context"></a>What&#39;s wrong with using backticks in a void context?</h2>

<p>Strictly speaking, nothing. Stylistically speaking, it&#39;s not a good way to write maintainable code because backticks have a (potentially humongous) return value, and you&#39;re ignoring it. It&#39;s may also not be very efficient, because you have to read in all the lines of output, allocate memory for them, and then throw it away. Too often people are lulled to writing:</p>

<pre><code>`cp file file.bak`;</code></pre>

<p>And now they think &quot;Hey, I&#39;ll just always use backticks to run programs.&quot; Bad idea: backticks are for capturing a program&#39;s output; the system() function is for running programs.</p>

<p>Consider this line:</p>

<pre><code>`cat /etc/termcap`;</code></pre>

<p>You haven&#39;t assigned the output anywhere, so it just wastes memory (for a little while). You forgot to check <code>$?</code> to see whether the program even ran correctly, too. Even if you wrote</p>

<pre><code>print `cat /etc/termcap`;</code></pre>

<p>this code could and probably should be written as</p>

<pre><code>    system(&quot;cat /etc/termcap&quot;) == 0
	or die &quot;cat program failed!&quot;;</code></pre>

<p>which will get the output quickly (as it is generated, instead of only at the end) and also check the return value.</p>

<p>system() also provides direct control over whether shell wildcard processing may take place, whereas backticks do not.</p>

<h2 id="How-can-I-call-backticks-without-shell-processing?"><a class="permalink" href="#How-can-I-call-backticks-without-shell-processing?">#</a><a id="How21"></a><a id="How-can-I-call-backticks-without-shell-processing"></a>How can I call backticks without shell processing?</h2>

<p>This is a bit tricky. Instead of writing</p>

<pre><code>@ok = `grep @opts &#39;$search_string&#39; @filenames`;</code></pre>

<p>You have to do this:</p>

<pre><code>    my @ok = ();
    if (open(GREP, &quot;-|&quot;)) {
        while (&lt;GREP&gt;) {
	    chomp;
            push(@ok, $_);
        }
	close GREP;
    } else {
        exec &#39;grep&#39;, @opts, $search_string, @filenames;
    }</code></pre>

<p>Just as with system(), no shell escapes happen when you exec() a list. Further examples of this can be found in <a href="perlipc.html#Safe-Pipe-Opens">&quot;Safe Pipe Opens&quot; in perlipc</a>.</p>

<p>Note that if you&#39;re stuck on Microsoft, no solution to this vexing issue is even possible. Even if Perl were to emulate fork(), you&#39;d still be hosed, because Microsoft gives no argc/argv-style API. Their API always reparses from a single string, which is fundamentally wrong, but you&#39;re not likely to get the Gods of Redmond to acknowledge this and fix it for you.</p>

<h2 id="Why-can&#39;t-my-script-read-from-STDIN-after-I-gave-it-EOF-(^D-on-Unix,-^Z-on-MS-DOS)?"><a class="permalink" href="#Why-can&#39;t-my-script-read-from-STDIN-after-I-gave-it-EOF-(%5ED-on-Unix,-%5EZ-on-MS-DOS)?">#</a><a id="Why4"></a><a id="Why-cant-my-script-read-from-STDIN-after-I-gave-it-EOF-D-on-Unix-Z-on-MS-DOS"></a>Why can&#39;t my script read from STDIN after I gave it EOF (^D on Unix, ^Z on MS-DOS)?</h2>

<p>Some stdio&#39;s set error and eof flags that need clearing. The POSIX module defines clearerr() that you can use. That is the technically correct way to do it. Here are some less reliable workarounds:</p>

<ol>

<li><p>Try keeping around the seekpointer and go there, like this:</p>

<pre><code>$where = tell(LOG);
seek(LOG, $where, 0);</code></pre>

</li>
<li><p>If that doesn&#39;t work, try seeking to a different part of the file and then back.</p>

</li>
<li><p>If that doesn&#39;t work, try seeking to a different part of the file, reading something, and then seeking back.</p>

</li>
<li><p>If that doesn&#39;t work, give up on your stdio package and use sysread.</p>

</li>
</ol>

<h2 id="How-can-I-convert-my-shell-script-to-perl?"><a class="permalink" href="#How-can-I-convert-my-shell-script-to-perl?">#</a><a id="How22"></a><a id="How-can-I-convert-my-shell-script-to-perl"></a>How can I convert my shell script to perl?</h2>

<p>Learn Perl and rewrite it. Seriously, there&#39;s no simple converter. Things that are awkward to do in the shell are easy to do in Perl, and this very awkwardness is what would make a shell-&gt;perl converter nigh-on impossible to write. By rewriting it, you&#39;ll think about what you&#39;re really trying to do, and hopefully will escape the shell&#39;s pipeline datastream paradigm, which while convenient for some matters, causes many inefficiencies.</p>

<h2 id="Can-I-use-perl-to-run-a-telnet-or-ftp-session?"><a class="permalink" href="#Can-I-use-perl-to-run-a-telnet-or-ftp-session?">#</a><a id="Can"></a><a id="Can-I-use-perl-to-run-a-telnet-or-ftp-session"></a>Can I use perl to run a telnet or ftp session?</h2>

<p>Try the Net::FTP, TCP::Client, and Net::Telnet modules (available from CPAN). http://www.perl.com/CPAN/scripts/netstuff/telnet.emul.shar will also help for emulating the telnet protocol, but Net::Telnet is quite probably easier to use..</p>

<p>If all you want to do is pretend to be telnet but don&#39;t need the initial telnet handshaking, then the standard dual-process approach will suffice:</p>

<pre><code>    use IO::Socket; 	    	# new in 5.004
    $handle = IO::Socket::INET-&gt;new(&#39;www.perl.com:80&#39;)
	    || die &quot;can&#39;t connect to port 80 on www.perl.com: $!&quot;;
    $handle-&gt;autoflush(1);
    if (fork()) { 	    	# XXX: undef means failure
	select($handle);
	print while &lt;STDIN&gt;;    # everything from stdin to socket
    } else {
	print while &lt;$handle&gt;;  # everything from socket to stdout
    }
    close $handle;
    exit;</code></pre>

<h2 id="How-can-I-write-expect-in-Perl?"><a class="permalink" href="#How-can-I-write-expect-in-Perl?">#</a><a id="How23"></a><a id="How-can-I-write-expect-in-Perl"></a>How can I write expect in Perl?</h2>

<p>Once upon a time, there was a library called chat2.pl (part of the standard perl distribution), which never really got finished. If you find it somewhere, <i>don&#39;t use it</i>. These days, your best bet is to look at the Expect module available from CPAN, which also requires two other modules from CPAN, IO::Pty and IO::Stty.</p>

<h2 id="Is-there-a-way-to-hide-perl&#39;s-command-line-from-programs-such-as-&quot;ps&quot;?"><a class="permalink" href="#Is-there-a-way-to-hide-perl&#39;s-command-line-from-programs-such-as-%22ps%22?">#</a><a id="Is"></a><a id="Is-there-a-way-to-hide-perls-command-line-from-programs-such-as-ps"></a>Is there a way to hide perl&#39;s command line from programs such as &quot;ps&quot;?</h2>

<p>First of all note that if you&#39;re doing this for security reasons (to avoid people seeing passwords, for example) then you should rewrite your program so that critical information is never given as an argument. Hiding the arguments won&#39;t make your program completely secure.</p>

<p>To actually alter the visible command line, you can assign to the variable $0 as documented in <a href="perlvar.html">perlvar</a>. This won&#39;t work on all operating systems, though. Daemon programs like sendmail place their state there, as in:</p>

<pre><code>$0 = &quot;orcus [accepting connections]&quot;;</code></pre>

<h2 id="I-{changed-directory,-modified-my-environment}-in-a-perl-script.-How-come-the-change-disappeared-when-I-exited-the-script?-How-do-I-get-my-changes-to-be-visible?"><a class="permalink" href="#I-%7Bchanged-directory,-modified-my-environment%7D-in-a-perl-script.-How-come-the-change-disappeared-when-I-exited-the-script?-How-do-I-get-my-changes-to-be-visible?">#</a><a id="I"></a><a id="I-changed-directory-modified-my-environment-in-a-perl-script.-How-come-the-change-disappeared-when-I-exited-the-script-How-do-I-get-my-changes-to-be-visible"></a>I {changed directory, modified my environment} in a perl script. How come the change disappeared when I exited the script? How do I get my changes to be visible?</h2>

<dl>

<dt id="Unix"><a class="permalink" href="#Unix">#</a>Unix</dt>
<dd>

<p>In the strictest sense, it can&#39;t be done--the script executes as a different process from the shell it was started from. Changes to a process are not reflected in its parent--only in any children created after the change. There is shell magic that may allow you to fake it by eval()ing the script&#39;s output in your shell; check out the comp.unix.questions FAQ for details.</p>

</dd>
</dl>

<h2 id="How-do-I-close-a-process&#39;s-filehandle-without-waiting-for-it-to-complete?"><a class="permalink" href="#How-do-I-close-a-process&#39;s-filehandle-without-waiting-for-it-to-complete?">#</a><a id="How24"></a><a id="How-do-I-close-a-processs-filehandle-without-waiting-for-it-to-complete"></a>How do I close a process&#39;s filehandle without waiting for it to complete?</h2>

<p>Assuming your system supports such things, just send an appropriate signal to the process (see <a href="perlfunc.html#kill">&quot;kill&quot; in perlfunc</a>). It&#39;s common to first send a TERM signal, wait a little bit, and then send a KILL signal to finish it off.</p>

<h2 id="How-do-I-fork-a-daemon-process?"><a class="permalink" href="#How-do-I-fork-a-daemon-process?">#</a><a id="How25"></a><a id="How-do-I-fork-a-daemon-process"></a>How do I fork a daemon process?</h2>

<p>If by daemon process you mean one that&#39;s detached (disassociated from its tty), then the following process is reported to work on most Unixish systems. Non-Unix users should check their Your_OS::Process module for other solutions.</p>

<ul>

<li><p>Open /dev/tty and use the TIOCNOTTY ioctl on it. See <a href="http://man.he.net/man4/tty">tty(4)</a> for details. Or better yet, you can just use the POSIX::setsid() function, so you don&#39;t have to worry about process groups.</p>

</li>
<li><p>Change directory to /</p>

</li>
<li><p>Reopen STDIN, STDOUT, and STDERR so they&#39;re not connected to the old tty.</p>

</li>
<li><p>Background yourself like this:</p>

<pre><code>fork &amp;&amp; exit;</code></pre>

</li>
</ul>

<p>The Proc::Daemon module, available from CPAN, provides a function to perform these actions for you.</p>

<h2 id="How-do-I-find-out-if-I&#39;m-running-interactively-or-not?"><a class="permalink" href="#How-do-I-find-out-if-I&#39;m-running-interactively-or-not?">#</a><a id="How26"></a><a id="How-do-I-find-out-if-Im-running-interactively-or-not"></a>How do I find out if I&#39;m running interactively or not?</h2>

<p>Good question. Sometimes <code>-t STDIN</code> and <code>-t STDOUT</code> can give clues, sometimes not.</p>

<pre><code>    if (-t STDIN &amp;&amp; -t STDOUT) {
	print &quot;Now what? &quot;;
    }</code></pre>

<p>On POSIX systems, you can test whether your own process group matches the current process group of your controlling terminal as follows:</p>

<pre><code>use POSIX qw/getpgrp tcgetpgrp/;
open(TTY, &quot;/dev/tty&quot;) or die $!;
$tpgrp = tcgetpgrp(fileno(*TTY));
$pgrp = getpgrp();
if ($tpgrp == $pgrp) {
    print &quot;foreground\n&quot;;
} else {
    print &quot;background\n&quot;;
}</code></pre>

<h2 id="How-do-I-timeout-a-slow-event?"><a class="permalink" href="#How-do-I-timeout-a-slow-event?">#</a><a id="How27"></a><a id="How-do-I-timeout-a-slow-event"></a>How do I timeout a slow event?</h2>

<p>Use the alarm() function, probably in conjunction with a signal handler, as documented in <a href="perlipc.html#Signals">&quot;Signals&quot; in perlipc</a> and the section on ``Signals&#39;&#39; in the Camel. You may instead use the more flexible Sys::AlarmCall module available from CPAN.</p>

<h2 id="How-do-I-set-CPU-limits?"><a class="permalink" href="#How-do-I-set-CPU-limits?">#</a><a id="How28"></a><a id="How-do-I-set-CPU-limits"></a>How do I set CPU limits?</h2>

<p>Use the BSD::Resource module from CPAN.</p>

<h2 id="How-do-I-avoid-zombies-on-a-Unix-system?"><a class="permalink" href="#How-do-I-avoid-zombies-on-a-Unix-system?">#</a><a id="How29"></a><a id="How-do-I-avoid-zombies-on-a-Unix-system"></a>How do I avoid zombies on a Unix system?</h2>

<p>Use the reaper code from <a href="perlipc.html#Signals">&quot;Signals&quot; in perlipc</a> to call wait() when a SIGCHLD is received, or else use the double-fork technique described in <a href="perlfunc.html#fork">&quot;fork&quot; in perlfunc</a>.</p>

<h2 id="How-do-I-use-an-SQL-database?"><a class="permalink" href="#How-do-I-use-an-SQL-database?">#</a><a id="How30"></a><a id="How-do-I-use-an-SQL-database"></a>How do I use an SQL database?</h2>

<p>There are a number of excellent interfaces to SQL databases. See the DBD::* modules available from http://www.perl.com/CPAN/modules/DBD . A lot of information on this can be found at http://www.symbolstone.org/technology/perl/DBI/</p>

<h2 id="How-do-I-make-a-system()-exit-on-control-C?"><a class="permalink" href="#How-do-I-make-a-system()-exit-on-control-C?">#</a><a id="How31"></a><a id="How-do-I-make-a-system-exit-on-control-C"></a>How do I make a system() exit on control-C?</h2>

<p>You can&#39;t. You need to imitate the system() call (see <a href="perlipc.html">perlipc</a> for sample code) and then have a signal handler for the INT signal that passes the signal on to the subprocess. Or you can check for it:</p>

<pre><code>$rc = system($cmd);
if ($rc &amp; 127) { die &quot;signal death&quot; } </code></pre>

<h2 id="How-do-I-open-a-file-without-blocking?"><a class="permalink" href="#How-do-I-open-a-file-without-blocking?">#</a><a id="How32"></a><a id="How-do-I-open-a-file-without-blocking"></a>How do I open a file without blocking?</h2>

<p>If you&#39;re lucky enough to be using a system that supports non-blocking reads (most Unixish systems do), you need only to use the O_NDELAY or O_NONBLOCK flag from the Fcntl module in conjunction with sysopen():</p>

<pre><code>use Fcntl;
sysopen(FH, &quot;/tmp/somefile&quot;, O_WRONLY|O_NDELAY|O_CREAT, 0644)
    or die &quot;can&#39;t open /tmp/somefile: $!&quot;:</code></pre>

<h2 id="How-do-I-install-a-module-from-CPAN?"><a class="permalink" href="#How-do-I-install-a-module-from-CPAN?">#</a><a id="How33"></a><a id="How-do-I-install-a-module-from-CPAN"></a>How do I install a module from CPAN?</h2>

<p>The easiest way is to have a module also named CPAN do it for you. This module comes with perl version 5.004 and later. To manually install the CPAN module, or any well-behaved CPAN module for that matter, follow these steps:</p>

<ol>

<li><p>Unpack the source into a temporary area.</p>

</li>
<li><p></p>

<pre><code class="plaintext">perl Makefile.PL</code></pre>

</li>
<li><p></p>

<pre><code class="plaintext">make</code></pre>

</li>
<li><p></p>

<pre><code class="plaintext">make test</code></pre>

</li>
<li><p></p>

<pre><code class="plaintext">make install</code></pre>

</li>
</ol>

<p>If your version of perl is compiled without dynamic loading, then you just need to replace step 3 (<b>make</b>) with <b>make perl</b> and you will get a new <i>perl</i> binary with your extension linked in.</p>

<p>See <a href="https://perldoc.perl.org/5.6.1/ExtUtils::MakeMaker">ExtUtils::MakeMaker</a> for more details on building extensions. See also the next question, ``What&#39;s the difference between require and use?&#39;&#39;.</p>

<h2 id="What&#39;s-the-difference-between-require-and-use?"><a class="permalink" href="#What&#39;s-the-difference-between-require-and-use?">#</a><a id="What1"></a><a id="Whats-the-difference-between-require-and-use"></a>What&#39;s the difference between require and use?</h2>

<p>Perl offers several different ways to include code from one file into another. Here are the deltas between the various inclusion constructs:</p>

<pre><code>    1)  do $file is like eval `cat $file`, except the former
	1.1: searches @INC and updates %INC.
	1.2: bequeaths an *unrelated* lexical scope on the eval&#39;ed code.

    2)  require $file is like do $file, except the former
	2.1: checks for redundant loading, skipping already loaded files.
	2.2: raises an exception on failure to find, compile, or execute $file.

    3)  require Module is like require &quot;Module.pm&quot;, except the former
	3.1: translates each &quot;::&quot; into your system&#39;s directory separator.
	3.2: primes the parser to disambiguate class Module as an indirect object.

    4)  use Module is like require Module, except the former
	4.1: loads the module at compile time, not run-time.
	4.2: imports symbols and semantics from that package to the current one.</code></pre>

<p>In general, you usually want <code>use</code> and a proper Perl module.</p>

<h2 id="How-do-I-keep-my-own-module/library-directory?"><a class="permalink" href="#How-do-I-keep-my-own-module/library-directory?">#</a><a id="How34"></a><a id="How-do-I-keep-my-own-module-library-directory"></a>How do I keep my own module/library directory?</h2>

<p>When you build modules, use the PREFIX option when generating Makefiles:</p>

<pre><code class="plaintext">perl Makefile.PL PREFIX=/u/mydir/perl</code></pre>

<p>then either set the PERL5LIB environment variable before you run scripts that use the modules/libraries (see <a href="perlrun.html">perlrun</a>) or say</p>

<pre><code>use lib &#39;/u/mydir/perl&#39;;</code></pre>

<p>This is almost the same as</p>

<pre><code>    BEGIN {
	unshift(@INC, &#39;/u/mydir/perl&#39;);
    }</code></pre>

<p>except that the lib module checks for machine-dependent subdirectories. See Perl&#39;s <a href="https://perldoc.perl.org/5.6.1/lib">lib</a> for more information.</p>

<h2 id="How-do-I-add-the-directory-my-program-lives-in-to-the-module/library-search-path?"><a class="permalink" href="#How-do-I-add-the-directory-my-program-lives-in-to-the-module/library-search-path?">#</a><a id="How35"></a><a id="How-do-I-add-the-directory-my-program-lives-in-to-the-module-library-search-path"></a>How do I add the directory my program lives in to the module/library search path?</h2>

<pre><code>use FindBin;
use lib &quot;$FindBin::Bin&quot;;
use your_own_modules;</code></pre>

<h2 id="How-do-I-add-a-directory-to-my-include-path-at-runtime?"><a class="permalink" href="#How-do-I-add-a-directory-to-my-include-path-at-runtime?">#</a><a id="How36"></a><a id="How-do-I-add-a-directory-to-my-include-path-at-runtime"></a>How do I add a directory to my include path at runtime?</h2>

<p>Here are the suggested ways of modifying your include path:</p>

<pre><code>the PERLLIB environment variable
the PERL5LIB environment variable
the perl -Idir command line flag
the use lib pragma, as in
    use lib &quot;$ENV{HOME}/myown_perllib&quot;;</code></pre>

<p>The latter is particularly useful because it knows about machine dependent architectures. The lib.pm pragmatic module was first included with the 5.002 release of Perl.</p>

<h2 id="What-is-socket.ph-and-where-do-I-get-it?"><a class="permalink" href="#What-is-socket.ph-and-where-do-I-get-it?">#</a><a id="What2"></a><a id="What-is-socket.ph-and-where-do-I-get-it"></a>What is socket.ph and where do I get it?</h2>

<p>It&#39;s a perl4-style file defining values for system networking constants. Sometimes it is built using h2ph when Perl is installed, but other times it is not. Modern programs <code>use Socket;</code> instead.</p>

<h1 id="AUTHOR-AND-COPYRIGHT"><a class="permalink" href="#AUTHOR-AND-COPYRIGHT">#</a><a id="AUTHOR"></a>AUTHOR AND COPYRIGHT</h1>

<p>Copyright (c) 1997-1999 Tom Christiansen and Nathan Torkington. All rights reserved.</p>

<p>When included as part of the Standard Version of Perl, or as part of its complete documentation whether printed or otherwise, this work may be distributed only under the terms of Perl&#39;s Artistic License. Any distribution of this file or derivatives thereof <i>outside</i> of that package require that special arrangements be made with copyright holder.</p>

<p>Irrespective of its distribution, all code examples in this file are hereby placed into the public domain. You are permitted and encouraged to use this code in your own programs for fun or for profit as you see fit. A simple comment in the code giving credit would be courteous but is not required.</p>

<div class="pod-errors"><p>1 POD Error</p><div class="pod-errors-detail"><p>The following errors were encountered while parsing the POD:</p><dl><dt><a class="permalink" href="#">#</a>Around line 276:</dt><dd><p>alternative text &#39;perlvar/$&#39; contains non-escaped | or /</p></dd></dl></div></div>


      </div>
      <div id="footer">
        <p>Perldoc Browser is maintained by Dan Book (<a href="https://metacpan.org/author/DBOOK">DBOOK</a>). Please contact him via the <a href="https://github.com/Grinnz/perldoc-browser/issues">GitHub issue tracker</a> or <a href="mailto:dbook@cpan.org">email</a> regarding any issues with the site itself, search, or rendering of documentation.</p>

<p>The Perl documentation is maintained by the Perl 5 Porters in the development of Perl. Please contact them via the <a href="https://github.com/Perl/perl5/issues">Perl issue tracker</a>, the <a href="https://lists.perl.org/list/perl5-porters.html">mailing list</a>, or <a href="https://kiwiirc.com/client/irc.perl.org/p5p">IRC</a> to report any issues with the contents or format of the documentation.</p>


      </div>
    </div>
    <script src="../js/bootstrap.bundle.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.highlightAll();</script>
  </body>

<!-- Mirrored from perldoc.perl.org/5.6.1/perlfaq8 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Aug 2025 16:20:46 GMT -->
</html>
