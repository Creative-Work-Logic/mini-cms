<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from perldoc.perl.org/5.6.2/perlfaq9 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Aug 2025 16:20:45 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>perlfaq9 - Networking ($Revision: 1.15 $, $Date: 2003/01/31 17:36:57 $) - Perldoc Browser</title>
    <link rel="search" href="../opensearch.xml" type="application/opensearchdescription+xml" title="Perldoc Browser">
    <link rel="canonical" href="../perlfaq9.html">
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/stackoverflow-light.min.css" rel="stylesheet">
    <link href="../css/perldoc.css" rel="stylesheet">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-KVNWBNT5FB"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-KVNWBNT5FB');
      gtag('config', 'UA-50555-3');
    </script>
  </head>
  <body>
    <nav class="navbar navbar-expand-md bg-dark" data-bs-theme="dark"><div class="container-fluid">
  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <a class="navbar-brand" href="../index.html"><img src="../images/perl_camel_30.png" width="30" height="30" class="d-inline-block align-text-top" alt="Perl Camel Logo"> Perldoc Browser</a>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav me-auto">
      <li class="nav-item dropdown text-nowrap">
        <a class="nav-link dropdown-toggle" href="#" id="dropdownlink-stable" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">5.6.2</a>
        <div class="dropdown-menu" aria-labelledby="dropdownlink-stable">
          <a class="dropdown-item" href="../perlfaq9.html">Latest</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.42.0/perlfaq9">5.42.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.3/perlfaq9">5.40.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.2/perlfaq9">5.40.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.1/perlfaq9">5.40.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.0/perlfaq9">5.40.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.5/perlfaq9">5.38.5</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.4/perlfaq9">5.38.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.3/perlfaq9">5.38.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.2/perlfaq9">5.38.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.1/perlfaq9">5.38.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.0/perlfaq9">5.38.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.36.3/perlfaq9">5.36.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.36.2/perlfaq9">5.36.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.36.1/perlfaq9">5.36.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.36.0/perlfaq9">5.36.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.34.3/perlfaq9">5.34.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.34.2/perlfaq9">5.34.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.34.1/perlfaq9">5.34.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.34.0/perlfaq9">5.34.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.32.1/perlfaq9">5.32.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.32.0/perlfaq9">5.32.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.30.3/perlfaq9">5.30.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.30.2/perlfaq9">5.30.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.30.1/perlfaq9">5.30.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.30.0/perlfaq9">5.30.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.28.3/perlfaq9">5.28.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.28.2/perlfaq9">5.28.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.28.1/perlfaq9">5.28.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.28.0/perlfaq9">5.28.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.26.3/perlfaq9">5.26.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.26.2/perlfaq9">5.26.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.26.1/perlfaq9">5.26.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.26.0/perlfaq9">5.26.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.4/perlfaq9">5.24.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.3/perlfaq9">5.24.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.2/perlfaq9">5.24.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.1/perlfaq9">5.24.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.0/perlfaq9">5.24.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.4/perlfaq9">5.22.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.3/perlfaq9">5.22.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.2/perlfaq9">5.22.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.1/perlfaq9">5.22.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.0/perlfaq9">5.22.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.20.3/perlfaq9">5.20.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.20.2/perlfaq9">5.20.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.20.1/perlfaq9">5.20.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.20.0/perlfaq9">5.20.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.4/perlfaq9">5.18.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.3/perlfaq9">5.18.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.2/perlfaq9">5.18.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.1/perlfaq9">5.18.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.0/perlfaq9">5.18.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.16.3/perlfaq9">5.16.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.16.2/perlfaq9">5.16.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.16.1/perlfaq9">5.16.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.16.0/perlfaq9">5.16.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.4/perlfaq9">5.14.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.3/perlfaq9">5.14.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.2/perlfaq9">5.14.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.1/perlfaq9">5.14.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.0/perlfaq9">5.14.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.5/perlfaq9">5.12.5</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.4/perlfaq9">5.12.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.3/perlfaq9">5.12.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.2/perlfaq9">5.12.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.1/perlfaq9">5.12.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.0/perlfaq9">5.12.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.10.1/perlfaq9">5.10.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.10.0/perlfaq9">5.10.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.9/perlfaq9">5.8.9</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.8/perlfaq9">5.8.8</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.7/perlfaq9">5.8.7</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.6/perlfaq9">5.8.6</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.5/perlfaq9">5.8.5</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.4/perlfaq9">5.8.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.3/perlfaq9">5.8.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.2/perlfaq9">5.8.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.1/perlfaq9">5.8.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.0/perlfaq9">5.8.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item active" href="perlfaq9.html">5.6.2</a>
          <a class="dropdown-item" href="../5.6.1/perlfaq9.html">5.6.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.6.0/perlfaq9">5.6.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005_04/perlfaq9">5.005_04</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005_03/perlfaq9">5.005_03</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005_02/perlfaq9">5.005_02</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005_01/perlfaq9">5.005_01</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005/perlfaq9">5.005</a>
        </div>
      </li>
      <li class="nav-item dropdown text-nowrap">
        <a class="nav-link dropdown-toggle" href="#" id="dropdownlink-dev" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Dev</a>
        <div class="dropdown-menu" aria-labelledby="dropdownlink-dev">
          <a class="dropdown-item" href="https://perldoc.perl.org/blead/perlfaq9">blead</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.43.1/perlfaq9">5.43.1</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.42.0-RC3/perlfaq9">5.42.0-RC3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.42.0-RC2/perlfaq9">5.42.0-RC2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.42.0-RC1/perlfaq9">5.42.0-RC1</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.13/perlfaq9">5.41.13</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.12/perlfaq9">5.41.12</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.11/perlfaq9">5.41.11</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.10/perlfaq9">5.41.10</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.9/perlfaq9">5.41.9</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.8/perlfaq9">5.41.8</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.7/perlfaq9">5.41.7</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.6/perlfaq9">5.41.6</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.5/perlfaq9">5.41.5</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.4/perlfaq9">5.41.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.3/perlfaq9">5.41.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.2/perlfaq9">5.41.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.1/perlfaq9">5.41.1</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.3-RC1/perlfaq9">5.40.3-RC1</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.5-RC1/perlfaq9">5.38.5-RC1</a>
        </div>
      </li>
      <li class="nav-item dropdown text-nowrap">
        <a class="nav-link dropdown-toggle" href="#" id="dropdownlink-nav" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Documentation</a>
        <div class="dropdown-menu" aria-labelledby="dropdownlink-nav">
          <a class="dropdown-item" href="perl.html">Perl</a>
          <a class="dropdown-item" href="perlintro.html">Intro</a>
          <a class="dropdown-item" href="perl.html#Tutorials">Tutorials</a>
          <a class="dropdown-item" href="perlfaq.html">FAQs</a>
          <a class="dropdown-item" href="perl.html#Reference-Manual">Reference</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="perlop.html">Operators</a>
          <a class="dropdown-item" href="functions.html">Functions</a>
          <a class="dropdown-item" href="variables.html">Variables</a>
          <a class="dropdown-item" href="modules.html">Modules</a>
          <a class="dropdown-item" href="perlutil.html">Utilities</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="perldelta.html">Release Notes</a>
          <a class="dropdown-item" href="perlcommunity.html">Community</a>
          <a class="dropdown-item" href="perlhist.html">History</a>
        </div>
      </li>
    </ul>
    <ul class="navbar-nav">
      <button id="content-expand-button" type="button" class="btn btn-dark d-none d-lg-inline-block me-4">Expand</button>
      <script src="../js/perldoc-expand-page.js"></script>
    </ul>
    <form class="form-inline" method="get" action="https://perldoc.perl.org/5.6.2/search">
      <input id="search-input" class="form-control me-3" type="search" name="q" placeholder="[S]earch" aria-label="Search" value="">
    </form>
    <script src="../js/perldoc-focus-search.js"></script>
  </div>
</div></nav>

    <div id="wrapperlicious" class="container-fluid">
      <div id="perldocdiv">
        <div id="links">
          <a href="perlfaq9.html">perlfaq9</a>
          <div id="more">
            (<a href="https://perldoc.perl.org/5.6.2/perlfaq9.txt">source</a>,
            <a href="https://metacpan.org/pod/perlfaq9">CPAN</a>)
          </div>
        </div>
        <div class="leading-notice">
          You are viewing the version of this documentation from Perl 5.6.2.
            <a href="../perlfaq9.html">View the latest version</a>
        </div>
        <h1><a id="toc">CONTENTS</a></h1>
                  <ul>
              <li>
                <a class="text-decoration-none" href="#NAME">NAME</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#DESCRIPTION">DESCRIPTION</a>
                            <ul>
              <li>
                <a class="text-decoration-none" href="#What-is-the-correct-form-of-response-from-a-CGI-script?">What is the correct form of response from a CGI script?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#My-CGI-script-runs-from-the-command-line-but-not-the-browser.-(500-Server-Error)">My CGI script runs from the command line but not the browser. (500 Server Error)</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-can-I-get-better-error-messages-from-a-CGI-program?">How can I get better error messages from a CGI program?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-remove-HTML-from-a-string?">How do I remove HTML from a string?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-extract-URLs?">How do I extract URLs?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-download-a-file-from-the-user&#39;s-machine?-How-do-I-open-a-file-on-another-machine?">How do I download a file from the user&#39;s machine? How do I open a file on another machine?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-make-a-pop-up-menu-in-HTML?">How do I make a pop-up menu in HTML?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-fetch-an-HTML-file?">How do I fetch an HTML file?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-automate-an-HTML-form-submission?">How do I automate an HTML form submission?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-decode-or-create-those-%25-encodings-on-the-web?">How do I decode or create those %-encodings on the web?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-redirect-to-another-page?">How do I redirect to another page?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-put-a-password-on-my-web-pages?">How do I put a password on my web pages?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-edit-my-.htpasswd-and-.htgroup-files-with-Perl?">How do I edit my .htpasswd and .htgroup files with Perl?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-make-sure-users-can&#39;t-enter-values-into-a-form-that-cause-my-CGI-script-to-do-bad-things?">How do I make sure users can&#39;t enter values into a form that cause my CGI script to do bad things?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-parse-a-mail-header?">How do I parse a mail header?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-decode-a-CGI-form?">How do I decode a CGI form?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-check-a-valid-mail-address?">How do I check a valid mail address?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-decode-a-MIME/BASE64-string?">How do I decode a MIME/BASE64 string?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-return-the-user&#39;s-mail-address?">How do I return the user&#39;s mail address?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-send-mail?">How do I send mail?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-use-MIME-to-make-an-attachment-to-a-mail-message?">How do I use MIME to make an attachment to a mail message?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-read-mail?">How do I read mail?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-find-out-my-hostname/domainname/IP-address?">How do I find out my hostname/domainname/IP address?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-fetch-a-news-article-or-the-active-newsgroups?">How do I fetch a news article or the active newsgroups?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-do-I-fetch/put-an-FTP-file?">How do I fetch/put an FTP file?</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#How-can-I-do-RPC-in-Perl?">How can I do RPC in Perl?</a>
              </li>
          </ul>

              </li>
              <li>
                <a class="text-decoration-none" href="#AUTHOR-AND-COPYRIGHT">AUTHOR AND COPYRIGHT</a>
              </li>
          </ul>

      <h1 id="NAME"><a class="permalink" href="#NAME">#</a>NAME</h1>

<p>perlfaq9 - Networking ($Revision: 1.15 $, $Date: 2003/01/31 17:36:57 $)</p>

<h1 id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">#</a>DESCRIPTION</h1>

<p>This section deals with questions related to networking, the internet, and a few on the web.</p>

<h2 id="What-is-the-correct-form-of-response-from-a-CGI-script?"><a class="permalink" href="#What-is-the-correct-form-of-response-from-a-CGI-script?">#</a><a id="What"></a><a id="What-is-the-correct-form-of-response-from-a-CGI-script"></a>What is the correct form of response from a CGI script?</h2>

<p>(Alan Flavell &lt;flavell+www@a5.ph.gla.ac.uk&gt; answers...)</p>

<p>The Common Gateway Interface (CGI) specifies a software interface between a program (&quot;CGI script&quot;) and a web server (HTTPD). It is not specific to Perl, and has its own FAQs and tutorials, and usenet group, comp.infosystems.www.authoring.cgi</p>

<p>The original CGI specification is at: http://hoohoo.ncsa.uiuc.edu/cgi/</p>

<p>Current best-practice RFC draft at: http://CGI-Spec.Golux.Com/</p>

<p>Other relevant documentation listed in: http://www.perl.org/CGI_MetaFAQ.html</p>

<p>These Perl FAQs very selectively cover some CGI issues. However, Perl programmers are strongly advised to use the CGI.pm module, to take care of the details for them.</p>

<p>The similarity between CGI response headers (defined in the CGI specification) and HTTP response headers (defined in the HTTP specification, RFC2616) is intentional, but can sometimes be confusing.</p>

<p>The CGI specification defines two kinds of script: the &quot;Parsed Header&quot; script, and the &quot;Non Parsed Header&quot; (NPH) script. Check your server documentation to see what it supports. &quot;Parsed Header&quot; scripts are simpler in various respects. The CGI specification allows any of the usual newline representations in the CGI response (it&#39;s the server&#39;s job to create an accurate HTTP response based on it). So &quot;\n&quot; written in text mode is technically correct, and recommended. NPH scripts are more tricky: they must put out a complete and accurate set of HTTP transaction response headers; the HTTP specification calls for records to be terminated with carriage-return and line-feed, i.e ASCII \015\012 written in binary mode.</p>

<p>Using CGI.pm gives excellent platform independence, including EBCDIC systems. CGI.pm selects an appropriate newline representation ($CGI::CRLF) and sets binmode as appropriate.</p>

<h2 id="My-CGI-script-runs-from-the-command-line-but-not-the-browser.-(500-Server-Error)"><a class="permalink" href="#My-CGI-script-runs-from-the-command-line-but-not-the-browser.-(500-Server-Error)">#</a><a id="My"></a><a id="My-CGI-script-runs-from-the-command-line-but-not-the-browser.-500-Server-Error"></a>My CGI script runs from the command line but not the browser. (500 Server Error)</h2>

<p>Several things could be wrong. You can go through the &quot;Troubleshooting Perl CGI scripts&quot; guide at</p>

<pre><code class="plaintext">http://www.perl.org/troubleshooting_CGI.html</code></pre>

<p>If, after that, you can demonstrate that you&#39;ve read the FAQs and that your problem isn&#39;t something simple that can be easily answered, you&#39;ll probably receive a courteous and useful reply to your question if you post it on comp.infosystems.www.authoring.cgi (if it&#39;s something to do with HTTP or the CGI protocols). Questions that appear to be Perl questions but are really CGI ones that are posted to comp.lang.perl.misc are not so well received.</p>

<p>The useful FAQs, related documents, and troubleshooting guides are listed in the CGI Meta FAQ:</p>

<pre><code class="plaintext">http://www.perl.org/CGI_MetaFAQ.html</code></pre>

<h2 id="How-can-I-get-better-error-messages-from-a-CGI-program?"><a class="permalink" href="#How-can-I-get-better-error-messages-from-a-CGI-program?">#</a><a id="How"></a><a id="How-can-I-get-better-error-messages-from-a-CGI-program"></a>How can I get better error messages from a CGI program?</h2>

<p>Use the CGI::Carp module. It replaces <code>warn</code> and <code>die</code>, plus the normal Carp modules <code>carp</code>, <code>croak</code>, and <code>confess</code> functions with more verbose and safer versions. It still sends them to the normal server error log.</p>

<pre><code>use CGI::Carp;
warn &quot;This is a complaint&quot;;
die &quot;But this one is serious&quot;;</code></pre>

<p>The following use of CGI::Carp also redirects errors to a file of your choice, placed in a BEGIN block to catch compile-time warnings as well:</p>

<pre><code>BEGIN {
    use CGI::Carp qw(carpout);
    open(LOG, &quot;&gt;&gt;/var/local/cgi-logs/mycgi-log&quot;)
        or die &quot;Unable to append to mycgi-log: $!\n&quot;;
    carpout(*LOG);
}</code></pre>

<p>You can even arrange for fatal errors to go back to the client browser, which is nice for your own debugging, but might confuse the end user.</p>

<pre><code>use CGI::Carp qw(fatalsToBrowser);
die &quot;Bad error here&quot;;</code></pre>

<p>Even if the error happens before you get the HTTP header out, the module will try to take care of this to avoid the dreaded server 500 errors. Normal warnings still go out to the server error log (or wherever you&#39;ve sent them with <code>carpout</code>) with the application name and date stamp prepended.</p>

<h2 id="How-do-I-remove-HTML-from-a-string?"><a class="permalink" href="#How-do-I-remove-HTML-from-a-string?">#</a><a id="How1"></a><a id="How-do-I-remove-HTML-from-a-string"></a>How do I remove HTML from a string?</h2>

<p>The most correct way (albeit not the fastest) is to use HTML::Parser from CPAN. Another mostly correct way is to use HTML::FormatText which not only removes HTML but also attempts to do a little simple formatting of the resulting plain text.</p>

<p>Many folks attempt a simple-minded regular expression approach, like <code>s/&lt;.*?&gt;//g</code>, but that fails in many cases because the tags may continue over line breaks, they may contain quoted angle-brackets, or HTML comment may be present. Plus, folks forget to convert entities--like <code>&amp;lt;</code> for example.</p>

<p>Here&#39;s one &quot;simple-minded&quot; approach, that works for most files:</p>

<pre><code class="plaintext">#!/usr/bin/perl -p0777
s/&lt;(?:[^&gt;&#39;&quot;]*|([&#39;&quot;]).*?\1)*&gt;//gs</code></pre>

<p>If you want a more complete solution, see the 3-stage striphtml program in http://www.cpan.org/authors/Tom_Christiansen/scripts/striphtml.gz .</p>

<p>Here are some tricky cases that you should think about when picking a solution:</p>

<pre><code class="plaintext">    &lt;IMG SRC = &quot;foo.gif&quot; ALT = &quot;A &gt; B&quot;&gt;

    &lt;IMG SRC = &quot;foo.gif&quot;
	 ALT = &quot;A &gt; B&quot;&gt;

    &lt;!-- &lt;A comment&gt; --&gt;

    &lt;script&gt;if (a&lt;b &amp;&amp; a&gt;c)&lt;/script&gt;

    &lt;# Just data #&gt;

    &lt;![INCLUDE CDATA [ &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; ]]&gt;</code></pre>

<p>If HTML comments include other tags, those solutions would also break on text like this:</p>

<pre><code class="plaintext">&lt;!-- This section commented out.
    &lt;B&gt;You can&#39;t see me!&lt;/B&gt;
--&gt;</code></pre>

<h2 id="How-do-I-extract-URLs?"><a class="permalink" href="#How-do-I-extract-URLs?">#</a><a id="How2"></a><a id="How-do-I-extract-URLs"></a>How do I extract URLs?</h2>

<p>You can easily extract all sorts of URLs from HTML with <code>HTML::SimpleLinkExtor</code> which handles anchors, images, objects, frames, and many other tags that can contain a URL. If you need anything more complex, you can create your own subclass of <code>HTML::LinkExtor</code> or <code>HTML::Parser</code>. You might even use <code>HTML::SimpleLinkExtor</code> as an example for something specifically suited to your needs.</p>

<p>You can use URI::Find to extract URLs from an arbitrary text document.</p>

<p>Less complete solutions involving regular expressions can save you a lot of processing time if you know that the input is simple. One solution from Tom Christiansen runs 100 times faster than most module based approaches but only extracts URLs from anchors where the first attribute is HREF and there are no other attributes.</p>

<pre><code>#!/usr/bin/perl -n00
# qxurl - tchrist@perl.com
print &quot;$2\n&quot; while m{
    &lt; \s*
      A \s+ HREF \s* = \s* ([&quot;&#39;]) (.*?) \1
    \s* &gt;
}gsix;</code></pre>

<h2 id="How-do-I-download-a-file-from-the-user&#39;s-machine?-How-do-I-open-a-file-on-another-machine?"><a class="permalink" href="#How-do-I-download-a-file-from-the-user&#39;s-machine?-How-do-I-open-a-file-on-another-machine?">#</a><a id="How3"></a><a id="How-do-I-download-a-file-from-the-users-machine-How-do-I-open-a-file-on-another-machine"></a>How do I download a file from the user&#39;s machine? How do I open a file on another machine?</h2>

<p>In this case, download means to use the file upload feature of HTML forms. You allow the web surfer to specify a file to send to your web server. To you it looks like a download, and to the user it looks like an upload. No matter what you call it, you do it with what&#39;s known as <b>multipart/form-data</b> encoding. The CGI.pm module (which comes with Perl as part of the Standard Library) supports this in the start_multipart_form() method, which isn&#39;t the same as the startform() method.</p>

<p>See the section in the CGI.pm documentation on file uploads for code examples and details.</p>

<h2 id="How-do-I-make-a-pop-up-menu-in-HTML?"><a class="permalink" href="#How-do-I-make-a-pop-up-menu-in-HTML?">#</a><a id="How4"></a><a id="How-do-I-make-a-pop-up-menu-in-HTML"></a>How do I make a pop-up menu in HTML?</h2>

<p>Use the <b>&lt;SELECT&gt;</b> and <b>&lt;OPTION&gt;</b> tags. The CGI.pm module (available from CPAN) supports this widget, as well as many others, including some that it cleverly synthesizes on its own.</p>

<h2 id="How-do-I-fetch-an-HTML-file?"><a class="permalink" href="#How-do-I-fetch-an-HTML-file?">#</a><a id="How5"></a><a id="How-do-I-fetch-an-HTML-file"></a>How do I fetch an HTML file?</h2>

<p>One approach, if you have the lynx text-based HTML browser installed on your system, is this:</p>

<pre><code>$html_code = `lynx -source $url`;
$text_data = `lynx -dump $url`;</code></pre>

<p>The libwww-perl (LWP) modules from CPAN provide a more powerful way to do this. They don&#39;t require lynx, but like lynx, can still work through proxies:</p>

<pre><code># simplest version
use LWP::Simple;
$content = get($URL);

# or print HTML from a URL
use LWP::Simple;
getprint &quot;http://www.linpro.no/lwp/&quot;;

# or print ASCII from HTML from a URL
# also need HTML-Tree package from CPAN
use LWP::Simple;
use HTML::Parser;
use HTML::FormatText;
my ($html, $ascii);
$html = get(&quot;http://www.perl.com/&quot;);
defined $html
    or die &quot;Can&#39;t fetch HTML from http://www.perl.com/&quot;;
$ascii = HTML::FormatText-&gt;new-&gt;format(parse_html($html));
print $ascii;</code></pre>

<h2 id="How-do-I-automate-an-HTML-form-submission?"><a class="permalink" href="#How-do-I-automate-an-HTML-form-submission?">#</a><a id="How6"></a><a id="How-do-I-automate-an-HTML-form-submission"></a>How do I automate an HTML form submission?</h2>

<p>If you&#39;re submitting values using the GET method, create a URL and encode the form using the <code>query_form</code> method:</p>

<pre><code>use LWP::Simple;
use URI::URL;

my $url = url(&#39;http://www.perl.com/cgi-bin/cpan_mod&#39;);
$url-&gt;query_form(module =&gt; &#39;DB_File&#39;, readme =&gt; 1);
$content = get($url);</code></pre>

<p>If you&#39;re using the POST method, create your own user agent and encode the content appropriately.</p>

<pre><code>use HTTP::Request::Common qw(POST);
use LWP::UserAgent;

$ua = LWP::UserAgent-&gt;new();
my $req = POST &#39;http://www.perl.com/cgi-bin/cpan_mod&#39;,
               [ module =&gt; &#39;DB_File&#39;, readme =&gt; 1 ];
$content = $ua-&gt;request($req)-&gt;as_string;</code></pre>

<h2 id="How-do-I-decode-or-create-those-%-encodings-on-the-web?"><a class="permalink" href="#How-do-I-decode-or-create-those-%25-encodings-on-the-web?">#</a><a id="How7"></a><a id="How-do-I-decode-or-create-those--encodings-on-the-web"></a>How do I decode or create those %-encodings on the web?</h2>

<p>If you are writing a CGI script, you should be using the CGI.pm module that comes with perl, or some other equivalent module. The CGI module automatically decodes queries for you, and provides an escape() function to handle encoding.</p>

<p>The best source of detailed information on URI encoding is RFC 2396. Basically, the following substitutions do it:</p>

<pre><code>s/([^\w()&#39;*~!.-])/sprintf &#39;%%%02x&#39;, ord $1/eg;   # encode

s/%([A-Fa-f\d]{2})/chr hex $1/eg;            # decode</code></pre>

<p>However, you should only apply them to individual URI components, not the entire URI, otherwise you&#39;ll lose information and generally mess things up. If that didn&#39;t explain it, don&#39;t worry. Just go read section 2 of the RFC, it&#39;s probably the best explanation there is.</p>

<p>RFC 2396 also contains a lot of other useful information, including a regexp for breaking any arbitrary URI into components (Appendix B).</p>

<h2 id="How-do-I-redirect-to-another-page?"><a class="permalink" href="#How-do-I-redirect-to-another-page?">#</a><a id="How8"></a><a id="How-do-I-redirect-to-another-page"></a>How do I redirect to another page?</h2>

<p>Specify the complete URL of the destination (even if it is on the same server). This is one of the two different kinds of CGI &quot;Location:&quot; responses which are defined in the CGI specification for a Parsed Headers script. The other kind (an absolute URLpath) is resolved internally to the server without any HTTP redirection. The CGI specifications do not allow relative URLs in either case.</p>

<p>Use of CGI.pm is strongly recommended. This example shows redirection with a complete URL. This redirection is handled by the web browser.</p>

<pre><code>use CGI qw/:standard/;

my $url = &#39;http://www.cpan.org/&#39;;
print redirect($url);</code></pre>

<p>This example shows a redirection with an absolute URLpath. This redirection is handled by the local web server.</p>

<pre><code>my $url = &#39;/CPAN/index.html&#39;;
print redirect($url);</code></pre>

<p>But if coded directly, it could be as follows (the final &quot;\n&quot; is shown separately, for clarity), using either a complete URL or an absolute URLpath.</p>

<pre><code>print &quot;Location: $url\n&quot;;   # CGI response header
print &quot;\n&quot;;                 # end of headers</code></pre>

<h2 id="How-do-I-put-a-password-on-my-web-pages?"><a class="permalink" href="#How-do-I-put-a-password-on-my-web-pages?">#</a><a id="How9"></a><a id="How-do-I-put-a-password-on-my-web-pages"></a>How do I put a password on my web pages?</h2>

<p>To enable authentication for your web server, you need to configure your web server. The configuration is different for different sorts of web servers---apache does it differently from iPlanet which does it differently from IIS. Check your web server documentation for the details for your particular server.</p>

<h2 id="How-do-I-edit-my-.htpasswd-and-.htgroup-files-with-Perl?"><a class="permalink" href="#How-do-I-edit-my-.htpasswd-and-.htgroup-files-with-Perl?">#</a><a id="How10"></a><a id="How-do-I-edit-my-.htpasswd-and-.htgroup-files-with-Perl"></a>How do I edit my .htpasswd and .htgroup files with Perl?</h2>

<p>The HTTPD::UserAdmin and HTTPD::GroupAdmin modules provide a consistent OO interface to these files, regardless of how they&#39;re stored. Databases may be text, dbm, Berkeley DB or any database with a DBI compatible driver. HTTPD::UserAdmin supports files used by the `Basic&#39; and `Digest&#39; authentication schemes. Here&#39;s an example:</p>

<pre><code>    use HTTPD::UserAdmin ();
    HTTPD::UserAdmin
	  -&gt;new(DB =&gt; &quot;/foo/.htpasswd&quot;)
	  -&gt;add($username =&gt; $password);</code></pre>

<h2 id="How-do-I-make-sure-users-can&#39;t-enter-values-into-a-form-that-cause-my-CGI-script-to-do-bad-things?"><a class="permalink" href="#How-do-I-make-sure-users-can&#39;t-enter-values-into-a-form-that-cause-my-CGI-script-to-do-bad-things?">#</a><a id="How11"></a><a id="How-do-I-make-sure-users-cant-enter-values-into-a-form-that-cause-my-CGI-script-to-do-bad-things"></a>How do I make sure users can&#39;t enter values into a form that cause my CGI script to do bad things?</h2>

<p>See the security references listed in the CGI Meta FAQ</p>

<pre><code class="plaintext">http://www.perl.org/CGI_MetaFAQ.html</code></pre>

<h2 id="How-do-I-parse-a-mail-header?"><a class="permalink" href="#How-do-I-parse-a-mail-header?">#</a><a id="How12"></a><a id="How-do-I-parse-a-mail-header"></a>How do I parse a mail header?</h2>

<p>For a quick-and-dirty solution, try this solution derived from <a href="perlfunc.html#split">&quot;split&quot; in perlfunc</a>:</p>

<pre><code>$/ = &#39;&#39;;
$header = &lt;MSG&gt;;
$header =~ s/\n\s+/ /g;	 # merge continuation lines
%head = ( UNIX_FROM_LINE, split /^([-\w]+):\s*/m, $header );</code></pre>

<p>That solution doesn&#39;t do well if, for example, you&#39;re trying to maintain all the Received lines. A more complete approach is to use the Mail::Header module from CPAN (part of the MailTools package).</p>

<h2 id="How-do-I-decode-a-CGI-form?"><a class="permalink" href="#How-do-I-decode-a-CGI-form?">#</a><a id="How13"></a><a id="How-do-I-decode-a-CGI-form"></a>How do I decode a CGI form?</h2>

<p>You use a standard module, probably CGI.pm. Under no circumstances should you attempt to do so by hand!</p>

<p>You&#39;ll see a lot of CGI programs that blindly read from STDIN the number of bytes equal to CONTENT_LENGTH for POSTs, or grab QUERY_STRING for decoding GETs. These programs are very poorly written. They only work sometimes. They typically forget to check the return value of the read() system call, which is a cardinal sin. They don&#39;t handle HEAD requests. They don&#39;t handle multipart forms used for file uploads. They don&#39;t deal with GET/POST combinations where query fields are in more than one place. They don&#39;t deal with keywords in the query string.</p>

<p>In short, they&#39;re bad hacks. Resist them at all costs. Please do not be tempted to reinvent the wheel. Instead, use the CGI.pm or CGI_Lite.pm (available from CPAN), or if you&#39;re trapped in the module-free land of perl1 .. perl4, you might look into cgi-lib.pl (available from http://cgi-lib.stanford.edu/cgi-lib/ ).</p>

<p>Make sure you know whether to use a GET or a POST in your form. GETs should only be used for something that doesn&#39;t update the server. Otherwise you can get mangled databases and repeated feedback mail messages. The fancy word for this is ``idempotency&#39;&#39;. This simply means that there should be no difference between making a GET request for a particular URL once or multiple times. This is because the HTTP protocol definition says that a GET request may be cached by the browser, or server, or an intervening proxy. POST requests cannot be cached, because each request is independent and matters. Typically, POST requests change or depend on state on the server (query or update a database, send mail, or purchase a computer).</p>

<h2 id="How-do-I-check-a-valid-mail-address?"><a class="permalink" href="#How-do-I-check-a-valid-mail-address?">#</a><a id="How14"></a><a id="How-do-I-check-a-valid-mail-address"></a>How do I check a valid mail address?</h2>

<p>You can&#39;t, at least, not in real time. Bummer, eh?</p>

<p>Without sending mail to the address and seeing whether there&#39;s a human on the other hand to answer you, you cannot determine whether a mail address is valid. Even if you apply the mail header standard, you can have problems, because there are deliverable addresses that aren&#39;t RFC-822 (the mail header standard) compliant, and addresses that aren&#39;t deliverable which are compliant.</p>

<p>You can use the Email::Valid or RFC::RFC822::Address which check the format of the address, although they cannot actually tell you if it is a deliverable address (i.e. that mail to the address will not bounce). Modules like Mail::CheckUser and Mail::EXPN try to interact with the domain name system or particular mail servers to learn even more, but their methods do not work everywhere---especially for security conscious administrators.</p>

<p>Many are tempted to try to eliminate many frequently-invalid mail addresses with a simple regex, such as <code>/^[\w.-]+\@(?:[\w-]+\.)+\w+$/</code>. It&#39;s a very bad idea. However, this also throws out many valid ones, and says nothing about potential deliverability, so it is not suggested. Instead, see http://www.cpan.org/authors/Tom_Christiansen/scripts/ckaddr.gz , which actually checks against the full RFC spec (except for nested comments), looks for addresses you may not wish to accept mail to (say, Bill Clinton or your postmaster), and then makes sure that the hostname given can be looked up in the DNS MX records. It&#39;s not fast, but it works for what it tries to do.</p>

<p>Our best advice for verifying a person&#39;s mail address is to have them enter their address twice, just as you normally do to change a password. This usually weeds out typos. If both versions match, send mail to that address with a personal message that looks somewhat like:</p>

<pre><code>Dear someuser@host.com,

Please confirm the mail address you gave us Wed May  6 09:38:41
MDT 1998 by replying to this message.  Include the string
&quot;Rumpelstiltskin&quot; in that reply, but spelled in reverse; that is,
start with &quot;Nik...&quot;.  Once this is done, your confirmed address will
be entered into our records.</code></pre>

<p>If you get the message back and they&#39;ve followed your directions, you can be reasonably assured that it&#39;s real.</p>

<p>A related strategy that&#39;s less open to forgery is to give them a PIN (personal ID number). Record the address and PIN (best that it be a random one) for later processing. In the mail you send, ask them to include the PIN in their reply. But if it bounces, or the message is included via a ``vacation&#39;&#39; script, it&#39;ll be there anyway. So it&#39;s best to ask them to mail back a slight alteration of the PIN, such as with the characters reversed, one added or subtracted to each digit, etc.</p>

<h2 id="How-do-I-decode-a-MIME/BASE64-string?"><a class="permalink" href="#How-do-I-decode-a-MIME/BASE64-string?">#</a><a id="How15"></a><a id="How-do-I-decode-a-MIME-BASE64-string"></a>How do I decode a MIME/BASE64 string?</h2>

<p>The MIME-Base64 package (available from CPAN) handles this as well as the MIME/QP encoding. Decoding BASE64 becomes as simple as:</p>

<pre><code>use MIME::Base64;
$decoded = decode_base64($encoded);</code></pre>

<p>The MIME-Tools package (available from CPAN) supports extraction with decoding of BASE64 encoded attachments and content directly from email messages.</p>

<p>If the string to decode is short (less than 84 bytes long) a more direct approach is to use the unpack() function&#39;s &quot;u&quot; format after minor transliterations:</p>

<pre><code>tr#A-Za-z0-9+/##cd;                   # remove non-base64 chars
tr#A-Za-z0-9+/# -_#;                  # convert to uuencoded format
$len = pack(&quot;c&quot;, 32 + 0.75*length);   # compute length byte
print unpack(&quot;u&quot;, $len . $_);         # uudecode and print</code></pre>

<h2 id="How-do-I-return-the-user&#39;s-mail-address?"><a class="permalink" href="#How-do-I-return-the-user&#39;s-mail-address?">#</a><a id="How16"></a><a id="How-do-I-return-the-users-mail-address"></a>How do I return the user&#39;s mail address?</h2>

<p>On systems that support getpwuid, the $&lt; variable, and the Sys::Hostname module (which is part of the standard perl distribution), you can probably try using something like this:</p>

<pre><code>use Sys::Hostname;
$address = sprintf(&#39;%s@%s&#39;, scalar getpwuid($&lt;), hostname);</code></pre>

<p>Company policies on mail address can mean that this generates addresses that the company&#39;s mail system will not accept, so you should ask for users&#39; mail addresses when this matters. Furthermore, not all systems on which Perl runs are so forthcoming with this information as is Unix.</p>

<p>The Mail::Util module from CPAN (part of the MailTools package) provides a mailaddress() function that tries to guess the mail address of the user. It makes a more intelligent guess than the code above, using information given when the module was installed, but it could still be incorrect. Again, the best way is often just to ask the user.</p>

<h2 id="How-do-I-send-mail?"><a class="permalink" href="#How-do-I-send-mail?">#</a><a id="How17"></a><a id="How-do-I-send-mail"></a>How do I send mail?</h2>

<p>Use the <code>sendmail</code> program directly:</p>

<pre><code>open(SENDMAIL, &quot;|/usr/lib/sendmail -oi -t -odq&quot;)
                    or die &quot;Can&#39;t fork for sendmail: $!\n&quot;;
print SENDMAIL &lt;&lt;&quot;EOF&quot;;
From: User Originating Mail &lt;me\@host&gt;
To: Final Destination &lt;you\@otherhost&gt;
Subject: A relevant subject line

Body of the message goes here after the blank line
in as many lines as you like.
EOF
close(SENDMAIL)     or warn &quot;sendmail didn&#39;t close nicely&quot;;</code></pre>

<p>The <b>-oi</b> option prevents sendmail from interpreting a line consisting of a single dot as &quot;end of message&quot;. The <b>-t</b> option says to use the headers to decide who to send the message to, and <b>-odq</b> says to put the message into the queue. This last option means your message won&#39;t be immediately delivered, so leave it out if you want immediate delivery.</p>

<p>Alternate, less convenient approaches include calling mail (sometimes called mailx) directly or simply opening up port 25 have having an intimate conversation between just you and the remote SMTP daemon, probably sendmail.</p>

<p>Or you might be able use the CPAN module Mail::Mailer:</p>

<pre><code>use Mail::Mailer;

$mailer = Mail::Mailer-&gt;new();
$mailer-&gt;open({ From    =&gt; $from_address,
                To      =&gt; $to_address,
                Subject =&gt; $subject,
              })
    or die &quot;Can&#39;t open: $!\n&quot;;
print $mailer $body;
$mailer-&gt;close();</code></pre>

<p>The Mail::Internet module uses Net::SMTP which is less Unix-centric than Mail::Mailer, but less reliable. Avoid raw SMTP commands. There are many reasons to use a mail transport agent like sendmail. These include queuing, MX records, and security.</p>

<h2 id="How-do-I-use-MIME-to-make-an-attachment-to-a-mail-message?"><a class="permalink" href="#How-do-I-use-MIME-to-make-an-attachment-to-a-mail-message?">#</a><a id="How18"></a><a id="How-do-I-use-MIME-to-make-an-attachment-to-a-mail-message"></a>How do I use MIME to make an attachment to a mail message?</h2>

<p>This answer is extracted directly from the MIME::Lite documentation. Create a multipart message (i.e., one with attachments).</p>

<pre><code>use MIME::Lite;

### Create a new multipart message:
$msg = MIME::Lite-&gt;new(
             From    =&gt;&#39;me@myhost.com&#39;,
             To      =&gt;&#39;you@yourhost.com&#39;,
             Cc      =&gt;&#39;some@other.com, some@more.com&#39;,
             Subject =&gt;&#39;A message with 2 parts...&#39;,
             Type    =&gt;&#39;multipart/mixed&#39;
             );

### Add parts (each &quot;attach&quot; has same arguments as &quot;new&quot;):
$msg-&gt;attach(Type     =&gt;&#39;TEXT&#39;,
             Data     =&gt;&quot;Here&#39;s the GIF file you wanted&quot;
             );
$msg-&gt;attach(Type     =&gt;&#39;image/gif&#39;,
             Path     =&gt;&#39;aaa000123.gif&#39;,
             Filename =&gt;&#39;logo.gif&#39;
             );

$text = $msg-&gt;as_string;</code></pre>

<p>MIME::Lite also includes a method for sending these things.</p>

<pre><code>$msg-&gt;send;</code></pre>

<p>This defaults to using <a href="https://metacpan.org/pod/sendmail">sendmail</a> but can be customized to use SMTP via <a href="https://metacpan.org/pod/Net::SMTP">Net::SMTP</a>.</p>

<h2 id="How-do-I-read-mail?"><a class="permalink" href="#How-do-I-read-mail?">#</a><a id="How19"></a><a id="How-do-I-read-mail"></a>How do I read mail?</h2>

<p>While you could use the Mail::Folder module from CPAN (part of the MailFolder package) or the Mail::Internet module from CPAN (part of the MailTools package), often a module is overkill. Here&#39;s a mail sorter.</p>

<pre><code>#!/usr/bin/perl

my(@msgs, @sub);
my $msgno = -1;
$/ = &#39;&#39;;                    # paragraph reads
while (&lt;&gt;) {
    if (/^From /m) {
        /^Subject:\s*(?:Re:\s*)*(.*)/mi;
        $sub[++$msgno] = lc($1) || &#39;&#39;;
    }
    $msgs[$msgno] .= $_;
}
for my $i (sort { $sub[$a] cmp $sub[$b] || $a &lt;=&gt; $b } (0 .. $#msgs)) {
    print $msgs[$i];
}</code></pre>

<p>Or more succinctly,</p>

<pre><code>#!/usr/bin/perl -n00
# bysub2 - awkish sort-by-subject
BEGIN { $msgno = -1 }
$sub[++$msgno] = (/^Subject:\s*(?:Re:\s*)*(.*)/mi)[0] if /^From/m;
$msg[$msgno] .= $_;
END { print @msg[ sort { $sub[$a] cmp $sub[$b] || $a &lt;=&gt; $b } (0 .. $#msg) ] }</code></pre>

<h2 id="How-do-I-find-out-my-hostname/domainname/IP-address?"><a class="permalink" href="#How-do-I-find-out-my-hostname/domainname/IP-address?">#</a><a id="How20"></a><a id="How-do-I-find-out-my-hostname-domainname-IP-address"></a>How do I find out my hostname/domainname/IP address?</h2>

<p>The normal way to find your own hostname is to call the <code>`hostname`</code> program. While sometimes expedient, this has some problems, such as not knowing whether you&#39;ve got the canonical name or not. It&#39;s one of those tradeoffs of convenience versus portability.</p>

<p>The Sys::Hostname module (part of the standard perl distribution) will give you the hostname after which you can find out the IP address (assuming you have working DNS) with a gethostbyname() call.</p>

<pre><code>use Socket;
use Sys::Hostname;
my $host = hostname();
my $addr = inet_ntoa(scalar gethostbyname($host || &#39;localhost&#39;));</code></pre>

<p>Probably the simplest way to learn your DNS domain name is to grok it out of /etc/resolv.conf, at least under Unix. Of course, this assumes several things about your resolv.conf configuration, including that it exists.</p>

<p>(We still need a good DNS domain name-learning method for non-Unix systems.)</p>

<h2 id="How-do-I-fetch-a-news-article-or-the-active-newsgroups?"><a class="permalink" href="#How-do-I-fetch-a-news-article-or-the-active-newsgroups?">#</a><a id="How21"></a><a id="How-do-I-fetch-a-news-article-or-the-active-newsgroups"></a>How do I fetch a news article or the active newsgroups?</h2>

<p>Use the Net::NNTP or News::NNTPClient modules, both available from CPAN. This can make tasks like fetching the newsgroup list as simple as</p>

<pre><code>perl -MNews::NNTPClient
  -e &#39;print News::NNTPClient-&gt;new-&gt;list(&quot;newsgroups&quot;)&#39;</code></pre>

<h2 id="How-do-I-fetch/put-an-FTP-file?"><a class="permalink" href="#How-do-I-fetch/put-an-FTP-file?">#</a><a id="How22"></a><a id="How-do-I-fetch-put-an-FTP-file"></a>How do I fetch/put an FTP file?</h2>

<p>LWP::Simple (available from CPAN) can fetch but not put. Net::FTP (also available from CPAN) is more complex but can put as well as fetch.</p>

<h2 id="How-can-I-do-RPC-in-Perl?"><a class="permalink" href="#How-can-I-do-RPC-in-Perl?">#</a><a id="How23"></a><a id="How-can-I-do-RPC-in-Perl"></a>How can I do RPC in Perl?</h2>

<p>A DCE::RPC module is being developed (but is not yet available) and will be released as part of the DCE-Perl package (available from CPAN). The rpcgen suite, available from CPAN/authors/id/JAKE/, is an RPC stub generator and includes an RPC::ONC module.</p>

<h1 id="AUTHOR-AND-COPYRIGHT"><a class="permalink" href="#AUTHOR-AND-COPYRIGHT">#</a><a id="AUTHOR"></a>AUTHOR AND COPYRIGHT</h1>

<p>Copyright (c) 1997-2002 Tom Christiansen and Nathan Torkington. All rights reserved.</p>

<p>This documentation is free; you can redistribute it and/or modify it under the same terms as Perl itself.</p>

<p>Irrespective of its distribution, all code examples in this file are hereby placed into the public domain. You are permitted and encouraged to use this code in your own programs for fun or for profit as you see fit. A simple comment in the code giving credit would be courteous but is not required.</p>


      </div>
      <div id="footer">
        <p>Perldoc Browser is maintained by Dan Book (<a href="https://metacpan.org/author/DBOOK">DBOOK</a>). Please contact him via the <a href="https://github.com/Grinnz/perldoc-browser/issues">GitHub issue tracker</a> or <a href="mailto:dbook@cpan.org">email</a> regarding any issues with the site itself, search, or rendering of documentation.</p>

<p>The Perl documentation is maintained by the Perl 5 Porters in the development of Perl. Please contact them via the <a href="https://github.com/Perl/perl5/issues">Perl issue tracker</a>, the <a href="https://lists.perl.org/list/perl5-porters.html">mailing list</a>, or <a href="https://kiwiirc.com/client/irc.perl.org/p5p">IRC</a> to report any issues with the contents or format of the documentation.</p>


      </div>
    </div>
    <script src="../js/bootstrap.bundle.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.highlightAll();</script>
  </body>

<!-- Mirrored from perldoc.perl.org/5.6.2/perlfaq9 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Aug 2025 16:20:45 GMT -->
</html>
