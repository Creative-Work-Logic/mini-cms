<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from perldoc.perl.org/Test2::Manual::Anatomy::Context by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Aug 2025 16:20:53 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Test2::Manual::Anatomy::Context - Internals documentation for the Context objects. - Perldoc Browser</title>
    <link rel="search" href="opensearch.xml" type="application/opensearchdescription+xml" title="Perldoc Browser">
    <link rel="canonical" href="Test2__Manual__Anatomy__Context.html">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/stackoverflow-light.min.css" rel="stylesheet">
    <link href="css/perldoc.css" rel="stylesheet">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-KVNWBNT5FB"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-KVNWBNT5FB');
      gtag('config', 'UA-50555-3');
    </script>
  </head>
  <body>
    <nav class="navbar navbar-expand-md bg-dark" data-bs-theme="dark"><div class="container-fluid">
  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <a class="navbar-brand" href="index.html"><img src="images/perl_camel_30.png" width="30" height="30" class="d-inline-block align-text-top" alt="Perl Camel Logo"> Perldoc Browser</a>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav me-auto">
      <li class="nav-item dropdown text-nowrap">
        <a class="nav-link dropdown-toggle" href="#" id="dropdownlink-stable" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">5.42.0</a>
        <div class="dropdown-menu" aria-labelledby="dropdownlink-stable">
          <a class="dropdown-item" href="Test2__Manual__Anatomy__Context.html">Latest</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item active" href="https://perldoc.perl.org/5.42.0/Test2::Manual::Anatomy::Context">5.42.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.3/Test2::Manual::Anatomy::Context">5.40.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.2/Test2::Manual::Anatomy::Context">5.40.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.1/Test2::Manual::Anatomy::Context">5.40.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.0/Test2::Manual::Anatomy::Context">5.40.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.5/Test2::Manual::Anatomy::Context">5.38.5</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.4/Test2::Manual::Anatomy::Context">5.38.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.3/Test2::Manual::Anatomy::Context">5.38.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.2/Test2::Manual::Anatomy::Context">5.38.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.1/Test2::Manual::Anatomy::Context">5.38.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.0/Test2::Manual::Anatomy::Context">5.38.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.36.3/Test2::Manual::Anatomy::Context">5.36.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.36.2/Test2::Manual::Anatomy::Context">5.36.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.36.1/Test2::Manual::Anatomy::Context">5.36.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.36.0/Test2::Manual::Anatomy::Context">5.36.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.34.3/Test2::Manual::Anatomy::Context">5.34.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.34.2/Test2::Manual::Anatomy::Context">5.34.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.34.1/Test2::Manual::Anatomy::Context">5.34.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.34.0/Test2::Manual::Anatomy::Context">5.34.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.32.1/Test2::Manual::Anatomy::Context">5.32.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.32.0/Test2::Manual::Anatomy::Context">5.32.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.30.3/Test2::Manual::Anatomy::Context">5.30.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.30.2/Test2::Manual::Anatomy::Context">5.30.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.30.1/Test2::Manual::Anatomy::Context">5.30.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.30.0/Test2::Manual::Anatomy::Context">5.30.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.28.3/Test2::Manual::Anatomy::Context">5.28.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.28.2/Test2::Manual::Anatomy::Context">5.28.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.28.1/Test2::Manual::Anatomy::Context">5.28.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.28.0/Test2::Manual::Anatomy::Context">5.28.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.26.3/Test2::Manual::Anatomy::Context">5.26.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.26.2/Test2::Manual::Anatomy::Context">5.26.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.26.1/Test2::Manual::Anatomy::Context">5.26.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.26.0/Test2::Manual::Anatomy::Context">5.26.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.4/Test2::Manual::Anatomy::Context">5.24.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.3/Test2::Manual::Anatomy::Context">5.24.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.2/Test2::Manual::Anatomy::Context">5.24.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.1/Test2::Manual::Anatomy::Context">5.24.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.24.0/Test2::Manual::Anatomy::Context">5.24.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.4/Test2::Manual::Anatomy::Context">5.22.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.3/Test2::Manual::Anatomy::Context">5.22.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.2/Test2::Manual::Anatomy::Context">5.22.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.1/Test2::Manual::Anatomy::Context">5.22.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.22.0/Test2::Manual::Anatomy::Context">5.22.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.20.3/Test2::Manual::Anatomy::Context">5.20.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.20.2/Test2::Manual::Anatomy::Context">5.20.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.20.1/Test2::Manual::Anatomy::Context">5.20.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.20.0/Test2::Manual::Anatomy::Context">5.20.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.4/Test2::Manual::Anatomy::Context">5.18.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.3/Test2::Manual::Anatomy::Context">5.18.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.2/Test2::Manual::Anatomy::Context">5.18.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.1/Test2::Manual::Anatomy::Context">5.18.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.18.0/Test2::Manual::Anatomy::Context">5.18.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.16.3/Test2::Manual::Anatomy::Context">5.16.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.16.2/Test2::Manual::Anatomy::Context">5.16.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.16.1/Test2::Manual::Anatomy::Context">5.16.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.16.0/Test2::Manual::Anatomy::Context">5.16.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.4/Test2::Manual::Anatomy::Context">5.14.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.3/Test2::Manual::Anatomy::Context">5.14.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.2/Test2::Manual::Anatomy::Context">5.14.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.1/Test2::Manual::Anatomy::Context">5.14.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.14.0/Test2::Manual::Anatomy::Context">5.14.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.5/Test2::Manual::Anatomy::Context">5.12.5</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.4/Test2::Manual::Anatomy::Context">5.12.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.3/Test2::Manual::Anatomy::Context">5.12.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.2/Test2::Manual::Anatomy::Context">5.12.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.1/Test2::Manual::Anatomy::Context">5.12.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.12.0/Test2::Manual::Anatomy::Context">5.12.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.10.1/Test2::Manual::Anatomy::Context">5.10.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.10.0/Test2::Manual::Anatomy::Context">5.10.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.9/Test2::Manual::Anatomy::Context">5.8.9</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.8/Test2::Manual::Anatomy::Context">5.8.8</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.7/Test2::Manual::Anatomy::Context">5.8.7</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.6/Test2::Manual::Anatomy::Context">5.8.6</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.5/Test2::Manual::Anatomy::Context">5.8.5</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.4/Test2::Manual::Anatomy::Context">5.8.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.3/Test2::Manual::Anatomy::Context">5.8.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.2/Test2::Manual::Anatomy::Context">5.8.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.1/Test2::Manual::Anatomy::Context">5.8.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.8.0/Test2::Manual::Anatomy::Context">5.8.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.6.2/Test2::Manual::Anatomy::Context">5.6.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.6.1/Test2::Manual::Anatomy::Context">5.6.1</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.6.0/Test2::Manual::Anatomy::Context">5.6.0</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005_04/Test2::Manual::Anatomy::Context">5.005_04</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005_03/Test2::Manual::Anatomy::Context">5.005_03</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005_02/Test2::Manual::Anatomy::Context">5.005_02</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005_01/Test2::Manual::Anatomy::Context">5.005_01</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.005/Test2::Manual::Anatomy::Context">5.005</a>
        </div>
      </li>
      <li class="nav-item dropdown text-nowrap">
        <a class="nav-link dropdown-toggle" href="#" id="dropdownlink-dev" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Dev</a>
        <div class="dropdown-menu" aria-labelledby="dropdownlink-dev">
          <a class="dropdown-item" href="https://perldoc.perl.org/blead/Test2::Manual::Anatomy::Context">blead</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.43.1/Test2::Manual::Anatomy::Context">5.43.1</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.42.0-RC3/Test2::Manual::Anatomy::Context">5.42.0-RC3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.42.0-RC2/Test2::Manual::Anatomy::Context">5.42.0-RC2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.42.0-RC1/Test2::Manual::Anatomy::Context">5.42.0-RC1</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.13/Test2::Manual::Anatomy::Context">5.41.13</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.12/Test2::Manual::Anatomy::Context">5.41.12</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.11/Test2::Manual::Anatomy::Context">5.41.11</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.10/Test2::Manual::Anatomy::Context">5.41.10</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.9/Test2::Manual::Anatomy::Context">5.41.9</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.8/Test2::Manual::Anatomy::Context">5.41.8</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.7/Test2::Manual::Anatomy::Context">5.41.7</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.6/Test2::Manual::Anatomy::Context">5.41.6</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.5/Test2::Manual::Anatomy::Context">5.41.5</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.4/Test2::Manual::Anatomy::Context">5.41.4</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.3/Test2::Manual::Anatomy::Context">5.41.3</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.2/Test2::Manual::Anatomy::Context">5.41.2</a>
          <a class="dropdown-item" href="https://perldoc.perl.org/5.41.1/Test2::Manual::Anatomy::Context">5.41.1</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.40.3-RC1/Test2::Manual::Anatomy::Context">5.40.3-RC1</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="https://perldoc.perl.org/5.38.5-RC1/Test2::Manual::Anatomy::Context">5.38.5-RC1</a>
        </div>
      </li>
      <li class="nav-item dropdown text-nowrap">
        <a class="nav-link dropdown-toggle" href="#" id="dropdownlink-nav" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Documentation</a>
        <div class="dropdown-menu" aria-labelledby="dropdownlink-nav">
          <a class="dropdown-item" href="perl.html">Perl</a>
          <a class="dropdown-item" href="perlintro.html">Intro</a>
          <a class="dropdown-item" href="perl.html#Tutorials">Tutorials</a>
          <a class="dropdown-item" href="perlfaq.html">FAQs</a>
          <a class="dropdown-item" href="perl.html#Reference-Manual">Reference</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="perlop.html">Operators</a>
          <a class="dropdown-item" href="functions.html">Functions</a>
          <a class="dropdown-item" href="variables.html">Variables</a>
          <a class="dropdown-item" href="modules.html">Modules</a>
          <a class="dropdown-item" href="perlutil.html">Utilities</a>
          <hr class="dropdown-divider">
          <a class="dropdown-item" href="perldelta.html">Release Notes</a>
          <a class="dropdown-item" href="perlcommunity.html">Community</a>
          <a class="dropdown-item" href="perlhist.html">History</a>
        </div>
      </li>
    </ul>
    <ul class="navbar-nav">
      <button id="content-expand-button" type="button" class="btn btn-dark d-none d-lg-inline-block me-4">Expand</button>
      <script src="js/perldoc-expand-page.js"></script>
    </ul>
    <form class="form-inline" method="get" action="https://perldoc.perl.org/search">
      <input id="search-input" class="form-control me-3" type="search" name="q" placeholder="[S]earch" aria-label="Search" value="">
    </form>
    <script src="js/perldoc-focus-search.js"></script>
  </div>
</div></nav>

    <div id="wrapperlicious" class="container-fluid">
      <div id="perldocdiv">
        <div id="links">
          <a href="Test2__Manual__Anatomy__Context.html">Test2::Manual::Anatomy::Context</a>
          <div id="more">
            (<a href="https://perldoc.perl.org/Test2::Manual::Anatomy::Context.txt">source</a>,
            <a href="https://metacpan.org/pod/Test2::Manual::Anatomy::Context">CPAN</a>)
          </div>
            <div id="moduleversion">version 1.302210</div>
        </div>
        <h1><a id="toc">CONTENTS</a></h1>
                  <ul>
              <li>
                <a class="text-decoration-none" href="#NAME">NAME</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#DESCRIPTION">DESCRIPTION</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#WHAT-IS-THE-CONTEXT-OBJECT?">WHAT IS THE CONTEXT OBJECT?</a>
                            <ul>
              <li>
                <a class="text-decoration-none" href="#PRIMARY-INTERFACE-FOR-TEST-TOOLS">PRIMARY INTERFACE FOR TEST TOOLS</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#TRACK-FILE-AND-LINE-NUMBERS-FOR-ERROR-REPORTING">TRACK FILE AND LINE NUMBERS FOR ERROR REPORTING</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#PRESERVE-$?,-$!,-$%5EE-AND-$@">PRESERVE $?, $!, $^E AND $@</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#FINALIZE-THE-API-STATE">FINALIZE THE API STATE</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#FIND/CREATE-THE-CURRENT/ROOT-HUB">FIND/CREATE THE CURRENT/ROOT HUB</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#PROVIDE-HOOKS">PROVIDE HOOKS</a>
              </li>
          </ul>

              </li>
              <li>
                <a class="text-decoration-none" href="#SEE-ALSO">SEE ALSO</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#SOURCE">SOURCE</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#MAINTAINERS">MAINTAINERS</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#AUTHORS">AUTHORS</a>
              </li>
              <li>
                <a class="text-decoration-none" href="#COPYRIGHT">COPYRIGHT</a>
              </li>
          </ul>

      <h1 id="NAME"><a class="permalink" href="#NAME">#</a>NAME</h1>

<p>Test2::Manual::Anatomy::Context - Internals documentation for the Context objects.</p>

<h1 id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">#</a>DESCRIPTION</h1>

<p>This document explains how the <a href="Test2__API__Context.html">Test2::API::Context</a> object works.</p>

<h1 id="WHAT-IS-THE-CONTEXT-OBJECT?"><a class="permalink" href="#WHAT-IS-THE-CONTEXT-OBJECT?">#</a><a id="WHAT"></a><a id="WHAT-IS-THE-CONTEXT-OBJECT"></a>WHAT IS THE CONTEXT OBJECT?</h1>

<p>The context object is one of the key components of Test2, and makes many features possible that would otherwise be impossible. Every test tool starts by getting a context, and ends by releasing the context. A test tool does all its work between getting and releasing the context. The context instance is the primary interface for sending events to the Test2 stack. Finally the context system is responsible for tracking what file and line number a tool operates on, which is critical for debugging.</p>

<h2 id="PRIMARY-INTERFACE-FOR-TEST-TOOLS"><a class="permalink" href="#PRIMARY-INTERFACE-FOR-TEST-TOOLS">#</a><a id="PRIMARY"></a>PRIMARY INTERFACE FOR TEST TOOLS</h2>

<p>Nearly every Test2 based tool should start by calling <code>$ctx = Test2::API::context()</code> in order to get a context object, and should end by calling <code>$ctx-&gt;release()</code>. Once a tool has its context object it can call methods on the object to send events or have other effects. Nearly everything a test tool needs to do should be done through the context object.</p>

<h2 id="TRACK-FILE-AND-LINE-NUMBERS-FOR-ERROR-REPORTING"><a class="permalink" href="#TRACK-FILE-AND-LINE-NUMBERS-FOR-ERROR-REPORTING">#</a><a id="TRACK"></a>TRACK FILE AND LINE NUMBERS FOR ERROR REPORTING</h2>

<p>When you call <code>Test2::API::Context</code> a new context object will be returned. If there is already a context object in effect (from a different point in the stack) you will get a clone of the existing one. If there is not already a current context then a completely new one will be generated. When a new context is generated Test2 will determine the file name and line number for your test code, these will be used when reporting any failures.</p>

<p>Typically the file and line number will be determined using <code>caller()</code> to look at your tools caller. The <code>$Test::Builder::Level</code> will be respected if detected, but is discouraged in favor of just using context objects at every level.</p>

<p>When calling <code>Test2::API::Context()</code> you can specify the <code>level =&gt; $count</code> arguments if you need to look at a deeper caller.</p>

<h2 id="PRESERVE-$?,-$!,-$^E-AND-$@"><a class="permalink" href="#PRESERVE-$?,-$!,-$%5EE-AND-$@">#</a><a id="PRESERVE"></a><a id="PRESERVE-E-AND"></a>PRESERVE $?, $!, $^E AND $@</h2>

<p>When you call <code>Test2::API::context()</code> the current values of <code>$?</code>, <code>$!</code>, <code>$^E</code>, and <code>$@</code> are stored in the context object itself. Whenever the context is released the original values of these variables will be restored. This protects the variables from any side effects caused by testing tools.</p>

<h2 id="FINALIZE-THE-API-STATE"><a class="permalink" href="#FINALIZE-THE-API-STATE">#</a><a id="FINALIZE"></a>FINALIZE THE API STATE</h2>

<p><a href="Test2__API.html">Test2::API</a> works via a hidden singleton instance of <a href="Test2__API__Instance.html">Test2::API::Instance</a>. The singleton has some state that is not set in stone until the last possible minute. The last possible minute happens to be the first time a context is acquired. State includes IPC instance, Formatter class, Root PID, etc.</p>

<h2 id="FIND/CREATE-THE-CURRENT/ROOT-HUB"><a class="permalink" href="#FIND/CREATE-THE-CURRENT/ROOT-HUB">#</a><a id="FIND"></a><a id="FIND-CREATE-THE-CURRENT-ROOT-HUB"></a>FIND/CREATE THE CURRENT/ROOT HUB</h2>

<p><a href="Test2.html">Test2</a> has a stack of hubs, the stack can be accessed via <a href="https://metacpan.org/pod/Test2::API::test2_stack">Test2::API::test2_stack</a>. When you get a context it will find the current hub, if there is no current hub then the root one will be initialized.</p>

<h2 id="PROVIDE-HOOKS"><a class="permalink" href="#PROVIDE-HOOKS">#</a><a id="PROVIDE"></a>PROVIDE HOOKS</h2>

<p>There are hooks that run when contexts are created, found, and released. See <a href="Test2__API.html">Test2::API</a> for details on these hooks and how to use them.</p>

<h1 id="SEE-ALSO"><a class="permalink" href="#SEE-ALSO">#</a><a id="SEE"></a>SEE ALSO</h1>

<p><a href="Test2__Manual.html">Test2::Manual</a> - Primary index of the manual.</p>

<h1 id="SOURCE"><a class="permalink" href="#SOURCE">#</a>SOURCE</h1>

<p>The source code repository for Test2-Manual can be found at <i>https://github.com/Test-More/test-more/</i>.</p>

<h1 id="MAINTAINERS"><a class="permalink" href="#MAINTAINERS">#</a>MAINTAINERS</h1>

<dl>

<dt id="Chad-Granum-&lt;exodist@cpan.org&gt;"><a class="permalink" href="#Chad-Granum-%3Cexodist@cpan.org%3E">#</a><a id="Chad"></a><a id="Chad-Granum-exodist-cpan.org"></a>Chad Granum &lt;exodist@cpan.org&gt;</dt>
<dd>

</dd>
</dl>

<h1 id="AUTHORS"><a class="permalink" href="#AUTHORS">#</a>AUTHORS</h1>

<dl>

<dt id="Chad-Granum-&lt;exodist@cpan.org&gt;1"><a class="permalink" href="#Chad-Granum-%3Cexodist@cpan.org%3E1">#</a><a id="Chad1"></a><a id="Chad-Granum-exodist-cpan.org1"></a>Chad Granum &lt;exodist@cpan.org&gt;</dt>
<dd>

</dd>
</dl>

<h1 id="COPYRIGHT"><a class="permalink" href="#COPYRIGHT">#</a>COPYRIGHT</h1>

<p>Copyright Chad Granum &lt;exodist@cpan.org&gt;.</p>

<p>This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>

<p>See <i>http://dev.perl.org/licenses/</i></p>


      </div>
      <div id="footer">
        <p>Perldoc Browser is maintained by Dan Book (<a href="https://metacpan.org/author/DBOOK">DBOOK</a>). Please contact him via the <a href="https://github.com/Grinnz/perldoc-browser/issues">GitHub issue tracker</a> or <a href="mailto:dbook@cpan.org">email</a> regarding any issues with the site itself, search, or rendering of documentation.</p>

<p>The Perl documentation is maintained by the Perl 5 Porters in the development of Perl. Please contact them via the <a href="https://github.com/Perl/perl5/issues">Perl issue tracker</a>, the <a href="https://lists.perl.org/list/perl5-porters.html">mailing list</a>, or <a href="https://kiwiirc.com/client/irc.perl.org/p5p">IRC</a> to report any issues with the contents or format of the documentation.</p>


      </div>
    </div>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/highlight.pack.js"></script>
    <script>hljs.highlightAll();</script>
  </body>

<!-- Mirrored from perldoc.perl.org/Test2::Manual::Anatomy::Context by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Aug 2025 16:20:53 GMT -->
</html>
